(self.webpackChunkmedusa_starter_default=self.webpackChunkmedusa_starter_default||[]).push([[251],{46700:(e,t,r)=>{var n={"./af":94506,"./af.js":94506,"./ar":59687,"./ar-dz":62887,"./ar-dz.js":62887,"./ar-kw":66307,"./ar-kw.js":66307,"./ar-ly":51664,"./ar-ly.js":51664,"./ar-ma":89926,"./ar-ma.js":89926,"./ar-sa":85207,"./ar-sa.js":85207,"./ar-tn":52912,"./ar-tn.js":52912,"./ar.js":59687,"./az":5011,"./az.js":5011,"./be":25997,"./be.js":25997,"./bg":4427,"./bg.js":4427,"./bm":85385,"./bm.js":85385,"./bn":67703,"./bn-bd":57002,"./bn-bd.js":57002,"./bn.js":67703,"./bo":39841,"./bo.js":39841,"./br":45642,"./br.js":45642,"./bs":69038,"./bs.js":69038,"./ca":53512,"./ca.js":53512,"./cs":39497,"./cs.js":39497,"./cv":6479,"./cv.js":6479,"./cy":89318,"./cy.js":89318,"./da":97229,"./da.js":97229,"./de":63460,"./de-at":51044,"./de-at.js":51044,"./de-ch":26445,"./de-ch.js":26445,"./de.js":63460,"./dv":32096,"./dv.js":32096,"./el":16048,"./el.js":16048,"./en-au":74301,"./en-au.js":74301,"./en-ca":66855,"./en-ca.js":66855,"./en-gb":761,"./en-gb.js":761,"./en-ie":46127,"./en-ie.js":46127,"./en-il":49157,"./en-il.js":49157,"./en-in":37199,"./en-in.js":37199,"./en-nz":31511,"./en-nz.js":31511,"./en-sg":47309,"./en-sg.js":47309,"./eo":92160,"./eo.js":92160,"./es":68582,"./es-do":71885,"./es-do.js":71885,"./es-mx":68131,"./es-mx.js":68131,"./es-us":16962,"./es-us.js":16962,"./es.js":68582,"./et":98890,"./et.js":98890,"./eu":37704,"./eu.js":37704,"./fa":22562,"./fa.js":22562,"./fi":70877,"./fi.js":70877,"./fil":34246,"./fil.js":34246,"./fo":78341,"./fo.js":78341,"./fr":19867,"./fr-ca":82347,"./fr-ca.js":82347,"./fr-ch":17683,"./fr-ch.js":17683,"./fr.js":19867,"./fy":21982,"./fy.js":21982,"./ga":13905,"./ga.js":13905,"./gd":13443,"./gd.js":13443,"./gl":66905,"./gl.js":66905,"./gom-deva":91324,"./gom-deva.js":91324,"./gom-latn":41890,"./gom-latn.js":41890,"./gu":37134,"./gu.js":37134,"./he":96835,"./he.js":96835,"./hi":81394,"./hi.js":81394,"./hr":13564,"./hr.js":13564,"./hu":46269,"./hu.js":46269,"./hy-am":57269,"./hy-am.js":57269,"./id":44254,"./id.js":44254,"./is":8699,"./is.js":8699,"./it":28301,"./it-ch":92887,"./it-ch.js":92887,"./it.js":28301,"./ja":64642,"./ja.js":64642,"./jv":62168,"./jv.js":62168,"./ka":94501,"./ka.js":94501,"./kk":49537,"./kk.js":49537,"./km":45808,"./km.js":45808,"./kn":34881,"./kn.js":34881,"./ko":62951,"./ko.js":62951,"./ku":92452,"./ku.js":92452,"./ky":1853,"./ky.js":1853,"./lb":77639,"./lb.js":77639,"./lo":34502,"./lo.js":34502,"./lt":60874,"./lt.js":60874,"./lv":18237,"./lv.js":18237,"./me":87878,"./me.js":87878,"./mi":64234,"./mi.js":64234,"./mk":17535,"./mk.js":17535,"./ml":43896,"./ml.js":43896,"./mn":63046,"./mn.js":63046,"./mr":80927,"./mr.js":80927,"./ms":37224,"./ms-my":66332,"./ms-my.js":66332,"./ms.js":37224,"./mt":24866,"./mt.js":24866,"./my":24206,"./my.js":24206,"./nb":66723,"./nb.js":66723,"./ne":45097,"./ne.js":45097,"./nl":37529,"./nl-be":1355,"./nl-be.js":1355,"./nl.js":37529,"./nn":30296,"./nn.js":30296,"./oc-lnc":4802,"./oc-lnc.js":4802,"./pa-in":77057,"./pa-in.js":77057,"./pl":69850,"./pl.js":69850,"./pt":15552,"./pt-br":83726,"./pt-br.js":83726,"./pt.js":15552,"./ro":1717,"./ro.js":1717,"./ru":79117,"./ru.js":79117,"./sd":61742,"./sd.js":61742,"./se":92049,"./se.js":92049,"./si":83329,"./si.js":83329,"./sk":27619,"./sk.js":27619,"./sl":76707,"./sl.js":76707,"./sq":84281,"./sq.js":84281,"./sr":60436,"./sr-cyrl":13408,"./sr-cyrl.js":13408,"./sr.js":60436,"./ss":27500,"./ss.js":27500,"./sv":55877,"./sv.js":55877,"./sw":54222,"./sw.js":54222,"./ta":73746,"./ta.js":73746,"./te":1130,"./te.js":1130,"./tet":34740,"./tet.js":34740,"./tg":13378,"./tg.js":13378,"./th":20628,"./th.js":20628,"./tk":92622,"./tk.js":92622,"./tl-ph":30100,"./tl-ph.js":30100,"./tlh":22871,"./tlh.js":22871,"./tr":33600,"./tr.js":33600,"./tzl":18985,"./tzl.js":18985,"./tzm":3627,"./tzm-latn":51145,"./tzm-latn.js":51145,"./tzm.js":3627,"./ug-cn":4790,"./ug-cn.js":4790,"./uk":97712,"./uk.js":97712,"./ur":99529,"./ur.js":99529,"./uz":99141,"./uz-latn":61737,"./uz-latn.js":61737,"./uz.js":99141,"./vi":98205,"./vi.js":98205,"./x-pseudo":20697,"./x-pseudo.js":20697,"./yo":37826,"./yo.js":37826,"./zh-cn":83994,"./zh-cn.js":83994,"./zh-hk":36892,"./zh-hk.js":36892,"./zh-mo":43884,"./zh-mo.js":43884,"./zh-tw":85136,"./zh-tw.js":85136};function i(e){return r(o(e))}function o(e){if(!r.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=46700},97926:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ec5});var n,i,o,a,l,s,c,u,d,f,p,m,y,h,b,v,g,x,j,O,w,S,P,C,N,k,_,A,D,E,Z,I,T,M,R,L,z,q,F=r(67557),H=r(2432),U=r(69424),G=r(60962),V=r(70317),B=r(89526),W=r(64644),Q=r(42156),Y=r(78343),$=r(98078),K=r(23071),J=!0,X=function(e){var t=e.origin,r=(0,V.useRouteError)();return(0,B.useEffect)(function(){!J&&r&&(console.group("%cAn error occurred in a page from ".concat(t,":"),"color: red; font-weight: bold;"),console.error(r),console.groupEnd())},[r,t]),(0,F.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,F.jsxs)("div",{className:"rounded-rounded p-base bg-rose-10 border-rose-40 gap-x-small flex justify-start border",children:[(0,F.jsx)("div",{children:(0,F.jsx)(K.Z,{size:20,fillType:"solid",className:"text-rose-40"})}),(0,F.jsxs)("div",{className:"text-rose-40 inter-small-regular w-full pr-[20px]",children:[(0,F.jsx)("h1",{className:"inter-base-semibold mb-2xsmall",children:"Uncaught error"}),(0,F.jsx)("p",{className:"mb-small",children:J?"An error unknown error occurred, and the page could not be loaded.":"A Page from <strong>".concat(t,"</strong> crashed. See the console for more info.")}),(0,F.jsxs)("p",{className:"mb-large",children:[(0,F.jsx)("strong",{children:"What should I do?"}),(0,F.jsx)("br",{}),"If you are the developer of this page, you should fix the error and reload the page. If you are not the developer, you should contact the maintainer and report the error."]}),(0,F.jsx)("div",{className:"gap-x-base flex items-center",children:(0,F.jsx)(Y.Z,{variant:"nuclear",size:"small",type:"button",onClick:function(){window.location.reload()},className:"w-full",children:(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)($.Z,{size:"20"}),(0,F.jsx)("span",{className:"ml-xsmall",children:"Reload"})]})})})]})]})})},ee=r(40378),et=function(){return(0,ee.J)()},er=function(e){var t=e.route,r=e.previousPath,n=et(),i=(0,Q.x9)(t),o=t.path,a=(0,W.V)().getNestedRoutes,l="".concat(void 0===r?"":r).concat(o),s=a(l),c=s.length>0;if(!i)return c?(0,F.jsx)(V.Routes,{children:s.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:l})},t)})}):null;var u=t.Page,d=t.origin,f=B.createElement(u,n);return c?(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{path:"/",element:f,errorElement:(0,F.jsx)(X,{origin:d})}),s.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:l})},t)})]})}):f},en=r(41577),ei=r(60566),eo=function(e){var t=e.children,r=(0,en.useAdminGetSession)(),n=r.user,i=r.isLoading,o=(0,V.useNavigate)();return((0,B.useEffect)(function(){n||i||o("/login")},[n,i,o]),n&&!i)?(0,F.jsx)(F.Fragment,{children:t}):(0,F.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})})},ea=r(65716),el=r(8944),es=r(50604),ec=r(23060);function eu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ed(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eu(e,t,r[t])})}return e}function ef(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ep(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ef(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function em(e,t){if(null==e)return{};var r,n,i=ey(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ey(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var eh=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=em(e,["size","color"]);return(0,F.jsxs)("svg",ep(ed({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M3.75 10H16.875",stroke:i,strokeWidth:"1.5",strokeLinecap:"round"}),(0,F.jsx)("path",{d:"M8.125 5L3.125 10L8.125 15",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},eb=function(e){var t=e.path,r=e.label,n=e.className,i=(0,V.useNavigate)();return(0,F.jsx)("button",{onClick:function(){t?i(t):i(-1)},className:(0,ec.Z)("px-small py-xsmall",n),children:(0,F.jsxs)("div",{className:"gap-x-xsmall text-grey-50 inter-grey-40 inter-small-semibold flex items-center",children:[(0,F.jsx)(eh,{size:20}),(0,F.jsx)("span",{className:"ml-1",children:void 0===r?"Go back":r})]})})},ev=function(){return(0,F.jsx)("div",{className:"h-xlarge w-full"})},eg=r(77573);function ex(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ej(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ex(e,t,r[t])})}return e}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ew(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eS(e,t){if(null==e)return{};var r,n,i=eP(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eP(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var eC=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=void 0===n?"currentColor":n,o=eS(e,["size","color"]);return(0,F.jsxs)("svg",ew(ej({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M9 3H4.55556C4.143 3 3.74733 3.16389 3.45561 3.45561C3.16389 3.74733 3 4.143 3 4.55556V15.4444C3 15.857 3.16389 16.2527 3.45561 16.5444C3.74733 16.8361 4.143 17 4.55556 17H15.4444C15.857 17 16.2527 16.8361 16.5444 16.5444C16.8361 16.2527 17 15.857 17 15.4444V11",stroke:i,strokeWidth:"1.4667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14.4356 3.43999C14.7173 3.15827 15.0994 3 15.4978 3C15.8962 3 16.2783 3.15827 16.56 3.43999C16.8417 3.72171 17 4.1038 17 4.50221C17 4.90062 16.8417 5.28272 16.56 5.56443L9.8326 12.2919L7 13L7.70815 10.1674L14.4356 3.43999Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function eN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ek(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eN(e,t,r[t])})}return e}function e_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eA(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e_(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eD(e,t){if(null==e)return{};var r,n,i=eE(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eE(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var eZ=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=void 0===n?"currentColor":n,o=eD(e,["size","color"]);return(0,F.jsxs)("svg",eA(ek({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M3.33301 5.49054H4.81449H16.6663",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.14286 5.49999V3.99999C7.14286 3.60216 7.29337 3.22063 7.56128 2.93932C7.82919 2.65802 8.19255 2.49998 8.57143 2.49998H11.4286C11.8075 2.49998 12.1708 2.65802 12.4387 2.93932C12.7066 3.22063 12.8571 3.60216 12.8571 3.99999V5.49999M15 5.49999V16C15 16.3978 14.8495 16.7793 14.5816 17.0607C14.3137 17.342 13.9503 17.5 13.5714 17.5H6.42857C6.04969 17.5 5.68633 17.342 5.41842 17.0607C5.15051 16.7793 5 16.3978 5 16V5.49999H15Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M8.33203 9.23726V13.4039",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M11.666 9.23726V13.4039",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},eI=r(23451);function eT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eT(e,t,r[t])})}return e}function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eR(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ez(e,t){if(null==e)return{};var r,n,i=eq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eq(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var eF=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=ez(e,["size","color"]);return(0,F.jsxs)("svg",eL(eM({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M10 10.75C10.4142 10.75 10.75 10.4142 10.75 10C10.75 9.58579 10.4142 9.25 10 9.25C9.58579 9.25 9.25 9.58579 9.25 10C9.25 10.4142 9.58579 10.75 10 10.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M15.833 10.75C16.2472 10.75 16.583 10.4142 16.583 10C16.583 9.58579 16.2472 9.25 15.833 9.25C15.4188 9.25 15.083 9.58579 15.083 10C15.083 10.4142 15.4188 10.75 15.833 10.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M4.16699 10.75C4.58121 10.75 4.91699 10.4142 4.91699 10C4.91699 9.58579 4.58121 9.25 4.16699 9.25C3.75278 9.25 3.41699 9.58579 3.41699 10C3.41699 10.4142 3.75278 10.75 4.16699 10.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eU(e){if(Array.isArray(e))return e}function eG(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eV(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eB(e,t){return eU(e)||eG(e,t)||eW(e,t)||eV()}function eW(e,t){if(e){if("string"==typeof e)return eH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eH(e,t)}}var eQ=function(e){var t=e.actions,r=e.customTrigger,n=e.forceDropdown;if(t&&(void 0!==n&&n||t.length>1))return(0,F.jsx)("div",{children:(0,F.jsxs)(eI.fC,{children:[(0,F.jsx)(eI.xz,{asChild:!0,children:r||(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-xlarge h-xlarge focus-visible:shadow-input focus-visible:border-violet-60 focus:shadow-none focus-visible:outline-none",children:(0,F.jsx)(eF,{size:20})})}),(0,F.jsx)(eI.VY,{sideOffset:5,className:"bg-grey-0 border-grey-20 rounded-rounded shadow-dropdown p-xsmall z-30 min-w-[200px] border",children:t.map(function(e,t){return(0,F.jsx)(eI.ck,{className:"mb-1 last:mb-0",children:(0,F.jsxs)(Y.Z,{variant:"ghost",size:"small",className:(0,ec.Z)("flex w-full justify-start",{"text-rose-50":(null==e?void 0:e.variant)==="danger","pointer-events-none select-none opacity-50":null==e?void 0:e.disabled}),onClick:null==e?void 0:e.onClick,children:[e.icon,e.label]})},t)})})]})});if(r){var i=Array.isArray(r)?r:[r];return(0,F.jsx)("div",{children:i.map(function(e,t){return(0,F.jsx)("div",{children:e},t)})})}var o=eB(null!=t?t:[],1)[0];return o?(0,F.jsx)("div",{children:(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",className:"flex items-center",onClick:o.onClick,children:o.icon?(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[o.icon,o.label]}):(0,F.jsx)(F.Fragment,{children:o.label})})}):null},eY=r(31983),e$=r(27213),eK=r(77447),eJ=r.n(eK);function eX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function e0(e){if(Array.isArray(e))return e}function e1(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function e2(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e3(e,t){return e0(e)||e1(e,t)||e5(e,t)||e2()}function e5(e,t){if(e){if("string"==typeof e)return eX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eX(e,t)}}var e6=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e3(B.useState(!1),2),n=r[0],i=r[1],o=null==t?void 0:t.successDuration,a=(null==t?void 0:t.onCopied)||function(){};return B.useEffect(function(){if(n&&o){var e=setTimeout(function(){i(!1)},o);return function(){clearTimeout(e)}}},[n,o]),[n,B.useCallback(function(){eJ()(e),i(!0),a()},[e,a,i])]},e4=r(50854);function e8(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){e8(e,t,r[t])})}return e}function e9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function te(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e9(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tt(e,t){if(null==e)return{};var r,n,i=tr(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tr(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var tn=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=tt(e,["size","color"]);return(0,F.jsxs)("svg",te(e7({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M12.917 4.16669H14.3753C14.7621 4.16669 15.133 4.32277 15.4065 4.6006C15.68 4.87843 15.8337 5.25526 15.8337 5.64817V8.33335M7.08366 4.16669H5.62533C5.23855 4.16669 4.86762 4.32277 4.59413 4.6006C4.32064 4.87843 4.16699 5.25526 4.16699 5.64817V16.0185C4.16699 16.4115 4.32064 16.7883 4.59413 17.0661C4.86762 17.3439 5.23855 17.5 5.62533 17.5H14.3753C14.7621 17.5 15.133 17.3439 15.4065 17.0661C15.68 16.7883 15.8337 16.4115 15.8337 16.0185V15",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M11.875 2.5H8.125C7.77982 2.5 7.5 2.8731 7.5 3.33333V5C7.5 5.46024 7.77982 5.83333 8.125 5.83333H11.875C12.2202 5.83333 12.5 5.46024 12.5 5V3.33333C12.5 2.8731 12.2202 2.5 11.875 2.5Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M17.5 11.6667H10",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12.5 9.16669L10 11.6667L12.5 14.1667",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function to(e){if(Array.isArray(e))return e}function ta(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function tl(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ts(e,t){return to(e)||ta(e,t)||tc(e,t)||tl()}function tc(e,t){if(e){if("string"==typeof e)return ti(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ti(e,t)}}var tu=function(e){var t=e.data,r=ts((0,B.useState)(!1),2),n=r[0],i=r[1],o=ts(e6(JSON.stringify(t,void 0,2),{successDuration:5500,onCopied:function(){}}),2),a=o[0],l=o[1],s=(0,B.useMemo)(function(){return Object.keys(t).length},[t]);return(0,F.jsx)("div",{className:"px-base py-xsmall rounded-rounded bg-grey-5 w-full",children:(0,F.jsxs)(eY.fC,{open:n,onOpenChange:i,children:[(0,F.jsx)(eY.xz,{asChild:!0,children:(0,F.jsxs)("div",{className:"flex cursor-pointer items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-xsmall inter-base-regular flex items-center",children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:n?"{":s>0?"{ ... }":"{}"}),(0,F.jsxs)("span",{className:"text-grey-50",children:["(",s," ",1===s?"item":"items",")"]})]}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"text-grey-50",children:(0,F.jsx)(e4.Z,{size:20,className:(0,ec.Z)("text-grey-50",{"rotate-180":n})})})]})}),(0,F.jsxs)(eY.VY,{children:[(0,F.jsx)("div",{className:"mt-xsmall",children:(0,F.jsx)(e$.L,{data:t,hideRoot:!0,theme:{base00:"#F9FAFB",base08:"#e53935",base09:"#fb8c00",base0B:"#0D9488",base0D:"#4F46E5",extend:{background:"#F9FAFB"}},shouldExpandNode:function(){return!1}})}),(0,F.jsxs)("div",{className:"flex w-full items-center justify-between",children:[n&&(0,F.jsx)("p",{className:"inter-base-semibold",children:"}"}),(0,F.jsxs)("div",{className:"gap-x-xsmall text-grey-50 inter-small-regular flex items-center",children:[a&&(0,F.jsx)("span",{className:"animate-fade-in-right",children:"Copied!"}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",type:"button",onClick:function(e){e.currentTarget.blur(),l()},children:(0,F.jsx)(tn,{size:20})})]})]})]})]})})},td=r(95261),tf=r(29495),tp=r(74818);function tm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ty(e){if(Array.isArray(e))return e}function th(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function tb(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tv(e,t){return ty(e)||th(e,t)||tg(e,t)||tb()}function tg(e,t){if(e){if("string"==typeof e)return tm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tm(e,t)}}var tx=function(e){var t=e.heading,r=e.text,n=e.successText,i=void 0===n?"Delete successful":n,o=e.cancelText,a=e.confirmText,l=e.handleClose,s=e.onDelete,c=(0,td.Z)(),u=tv((0,B.useState)(!1),2),d=u[0],f=u[1];return(0,F.jsx)(tp.Z,{isLargeModal:!1,handleClose:l,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-large-semibold",children:void 0===t?"Are you sure you want to delete?":t}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 mt-1",children:void 0===r?"":r})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex h-8 w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",className:"justify-center",size:"small",onClick:l,children:void 0===o?"No, cancel":o}),(0,F.jsx)(Y.Z,{loading:d,size:"small",className:"justify-center",variant:"nuclear",onClick:function(e){e.preventDefault(),f(!0),s().then(function(){i&&c("Success",i,"success")}).catch(function(e){return c("Error",(0,tf.e)(e),"error")}).finally(function(){f(!1),l()})},disabled:d,children:void 0===a?"Yes, remove":a})]})})]})})};function tj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tO(e){if(Array.isArray(e))return e}function tw(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function tS(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function tP(e,t){return tO(e)||tw(e,t)||tC(e,t)||tS()}function tC(e,t){if(e){if("string"==typeof e)return tj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tj(e,t)}}var tN=function(e){var t=e.threshold,r=void 0===t?0:t,n=tP((0,B.useState)(!1),2),i=n[0],o=n[1];return{isScrolled:i,scrollListener:function(e){e.target.scrollTop>r?o(!0):o(!1)}}};function tk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tk(e,t,r[t])})}return e}function tA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tD(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tA(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tE(e,t){if(null==e)return{};var r,n,i=tZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tZ(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var tI=function(e){var t=e.title,r=e.subtitle,n=e.events,i=e.actionables,o=e.forceDropdown,a=e.customActionable,l=e.status,s=e.customHeader,c=e.className,u=e.children,d=e.compact,f=void 0!==d&&d,p=e.setBorders,m=void 0!==p&&p,y=e.footerMinHeight,h=tE(e,["title","subtitle","events","actionables","forceDropdown","customActionable","status","customHeader","className","children","compact","setBorders","footerMinHeight"]),b=tN({threshold:16}),v=b.isScrolled,g=b.scrollListener;return(0,F.jsxs)("div",tD(t_({className:(0,ec.Z)("rounded-rounded bg-grey-0 border-grey-20 flex h-full w-full flex-col overflow-hidden border",{"min-h-[350px]":!f},c)},h),{children:[(0,F.jsx)("div",{className:"relative",children:v&&(0,F.jsx)("div",{className:"rounded-t-rounded from-grey-0 h-xlarge absolute top-0 left-0 right-0 z-10 bg-gradient-to-b to-[rgba(255,255,255,0)]"})}),(0,F.jsxs)("div",{className:(0,ec.Z)("flex grow flex-col",{"border-grey-20 border-b border-solid":m}),onScroll:g,children:[(0,F.jsx)("div",{className:(0,ec.Z)("px-xlarge py-large",{"border-grey-20 border-b border-solid":m}),children:(0,F.jsxs)("div",{className:"flex items-start justify-between",children:[(0,F.jsxs)("div",{children:[s?(0,F.jsx)("div",{children:s}):t?(0,F.jsx)("h1",{className:"inter-xlarge-semibold text-grey-90",children:t}):(0,F.jsx)("div",{}),r&&(0,F.jsx)("h3",{className:"inter-small-regular text-grey-50 pt-1.5",children:r})]}),(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&l,(0,F.jsx)(eQ,{actions:i,forceDropdown:void 0!==o&&o,customTrigger:a})]})]})}),(0,F.jsx)("div",{className:"px-xlarge",children:u&&(0,F.jsx)("div",{className:(0,ec.Z)("flex flex-col",{grow:!f}),children:u})})]}),n&&n.length>0?(0,F.jsx)("div",{className:"pb-large pt-base px-xlarge border-grey-20 border-t",children:(0,F.jsx)("div",{className:"flex flex-row-reverse items-center",children:n.map(function(e,t){return(0,F.jsx)(Y.Z,{onClick:e.onClick,className:"first:ml-xsmall justify-center",variant:0===t?"primary":"secondary",size:"small",type:e.type,children:e.label},t)})})}):(0,F.jsx)("div",{className:"min-h-[".concat(void 0===y?24:y,"px]")})]}))};function tT(e){var t=e.title,r=e.data;return r?(0,F.jsx)(tI,{className:"h-auto min-h-0 w-full",title:t,children:(0,F.jsx)("div",{className:"flex flex-grow items-center",children:(0,F.jsx)(tu,{data:r})})}):null}var tM=function(e){var t=e.title,r=e.actions,n=e.customActions,i=e.forceDropdown,o=e.status,a=e.children,l=e.className;return(0,F.jsxs)("div",{className:(0,ec.Z)("px-xlarge pt-large pb-xlarge rounded-rounded bg-grey-0 border-grey-20 border",l),children:[(t||r||n||o)&&(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[t&&(0,F.jsx)("h1",{className:"text-grey-90 inter-xlarge-semibold",children:t}),(0,F.jsxs)("div",{className:"flex items-center gap-x-2",children:[n&&n,o&&o,r&&(0,F.jsx)(eQ,{actions:r,forceDropdown:void 0!==i&&i})]})]}),(0,F.jsx)("div",{children:a})]})},tR=r(18198),tL=r(2084),tz=r(68673),tq=r(23428);function tF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tF(e,t,r[t])})}return e}function tU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):tU(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tV(e,t){if(null==e)return{};var r,n,i=tB(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tB(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var tW=function(e){var t=e.size,r=void 0===t?"20px":t,n=e.color,i=void 0===n?"currentColor":n,o=tV(e,["size","color"]);return(0,F.jsxs)("svg",tG(tH({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M16.0894 8.33333H9.74326C8.9644 8.33333 8.33301 8.96472 8.33301 9.74358V16.0897C8.33301 16.8686 8.9644 17.5 9.74326 17.5H16.0894C16.8683 17.5 17.4997 16.8686 17.4997 16.0897V9.74358C17.4997 8.96472 16.8683 8.33333 16.0894 8.33333Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M4.61538 11.6667H3.91026C3.53623 11.6667 3.17753 11.5181 2.91305 11.2536C2.64858 10.9891 2.5 10.6304 2.5 10.2564V3.91026C2.5 3.53623 2.64858 3.17753 2.91305 2.91305C3.17753 2.64858 3.53623 2.5 3.91026 2.5H10.2564C10.6304 2.5 10.9891 2.64858 11.2536 2.91305C11.5181 3.17753 11.6667 3.53623 11.6667 3.91026V4.61538",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function tQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){tQ(e,t,r[t])})}return e}function t$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tK(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):t$(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function tJ(e,t){if(null==e)return{};var r,n,i=tX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tX(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var t0=function(e){var t=e.size,r=void 0===t?20:t,n=e.color,i=tJ(e,["size","color"]);return(0,F.jsx)("svg",tK(tY({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),{children:(0,F.jsx)("path",{d:"M10 3.75C10.1989 3.75 10.3897 3.82902 10.5303 3.96967C10.671 4.11032 10.75 4.30109 10.75 4.5C10.75 4.69891 10.671 4.88968 10.5303 5.03033C10.3897 5.17098 10.1989 5.25 10 5.25C9.80109 5.25 9.61032 5.17098 9.46967 5.03033C9.32902 4.88968 9.25 4.69891 9.25 4.5C9.25 4.30109 9.32902 4.11032 9.46967 3.96967C9.61032 3.82902 9.80109 3.75 10 3.75ZM10 9.25C10.1989 9.25 10.3897 9.32902 10.5303 9.46967C10.671 9.61032 10.75 9.80109 10.75 10C10.75 10.1989 10.671 10.3897 10.5303 10.5303C10.3897 10.671 10.1989 10.75 10 10.75C9.80109 10.75 9.61032 10.671 9.46967 10.5303C9.32902 10.3897 9.25 10.1989 9.25 10C9.25 9.80109 9.32902 9.61032 9.46967 9.46967C9.61032 9.32902 9.80109 9.25 10 9.25ZM10.5303 14.9697C10.671 15.1103 10.75 15.3011 10.75 15.5C10.75 15.6989 10.671 15.8897 10.5303 16.0303C10.3897 16.171 10.1989 16.25 10 16.25C9.80109 16.25 9.61032 16.171 9.46967 16.0303C9.32902 15.8897 9.25 15.6989 9.25 15.5C9.25 15.3011 9.32902 15.1103 9.46967 14.9697C9.61032 14.829 9.80109 14.75 10 14.75C10.1989 14.75 10.3897 14.829 10.5303 14.9697Z",stroke:void 0===n?"currentColor":n,strokeWidth:"1.5"})}))},t1=r(76366);function t2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t3(e){if(Array.isArray(e))return e}function t5(e){if(Array.isArray(e))return t2(e)}function t6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t4(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function t8(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function t7(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t9(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function re(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){t6(e,t,r[t])})}return e}function rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rt(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function rn(e,t){if(null==e)return{};var r,n,i=ri(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ri(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function ro(e,t){return t3(e)||t8(e,t)||rl(e,t)||t7()}function ra(e){return t5(e)||t4(e)||rl(e)||t9()}function rl(e,t){if(e){if("string"==typeof e)return t2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t2(e,t)}}var rs=function(e){var t=e.form,r=t.control,n=t.path,i=t.register,o=t.setValue,a=t.getValues,l=(0,tR.Dq)({control:r,name:n("entries"),keyName:"fieldKey"}),s=l.fields,c=l.remove,u=l.insert,d=function(e){u(e,{key:"",value:""})},f=function(e){u(e+1,{key:"",value:""})},p=function(e){if("existing"===s[e].state){var t=a(n("deleted"))||[];o(n("deleted"),ra(t).concat([s[e].key]),{shouldDirty:!0})}0===e&&1===s.length?(o(n("entries.".concat(e,".value")),"",{shouldDirty:!0}),o(n("entries.".concat(e,".key")),"",{shouldDirty:!0})):c(e)},m=function(e){u(e+1,rr(re({},s[e]),{state:void 0}))},y=function(e){o(n("entries.".concat(e,".value")),"",{shouldDirty:!0}),o(n("entries.".concat(e,".key")),"",{shouldDirty:!0})},h=(0,tR.qo)({control:r,name:n("entries")}),b=(0,tR.qo)({control:r,name:n("ignored"),defaultValue:{}}),v=(0,B.useMemo)(function(){return Object.keys(b||{}).length},[b]),g=(0,B.useMemo)(function(){return null==h||!h.length||(null==h?void 0:h.length)===1&&(""===h[0].key&&""===h[0].value||void 0===h[0].key&&void 0===h[0].value)},[h]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"rounded-rounded border-grey-20 divide-grey-20 inter-base-regular divide-y border",children:[(0,F.jsxs)("div",{className:(0,ec.Z)("inter-small-semibold bg-grey-5 rounded-t-rounded","divide-grey-20 grid grid-cols-[165px_1fr] divide-x divide-solid [&>div]:px-base [&>div]:py-xsmall"),children:[(0,F.jsx)("div",{children:(0,F.jsx)("p",{children:"Key"})}),(0,F.jsx)("div",{className:"",children:(0,F.jsx)("p",{children:"Value"})})]}),(0,F.jsx)("div",{className:"divide-grey-20 divide-y",children:s.length?s.map(function(e,t){return(0,F.jsxs)(ru,{onClearContents:function(){return y(t)},onDelete:function(){return p(t)},onDuplicate:function(){return m(t)},onInsertAbove:function(){return d(t)},onInsertBelow:function(){return f(t)},isDisabled:g,children:[(0,F.jsx)("div",{children:(0,F.jsx)(rc,rr(re({},i(n("entries.".concat(t,".key")))),{placeholder:"Key"}))}),(0,F.jsx)("div",{children:(0,F.jsx)(rc,rr(re({},i(n("entries.".concat(t,".value")))),{placeholder:"Value"}))})]},e.fieldKey)}):(0,F.jsxs)(ru,{onClearContents:function(){return y(0)},onDelete:function(){return p(0)},onDuplicate:function(){return m(0)},onInsertAbove:function(){return d(0)},onInsertBelow:function(){return f(0)},isDisabled:g,children:[(0,F.jsx)("div",{children:(0,F.jsx)(rc,rr(re({},i(n("entries.".concat(0,".key")))),{placeholder:"Key"}))}),(0,F.jsx)("div",{children:(0,F.jsx)(rc,rr(re({},i(n("entries.".concat(0,".value")))),{placeholder:"Value"}))})]})})]}),v>0&&(0,F.jsxs)("div",{className:"rounded-rounded p-base gap-x-base mt-base flex items-start border border-[#FFD386] bg-[#FFECBC]",children:[(0,F.jsx)("div",{children:(0,F.jsx)(K.Z,{fillType:"solid",size:20,className:"text-[#FFB224]"})}),(0,F.jsx)("div",{children:(0,F.jsxs)("p",{className:"inter-small-regular text-[#AD5700]",children:["This entities metadata contains complex values that we currently don't support editing through the admin UI. Due to this"," ",Object.keys(v)," keys are currently not being displayed. You can still edit these values using the API."]})})]})]})},rc=B.forwardRef(function(e,t){var r=e.className,n=rn(e,["className"]);return(0,F.jsx)("input",re({ref:t,className:(0,ec.Z)("placeholder:text-grey-40 placeholder:inter-base-regular w-full appearance-none outline-none",r)},n))});rc.displayName="MetadataInput";var ru=function(e){var t=e.onDuplicate,r=e.onInsertAbove,n=e.onInsertBelow,i=e.onDelete,o=e.onClearContents,a=e.isDisabled,l=void 0!==a&&a,s=e.children,c="px-base py-[6px] outline-none flex items-center gap-x-xsmall hover:bg-grey-5 focus:bg-grey-10 transition-colors cursor-pointer";return(0,F.jsxs)("div",{className:"last-of-type:rounded-b-rounded group/metadata relative",children:[(0,F.jsx)("div",{className:"divide-grey-20 [&>div]:px-base [&>div]:py-xsmall grid grid-cols-[165px_1fr] divide-x divide-solid",children:s}),(0,F.jsxs)(eI.fC,{children:[(0,F.jsx)(eI.xz,{asChild:!0,children:(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",className:(0,ec.Z)("h-xlarge w-large -right-small radix-state-open:opacity-100 absolute inset-y-1/2 -translate-y-1/2 transform opacity-0 transition-opacity group-hover/metadata:opacity-100"),children:(0,F.jsx)(t0,{})})}),(0,F.jsx)(eI.VY,{asChild:!0,sideOffset:8,children:(0,F.jsxs)("div",{className:"bg-grey-0 shadow-dropdown border-grey-20 rounded-rounded z-50 overflow-hidden border",children:[(0,F.jsxs)(eI.ck,{onClick:r,className:c,children:[(0,F.jsx)(tq.Z,{size:20}),(0,F.jsx)("span",{children:"Insert above"})]}),(0,F.jsxs)(eI.ck,{onClick:n,className:c,children:[(0,F.jsx)(tz.Z,{size:20}),(0,F.jsx)("span",{children:"Insert below"})]}),(0,F.jsxs)(eI.ck,{onClick:t,className:c,children:[(0,F.jsx)(tW,{size:20}),(0,F.jsx)("span",{children:"Duplicate"})]}),(0,F.jsxs)(eI.ck,{onClick:o,className:c,children:[(0,F.jsx)(t1.Z,{size:20}),(0,F.jsx)("span",{children:"Clear contents"})]}),(0,F.jsx)(eI.VD,{className:"bg-grey-20 h-px w-full"}),(0,F.jsxs)(eI.ck,{onClick:i,disabled:l,className:(0,ec.Z)({"text-grey-40":l,"text-rose-50":!l},c,"hover:bg-grey-0"),children:[(0,F.jsx)(eZ,{size:20}),(0,F.jsx)("span",{children:"Delete"})]})]})})]})]})},rd=function(e){var t,r=e.entries.reduce(function(e,t){var r=t.key,n=t.value;return r&&(e[r]=n),e},{});return(null===(t=e.deleted)||void 0===t?void 0:t.length)&&e.deleted.forEach(function(e){r[e]=""}),e.ignored&&Object.entries(e.ignored).forEach(function(e){var t=ro(e,2),n=t[0],i=t[1];r[n]=i}),r},rf=function(e){var t={entries:[],deleted:[],ignored:{}};return e&&Object.entries(e).forEach(function(e){var r=ro(e,2),n=r[0],i=r[1];rp(i)?t.entries.push({key:n,value:i,state:"existing"}):t.ignored[n]=i}),t},rp=function(e){return null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e},rm=r(88164),ry=r(68267);function rh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rb(e){if(Array.isArray(e))return e}function rv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rg(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function rx(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){rv(e,t,r[t])})}return e}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function rS(e,t){return rb(e)||rg(e,t)||rP(e,t)||rx()}function rP(e,t){if(e){if("string"==typeof e)return rh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rh(e,t)}}var rC=function(e){var t=e.onClose,r=e.isEdit,n=void 0!==r&&r,i=e.collection,o=(0,en.useAdminUpdateCollection)(null==i?void 0:i.id),a=o.mutate,l=o.isLoading,s=(0,en.useAdminCreateCollection)(),c=s.mutate,u=s.isLoading,d=(0,tR.cI)({defaultValues:{title:null==i?void 0:i.title,handle:null==i?void 0:i.handle,metadata:{entries:Object.entries((null==i?void 0:i.metadata)||{}).map(function(e){var t=rS(e,2);return{key:t[0],value:t[1],state:"existing"}})}}}),f=d.register,p=d.handleSubmit,m=d.reset;(0,B.useEffect)(function(){i&&m({title:i.title,handle:i.handle,metadata:{entries:Object.entries(i.metadata||{}).map(function(e){var t=rS(e,2);return{key:t[0],value:t[1],state:"existing"}})}})},[i,m]);var y=(0,td.Z)();if(n&&!i)throw Error("Collection is required for edit");return(0,F.jsx)(tp.Z,{handleClose:t,isLargeModal:!0,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsxs)("div",{children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold mb-2xsmall",children:n?"Edit Collection":"Add Collection"}),(0,F.jsx)("p",{className:"inter-small-regular text-grey-50",children:"To create a collection, all you need is a title and a handle."})]})}),(0,F.jsxs)("form",{onSubmit:p(function(e){n?a({title:e.title,handle:e.handle,metadata:rd(e.metadata)},{onSuccess:function(){y("Success","Successfully updated collection","success"),t()},onError:function(e){y("Error",(0,tf.e)(e),"error")}}):c({title:e.title,handle:e.handle,metadata:rd(e.metadata)},{onSuccess:function(){y("Success","Successfully created collection","success"),t()},onError:function(e){y("Error",(0,tf.e)(e),"error")}})}),children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Details"}),(0,F.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,F.jsx)(ry.Z,rj({label:"Title",required:!0,placeholder:"Sunglasses"},f("title",{required:!0}))),(0,F.jsx)(ry.Z,rw(rj({label:"Handle",placeholder:"sunglasses"},f("handle")),{prefix:"/",tooltip:(0,F.jsx)(rm.Z,{content:"URL Slug for the collection. Will be auto generated if left blank."})}))]})]}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(d,"metadata")})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",loading:n?l:u,children:"".concat(n?"Save":"Publish"," collection")})]})})]})]})})},rN=r(6333),rk=r(24601);function r_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){r_(e,t,r[t])})}return e}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rD(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function rZ(e,t){if(null==e)return{};var r,n,i=rI(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rI(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var rT=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=rZ(e,["size","color"]);return(0,F.jsx)("svg",rE(rA({width:r,height:r,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),{children:(0,F.jsx)("path",{d:"M13.3334 4L6.00008 11.3333L2.66675 8",stroke:void 0===n?"currentColor":n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))},rM=r(65136);function rR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){rR(e,t,r[t])})}return e}function rz(e,t){if(null==e)return{};var r,n,i=rq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rq(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var rF=B.forwardRef(function(e,t){var r=e.indeterminate,n=void 0!==r&&r,i=e.className,o=e.checked,a=rz(e,["indeterminate","className","checked"]),l=a.type||"checkbox",s=B.useRef(null);return((0,B.useImperativeHandle)(t,function(){return s.current}),B.useEffect(function(){s.current&&(s.current.indeterminate=n)},[s,n]),"radio"===l)?(0,F.jsx)("div",{className:"flex h-full items-center",children:(0,F.jsx)("input",rL({className:(0,ec.Z)({"accent-violet-60":o}),type:"radio",checked:o,ref:s},a))}):(0,F.jsxs)("div",{className:"flex h-full items-center",children:[(0,F.jsx)("div",{onClick:function(){!a.disabled&&s.current&&s.current.click()},className:"rounded-base border-grey-30 text-grey-0 flex h-5 w-5 cursor-pointer justify-center border ".concat(a.disabled?o?"bg-gray-300":"":o&&"bg-violet-60"),children:(0,F.jsxs)("span",{className:"self-center",children:[o&&(0,F.jsx)(rT,{size:16}),n&&(0,F.jsx)(rM.Z,{size:16})]})}),(0,F.jsx)("input",rL({type:"checkbox",className:(0,ec.Z)("hidden",i),defaultChecked:o,ref:s},a))]})});function rH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function rU(e){if(Array.isArray(e))return e}function rG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rV(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function rB(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){rG(e,t,r[t])})}return e}function rQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rQ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function r$(e,t){if(null==e)return{};var r,n,i=rK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rK(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function rJ(e,t){return rU(e)||rV(e,t)||rX(e,t)||rB()}function rX(e,t){if(e){if("string"==typeof e)return rH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rH(e,t)}}var r0=function(e){var t,r=e.title,n=e.options,i=e.className,o=r$(e,["title","options","className"]),a=rJ((0,B.useState)((null==n?void 0:null===(t=n[0])||void 0===t?void 0:t.title)||"All"),2),l=a[0],s=a[1],c=rJ((0,B.useState)(!1),2),u=c[0],d=c[1];return(0,F.jsxs)("div",rY(rW({className:(0,ec.Z)("inter-small-regular text-grey-50 mr-6 flex last:mr-0",i)},o),{children:[(0,F.jsxs)("span",{className:"",children:[r,":"]}),(0,F.jsxs)(eI.fC,{onOpenChange:d,children:[(0,F.jsx)(eI.xz,{asChild:!0,className:(0,ec.Z)("inter-small-regular text-grey-50 active:bg-grey-5 hover:bg-grey-5 flex items-center rounded pl-1.5 pr-0.5",{"bg-grey-5":u}),children:(0,F.jsxs)("div",{className:"align-center flex",children:[l,(0,F.jsx)("div",{className:"text-grey-40 h-min",children:(0,F.jsx)(e4.Z,{size:16})})]})}),(0,F.jsx)(eI.VY,{sideOffset:8,className:"bg-grey-0 border-grey-20 rounded-rounded shadow-dropdown z-40 border p-2",children:n.map(function(e,t){return(0,F.jsxs)(eI.Xi,{onSelect:function(){e.onClick(),s(e.title)},disabled:void 0!==e.count&&e.count<1,className:(0,ec.Z)("text-grey-90 inter-small-semibold my-1 flex w-48 items-center rounded py-1.5  px-3 hover:border-0 hover:outline-none",{"hover:bg-grey-10 cursor-pointer":void 0===e.count||e.count>0}),children:[l===e.title&&(0,F.jsx)("span",{className:"w-4",children:(0,F.jsx)(rT,{size:16})}),(0,F.jsxs)("div",{className:(0,ec.Z)("ml-3 flex w-full justify-between",{"ml-7":l!==e.title,"text-grey-30":1>(e.count||0)}),children:[e.title,(0,F.jsx)("span",{className:(0,ec.Z)("inter-small-regular text-grey-40 ml-3",{"text-grey-30":1>(e.count||0)}),children:e.count})]})]},"".concat(t,"-").concat(e.title))})})]})]}))};function r1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){r1(e,t,r[t])})}return e}function r3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function r5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r3(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function r6(e,t){if(null==e)return{};var r,n,i=r4(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function r4(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var r8=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=e.ascendingColor,a=e.descendingColor,l=e.isSorted,s=void 0!==l&&l,c=r6(e,["size","color","ascendingColor","descendingColor","isSorted"]);return(0,F.jsxs)("svg",r5(r2({width:r,height:r,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c),{children:[(0,F.jsx)("path",{d:"M4.66602 10L7.99935 13.3333L11.3327 10",className:(0,ec.Z)({"stroke-grey-40":"desc"!==s,"stroke-current":"desc"===s}),stroke:a||i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M4.66602 6.00008L7.99935 2.66675L11.3327 6.00008",stroke:o||i,className:(0,ec.Z)({"stroke-grey-40":"asc"!==s,"stroke-current":"asc"===s}),strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},r7=r(29568);function r9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){r9(e,t,r[t])})}return e}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nr(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nt(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nn(e,t){if(null==e)return{};var r,n,i=ni(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ni(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var no=function(e){var t=e.autoFocus,r=e.onSearch,n=e.placeholder,i=e.searchValue,o=e.className,a=nn(e,["autoFocus","onSearch","placeholder","searchValue","className"]);return(0,F.jsxs)("div",nr(ne({className:(0,ec.Z)("inter-small-regular transition-color text-grey-50 rounded-rounded border-grey-20 min-w-content focus-within:shadow-input focus-within:border-violet-60 bg-grey-5 mt-1 mb-1 flex w-60 items-center border py-1.5 pl-1",o)},a),{children:[(0,F.jsx)("span",{className:"px-2.5 py-0.5",children:(0,F.jsx)(r7.Z,{size:16})}),(0,F.jsx)("input",{autoFocus:t,type:"text",value:i,className:(0,ec.Z)("inter-small-regular focus:text-grey-90 caret-violet-60 placeholder:inter-small-regular placeholder-grey-40 w-full bg-transparent focus:border-none focus:outline-none"),placeholder:void 0===n?"Search":n,onChange:function(e){r(e.target.value)}})]}))};function na(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){na(e,t,r[t])})}return e}function ns(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ns(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nu(e,t){if(null==e)return{};var r,n,i=nd(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nd(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var nf=B.forwardRef(function(e,t){var r=e.className,n=e.children,i=e.tableActions,o=e.enableSearch,a=e.searchClassName,l=e.immediateSearchFocus,s=e.searchPlaceholder,c=e.searchValue,u=e.handleSearch,d=e.filteringOptions,f=e.containerClassName,p=nu(e,["className","children","tableActions","enableSearch","searchClassName","immediateSearchFocus","searchPlaceholder","searchValue","handleSearch","filteringOptions","containerClassName"]);if(o&&!u)throw Error("Table cannot enable search without a search handler");return(0,F.jsxs)("div",{className:"flex flex-col ".concat(f),children:[(0,F.jsxs)("div",{className:"mb-2 flex w-full justify-between",children:[d?(0,F.jsx)("div",{className:"mb-2 flex self-end",children:Array.isArray(d)?d.map(function(e){return(0,F.jsx)(r0,nl({},e))}):d}):(0,F.jsx)("span",{"aria-hidden":!0}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[i&&(0,F.jsx)("div",{children:i}),o&&(0,F.jsx)(no,{autoFocus:l,placeholder:s,searchValue:c,onSearch:u,className:a})]})]}),(0,F.jsx)("div",{className:"relative",children:(0,F.jsx)("table",nc(nl({ref:t,className:(0,ec.Z)("w-full table-auto",r)},p),{children:n}))})]})});n=B.forwardRef(function(e,t){var r=e.className,n=e.children,i=nu(e,["className","children"]);return(0,F.jsx)("thead",nc(nl({ref:t,className:(0,ec.Z)("inter-small-semibold text-grey-50 border-grey-20 whitespace-nowrap border-t border-b",r)},i),{children:n}))}),nf.Head=n,i=B.forwardRef(function(e,t){var r=e.className,n=e.children,i=nu(e,["className","children"]);return(0,F.jsx)("tr",nc(nl({ref:t,className:(0,ec.Z)(r)},i),{children:n}))}),nf.HeadRow=i,o=B.forwardRef(function(e,t){var r=e.className,n=e.children,i=nu(e,["className","children"]);return(0,F.jsx)("th",nc(nl({ref:t,className:(0,ec.Z)("h-[40px] text-left",r)},i),{children:n}))}),nf.HeadCell=o,a=B.forwardRef(function(e,t){var r=e.onSortClicked,n=e.sortDirection,i=e.setSortDirection,o=e.className,a=e.children,l=nu(e,["onSortClicked","sortDirection","setSortDirection","className","children"]);return(0,F.jsx)("th",nc(nl({ref:t,className:(0,ec.Z)("py-2.5 text-left",o)},l),{children:(0,F.jsxs)("div",{className:"flex cursor-pointer select-none items-center",onClick:function(e){e.preventDefault(),n?"ASC"===n?i("DESC"):i(void 0):i("ASC"),r()},children:[a,(0,F.jsx)(r8,{size:16,ascendingColor:"ASC"===n?"#111827":void 0,descendingColor:"DESC"===n?"#111827":void 0})]})}))}),nf.SortingHeadCell=a,l=B.forwardRef(function(e,t){var r=e.className,n=e.children,i=nu(e,["className","children"]);return(0,F.jsx)("tbody",nc(nl({ref:t,className:(0,ec.Z)(r)},i),{children:n}))}),nf.Body=l,s=B.forwardRef(function(e,t){var r=e.className,n=e.linkTo,i=e.children,o=nu(e,["className","linkTo","children"]),a=(0,V.useNavigate)();return(0,F.jsx)("td",nc(nl({ref:t,className:(0,ec.Z)("inter-small-regular h-[40px]",r)},o,n&&{onClick:function(e){a(n),e.stopPropagation()}}),{children:i}))}),nf.Cell=s,c=B.forwardRef(function(e,t){var r=e.className,n=e.actions,i=e.children,o=e.linkTo,a=e.forceDropdown,l=e.clickable,s=nu(e,["className","actions","children","linkTo","forceDropdown","clickable"]),c=(0,V.useNavigate)();return(0,F.jsxs)("tr",nc(nl({ref:t,className:(0,ec.Z)("inter-small-regular border-grey-20 text-grey-90 border-t border-b",r,{"hover:bg-grey-5 cursor-pointer":void 0!==o||l})},s,o&&{onClick:function(){c(o)}}),{children:[i,n&&(0,F.jsx)(nf.Cell,{onClick:function(e){return e.stopPropagation()},className:"w-[32px]",children:(0,F.jsx)(eQ,{forceDropdown:a,actions:n})})]}))}),nf.Row=c;var np=(0,B.createContext)({isLoading:!1}),nm=function(e){var t=e.children,r=e.isLoading;return(0,F.jsx)(np.Provider,{value:{isLoading:r},children:t})},ny=function(){return{isLoading:B.useContext(np).isLoading}},nh=function(e){var t=e.children,r=e.isLoading,n=ny().isLoading;return(0,F.jsx)("div",{className:(0,ec.Z)("h-fit w-fit",{"bg-grey-10 rounded-rounded animate-pulse [&>*]:opacity-0":r||void 0!==n&&n}),children:t})};function nb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){nb(e,t,r[t])})}return e}function ng(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ng(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nj(e,t){if(null==e)return{};var r,n,i=nO(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nO(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var nw=function(e){var t=e.size,r=void 0===t?"16":t,n=e.color,i=void 0===n?"currentColor":n,o=nj(e,["size","color"]);return(0,F.jsxs)("svg",nx(nv({width:r,height:r,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M3.33301 8H12.6663",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M8 3.33331L12.6667 7.99998L8 12.6666",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},nS=function(e){var t=e.isLoading,r=void 0!==t&&t,n=e.pagingState,i=n.title,o=n.currentPage,a=n.pageCount,l=n.pageSize,s=n.count,c=n.offset,u=n.nextPage,d=n.prevPage,f=n.hasNext,p=n.hasPrev,m=s>0?c+1:0,y=Math.max(1,a);return(0,F.jsx)(nm,{isLoading:r,children:(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50 flex w-full justify-between",children:[(0,F.jsx)(nh,{children:(0,F.jsx)("div",{children:"".concat(m," - ").concat(l," of ").concat(s," ").concat(i)})}),(0,F.jsxs)("div",{className:"flex space-x-4",children:[(0,F.jsx)(nh,{children:(0,F.jsx)("div",{children:"".concat(o," of ").concat(y)})}),(0,F.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,F.jsx)("button",{className:"disabled:text-grey-30 cursor-pointer disabled:cursor-default",disabled:!p||r,onClick:function(){return d()},children:(0,F.jsx)(eh,{})}),(0,F.jsx)("button",{className:"disabled:text-grey-30 cursor-pointer disabled:cursor-default",disabled:!f||r,onClick:function(){return u()},children:(0,F.jsx)(nw,{})})]})]})]})})},nP=40,nC=function(e){var t=e.children,r=e.hasPagination,n=e.pagingState,i=e.isLoading,o=e.numberOfRows;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"relative",style:{minHeight:((void 0===o?12:o)+1)*nP},children:[i&&(0,F.jsx)("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-white bg-opacity-50",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}),t]}),r&&n&&(0,F.jsx)("div",{className:"mt-14",children:(0,F.jsx)(nS,{pagingState:n,isLoading:i})})]})},nN=r(24845),nk=function(e){switch(e){case"published":return(0,F.jsx)(nN.Z,{title:"Published",variant:"success"});case"draft":return(0,F.jsx)(nN.Z,{title:"Draft",variant:"default"});case"proposed":return(0,F.jsx)(nN.Z,{title:"Proposed",variant:"warning"});case"rejected":return(0,F.jsx)(nN.Z,{title:"Rejected",variant:"danger"});default:return null}},n_=function(){return(0,B.useMemo)(function(){return[{accessor:"thumbnail",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{className:"w-[5%]",children:(0,F.jsx)("div",{className:"bg-grey-5 rounded-soft my-xsmall h-[40px] w-[30px] overflow-hidden",children:t?(0,F.jsx)("img",{src:t,alt:"Thumbnail",className:"h-full w-full object-cover"}):null})})}},{accessor:"title",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{className:"w-3/6",children:t})}},{accessor:"status",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{className:"pr-base w-[10%]",children:(0,F.jsx)("div",{className:"flex items-center justify-end",children:nk(t)})})}}]},[])};function nA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nD(e){if(Array.isArray(e))return e}function nE(e){if(Array.isArray(e))return nA(e)}function nZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nI(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function nT(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function nM(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nR(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){nZ(e,t,r[t])})}return e}function nz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nq(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nz(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function nF(e,t){return nD(e)||nT(e,t)||nU(e,t)||nM()}function nH(e){return nE(e)||nI(e)||nU(e)||nR()}function nU(e,t){if(e){if("string"==typeof e)return nA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nA(e,t)}}var nG=function(e){var t=e.existingRelations,r=e.onSubmit,n=e.onClose,i=nF((0,B.useState)(""),2),o=i[0],a=i[1],l=nF((0,B.useState)(0),2),s=l[0],c=l[1],u=nF((0,B.useState)(0),2),d=u[0],f=u[1],p=nF((0,B.useState)(0),2),m=p[0],y=p[1],h=nF((0,B.useState)([]),2),b=h[0],v=h[1],g=nF((0,B.useState)([]),2),x=g[0],j=g[1],O=(0,rk.N)(o,500),w=(0,en.useAdminProducts)({q:O,limit:10,offset:s}),S=w.isLoading,P=w.count,C=w.products,N=n_(),k=(0,rN.useTable)({data:C||[],columns:N,manualPagination:!0,initialState:{pageIndex:m,pageSize:10,selectedRowIds:t.reduce(function(e,t){return e[t.id]=!0,e},{})},pageCount:d,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},rN.usePagination,rN.useRowSelect,function(e){e.visibleColumns.push(function(e){return[{id:"selection",Cell:function(e){var t=e.row;return(0,F.jsx)(nf.Cell,{className:"pl-base w-[5%]",children:(0,F.jsx)(rF,nL({},t.getToggleRowSelectedProps()))})}}].concat(nH(e))})}),_=k.rows,A=k.prepareRow,D=k.getTableBodyProps,E=k.getTableProps,Z=k.canPreviousPage,I=k.canNextPage,T=k.pageCount,M=k.nextPage,R=k.previousPage,L=k.state,z=L.pageIndex,q=L.pageSize,H=L.selectedRowIds;(0,B.useEffect)(function(){v(function(e){return nH(e.filter(function(e){return Object.keys(H).findIndex(function(t){return t===e.id})>-1})).concat(nH((null==C?void 0:C.filter(function(t){return 0>e.findIndex(function(e){return e.id===t.id})&&Object.keys(H).findIndex(function(e){return e===t.id})>-1}))||[])).filter(function(e){return 0>t.findIndex(function(t){return t.id===e.id})})}),j(nH(t.filter(function(e){return 0>Object.keys(H).findIndex(function(t){return t===e.id})})))},[H]),(0,B.useEffect)(function(){f(Math.ceil(P/10))},[C,P,10]);var U=nF((0,B.useState)(!0),2),G=U[0],V=U[1];return(0,B.useEffect)(function(){if(b.length>0||x.length>0){V(!1);return}V(!0)},[b,x]),(0,F.jsx)(tp.Z,{handleClose:n,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("h3",{className:"inter-xlarge-semibold",children:"Add Products"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(nC,{hasPagination:!0,numberOfRows:10,isLoading:S,pagingState:{count:P,offset:s,pageSize:s+_.length,title:"Products",currentPage:z+1,pageCount:T,nextPage:function(){I&&(c(function(e){return e+q}),y(function(e){return e+1}),M())},prevPage:function(){Z&&(c(function(e){return e-q}),y(function(e){return e-1}),R())},hasNext:I,hasPrev:Z},children:(0,F.jsx)(nf,nq(nL({enableSearch:!0,handleSearch:function(e){c(0),a(e)},searchValue:o,searchPlaceholder:"Search Products"},E()),{className:"flex-grow",children:(0,F.jsx)(nf.Body,nq(nL({},D()),{children:_.map(function(e){return A(e),(0,F.jsx)(nf.Row,nq(nL({color:"inherit"},e.getRowProps()),{className:"px-base",children:e.cells.map(function(e,t){return e.render("Cell",{index:t})})}))})}))}))})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-eventButton",onClick:n,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",className:"w-eventButton",onClick:function(){r(b.map(function(e){return e.id}),x.map(function(e){return e.id}))},disabled:G,children:"Save"})]})})]})})},nV=r(52868),nB=r.n(nV),nW=r(42455),nQ=nB().create({baseURL:nW.n});function nY(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return nQ({method:e,withCredentials:!0,url:t,data:r,json:!0})}function n$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nK(e){if(Array.isArray(e))return e}function nJ(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function nX(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){nJ(o,n,i,a,l,"next",e)}function l(e){nJ(o,n,i,a,l,"throw",e)}a(void 0)})}}function n0(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function n1(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n2(e,t){return nK(e)||n0(e,t)||n3(e,t)||n1()}function n3(e,t){if(e){if("string"==typeof e)return n$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n$(e,t)}}function n5(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var n6=function(e){return Object.entries(e).reduce(function(e,t){var r=n2(t,2),n=r[0],i=r[1];return i&&(e[n]=i),e},{})},n4=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.entries(e).map(function(e){var r=n2(e,2),n=r[0],i=r[1];return"object"==typeof i?n4(i,n):"".concat(t?"".concat(t,"[").concat(n,"]"):"".concat(n),"=").concat(i)}).join("&")};let n8={apps:{authorize:function(e){return nY("POST","/admin/apps/authorizations",e)},list:function(){return nY("GET","/admin/apps")}},customers:{retrieve:function(e){return nY("GET","/admin/customers/".concat(e))},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return nY("GET","/admin/customers".concat(e))},update:function(e,t){return nY("POST","admin/customers/".concat(e),t)}},products:{create:function(e){return nY("POST","/admin/products",e)},retrieve:function(e){return nY("GET","/admin/products/".concat(e))},update:function(e,t){return nY("POST","/admin/products/".concat(e),t)},delete:function(e){return nY("DELETE","/admin/products/".concat(e))},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return nY("GET","/admin/products".concat(t&&"?".concat(t)))},listTypes:function(){return nY("GET","/admin/products/types")},listTagsByUsage:function(){return nY("GET","/admin/products/tag-usage")},variants:{create:function(e,t){return nY("POST","/admin/products/".concat(e,"/variants"),t)},retrieve:function(e,t){return nY("GET","/admin/products/".concat(e,"/variants/").concat(t))},update:function(e,t,r){return nY("POST","/admin/products/".concat(e,"/variants/").concat(t),r)},delete:function(e,t){return nY("DELETE","/admin/products/".concat(e,"/variants/").concat(t))},list:function(e){return nY("GET","/admin/products/".concat(e,"/variants"))}},options:{create:function(e,t){return nY("POST","/admin/products/".concat(e,"/options"),t)},delete:function(e,t){return nY("DELETE","/admin/products/".concat(e,"/options/").concat(t))},update:function(e,t,r){return nY("POST","/admin/products/".concat(e,"/options/").concat(t),r)}}},collections:{create:function(e){return nY("POST","/admin/collections",e)},retrieve:function(e){return nY("GET","/admin/collections/".concat(e))},list:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],nY("GET","/admin/collections")},addProducts:function(e,t){return nY("POST","/admin/collections/".concat(e,"/products/batch"),t)},removeProducts:function(e,t){return nY("DELETE","/admin/collections/".concat(e,"/products/batch"),t)}},orders:{create:function(e){return nY("POST","/admin/orders",e)},receiveReturn:function(e,t){return nX(function(){var r,n,i,o,a,l,s;return n5(this,function(c){switch(c.label){case 0:return[4,nY("POST","/admin/returns/".concat(e,"/receive"),t)];case 1:return(null===(r=(o=c.sent()).data.return)||void 0===r?void 0:r.order_id)&&(a=o.data.return.order_id),(null===(i=o.data.return)||void 0===i?void 0:null===(n=i.swap)||void 0===n?void 0:n.id)&&(a=null===(s=o.data.return)||void 0===s?void 0:null===(l=s.swap)||void 0===l?void 0:l.order_id),[2,this.retrieve(a)]}})}).apply(this)},cancelReturn:function(e){return nY("POST","/admin/returns/".concat(e,"/cancel"))},retrieve:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.keys(t).map(function(e){return""===t[e]||null===t[e]?null:"".concat(e,"=").concat(t[e])}).filter(function(e){return!!e}).join("&");return nY("GET","/admin/orders/".concat(e).concat(r&&"?".concat(r)))},update:function(e,t){return nY("POST","/admin/orders/".concat(e),t)},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(n6(e)).map(function(t){return"".concat(t,"=").concat(e[t])}).filter(function(e){return!!e}).join("&");return nY("GET","/admin/orders".concat(t&&"?".concat(t)))},complete:function(e){return nY("POST","/admin/orders/".concat(e,"/complete"),{})},archive:function(e){return nY("POST","/admin/orders/".concat(e,"/archive"),{})},capturePayment:function(e){return nY("POST","/admin/orders/".concat(e,"/capture"),{})},createShipment:function(e,t){return nY("POST","/admin/orders/".concat(e,"/shipment"),t)},updateClaim:function(e,t,r){return nY("POST","/admin/orders/".concat(e,"/claims/").concat(t),r)},createSwap:function(e,t){return nY("POST","/admin/orders/".concat(e,"/swaps"),t)},cancelSwap:function(e,t){return nY("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/cancel"))},createClaim:function(e,t){return nY("POST","/admin/orders/".concat(e,"/claims"),t)},cancelClaim:function(e,t){return nY("POST","/admin/orders/".concat(e,"/claims/").concat(t,"/cancel"))},fulfillClaim:function(e,t,r){return nY("POST","/admin/orders/".concat(e,"/claims/").concat(t,"/fulfillments"),r)},cancelClaimFulfillment:function(e,t,r){return nY("POST","/admin/orders/".concat(e,"/claims/").concat(t,"/fulfillments/").concat(r,"/cancel"))},createClaimShipment:function(e,t,r){return nY("POST","/admin/orders/".concat(e,"/claims/").concat(t,"/shipments"),r)},createSwapShipment:function(e,t,r){return nY("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/shipments"),r)},fulfillSwap:function(e,t,r){return nY("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/fulfillments"),r)},cancelSwapFulfillment:function(e,t,r){return nY("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/fulfillments/").concat(r,"/cancel"))},processSwapPayment:function(e,t){return nY("POST","/admin/orders/".concat(e,"/swaps/").concat(t,"/process-payment"))},createFulfillment:function(e,t){return nY("POST","/admin/orders/".concat(e,"/fulfillment"),t)},cancelFulfillment:function(e,t){return nY("POST","/admin/orders/".concat(e,"/fulfillments/").concat(t,"/cancel"))},refund:function(e,t){return nY("POST","/admin/orders/".concat(e,"/refund"),t)},requestReturn:function(e,t){return nY("POST","/admin/orders/".concat(e,"/return"),t)},cancel:function(e){return nY("POST","/admin/orders/".concat(e,"/cancel"),{})}},uploads:{create:function(e){var t=new FormData,r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;t.append("files",l)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return nY("POST","/admin/uploads",t)}},invites:{create:function(e){return nY("POST","/admin/invites",e)},resend:function(e){return nY("POST","/admin/invites/".concat(e,"/resend"))},delete:function(e){return nY("DELETE","/admin/invites/".concat(e))},list:function(){return nY("GET","/admin/invites")},accept:function(e){return nY("POST","/admin/invites/accept",e)}},users:{resetPasswordToken:function(e){return nY("POST","/admin/users/password-token",e)},resetPassword:function(e){return nY("POST","/admin/users/reset-password",e)},list:function(){return nY("GET","/admin/users")},retrieve:function(e){return nY("GET","/admin/users/".concat(e))},update:function(e,t){return nY("POST","/admin/users/".concat(e),t)},delete:function(e){return nY("DELETE","/admin/users/".concat(e))}}};var n7=function(){return(0,B.useMemo)(function(){return[{id:"selection",Cell:function(e){var t=e.row;return(0,F.jsx)(nf.Cell,{className:"pl-base pr-large w-[0%]",children:(0,F.jsx)("div",{children:t.index+1})})}},{accessor:"thumbnail",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{className:"pr-base w-[0%]",children:(0,F.jsx)("div",{className:"bg-grey-5 rounded-soft my-xsmall h-[40px] w-[30px] overflow-hidden",children:t?(0,F.jsx)("img",{src:t,alt:"Thumbnail",className:"h-full w-full object-cover"}):null})})}},{accessor:"title",Cell:function(e){var t=e.cell,r=t.row,n=t.value;return(0,F.jsx)(nf.Cell,{className:"w-[20%]",children:(0,F.jsx)(V.Link,{to:"/a/products/".concat(r.original.id),children:n})})}},{accessor:"status",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{className:"w-[50%] justify-start",children:nk(t)})}}]},[])};function n9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ie(e){if(Array.isArray(e))return e}function it(e){if(Array.isArray(e))return n9(e)}function ir(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function ii(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ir(o,n,i,a,l,"next",e)}function l(e){ir(o,n,i,a,l,"throw",e)}a(void 0)})}}function io(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ia(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function il(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function is(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ic(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function iu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){io(e,t,r[t])})}return e}function id(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ip(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):id(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function im(e,t){return ie(e)||il(e,t)||ih(e,t)||is()}function iy(e){return it(e)||ia(e)||ih(e)||ic()}function ih(e,t){if(e){if("string"==typeof e)return n9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n9(e,t)}}function ib(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var iv=function(e){var t=e.collectionId,r=e.refetchCollection,n=im((0,B.useState)(""),2),i=n[0],o=n[1],a=im((0,B.useState)(0),2),l=a[0],s=a[1],c=im((0,B.useState)(0),2),u=c[0],d=c[1],f=im((0,B.useState)(0),2),p=f[0],m=f[1],y=(0,rk.N)(i,500),h=im((0,B.useState)(!1),2),b=h[0],v=h[1],g=im((0,B.useState)(void 0),2),x=g[0],j=g[1],O=(0,en.useAdminProducts)({q:y,collection_id:[t],limit:10,offset:l}),w=O.isLoading,S=O.count,P=O.products,C=O.refetch;(0,B.useEffect)(function(){C()},[t]);var N=function(){x&&n8.products.update(x,{collection_id:null}).then(function(){C(),r()})},k=n7(),_=(0,rN.useTable)({data:P||[],columns:k,manualPagination:!0,initialState:{pageIndex:p,pageSize:10},pageCount:u,getRowId:function(e){return e.id}},rN.usePagination,function(e){e.visibleColumns.push(function(e){return iy(e).concat([{id:"actions",Cell:function(e){var t=e.row;return(0,F.jsx)(nf.Cell,{className:"pr-2xsmall w-[0%]",children:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"text-grey-40",onClick:function(){j(t.original.id),v(!0)},children:(0,F.jsx)(eZ,{size:20})})})}}])})}),A=_.rows,D=_.prepareRow,E=_.getTableBodyProps,Z=_.getTableProps,I=_.canPreviousPage,T=_.canNextPage,M=_.pageCount,R=_.nextPage,L=_.previousPage,z=_.state,q=z.pageIndex,H=z.pageSize;return(0,B.useEffect)(function(){d(Math.ceil(S/10))},[P,S,10]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(nC,{isLoading:w,hasPagination:!0,numberOfRows:H,pagingState:{count:S,offset:l,pageSize:l+A.length,title:"Products",currentPage:q+1,pageCount:M,nextPage:function(){T&&(s(function(e){return e+H}),m(function(e){return e+1}),R())},prevPage:function(){I&&(s(function(e){return e-H}),m(function(e){return e-1}),L())},hasNext:T,hasPrev:I},children:(0,F.jsx)(nf,ip(iu({enableSearch:!0,handleSearch:function(e){s(0),o(e)},searchPlaceholder:"Search Products"},Z()),{className:"h-full",children:(0,F.jsx)(nf.Body,ip(iu({},E()),{children:A.map(function(e){return D(e),(0,F.jsx)(nf.Row,ip(iu({color:"inherit"},e.getRowProps()),{className:"px-base",children:e.cells.map(function(e,t){return e.render("Cell",{index:t})})}))})}))}))}),b&&(0,F.jsx)(tx,{onDelete:ii(function(){return ib(this,function(e){return[2,N()]})}),handleClose:function(){return v(!b)},heading:"Remove product from collection",successText:"Product removed from collection"})]})},ig=r(46118),ix=function(e){var t=JSON.parse(JSON.stringify(e));if("status"in t&&"message"in t)return{status:t.status,message:t.message}};function ij(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iO(e){if(Array.isArray(e))return e}function iw(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function iS(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){iw(o,n,i,a,l,"next",e)}function l(e){iw(o,n,i,a,l,"throw",e)}a(void 0)})}}function iP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iC(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function iN(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ik(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){iP(e,t,r[t])})}return e}function i_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iA(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i_(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function iD(e,t){return iO(e)||iC(e,t)||iE(e,t)||iN()}function iE(e,t){if(e){if("string"==typeof e)return ij(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ij(e,t)}}function iZ(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var iI=function(){var e,t,r=(0,V.useParams)().id,n=(0,en.useAdminCollection)(r),i=n.collection,o=n.isLoading,a=n.error,l=n.refetch,s=(0,en.useAdminDeleteCollection)(r),c=(0,en.useAdminUpdateCollection)(r),u=iD((0,B.useState)(!1),2),d=u[0],f=u[1],p=iD((0,B.useState)(!1),2),m=p[0],y=p[1],h=iD((0,B.useState)(!1),2),b=h[0],v=h[1],g=(0,V.useNavigate)(),x=(0,td.Z)(),j=iD((0,B.useState)(0),2),O=j[0],w=j[1],S=function(){s.mutate(void 0,{onSuccess:function(){return g("/a/collections")}})},P=(e=iS(function(e,t){var r,n,o;return iZ(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,,6]),!(e.length>0))return[3,2];return[4,n8.collections.addProducts(null===(r=i)||void 0===r?void 0:r.id,{product_ids:e})];case 1:a.sent(),a.label=2;case 2:if(!(t.length>0))return[3,4];return[4,n8.collections.removeProducts(null===(n=i)||void 0===n?void 0:n.id,{product_ids:t})];case 3:a.sent(),a.label=4;case 4:return v(!1),x("Success","Updated products in collection","success"),l(),[3,6];case 5:return o=a.sent(),x("Error",(0,tf.e)(o),"error"),[3,6];case 6:return[2]}})}),function(t,r){return e.apply(this,arguments)});(0,B.useEffect)(function(){var e;(null==i?void 0:null===(e=i.products)||void 0===e?void 0:e.length)&&w(O+1)},[null==i?void 0:i.products]);var C=(0,ig.e)().getWidgets;if(a){var N=ix(a);if(N&&404===N.status)return g("/404"),null;throw a}return o||!i?(0,F.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)(eb,{className:"mb-xsmall",path:"/a/products?view=collections",label:"Back to Collections"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[C("product_collection.details.before").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:i,injectionZone:"product_collection.details.before",widget:e},t)}),(0,F.jsx)("div",{className:"rounded-rounded py-large px-xlarge border-grey-20 bg-grey-0 border",children:(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h2",{className:"inter-xlarge-semibold mb-2xsmall",children:i.title}),(0,F.jsx)(eQ,{forceDropdown:!0,actions:[{label:"Edit Collection",onClick:function(){return f(!0)},icon:(0,F.jsx)(eC,{size:"20"})},{label:"Delete",onClick:function(){return y(!m)},variant:"danger",icon:(0,F.jsx)(eZ,{size:"20"})}]})]}),(0,F.jsxs)("p",{className:"inter-small-regular text-grey-50",children:["/",i.handle]})]}),i.metadata&&(0,F.jsxs)("div",{className:"mt-large gap-y-base flex flex-col",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Metadata"}),(0,F.jsx)("div",{children:(0,F.jsx)(tu,{data:i.metadata})})]})]})}),(0,F.jsxs)(tM,{title:"Products",actions:[{label:"Edit Products",icon:(0,F.jsx)(eC,{size:"20"}),onClick:function(){return v(!b)}}],children:[(0,F.jsx)("p",{className:"text-grey-50 inter-base-regular mt-xsmall mb-base",children:"Products in this collection"}),i&&(0,F.jsx)(iv,{collectionId:i.id,refetchCollection:l},O)]}),C("product_collection.details.after").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:i,injectionZone:"product_collection.details.after",widget:e},t)}),(0,F.jsx)(tT,{data:i,title:"Raw collection"})]}),(0,F.jsx)(ev,{})]}),d&&(0,F.jsx)(rC,{onClose:function(){return f(!d)},onSubmit:function(e,t){var r={title:e.title,handle:e.handle};if(t){var n,o=Object.keys(null!==(n=null==i?void 0:i.metadata)&&void 0!==n?n:{}).reduce(function(e,t){return iA(ik({},e),iP({},t,null))},{}),a=t.reduce(function(e,t){var r;return iA(ik({},e),iP({},t.key,null!==(r=t.value)&&void 0!==r?r:null))},o);r.metadata=a}c.mutate(r,{onSuccess:function(){f(!1),l()}})},isEdit:!0,collection:i}),m&&(0,F.jsx)(tx,{handleClose:function(){return y(!m)},heading:"Delete collection",successText:"Successfully deleted collection",onDelete:iS(function(){return iZ(this,function(e){return[2,S()]})}),confirmText:"Yes, delete"}),b&&(0,F.jsx)(nG,{onClose:function(){return v(!1)},onSubmit:P,existingRelations:null!==(t=null==i?void 0:i.products)&&void 0!==t?t:[]})]})},iT=function(){var e=(0,(0,W.V)().getNestedRoutes)("/collections");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(iI,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/collections"})},t)})]})},iM=r(53059),iR=r(65907),iL=r.n(iR);function iz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){iz(e,t,r[t])})}return e}function iF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iH(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):iF(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function iU(e,t){if(null==e)return{};var r,n,i=iG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function iG(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var iV=function(e){e.size;var t=e.color,r=void 0===t?"currentColor":t,n=iU(e,["size","color"]);return(0,F.jsxs)("svg",iH(iq({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),{children:[(0,F.jsx)("path",{d:"M15.4444 17H4.55556C3.7 17 3 16.35 3 15.5556V5.44444C3 4.65 3.7 4 4.55556 4H15.4444C16.3 4 17 4.65 17 5.44444V15.5556C17 16.35 16.3 17 15.4444 17Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M13 2.43994V3.43994",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7 2.43994V3.43994",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10 10.7632C11.1046 10.7632 12 9.86775 12 8.76318C12 7.65861 11.1046 6.76318 10 6.76318C8.89543 6.76318 8 7.65861 8 8.76318C8 9.86775 8.89543 10.7632 10 10.7632Z",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14 14.2979C12.88 13.6312 11.52 13.2979 10 13.2979C8.48 13.2979 7.12 13.6979 6 14.2979",stroke:r,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},iB=r(36105),iW=r.n(iB),iQ=function(e){var t=["bg-fuschia-40","bg-pink-40","bg-orange-40","bg-teal-40","bg-cyan-40","bg-blue-40","bg-indigo-40"];return t[e%t.length]},iY=r(53490),i$=function(e){var t=e.color,r=e.customer,n=r.first_name||r.last_name?"".concat(r.first_name," ").concat(r.last_name):r.email?r.email:"-";return(0,F.jsxs)("div",{className:"flex w-full items-center py-1.5",children:[(0,F.jsx)("div",{className:"h-[24px] w-[24px]",children:(0,F.jsx)(iY.Z,{user:r,color:void 0===t?"bg-grey-80":t})}),(0,F.jsx)("span",{className:"w-40 truncate pl-2.5",children:n})]})},iK=function(){return[(0,B.useMemo)(function(){return[{Header:"Date added",accessor:"created_at",Cell:function(e){var t=e.cell.value;return iW()(t).format("DD MMM YYYY")}},{Header:"Name",accessor:"customer",Cell:function(e){var t=e.row;return(0,F.jsx)(i$,{customer:t.original,color:iQ(t.index)})}},{Header:"Email",accessor:"email"},{Header:"",accessor:"col"},{accessor:"orders",Header:function(){return(0,F.jsx)("div",{className:"text-right",children:"Orders"})},Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{className:"text-right",children:(null==t?void 0:t.length)||0})}},{Header:"",accessor:"col-2"}]},[])]};function iJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iX(e){if(Array.isArray(e))return e}function i0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i1(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function i2(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i0(e,t,r[t])})}return e}function i5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i6(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i5(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function i4(e,t){return iX(e)||i1(e,t)||i8(e,t)||i2()}function i8(e,t){if(e){if("string"==typeof e)return iJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iJ(e,t)}}var i7=["q","offset","limit"],i9=function(e,t){switch(t.type){case"setFilters":var r;return i6(i3({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return i6(i3({},e),{offset:0,query:t.payload});case"setOffset":return i6(i3({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return ot(e,t)},[e,t]),n=i4((0,B.useReducer)(i9,r),2),i=n[0],o=n[1],a=function(){var e=i3({},i.additionalFilters),t=!0,r=!1,n=void 0;try{for(var o,a=Object.entries(i)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=i4(o.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):("offset"===s||"limit"===s)&&(e[s]=c)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},l=function(e){var t=null!=e?e:i,r={},n=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=i4(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):("offset"===u||"limit"===u)&&(r[u]=d)}}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r},s=function(){var e=l();return iL().stringify(e,{skipNulls:!0})},c=(0,B.useMemo)(function(){return a()},[i]),u=(0,B.useMemo)(function(){return l()},[i]),d=(0,B.useMemo)(function(){return s()},[i]);return i6(i3({},i),{filters:i3({},i),representationObject:u,representationString:d,queryObject:c,paginate:function(e){e>0?o({type:"setOffset",payload:i.offset+i.limit}):o({type:"setOffset",payload:Math.max(i.offset-i.limit,0)})},getQueryObject:a,getQueryString:function(){var e=a();return iL().stringify(e,{skipNulls:!0})},setQuery:function(e){o({type:"setQuery",payload:e})},setFilters:function(e){o({type:"setFilters",payload:e})},setDefaultFilters:function(e){o({type:"setDefaults",payload:e})},reset:function(){o({type:"setFilters",payload:i6(i3({},i),{offset:0,query:null})})}})},ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=i4(l.value,2),u=c[0],d=c[1];if(i7.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d)}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return r};function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function on(e){if(Array.isArray(e))return e}function oi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oo(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function oa(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ol(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){oi(e,t,r[t])})}return e}function os(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):os(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ou(e,t){return on(e)||oo(e,t)||od(e,t)||oa()}function od(e,t){if(e){if("string"==typeof e)return or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return or(e,t)}}var of=15,op={expand:"orders"},om=function(){var e=(0,V.useNavigate)(),t=oe(location.search,op),r=t.reset,n=t.paginate,i=t.setQuery,o=t.queryObject,a=t.representationObject,l=parseInt(o.offset)||0,s=parseInt(o.limit)||of,c=(0,en.useAdminCustomers)(ol({},o),{keepPreviousData:!0}),u=c.customers,d=c.isLoading,f=c.count,p=ou((0,B.useState)(o.query),2),m=p[0],y=p[1],h=ou((0,B.useState)(0),2),b=h[0],v=h[1];(0,B.useEffect)(function(){void 0!==f&&v(Math.ceil(f/s))},[f]);var g=ou(iK(),1)[0],x=(0,rN.useTable)({columns:g,data:u||[],manualPagination:!0,initialState:{pageSize:s,pageIndex:l/s},pageCount:b,autoResetPage:!1},rN.usePagination),j=x.getTableProps,O=x.getTableBodyProps,w=x.headerGroups,S=x.rows,P=x.prepareRow,C=x.canPreviousPage,N=x.canNextPage,k=x.pageCount,_=x.gotoPage,A=x.nextPage,D=x.previousPage,E=x.state.pageIndex;(0,B.useEffect)(function(){var e=setTimeout(function(){m?(i(m),_(0)):void 0!==m&&r()},400);return function(){return clearTimeout(e)}},[m]);var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=iL().stringify(e);window.history.replaceState("/a/discounts","","".concat("?".concat(t)))},I=function(){(0,iM.isEmpty)(a)?Z({offset:0,limit:of}):Z(a)};return(0,B.useEffect)(function(){I()},[a]),(0,F.jsx)(nC,{hasPagination:!0,numberOfRows:o.limit,pagingState:{count:f,offset:o.offset,pageSize:o.offset+S.length,title:"Customers",currentPage:E+1,pageCount:k,nextPage:function(){N&&(n(1),A())},prevPage:function(){C&&(n(-1),D())},hasNext:N,hasPrev:C},isLoading:d,children:(0,F.jsxs)(nf,oc(ol({enableSearch:!0,handleSearch:y,searchValue:m},j()),{children:[(0,F.jsx)(nf.Head,{children:null==w?void 0:w.map(function(e){return(0,F.jsx)(nf.HeadRow,oc(ol({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,oc(ol({className:"w-[100px]"},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,oc(ol({},O()),{children:S.map(function(t){return P(t),(0,F.jsx)(nf.Row,oc(ol({color:"inherit",actions:[{label:"Edit",onClick:function(){return e(t.original.id)},icon:(0,F.jsx)(eC,{size:20})},{label:"Details",onClick:function(){return e(t.original.id)},icon:(0,F.jsx)(iV,{size:20})}],linkTo:t.original.id},t.getRowProps()),{children:t.cells.map(function(e,t){return(0,F.jsx)(nf.Cell,oc(ol({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))})}))]}))})},oy=r(96128),oh=function(e){var t=e.totalAmount,r=e.totalTitle,n=e.currency,i=e.variant,o=void 0===i?"regular":i,a=e.subtitle,l=void 0===a?"":a,s=e.totalColor;return(0,F.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{className:(0,ec.Z)("text-grey-90",{"inter-small-regular":"regular"===o,"inter-small-semibold":"large"===o||"bold"===o}),children:r}),l&&(0,F.jsx)("div",{className:"inter-small-regular text-grey-50 mt-1",children:l})]}),(0,F.jsx)(ob,{totalAmount:t,currency:n,variant:o,totalColor:void 0===s?"text-grey-90":s})]})},ob=function(e){var t=e.totalColor,r=void 0===t?"text-grey-90":t,n=e.variant,i=void 0===n?"regular":n,o=e.totalAmount,a=e.currency;return(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsx)("div",{className:(0,ec.Z)(r,{"inter-small-regular mr-3":"regular"===i,"inter-large-semibold":"bold"===i,"inter-xlarge-semibold":"large"===i}),children:(0,oy.rX)({amount:o,currency:a})}),"regular"===i&&(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:a.toUpperCase()})]})},ov=function(e){var t=e.currency,r=e.swapAmount,n=e.manualRefund,i=e.swapRefund,o=e.returnRefund,a=e.paidTotal,l=e.refundedTotal;return r+n+i+o===0?null:(0,F.jsxs)(F.Fragment,{children:[!!r&&(0,F.jsx)(oh,{currency:t,totalAmount:r,totalTitle:"Total for Swaps"}),!!i&&(0,F.jsx)(oh,{currency:t,totalAmount:o,totalTitle:"Refunded for Swaps"}),!!o&&(0,F.jsx)(oh,{currency:t,totalAmount:o,totalTitle:"Refunded for Returns"}),!!n&&(0,F.jsx)(oh,{currency:t,totalAmount:n,totalTitle:"Manually refunded"}),(0,F.jsx)(oh,{variant:"bold",currency:t,totalAmount:a-l,totalTitle:"Net Total"})]})},og=function(e){var t,r=e.title,n=e.addr;return n?(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-small-regular text-grey-50 mb-1",children:r}),(0,F.jsxs)("div",{className:"inter-small-regular flex flex-col",children:[(0,F.jsxs)("span",{children:[null==n?void 0:n.address_1," ",null==n?void 0:n.address_2]}),(0,F.jsxs)("span",{children:[null==n?void 0:n.postal_code," ",null==n?void 0:n.city,", ",(null==n?void 0:n.province)?"".concat(n.province," "):"",null==n?void 0:null===(t=n.country_code)||void 0===t?void 0:t.toUpperCase()]})]})]}):(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-small-regular text-grey-50 mb-1",children:r}),(0,F.jsx)("div",{className:"inter-small-regular flex flex-col",children:"N/A"})]})},ox=function(e){switch(e.status){case"completed":return(0,F.jsx)(nN.Z,{title:"Completed",variant:"success"});case"pending":return(0,F.jsx)(nN.Z,{title:"Processing",variant:"default"});case"canceled":return(0,F.jsx)(nN.Z,{title:"Canceled",variant:"danger"});case"requires_action":return(0,F.jsx)(nN.Z,{title:"Requires action",variant:"danger"});default:return null}},oj=function(e){switch(e.status){case"captured":return(0,F.jsx)(nN.Z,{title:"Paid",variant:"success"});case"awaiting":return(0,F.jsx)(nN.Z,{title:"Awaiting payment",variant:"danger"});case"canceled":return(0,F.jsx)(nN.Z,{title:"Canceled",variant:"danger"});case"requires_action":return(0,F.jsx)(nN.Z,{title:"Requires Action",variant:"danger"});default:return null}},oO=function(e){switch(e.status){case"shipped":return(0,F.jsx)(nN.Z,{title:"Shipped",variant:"success"});case"fulfilled":return(0,F.jsx)(nN.Z,{title:"Fulfilled",variant:"warning"});case"canceled":return(0,F.jsx)(nN.Z,{title:"Canceled",variant:"danger"});case"partially_fulfilled":return(0,F.jsx)(nN.Z,{title:"Partially fulfilled",variant:"warning"});case"requires_action":return(0,F.jsx)(nN.Z,{title:"Requires Action",variant:"danger"});case"not_fulfilled":return(0,F.jsx)(nN.Z,{title:"Awaiting fulfillment",variant:"danger"});case"partially_shipped":return(0,F.jsx)(nN.Z,{title:"Partially Shipped",variant:"warning"});default:return null}},ow=function(e){var t=e.trackingLink;return t.url?(0,F.jsx)("a",{style:{textDecoration:"none"},target:"_blank",href:t.url,rel:"noreferrer",children:(0,F.jsxs)("div",{className:"text-blue-60 ml-2",children:[t.tracking_number," "]})}):(0,F.jsxs)("span",{className:"text-blue-60 ml-2",children:[t.tracking_number," "]})},oS=function(e){var t,r=e.order,n=e.capturePayment,i=e.showRefundMenu,o=(0,td.Z)(),a=null==r?void 0:null===(t=r.payments)||void 0===t?void 0:t.some(function(e){return"system"===e.provider_id}),l=r.payment_status,s="Capture payment",c=function(){n.mutate(void 0,{onSuccess:function(){return o("Success","Successfully captured payment","success")},onError:function(e){return o("Error",(0,tf.e)(e),"error")}})},u=n.isLoading,d=!1;switch("awaiting"===l&&a&&(d=!0),"requires_action"===l&&a&&(d=!0),!0){case"captured"===l||"partially_refunded"===l:s="Refund",c=function(){return i()};break;case d:c=function(){return console.log("TODO: Show alert indicating, that you are capturing a system payment")};break;case"requires_action"===l:return null}return(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:c,loading:u,className:"min-w-[130px]",children:s})},oP=r(54373);function oC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){oC(e,t,r[t])})}return e}function ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ok(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function oA(e,t){if(null==e)return{};var r,n,i=oD(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oD(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var oE=function(e){var t=e.children,r=e.variant,n=e.className,i=oA(e,["children","variant","className"]);return(0,F.jsx)(oP.Z,o_(oN({variant:null!=r?r:"default",className:(0,ec.Z)("outline-grey-20 flex aspect-square h-[40px] w-[40px] items-center justify-center border-2 border-white outline outline-1",n)},i),{children:t}))},oZ=r(10081);function oI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){oI(e,t,r[t])})}return e}function oM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oM(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function oL(e,t){if(null==e)return{};var r,n,i=oz(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oz(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var oq=function(e){var t=e.size,r=void 0===t?"16":t,n=e.color,i=void 0===n?"currentColor":n,o=oL(e,["size","color"]);return(0,F.jsxs)("svg",oR(oT({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M5 5L15 15",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function oF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){oF(e,t,r[t])})}return e}function oU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oU(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function oV(e,t){if(null==e)return{};var r,n,i=oB(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oB(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var oW=function(e){var t=e.size,r=void 0===t?"16":t,n=e.color,i=void 0===n?"currentColor":n,o=oV(e,["size","color"]);return(0,F.jsxs)("svg",oG(oH({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M13.3634 8.02713L6.73047 4.21289",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M16.723 12.9577V6.98101C16.7228 6.71899 16.6536 6.46164 16.5225 6.23479C16.3913 6.00794 16.2029 5.81956 15.9759 5.68855L10.7463 2.70018C10.5192 2.56904 10.2615 2.5 9.99921 2.5C9.73692 2.5 9.47926 2.56904 9.25212 2.70018L4.02248 5.68855C3.79556 5.81956 3.60708 6.00794 3.47596 6.23479C3.34483 6.46164 3.27566 6.71899 3.27539 6.98101V12.9577C3.27566 13.2198 3.34483 13.4771 3.47596 13.704C3.60708 13.9308 3.79556 14.1192 4.02248 14.2502L9.25212 17.2386C9.47926 17.3697 9.73692 17.4388 9.99921 17.4388C10.2615 17.4388 10.5192 17.3697 10.7463 17.2386L15.9759 14.2502C16.2029 14.1192 16.3913 13.9308 16.5225 13.704C16.6536 13.4771 16.7228 13.2198 16.723 12.9577Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M3.47852 6.2041L10.0006 9.97691L16.5227 6.2041",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10 17.5004V9.96973",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},oQ=r(24470);function oY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o$(e){if(Array.isArray(e))return e}function oK(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function oJ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oX(e,t){return o$(e)||oK(e,t)||o0(e,t)||oJ()}function o0(e,t){if(e){if("string"==typeof e)return oY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oY(e,t)}}var o1=function(e){var t=e.open,r=e.heading,n=e.text,i=e.onConfirm,o=e.onCancel,a=e.confirmText,l=e.cancelText,s=e.extraConfirmation,c=void 0!==s&&s,u=e.entityName,d=oX((0,B.useState)(),2),f=d[0],p=d[1];return(0,F.jsx)(tp.Z,{open:t,handleClose:o,isLargeModal:!1,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsxs)(tp.Z.Content,{className:"!py-large",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-large-semibold",children:r}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 mt-1",children:n})]}),c&&(0,F.jsxs)("div",{className:"my-base flex flex-col",children:[(0,F.jsxs)("span",{className:"inter-base-regular text-grey-50 mt-1",children:["Type the name"," ",(0,F.jsxs)("span",{className:"font-semibold",children:['"',u,'"']})," to confirm."]}),(0,F.jsx)(ry.Z,{autoFocus:!0,placeholder:u,className:"mt-base",onChange:function(e){return p(e.target.value)}})]})]}),(0,F.jsx)(tp.Z.Footer,{className:"border-none !pt-0",children:(0,F.jsxs)("div",{className:"flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",className:"text-small mr-2 justify-center",size:"small",onClick:o,children:void 0===l?"Cancel":l}),(0,F.jsx)(Y.Z,{size:"small",className:"text-small justify-center",variant:"nuclear",onClick:i,disabled:c&&u!==f,children:void 0===a?"Yes, confirm":a})]})})]})})},o2=function(){return function(e){var t=e.heading,r=e.text,n=e.confirmText,i=e.cancelText,o=e.extraConfirmation,a=e.entityName;return new Promise(function(e){var l=(0,oQ.createRoot)(document.createElement("div")),s=!0,c=function(){s=!1,e(!0),d()},u=function(){s=!1,e(!1),d()},d=function(){l.render((0,F.jsx)(o1,{heading:t,text:r,open:s,onCancel:u,onConfirm:c,confirmText:n,cancelText:i,extraConfirmation:o,entityName:a}))};d()})}},o3=r(70345),o5=function(){var e=(0,(0,o3.ye)().isFeatureEnabled)("stockLocationService"),t=(0,en.useAdminStockLocations)({},{enabled:e}),r=t.stock_locations,n=t.refetch;return(0,B.useEffect)(function(){e&&n()},[e,n]),{stock_locations:r,getLocationNameById:function(e){var t;return null==r?void 0:null===(t=r.find(function(t){return t.id===e}))||void 0===t?void 0:t.name}}};function o6(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function o4(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){o6(o,n,i,a,l,"next",e)}function l(e){o6(o,n,i,a,l,"throw",e)}a(void 0)})}}function o8(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var o7=function(e){var t,r,n=e.setFullfilmentToShip,i=e.order,o=e.fulfillmentObj,a=o2(),l=(0,td.Z)(),s=(0,en.useAdminCancelFulfillment)(i.id),c=(0,en.useAdminCancelSwapFulfillment)(i.id),u=(0,en.useAdminCancelClaimFulfillment)(i.id),d=o5().getLocationNameById,f=o.fulfillment,p=!!(null===(r=f.tracking_links)||void 0===r?void 0:r.length),m=function(){switch(!0){case!!(null==f?void 0:f.claim_order_id):return{resourceId:f.claim_order_id,resourceType:"claim"};case!!(null==f?void 0:f.swap_id):return{resourceId:f.swap_id,resourceType:"swap"};default:return{resourceId:null==i?void 0:i.id,resourceType:"order"}}},y=(t=o4(function(){var e,t,r;return o8(this,function(n){switch(n.label){case 0:return t=(e=m()).resourceId,r=e.resourceType,[4,a({heading:"Cancel fulfillment?",text:"Are you sure you want to cancel the fulfillment?"})];case 1:if(!n.sent())return[2];switch(r){case"swap":return[2,c.mutate({swap_id:t,fulfillment_id:f.id},{onSuccess:function(){return l("Success","Successfully canceled swap","success")},onError:function(e){return l("Error",(0,tf.e)(e),"error")}})];case"claim":return[2,u.mutate({claim_id:t,fulfillment_id:f.id},{onSuccess:function(){return l("Success","Successfully canceled claim","success")},onError:function(e){return l("Error",(0,tf.e)(e),"error")}})];default:return[2,s.mutate(f.id,{onSuccess:function(){return l("Success","Successfully canceled fulfillment","success")},onError:function(e){return l("Error",(0,tf.e)(e),"error")}})]}return[2]}})}),function(){return t.apply(this,arguments)});return(0,F.jsxs)("div",{className:"flex w-full justify-between",children:[(0,F.jsxs)("div",{className:"flex flex-col space-y-1 py-4",children:[(0,F.jsx)("div",{className:"text-grey-90",children:f.canceled_at?"Fulfillment has been canceled":"".concat(o.title," Fulfilled by ").concat((0,iM.capitalize)(f.provider_id))}),(0,F.jsxs)("div",{className:"text-grey-50 flex",children:[f.shipped_at?"Tracking":"Not shipped",p&&f.tracking_links.map(function(e,t){return(0,F.jsx)(ow,{trackingLink:e},t)})]}),!f.canceled_at&&f.location_id&&(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsxs)("div",{className:"text-grey-50 font-semibold",children:[f.shipped_at?"Shipped":"Shipping"," from"," "]}),(0,F.jsxs)("div",{className:"flex items-center pt-2",children:[(0,F.jsx)(oE,{className:"mr-2",children:(0,F.jsx)(oZ.Z,{})}),d(f.location_id)]})]})]}),!f.canceled_at&&!f.shipped_at&&(0,F.jsx)("div",{className:"flex items-center space-x-2",children:(0,F.jsx)(eQ,{actions:[{label:"Mark Shipped",icon:(0,F.jsx)(oW,{size:"20"}),onClick:function(){return n(f)}},{label:"Cancel Fulfillment",icon:(0,F.jsx)(oq,{size:"20"}),onClick:function(){return y()}}]})})]})},o9=r(16390);function ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ae(e,t,r[t])})}return e}function ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function an(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ar(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var ai=(0,B.forwardRef)(function(e,t){var r=e.label,n=e.helperText,i=e.required,o=e.errors,a=e.name,l=e.children;return(0,F.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col",ref:t,children:[r&&(0,F.jsxs)("label",{className:"inter-small-semibold text-grey-50",id:"".concat(a,"_label"),children:[r,i&&(0,F.jsx)("span",{className:"text-rose-50",children:"*"})]}),l,a&&o?(0,F.jsx)(o9.Z,{errors:o,name:a,className:"-mt-0.5"}):n?(0,F.jsx)("p",{className:"inter-small-regular text-grey-50",children:n}):null]})}),ao=function(e){var t=e.innerProps,r=e.selectProps,n=r.isDisabled,i=r.isRtl,o=e.hasValue,a=e.cx,l=e.className,s=e.children;return(0,F.jsx)("div",an(at({},t),{className:a({"--is-disabled":n,"--is-rtl":i,"--has-value":o},(0,ec.Z)("pointer-events-auto relative",{"text-grey-40":n},l)),children:s}))},aa=function(e){var t=e.className,r=e.children,n=e.cx,i=e.innerProps,o=e.isMulti,a=e.hasValue,l=e.selectProps,s=l.value,c=l.inputValue,u=l.label,d=l.selectedPlaceholder;return o&&Array.isArray(s)?(0,F.jsxs)("div",an(at({},i),{className:n({"value-container":!0,"value-container--is-multi":o,"value-container--has-value":a},(0,ec.Z)("scrolling-touch group relative flex flex-1 flex-wrap items-center overflow-hidden",{"gap-2xsmall":o},t)),children:[(null==s?void 0:s.length)>0&&(0,F.jsx)("div",{className:"bg-grey-20 text-grey-50 px-small inter-small-semibold rounded-rounded gap-x-2xsmall flex h-7 cursor-default items-center",children:(0,F.jsx)("span",{children:s.length})}),(0,F.jsxs)("div",{className:"relative grow",children:[r,(null==s?void 0:s.length)>0&&""===c&&(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 absolute top-1/2 -translate-y-1/2",children:d||u||"Selected"})]})]})):(0,F.jsx)("div",an(at({},i),{className:n({"value-container":!0,"value-container--is-multi":o,"value-container--has-value":a},(0,ec.Z)("scrolling-touch relative flex flex-1 flex-wrap items-center overflow-hidden",{"gap-2xsmall":o},t)),children:r}))},al=function(e){var t=e.className,r=e.cx,n=e.innerProps,i=e.children;return(0,F.jsx)("div",an(at({},n),{className:r({"indicators-container":!0},(0,ec.Z)("text-grey-50 gap-x-small px-small flex items-center",t)),children:i}))};function as(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ac(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){as(e,t,r[t])})}return e}function au(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ad(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):au(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var af=function(e){var t=e.className,r=e.cx,n=e.children,i=e.innerRef,o=e.innerProps,a=e.isDisabled,l=e.isFocused,s=e.menuIsOpen,c=e.selectProps,u=c.size,d=c.customStyles,f=c.name;return(0,F.jsx)("div",ad(ac({ref:i},o),{id:f,className:r({control:!0,"control--is-disabled":a,"control--is-focused":l,"control--menu-is-open":s},(0,ec.Z)("rounded-rounded border-gray-20 bg-grey-5 focus-within:shadow-cta focus-within:border-violet-60 pl-small box-border flex overflow-hidden border p-0 transition-colors",{"h-xlarge":"sm"===u,"h-10":"md"===u||!u},t,null==d?void 0:d.control)),children:(0,F.jsx)("div",{className:(0,ec.Z)("flex flex-1 items-center",null==d?void 0:d.inner_control),children:n})}))},ap=function(e){var t=e.innerProps,r=e.cx,n=e.children,i=e.className,o=e.selectProps.menuIsOpen;return(0,F.jsx)("div",ad(ac({},t),{className:r({indicator:!0,"dropdown-indicator":!0},(0,ec.Z)("transition-all",{"rotate-180":o},i)),children:n||(0,F.jsx)(e4.Z,{size:16})}))},am=function(e){var t=e.innerProps,r=e.className,n=e.cx;return(0,F.jsx)("div",ad(ac({},t),{className:n({indicator:!0,"loading-indicator":!0},r),children:(0,F.jsx)(ei.Z,{size:"small",variant:"secondary"})}))},ay=function(e){var t=e.innerProps,r=e.className,n=e.cx,i=e.children;return(0,F.jsx)("div",ad(ac({},t),{role:"button","aria-label":"Clear selected options",className:n({indicator:!0,"clear-indicator":!0},r),children:i||(0,F.jsx)(t1.Z,{size:16})}))},ah=r(74138);let ab=ah.wx;function av(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ag(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){av(e,t,r[t])})}return e}function ax(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aj(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ax(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var aO=function(e){var t=e.className,r=e.cx,n=e.value,i=e.inputClassName;return(0,F.jsx)("div",{"data-value":n||"",className:r({"input-container":!0},t),children:(0,F.jsx)(ab.Input,aj(ag({},e),{className:r({input:!0,"input--is-disabled":!!e.isDisabled},(0,ec.Z)("inter-base-regular text-grey-90 caret-violet-60",i))}))})},aw=r(15052),aS=r.n(aw);function aP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){aP(e,t,r[t])})}return e}var aN=function(e){return aC({},omit(e,["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"]))},ak=function(e){return"object"==typeof e&&null!==e&&"isFixed"in e},a_=function(e){return"object"==typeof e&&null!==e&&"isDisabled"in e},aA=function(e){return"object"==typeof e&&null!==e&&"label"in e},aD=function(e){return"object"==typeof e&&null!==e&&"prefix"in e},aE=function(e){return"object"==typeof e&&null!==e&&"suffix"in e},aZ=function(e){return"object"==typeof e&&null!==e&&"__isNew__"in e},aI=function(e,t){var r=t.inputValue;return aA(e)?aZ(e)?e.label:(0,F.jsx)(aS(),{searchWords:[r],textToHighlight:e.label,highlightClassName:"bg-orange-10"}):void 0};function aT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){aT(e,t,r[t])})}return e}function aR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aR(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function az(e,t){if(null==e)return{};var r,n,i=aq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function aq(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var aF=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=az(e,["size","color"]);return(0,F.jsxs)("svg",aL(aM({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M10.8335 4.16663H2.50016",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10.8335 7.5H5.00016",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10.8335 10.8334H7.50016",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M17.5 14.1666L15 16.6666L12.5 14.1666",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M15 15V3.33337",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function aH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function aU(e){if(Array.isArray(e))return e}function aG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aV(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function aB(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function aW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){aG(e,t,r[t])})}return e}function aQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):aQ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function a$(e,t){return aU(e)||aV(e,t)||aK(e,t)||aB()}function aK(e,t){if(e){if("string"==typeof e)return aH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aH(e,t)}}var aJ=function(e){var t=e.className,r=e.cx,n=e.children,i=e.innerProps,o=e.innerRef,a=e.placement,l=e.selectProps,s=l.onMenuClose,c=l.menuIsOpen,u=l.customStyles,d=l.styles;return(0,B.useEffect)(function(){var e=function(){c&&s()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}},[c,s]),(0,F.jsx)("div",aY(aW({},i),{ref:o,style:aW({},null==d?void 0:d.menu),className:r({menu:!0},(0,ec.Z)("border-border bg-grey-0 rounded-rounded border-grey-20 shadow-dropdown mb-base absolute z-[60] w-full overflow-hidden border",{"top-[calc(100%+8px)]":"bottom"===a,"bottom-full":"top"===a},t,null==u?void 0:u.menu)),children:n}))},aX=function(e){var t=e.cx,r=e.onChange,n=e.options,i=e.value,o=a$((0,B.useState)(!1),2),a=o[0],l=o[1],s=(0,B.useRef)(null),c=(0,B.useMemo)(function(){if(Array.isArray(i)){var e=n.filter(function(e){return!a_(e)});return i.length===e.length}return!1},[n,i]),u=(0,B.useCallback)(function(){if(c)r([],{action:"deselect-option",option:[]});else{var e=n.filter(function(e){return!a_(e)});r(e,{action:"select-option",option:e})}},[c,r,n]);return(0,B.useEffect)(function(){return l(null!==document.activeElement&&document.activeElement===s.current),function(){l(!1)}},[]),(0,F.jsxs)(Y.Z,{ref:s,variant:"secondary",size:"small",className:t({option:!0,"option--is-focused":a},(0,ec.Z)("mx-base mb-2xsmall h-xlarge")),type:"button",onClick:u,children:[(0,F.jsx)(aF,{size:16}),(0,F.jsx)("span",{className:"inter-small-semibold",children:c?"Deselect All":"Select All"})]})},a0=function(e){var t=e.className,r=e.children,n=e.cx,i=e.isMulti,o=e.selectProps,a=o.selectAll,l=o.value,s=o.onChange,c=e.options;return(0,F.jsxs)(ab.MenuList,aY(aW({},e),{className:n({"menu-list":!0,"menu-list--is-multi":i},(0,ec.Z)("py-xsmall no-scrollbar flex flex-col overflow-y-auto",t)),children:[i&&a&&(0,F.jsx)(aX,{cx:n,onChange:s,options:c,value:l}),r]}))},a1=function(e){var t=e.innerProps,r=e.cx,n=e.className,i=e.selectProps.size,o=function(){return(0,F.jsx)("div",{className:(0,ec.Z)("px-base hover:bg-grey-5 flex w-full items-center transition-colors",{"h-xlarge":"sm"===i,"h-10":"md"===i||!i}),children:(0,F.jsx)("div",{className:"bg-grey-10 h-xsmall rounded-rounded w-1/4 animate-pulse"})})};return(0,F.jsxs)("div",aY(aW({},t),{className:r({"menu-notice":!0,"menu-notice--loading":!0},(0,ec.Z)("flex flex-col",n)),children:[(0,F.jsx)(o,{}),(0,F.jsx)(o,{}),(0,F.jsx)(o,{})]}))},a2=function(e){var t=e.isSelected,r=e.isDisabled,n=e.isFocused,i=e.children,o=e.cx,a=e.className,l=e.innerProps,s=e.innerRef,c=e.selectProps,u=c.hideSelectedOptions,d=c.isMulti,f=c.size,p=c.truncateOption,m=aD(e.data)?e.data.prefix:null,y=aE(e.data)?e.data.suffix:null;return(0,F.jsxs)("div",aY(aW({role:"button",className:o({option:!0,"option--is-selected":t,"option--is-disabled":r,"option--is-focused":n},(0,ec.Z)("py-xsmall px-base hover:bg-grey-5 flex items-center justify-between transition-colors",{"text-grey-30 cursor-not-allowed select-none":r,"bg-grey-10":n&&!r,hidden:u&&t},{"h-xlarge":"sm"===f,"min-h-10":"md"===f||!f},a)),ref:s,"data-diabled":!!r||void 0,"aria-disabled":!!r||void 0,tabIndex:r?-1:0},l),{children:[(0,F.jsxs)("div",{className:"gap-x-small flex flex-1 items-center",children:[d&&(0,F.jsx)(a3,{isSelected:t,isDisabled:r}),(0,F.jsxs)("div",{className:(0,ec.Z)("gap-x-xsmall inter-base-regular flex flex-1 items-center justify-between",{truncate:!!p}),children:[m&&(0,F.jsx)("span",{className:"inter-base-semibold",children:m}),(0,F.jsx)("span",{className:"w-full",children:i}),y&&(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 justify-self-end",children:y})]})]}),!d&&(0,F.jsx)("div",{className:"ml-xsmall w-5",children:t&&(0,F.jsx)(rT,{size:16})})]}))},a3=function(e){var t=e.isSelected,r=e.isDisabled;return(0,F.jsx)("div",{className:(0,ec.Z)("w-base h-base text-grey-0 border-grey-30 rounded-base flex justify-center border transition-colors",{"bg-violet-60 border-violet-60":t,"bg-grey-5":r}),children:(0,F.jsx)("span",{className:"self-center",children:t&&(0,F.jsx)(rT,{size:10})})})};function a5(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){a5(e,t,r[t])})}return e}function a4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a8(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a4(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var a7=function(e){var t=e.innerProps,r=e.children,n=e.className,i=e.cx;return(0,F.jsx)("div",a8(a6({},t),{className:i({placeholder:!0},(0,ec.Z)("inter-base-regular text-grey-50 absolute top-1/2 -translate-y-1/2 select-none",n)),children:r}))},a9=r(4602);function le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){le(e,t,r[t])})}return e}function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ln(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lr(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var li={ClearIndicator:ay,DropdownIndicator:ap,LoadingIndicator:am,SelectContainer:ao,Control:af,Input:aO,Placeholder:a7,Menu:aJ,MenuList:a0,Option:a2,SingleValue:function(e){var t,r,n,i,o=e.innerProps,a=e.children,l=e.cx,s=e.className,c=e.isDisabled,u=e.data,d=e.getValue,f=aD(u)?u.prefix:null,p=(r=d()).length&&null!==(t=r[0].label)&&void 0!==t?t:null,m=(0,B.useRef)(null);return(0,F.jsx)(a9.Z,{className:(0,ec.Z)({hidden:!((n=m.current)&&null!==(i=n.offsetParent)&&void 0!==i&&i.offsetWidth&&n.offsetParent.offsetWidth<n.scrollWidth)||!p}),delayDuration:1e3,content:(0,F.jsx)("div",{children:p}),children:(0,F.jsx)("div",ln(lt({},o),{ref:m,className:l({"single-value":!0,"single-value--is-disabled":c},(0,ec.Z)("absolute top-1/2 -translate-y-1/2 overflow-hidden overflow-ellipsis whitespace-nowrap",s)),children:(0,F.jsxs)("div",{className:"gap-x-xsmall inter-base-regular flex items-center",children:[f&&(0,F.jsx)("span",{className:"inter-base-semibold",children:f}),a]})}))})},MultiValue:function(){return null},MultiValueContainer:function(){return null},MultiValueRemove:function(){return null},ValueContainer:aa,IndicatorsContainer:al,LoadingMessage:a1,IndicatorSeparator:null},lo=r(47184),la=r.n(lo);function ll(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ls(e){if(Array.isArray(e))return e}function lc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lu(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ld(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){lc(e,t,r[t])})}return e}function lp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lm(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lp(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ly(e,t){if(null==e)return{};var r,n,i=lh(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lh(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function lb(e,t){return ls(e)||lu(e,t)||lv(e,t)||ld()}function lv(e,t){if(e){if("string"==typeof e)return ll(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ll(e,t)}}var lg=function(e){var t=e.components,r=void 0===t?{}:t,n=e.isMulti,i=(e.closeMenuOnScroll,e.hideSelectedOptions),o=e.closeMenuOnSelect,a=e.label,l=e.size,s=e.options,c=e.onChange,u=e.styles,d=ly(e,["components","isMulti","closeMenuOnScroll","hideSelectedOptions","closeMenuOnSelect","label","size","options","onChange","styles"]),f=lb((0,B.useState)(s||[]),2),p=f[0],m=f[1],y=function(e){var t=e||[],r=p.filter(function(e){return!t.find(function(t){return la()(t,e)})});m(t.sort(function(e,t){return aA(e)&&aA(t)?e.label>t.label?1:t.label>e.label?-1:0:0}).concat(r))};return(0,B.useEffect)(function(){n&&s?y(d.value):m(s||[])},[s,d.value,n]),lf({label:a,components:lf({},li,r),styles:lf({menuPortal:function(e){return lm(lf({},e),{zIndex:60})}},u),isMulti:n,closeMenuOnScroll:!0,closeMenuOnSelect:void 0!==o?o:!0!==n,hideSelectedOptions:void 0!==i&&i,menuPosition:"fixed",maxMenuHeight:"sm"===l?154:188,formatOptionLabel:aI,size:l,options:p,onChange:function(e,t){n&&y(e),c&&c(e,t)}},d)};function lx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){lx(e,t,r[t])})}return e}function lO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var lS=(0,B.forwardRef)(function(e,t){var r,n=lg(e),i=n.label,o=n.required,a=n.helperText,l=n.name,s=n.errors,c=(0,B.useRef)(null),u=(0,B.useContext)(tp.t).portalRef;return(0,F.jsx)(ai,{ref:c,label:i,htmlFor:l,helperText:a,required:o,name:l,errors:s,children:(0,F.jsx)(ah.ZP,lw(lj({"aria-labelledby":"".concat(l,"_label"),ref:t,name:l},n),{menuPortalTarget:(null==u?void 0:null===(r=u.current)||void 0===r?void 0:r.lastChild)||null,menuShouldBlockScroll:!0}))})});function lP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lC(e){if(Array.isArray(e))return e}function lN(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function lk(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){lN(o,n,i,a,l,"next",e)}function l(e){lN(o,n,i,a,l,"throw",e)}a(void 0)})}}function l_(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function lA(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lD(e,t){return lC(e)||l_(e,t)||lE(e,t)||lA()}function lE(e,t){if(e){if("string"==typeof e)return lP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lP(e,t)}}function lZ(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var lI=function(e){var t,r,n,i,o,a=e.order,l=e.onDismiss,s=lD(B.useState(""),2),c=s[0],u=s[1],d=(0,rk.N)(c,400),f=(0,en.useAdminCustomers)({q:d,has_account:!0,limit:30,offset:0}).customers,p=(0,td.Z)(),m=lD(B.useState(null),2),y=m[0],h=m[1],b=(0,en.useAdminUpdateOrder)(a.id),v=b.mutate,g=b.isLoading,x=(0,en.useAdminCustomer)((null==y?void 0:y.value)||""),j=x.customer,O=x.isLoading,w=(t=lk(function(){var e;return lZ(this,function(t){return O||!j||(j.id===a.customer_id?(p("Info","Customer is already the owner of the order","info"),l()):v({customer_id:null===(e=j)||void 0===e?void 0:e.id,email:j.email},{onSuccess:function(){p("Success","Successfully transferred order to different customer","success"),l()},onError:function(){p("Error","Could not transfer order to different customer","error")}})),[2]})}),function(){return t.apply(this,arguments)}),S=function(e){if(e)return{value:e.id,label:e.first_name&&e.last_name?"".concat(e.first_name," ").concat(e.last_name," - ").concat(e.email):e.first_name?"".concat(e.first_name," - ").concat(e.email):e.last_name?"".concat(e.last_name," - ").concat(e.email):"".concat(e.email)}},P=B.useMemo(function(){return(null==f?void 0:f.map(function(e){return S(e)}).filter(function(e){return!!e}))||[]},[f]);return(0,F.jsx)(tp.Z,{handleClose:l,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:l,children:(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"Transfer order"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"space-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{className:"space-y-xsmall",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Order"}),(0,F.jsxs)("div",{className:"border-grey-20 rounded-rounded py-xsmall flex items-center justify-between border px-2.5",children:[(0,F.jsx)(oP.Z,{variant:"default",children:(0,F.jsx)("span",{className:"text-grey-60",children:"#".concat(a.display_id)})}),(0,F.jsx)("span",{className:"text-grey-50",children:iW()(new Date(a.created_at)).format("MMM D, H:mm A")}),(0,F.jsx)(oj,{status:a.payment_status}),(0,F.jsx)(oO,{status:a.fulfillment_status}),(0,F.jsx)(ob,{currency:a.currency_code,totalAmount:a.total})]})]}),(0,F.jsxs)("div",{className:"grid w-full grid-cols-2",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"Current Owner"}),(0,F.jsx)("span",{className:"inter-base-regular",children:"The customer currently related to this order"})]}),(0,F.jsx)("div",{className:"flex items-center",children:(0,F.jsx)(lS,{isDisabled:!0,value:S({id:a.customer_id,email:a.email,first_name:a.customer.first_name||(null===(r=a.billing_address)||void 0===r?void 0:r.first_name)||(null===(n=a.shipping_address)||void 0===n?void 0:n.first_name)||void 0,last_name:a.customer.last_name||(null===(i=a.billing_address)||void 0===i?void 0:i.last_name)||(null===(o=a.shipping_address)||void 0===o?void 0:o.last_name)||void 0})})})]}),(0,F.jsxs)("div",{className:"grid w-full grid-cols-2",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"New Owner"}),(0,F.jsx)("span",{className:"inter-base-regular",children:"The customer to transfer this order to"})]}),(0,F.jsx)("div",{className:"flex items-center",children:(0,F.jsx)(lS,{value:y,onChange:function(e){h(e)},isMulti:!1,options:P,isSearchable:!0,onInputChange:function(e){u(e)},truncateOption:!0})})]})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)("div",{className:"flex w-full justify-end",children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex",children:[(0,F.jsx)(Y.Z,{onClick:l,size:"small",className:"border-grey-20 border",variant:"ghost",children:"Cancel"}),(0,F.jsx)(Y.Z,{type:"submit",size:"small",variant:"primary",loading:g,disabled:g||!y||O||!j,onClick:w,children:"Confirm"})]})})})]})})};function lT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function lM(e){if(Array.isArray(e))return e}function lR(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function lL(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lz(e,t){return lM(e)||lR(e,t)||lq(e,t)||lL()}function lq(e,t){if(e){if("string"==typeof e)return lT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lT(e,t)}}var lF=function(e){var t=lz((0,B.useState)(0),2),r=t[0],n=t[1],i=(0,B.useRef)(new ResizeObserver(function(e){n(e[0].contentRect.width)}));return(0,B.useEffect)(function(){var t=e.current,r=i.current;return t&&r&&r.observe(t),function(){r&&t&&r.unobserve(t)}},[e,i]),r};function lH(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){lH(e,t,r[t])})}return e}function lG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lV(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lG(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function lB(e,t){if(null==e)return{};var r,n,i=lW(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lW(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var lQ=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=lB(e,["size","color"]);return(0,F.jsxs)("svg",lV(lU({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M18.2222 4H5.77778C4.79594 4 4 4.79594 4 5.77778V18.2222C4 19.2041 4.79594 20 5.77778 20H18.2222C19.2041 20 20 19.2041 20 18.2222V5.77778C20 4.79594 19.2041 4 18.2222 4Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M9.5 11C10.3284 11 11 10.3284 11 9.5C11 8.67157 10.3284 8 9.5 8C8.67157 8 8 8.67157 8 9.5C8 10.3284 8.67157 11 9.5 11Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M20 15.0909L15.625 11L6 20",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},lY=function(){return(0,F.jsx)("div",{className:"rounded-soft bg-grey-5 flex h-full w-full items-center justify-center",children:(0,F.jsx)(lQ,{size:12})})},l$=function(e){switch(e){case"captured":return(0,F.jsx)(nN.Z,{variant:"success",title:"Paid"});case"awaiting":return(0,F.jsx)(nN.Z,{variant:"warning",title:"Awaiting"});case"requires":return(0,F.jsx)(nN.Z,{variant:"danger",title:"Requires action"});default:return(0,F.jsx)(nN.Z,{variant:"primary",title:"N/A"})}},lK=function(e){switch(e){case"fulfilled":return(0,F.jsx)(nN.Z,{variant:"success",title:"Fulfilled"});case"shipped":return(0,F.jsx)(nN.Z,{variant:"success",title:"Shipped"});case"not_fulfilled":return(0,F.jsx)(nN.Z,{variant:"default",title:"Not fulfilled"});case"partially_fulfilled":return(0,F.jsx)(nN.Z,{variant:"warning",title:"Partially fulfilled"});case"partially_shipped":return(0,F.jsx)(nN.Z,{variant:"warning",title:"Partially shipped"});case"requires":return(0,F.jsx)(nN.Z,{variant:"danger",title:"Requires action"});default:return(0,F.jsx)(nN.Z,{variant:"primary",title:"N/A"})}},lJ=function(){return(0,B.useMemo)(function(){return[{Header:"Order",accessor:"display_id",Cell:function(e){var t=e.value;return(0,F.jsxs)("span",{className:"text-grey-90",children:["#",t]})}},{accessor:"items",Cell:function(e){var t=e.value,r=(0,B.useRef)(null),n=lF(r),i=(0,B.useMemo)(function(){if(!t||0===t.length)return{visibleItems:[],remainder:0};var e=Math.max(Math.floor(n/20)-1,1);return{visibleItems:t.slice(0,e),remainder:t.length-e}},[t,n]),o=i.visibleItems,a=i.remainder;return t?(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("div",{ref:r,className:"gap-x-xsmall flex",children:o.map(function(e){return(0,F.jsx)(a9.Z,{content:e.title,children:(0,F.jsx)("div",{className:"rounded-rounded flex h-[35px] w-[25px] items-center justify-center overflow-hidden",children:e.thumbnail?(0,F.jsx)("img",{className:"object-cover",src:e.thumbnail,alt:e.title}):(0,F.jsx)(lY,{})})},e.id)})}),a>0&&(0,F.jsxs)("span",{className:"text-grey-40 inter-small-regular",children:["+ ",a," more"]})]}):null}},{Header:"Date",accessor:"created_at",Cell:function(e){var t=e.value;return iW()(t).format("DD MMM YYYY hh:mm")}},{Header:"Fulfillment",accessor:"fulfillment_status",Cell:function(e){return lK(e.value)}},{Header:"Status",accessor:"payment_status",Cell:function(e){return l$(e.value)}},{Header:function(){return(0,F.jsx)("div",{className:"text-right",children:"Total"})},accessor:"total",Cell:function(e){var t=e.value,r=e.row.original.currency_code;return(0,F.jsx)("div",{className:"text-right",children:(0,oy.j5)({amount:t,currencyCode:r})})}}]},[])};function lX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l0(e){if(Array.isArray(e))return e}function l1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l2(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function l3(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l1(e,t,r[t])})}return e}function l6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l6(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function l8(e,t){return l0(e)||l2(e,t)||l7(e,t)||l3()}function l7(e,t){if(e){if("string"==typeof e)return lX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lX(e,t)}}var l9=15,se=function(e){var t=e.id,r=l8((0,B.useState)(null),2),n=r[0],i=r[1],o=l8((0,B.useState)(0),2),a=o[0],l=o[1],s=(0,en.useAdminOrders)({customer_id:t,offset:a,limit:l9},{keepPreviousData:!0}),c=s.orders,u=s.isLoading,d=s.count,f=lJ(),p=(0,rN.useTable)({columns:f,data:c||[],manualPagination:!0,initialState:{pageSize:l9,pageIndex:Math.floor(a/l9)},pageCount:Math.ceil(d||0/l9),autoResetPage:!1},rN.usePagination),m=p.getTableProps,y=p.getTableBodyProps,h=p.headerGroups,b=p.rows,v=p.prepareRow,g=p.canPreviousPage,x=p.canNextPage,j=p.pageCount,O=p.nextPage,w=p.previousPage,S=p.state.pageIndex;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(nC,{hasPagination:!0,isLoading:u,pagingState:{count:d,offset:a,pageSize:a+b.length,title:"Orders",currentPage:S+1,pageCount:j,nextPage:function(){x&&(l(a+l9),O())},prevPage:function(){g&&(l(a-l9),w())},hasNext:x,hasPrev:g},children:(0,F.jsxs)(nf,l4(l5({},m()),{children:[(0,F.jsx)(nf.Head,{children:h.map(function(e){return(0,F.jsx)(nf.HeadRow,l4(l5({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,l4(l5({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,l4(l5({},y()),{children:b.map(function(e){return v(e),(0,F.jsx)(nf.Row,l4(l5({forceDropdown:!0,actions:[{label:"Transfer order",icon:(0,F.jsx)($.Z,{size:"20"}),onClick:function(){i(e.original)}}]},e.getRowProps()),{linkTo:"/a/orders/".concat(e.original.id),children:e.cells.map(function(e){return(0,F.jsx)(nf.Cell,l4(l5({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))}),n&&(0,F.jsx)(lI,{onDismiss:function(){return i(null)},order:n})]})},st=r(42207),sr=function(e){return e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)};function sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function si(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){sn(e,t,r[t])})}return e}function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sa(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):so(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var sl=function(e){var t=e.handleClose,r=e.customer,n=(0,tR.cI)({defaultValues:ss(r)}),i=n.register,o=n.reset,a=n.handleSubmit,l=n.formState.isDirty,s=(0,td.Z)(),c=(0,en.useAdminUpdateCustomer)(r.id),u=a(function(e){c.mutate({first_name:e.first_name,last_name:e.last_name,phone:e.phone,email:e.email,metadata:rd(e.metadata)},{onSuccess:function(){t(),s("Success","Successfully updated customer","success")},onError:function(e){t(),s("Error",(0,tf.e)(e),"error")}})});return(0,B.useEffect)(function(){o(ss(r))},[r]),(0,F.jsx)(tp.Z,{handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Customer Details"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold text-grey-90 mb-4",children:"General"}),(0,F.jsxs)("div",{className:"flex w-full space-x-2",children:[(0,F.jsx)(ry.Z,sa(si({label:"First Name"},i("first_name")),{placeholder:"Lebron"})),(0,F.jsx)(ry.Z,sa(si({label:"Last Name"},i("last_name")),{placeholder:"James"}))]})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold text-grey-90 mb-4",children:"Contact"}),(0,F.jsxs)("div",{className:"flex space-x-2",children:[(0,F.jsx)(ry.Z,sa(si({label:"Email"},i("email",{validate:function(e){return!!sr(e)},disabled:r.has_account})),{prefix:r.has_account&&(0,F.jsx)(st.Z,{size:16,className:"text-grey-50"}),disabled:r.has_account})),(0,F.jsx)(ry.Z,sa(si({label:"Phone number"},i("phone")),{placeholder:"+45 42 42 42 42"}))]})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(n,"metadata")})]})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:t,className:"mr-2",type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{loading:c.isLoading,disabled:!l||c.isLoading,variant:"primary",size:"small",onClick:u,children:"Save and close"})]})})]})})},ss=function(e){return{first_name:e.first_name,email:e.email,last_name:e.last_name,phone:e.phone,metadata:rf(e.metadata)}};function sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function su(e){if(Array.isArray(e))return e}function sd(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function sf(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sp(e,t){return su(e)||sd(e,t)||sm(e,t)||sf()}function sm(e,t){if(e){if("string"==typeof e)return sc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sc(e,t)}}var sy=function(){var e=(0,V.useParams)().id,t=(0,V.useNavigate)(),r=(0,en.useAdminCustomer)(e),n=r.customer,i=r.isLoading,o=r.error,a=sp((0,B.useState)(!1),2),l=a[0],s=a[1],c=[{label:"Edit",onClick:function(){return s(!0)},icon:(0,F.jsx)(eC,{size:20})}],u=(0,ig.e)().getWidgets;if(o){var d=ix(o);if(d&&404===d.status)return t("/404"),null;throw o}return i||!n?(0,F.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}):(0,F.jsxs)("div",{children:[(0,F.jsx)(eb,{label:"Back to Customers",path:"/a/customers",className:"mb-xsmall"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[u("customer.details.before").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:n,injectionZone:"customer.details.before",widget:e},t)}),(0,F.jsxs)(tM,{children:[(0,F.jsxs)("div",{className:"flex w-full items-start justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-base flex w-full items-center",children:[(0,F.jsx)("div",{className:"h-[64px] w-[64px]",children:(0,F.jsx)(iY.Z,{user:n,font:"inter-2xlarge-semibold w-full h-full",color:"bg-fuschia-40"})}),(0,F.jsxs)("div",{className:"flex grow flex-col",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold text-grey-90 max-w-[50%] truncate",children:(null==n?void 0:n.first_name)&&(null==n?void 0:n.last_name)?"".concat(n.first_name," ").concat(n.last_name):null==n?void 0:n.email}),(0,F.jsx)("h3",{className:"inter-small-regular text-grey-50",children:n.email})]})]}),(0,F.jsx)(eQ,{actions:c,forceDropdown:!0})]}),(0,F.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"First seen"}),(0,F.jsx)("div",{children:iW()(n.created_at).format("DD MMM YYYY")})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Phone"}),(0,F.jsx)("div",{className:"max-w-[200px] truncate",children:n.phone||"N/A"})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Orders"}),(0,F.jsx)("div",{children:n.orders.length})]}),(0,F.jsxs)("div",{className:"h-100 flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"User"}),(0,F.jsx)("div",{className:"h-50 flex items-center justify-center",children:(0,F.jsx)(nN.Z,{variant:n.has_account?"success":"danger",title:n.has_account?"Registered":"Guest"})})]})]})]}),(0,F.jsx)(tI,{title:"Orders (".concat(n.orders.length,")"),subtitle:"An overview of Customer Orders",children:(0,F.jsx)("div",{className:"flex  grow flex-col",children:(0,F.jsx)(se,{id:n.id})})}),u("customer.details.after").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:n,injectionZone:"customer.details.after",widget:e},t)}),(0,F.jsx)(tT,{data:n,title:"Raw customer"})]}),l&&n&&(0,F.jsx)(sl,{customer:n,handleClose:function(){return s(!1)}})]})},sh=r(14567),sb=r(68926),sv=r.n(sb);function sg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sx(e){if(Array.isArray(e))return e}function sj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sO(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function sw(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){sj(e,t,r[t])})}return e}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sP(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function sN(e,t){return sx(e)||sO(e,t)||sk(e,t)||sw()}function sk(e,t){if(e){if("string"==typeof e)return sg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sg(e,t)}}!function(e){e[e.Up=1]="Up",e[e.Down=-1]="Down"}(u||(u={})),function(e){e.SET_QUERY="setQuery",e.SET_FILTERS="setFilters",e.SET_OFFSET="setOffset",e.SET_DEFAULTS="setDefaults"}(d||(d={}));var s_=["q","offset","limit"],sA={limit:15,offset:0};function sD(e,t){t=t||{};var r=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=sN(o.value,2),s=l[0],c=l[1];"q"===s?"string"==typeof c&&(c?t.q=c:delete t.q):("offset"===s||"limit"===s)&&(t[s]=c)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return t}function sE(e){return sD(e)}function sZ(e){return sD(e,sS({},e.additionalFilters))}function sI(e,t){var r=sS({},sA,t);if(!e)return r;var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=sN(l.value,2),u=c[0],d=c[1];if("string"==typeof d&&s_.includes(u))switch(u){case"offset":case"limit":r[u]=parseInt(d);break;case"q":r.q=d}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return r}function sT(e,t){if(t.type===d.SET_FILTERS){var r=sS({},e);return sv()(r,t.path,t.payload),r}return t.type===d.SET_QUERY?sC(sS({},e),{q:t.payload,offset:0}):t.type===d.SET_OFFSET?sC(sS({},e),{offset:t.payload}):e}var sM=function(e){var t=location.search.substring(1),r=sN((0,B.useReducer)(sT,sI(t,e)),2),n=r[0],i=r[1],o=function(){var e=sE(n);return iL().stringify(e,{skipNulls:!0})},a=(0,B.useMemo)(function(){return sZ(n)},[n]),l=(0,B.useMemo)(function(){return sE(n)},[n]),s=(0,B.useMemo)(function(){return o()},[n]);return sC(sS({},n),{filters:sS({},n),representationObject:l,representationString:s,queryObject:a,paginate:function(e){if(e===u.Up){var t=n.offset+n.limit;i({type:d.SET_OFFSET,payload:t})}else{var r=Math.max(n.offset-n.limit,0);i({type:d.SET_OFFSET,payload:r})}},getQueryObject:sZ,getQueryString:function(){return iL().stringify(sZ(n),{skipNulls:!0})},setQuery:function(e){return i({type:d.SET_QUERY,payload:e})},setFilters:function(e,t){return i({type:d.SET_FILTERS,path:e,payload:t})},setDefaultFilters:function(e){i({type:d.SET_DEFAULTS,payload:e})}})};function sR(e){(0,B.useEffect)(function(){var t=new URL(window.location.href),r=!0,n=!1,i=void 0;try{for(var o,a=t.searchParams.keys()[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;l in e||t.searchParams.delete(l)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}for(var s in e)t.searchParams.set(s,e[s].toString());window.history.replaceState(null,"",t.toString())},[e])}function sL(e){var t=(0,iM.sortBy)(e.groups,"name");if(!t.length)return null;var r=t.length-1,n=t[0].name,i=t.map(function(e){return e.name}).join(", ");return(0,F.jsxs)("div",{title:i,className:"text-small",children:[(0,F.jsx)("span",{children:n}),!!r&&(0,F.jsxs)("span",{className:"text-grey-40",children:[" + ",r," more"]})]})}function sz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){sz(e,t,r[t])})}return e}var sF=[{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center gap-1",children:["Title ",(0,F.jsx)(r8,{size:16})]})},accessor:"name"},{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center gap-1",children:["Members ",(0,F.jsx)(r8,{size:16})]})},id:"members",accessor:function(e){var t;return null===(t=e.customers)||void 0===t?void 0:t.length}}],sH=[{id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,F.jsx)(rF,sq({},t()))},Cell:function(e){var t=e.row;return(0,F.jsx)(nf.Cell,{onClick:function(e){return e.stopPropagation()},className:"w-[100px]",children:(0,F.jsx)(rF,sq({},t.getToggleRowSelectedProps()))})}},{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center gap-1",children:["Name ",(0,F.jsx)(r8,{size:16})]})},id:"avatar",Cell:function(e){var t=e.row;return(0,F.jsx)(i$,{customer:t.original,color:iQ(t.index)})}},{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center gap-1",children:["Email ",(0,F.jsx)(r8,{size:16})]})},accessor:"email"},{accessor:"groups",Header:function(){return(0,F.jsx)("div",{className:"text-left",children:"Segments"})},Cell:function(e){var t=e.cell.value;return(0,F.jsx)(sL,{groups:t})}}],sU=[{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center gap-1",children:["Name ",(0,F.jsx)(r8,{size:16})]})},id:"avatar",Cell:function(e){var t=e.row;return(0,F.jsx)(i$,{customer:t.original,color:iQ(t.index)})}},{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center gap-1",children:["Email ",(0,F.jsx)(r8,{size:16})]})},accessor:"email"},{accessor:"groups",disableSortBy:!0,Header:"Groups",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(sL,{groups:t})}},{Header:"",id:"settings-col"}];function sG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){sG(e,t,r[t])})}return e}function sB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sW(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sB(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var sQ={additionalFilters:{expand:"customers"},limit:15,offset:0};function sY(){return(0,F.jsx)("div",{className:"center flex h-full min-h-[756px] items-center justify-center",children:(0,F.jsx)("span",{className:"text-xs text-gray-400",children:"No customer groups yet"})})}function s$(e){return(0,F.jsx)(nf.HeadCell,sW(sV({className:"w-[100px]"},e.col.getHeaderProps(e.col.getSortByToggleProps())),{children:e.col.render("Header")}))}function sK(e){return(0,F.jsx)(nf.HeadRow,sW(sV({},e.headerGroup.getHeaderGroupProps()),{children:e.headerGroup.headers.map(function(e){return(0,F.jsx)(s$,{col:e},e.id)})}))}function sJ(e){var t=e.row,r=(0,V.useNavigate)(),n=[{label:"Details",onClick:function(){return r(t.original.id)},icon:(0,F.jsx)(iV,{size:20})},{label:"Delete",onClick:function(){},icon:(0,F.jsx)(eZ,{size:20}),variant:"danger"}];return(0,F.jsx)(nf.Row,sW(sV({color:"inherit",actions:n,linkTo:e.row.original.id},e.row.getRowProps()),{children:e.row.cells.map(function(e,t){return(0,F.jsx)(nf.Cell,sW(sV({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))}function sX(e){var t,r=e.customerGroups,n=e.queryObject,i=e.count,o=e.paginate,a=e.setQuery,l=e.isLoading,s={columns:sF,data:r||[],initialState:{pageSize:n.limit,pageIndex:n.offset/n.limit},pageCount:Math.ceil(i/n.limit),manualPagination:!0,autoResetPage:!1},c=(0,rN.useTable)(s,rN.useSortBy,rN.usePagination);return(0,F.jsx)(nC,{isLoading:l,hasPagination:!0,numberOfRows:n.limit,pagingState:{count:i,offset:n.offset,pageSize:n.offset+c.rows.length,title:"Customer groups",currentPage:c.state.pageIndex+1,pageCount:c.pageCount,nextPage:function(){c.canNextPage&&(o(1),c.nextPage())},prevPage:function(){c.canPreviousPage&&(o(-1),c.previousPage())},hasNext:c.canNextPage,hasPrev:c.canPreviousPage},children:(0,F.jsxs)(nf,sW(sV({enableSearch:!0,handleSearch:function(e){a(e),e&&c.gotoPage(0)},searchValue:n.q},c.getTableProps()),{children:[(0,F.jsx)(nf.Head,{children:null===(t=c.headerGroups)||void 0===t?void 0:t.map(function(e,t){return(0,F.jsx)(sK,{headerGroup:e},t)})}),(0,F.jsx)(nf.Body,sW(sV({},c.getTableBodyProps()),{children:c.rows.map(function(e){return c.prepareRow(e),(0,F.jsx)(sJ,{row:e},e.id)})}))]}))})}function s0(){var e=sM(sQ),t=(0,en.useAdminCustomerGroups)(e.queryObject),r=t.customer_groups,n=t.isLoading,i=t.count;return(sR(e.representationObject),(null==r?void 0:r.length)||e.queryObject.q)?(0,F.jsx)(sX,sV({count:void 0===i?0:i,customerGroups:r||[],isLoading:n},e)):n?null:(0,F.jsx)(sY,{})}var s1=r(94713);function s2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s3=function(e){var t=e.views,r=e.activeView,n=void 0===r?t[0]:r,i=e.setActiveView;return(0,F.jsx)("div",{className:"inter-large-semibold gap-x-base text-grey-40 flex",children:t.map(function(e,t){return(0,F.jsx)("div",{className:(0,ec.Z)("cursor-pointer",s2({},"text-grey-90",e===n)),onClick:function(){i&&i(e)},children:(0,iM.capitalize)(e)},t)})})};function s5(e){var t=(0,V.useNavigate)();return(0,F.jsx)(s3,{setActiveView:function(e){"customers"===e?t("/a/customers"):t("/a/customers/groups")},views:["customers","groups"],activeView:e.activeView})}var s6=r(79867);function s4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){s4(e,t,r[t])})}return e}function s7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s9(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s7(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var ce=function(e){var t=e.form,r=t.register,n=t.path,i=t.formState.errors;return(0,F.jsx)("div",{children:(0,F.jsx)(ry.Z,s9(s8({label:"Name",required:!0},r(n("name"),{required:s6.Z.required("Name")})),{errors:i}))})};function ct(e){var t=e.customerGroup,r=e.onClose,n=e.open,i=(0,tR.cI)({defaultValues:cr(t)}),o=(0,en.useAdminUpdateCustomerGroup)(null==t?void 0:t.id),a=o.mutate;o.isLoading;var l=(0,en.useAdminCreateCustomerGroup)(),s=l.mutate;l.isLoading;var c=(0,td.Z)(),u=i.reset,d=i.handleSubmit;(0,B.useEffect)(function(){n&&u(cr(t))},[t,n,u]);var f=d(function(e){var n=e.general,i=e.metadata,o=function(){c(t?"Group Updated":"Group Created",t?"The customer group has been updated":"The customer group has been created","success"),r()},l=function(e){c("Error",(0,tf.e)(e),"error")};t?a({name:n.name,metadata:rd(i)},{onSuccess:o,onError:l}):s({name:n.name,metadata:rd(i)},{onSuccess:o,onError:l}),r()});return(0,F.jsx)(tp.Z,{open:n,handleClose:r,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:r,children:(0,F.jsxs)("span",{className:"inter-xlarge-semibold",children:[t?"Edit":"Create a New"," Customer Group"]})}),(0,F.jsxs)("form",{onSubmit:f,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Details"}),(0,F.jsx)(ce,{form:(0,tL.G)(i,"general")})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(i,"metadata")})]})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",className:"text-small mr-2 w-32 justify-center",size:"small",type:"button",onClick:r,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",children:(0,F.jsxs)("span",{children:[t?"Edit":"Publish"," Group"]})})]})})]})]})})}var cr=function(e){if(e)return{general:{name:e.name},metadata:rf(e.metadata)}};function cn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ci(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){cn(e,t,r[t])})}return e}function co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ca(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):co(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function cl(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,ca(ci({},t.getHeaderGroupProps()),{children:e.headerGroup.headers.map(function(e,t){var r=e.render,n=e.getHeaderProps,i=e.getSortByToggleProps;return(0,F.jsx)(nf.HeadCell,ca(ci({className:t?"w-[100px]":"w-[60px]"},n(i())),{children:r("Header")}))})}))}function cs(e){var t=e.row,r=e.removeCustomers,n=(0,V.useNavigate)(),i=[{label:"Details",onClick:function(){return n("/a/customers/".concat(t.original.id))},icon:(0,F.jsx)(iV,{size:20})},{label:"Delete from the group",variant:"danger",onClick:function(){return r({customer_ids:[{id:t.original.id}]})},icon:(0,F.jsx)(eZ,{size:20})}];return(0,F.jsx)(nf.Row,ca(ci({color:"inherit",actions:i,linkTo:"/a/customers/".concat(e.row.original.id)},e.row.getRowProps()),{children:e.row.cells.map(function(e,t){return(0,F.jsx)(nf.Cell,ca(ci({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))}function cc(e){var t,r=e.customers,n=e.removeCustomers,i=e.setQuery,o=e.paginate,a=e.filteringOptions,l=e.queryObject,s=e.count,c=e.isLoading,u={data:r,columns:sU,initialState:{pageSize:l.limit,pageIndex:l.offset/l.limit},pageCount:Math.ceil(s/l.limit),manualPagination:!0,autoResetPage:!1},d=(0,rN.useTable)(u,rN.useSortBy,rN.usePagination);return(0,F.jsx)(nC,{isLoading:c,hasPagination:!0,numberOfRows:l.limit,pagingState:{count:s,offset:l.offset,pageSize:l.offset+d.rows.length,title:"Customer Groups",currentPage:d.state.pageIndex+1,pageCount:d.pageCount,nextPage:function(){d.canNextPage&&(o(1),d.nextPage())},prevPage:function(){d.canPreviousPage&&(o(-1),d.previousPage())},hasNext:d.canNextPage,hasPrev:d.canPreviousPage},children:(0,F.jsxs)(nf,ca(ci({enableSearch:!0,handleSearch:function(e){i(e),e&&d.gotoPage(0)},searchValue:l.q,filteringOptions:a},d.getTableProps()),{children:[(0,F.jsx)(nf.Head,{children:null===(t=d.headerGroups)||void 0===t?void 0:t.map(function(e,t){return(0,F.jsx)(cl,{headerGroup:e},t)})}),(0,F.jsx)(nf.Body,ca(ci({},d.getTableBodyProps()),{children:d.rows.map(function(e){return d.prepareRow(e),(0,F.jsx)(cs,{row:e,removeCustomers:n},e.id)})}))]}))})}function cu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cd(e){if(Array.isArray(e))return e}function cf(e){if(Array.isArray(e))return cu(e)}function cp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cm(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function cy(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ch(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cb(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){cp(e,t,r[t])})}return e}function cg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cg(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function cj(e,t){return cd(e)||cy(e,t)||cw(e,t)||ch()}function cO(e){return cf(e)||cm(e)||cw(e)||cb()}function cw(e,t){if(e){if("string"==typeof e)return cu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cu(e,t)}}var cS={additionalFilters:{expand:"groups"},limit:15};function cP(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,cx(cv({},t.getHeaderGroupProps()),{children:t.headers.map(function(e,t){return(0,F.jsx)(nf.HeadCell,cx(cv({className:"w-[100px]"},e.getHeaderProps()),{children:e.render("Header")}))})}))}function cC(e){return(0,F.jsx)(nf.Row,cx(cv({color:"inherit",linkTo:"/a/customers/".concat(e.row.original.id)},e.row.getRowProps()),{children:e.row.cells.map(function(e,t){return(0,F.jsx)(nf.Cell,cx(cv({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))}function cN(e){var t,r=e.setSelectedCustomerIds,n=e.selectedCustomerIds,i=e.handleSubmit,o=e.onClose,a=sM(cS),l=a.paginate,s=a.setQuery,c=a.setFilters,u=(a.filters,a.queryObject),d=cj((0,B.useState)(0),2),f=d[0],p=d[1],m=cj((0,B.useState)(),2),y=m[0],h=m[1],b=(0,en.useAdminCustomerGroups)({expand:"customers"}).customer_groups,v=(0,en.useAdminCustomers)(cx(cv({},u),{groups:y?[y]:null})),g=v.customers,x=v.count,j=void 0===x?0:x,O=v.isLoading;(0,B.useEffect)(function(){void 0!==j&&p(Math.ceil(j/u.limit))},[j]);var w={columns:sH,data:void 0===g?[]:g,initialState:{pageSize:u.limit,pageIndex:u.offset/u.limit,selectedRowIds:n.reduce(function(e,t){return e[t]=!0,e},{})},pageCount:f,autoResetSelectedRows:!1,manualPagination:!0,autoResetPage:!1,getRowId:function(e){return e.id}},S=(0,rN.useTable)(w,rN.usePagination,rN.useRowSelect);(0,B.useEffect)(function(){r(Object.keys(S.state.selectedRowIds))},[S.state.selectedRowIds]),(0,B.useEffect)(function(){c("offset",0),S.gotoPage(0)},[y]);var P=[{title:"Groups",options:[{title:"All",onClick:function(){return h(null)}}].concat(cO((b||[]).map(function(e){return{title:e.name,count:e.customers.length,onClick:function(){return h(e.id)}}})))}];return(0,F.jsx)(tp.Z,{handleClose:o,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:o,children:(0,F.jsx)("h3",{className:"inter-xlarge-semibold",children:"Edit Customers"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(nC,{isLoading:O,hasPagination:!0,numberOfRows:u.limit,pagingState:{count:j,offset:u.offset,pageSize:u.offset+S.rows.length,title:"Customers",currentPage:S.state.pageIndex+1,pageCount:S.pageCount,nextPage:function(){S.canNextPage&&(l(1),S.nextPage())},prevPage:function(){S.canPreviousPage&&(l(-1),S.previousPage())},hasNext:S.canNextPage,hasPrev:S.canPreviousPage},children:(0,F.jsxs)(nf,cx(cv({filteringOptions:P,enableSearch:!0,handleSearch:function(e){s(e),e&&S.gotoPage(0)},searchValue:u.q},S.getTableProps()),{children:[(0,F.jsx)(nf.Head,{children:null===(t=S.headerGroups)||void 0===t?void 0:t.map(function(e){return(0,F.jsx)(cP,{headerGroup:e})})}),(0,F.jsx)(nf.Body,cx(cv({},S.getTableBodyProps()),{children:S.rows.map(function(e){return S.prepareRow(e),(0,F.jsx)(cC,{row:e})})}))]}))})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-eventButton",onClick:o,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",className:"w-eventButton",onClick:i,children:"Save"})]})})]})})}function ck(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function c_(e){if(Array.isArray(e))return e}function cA(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function cD(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){cA(o,n,i,a,l,"next",e)}function l(e){cA(o,n,i,a,l,"throw",e)}a(void 0)})}}function cE(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function cZ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cI(e,t){return c_(e)||cE(e,t)||cT(e,t)||cZ()}function cT(e,t){if(e){if("string"==typeof e)return ck(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ck(e,t)}}function cM(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var cR={additionalFilters:{expand:"groups"},limit:15,offset:0};function cL(){return(0,F.jsx)("div",{className:"center flex h-full min-h-[756px] items-center justify-center",children:(0,F.jsx)("span",{className:"text-xs text-gray-400",children:"No customers in this group yet"})})}function cz(e){var t=e.group.id,r=cI((0,B.useState)(!1),2),n=r[0],i=r[1],o=sM(cR),a=o.q,l=o.queryObject,s=o.paginate,c=o.setQuery,u=(0,en.useAdminCustomerGroupCustomers)(t,l,{keepPreviousData:!0}),d=u.customers,f=void 0===d?[]:d,p=u.isLoading,m=u.count,y=(0,en.useAdminAddCustomersToCustomerGroup)(t).mutate,h=(0,en.useAdminRemoveCustomersFromCustomerGroup)(t).mutate,b=cI((0,B.useState)(f.map(function(e){return e.id})),2),v=b[0],g=b[1];(0,B.useEffect)(function(){p||g(f.map(function(e){return e.id}))},[p,f]);var x=!p&&!f.length&&!a,j=[{label:"Edit customers",onClick:function(){return i(!0)},icon:(0,F.jsx)("span",{className:"text-grey-90",children:(0,F.jsx)(sh.Z,{size:20})})}],O=function(){var e=f.map(function(e){return e.id});return{toAdd:(0,iM.difference)(v,e),toRemove:(0,iM.difference)(e,v)}};return(0,F.jsxs)(tI,{title:"Customers",actionables:j,className:"min-h-[756px] w-full",children:[n&&(0,F.jsx)(cN,{selectedCustomerIds:v,setSelectedCustomerIds:g,handleSubmit:function(){var e=O(),t=e.toAdd,r=e.toRemove;t.length&&y({customer_ids:t.map(function(e){return{id:e}})}),r.length&&h({customer_ids:r.map(function(e){return{id:e}})}),i(!1)},onClose:function(){return i(!1)}}),x?(0,F.jsx)(cL,{}):(0,F.jsx)(cc,{query:a,count:m||0,paginate:s,setQuery:c,customers:f,groupId:e.group.id,queryObject:l,removeCustomers:h})]})}function cq(e){var t,r=cI((0,B.useState)(!1),2),n=r[0],i=r[1],o=(0,V.useNavigate)(),a=(0,en.useAdminDeleteCustomerGroup)(e.customerGroup.id).mutate,l=(0,s1.Z)(),s=l.state,c=l.close,u=[{label:"Edit",onClick:l.open,icon:(0,F.jsx)(eC,{size:20})},{label:"Delete",onClick:function(){i(!0)},variant:"danger",icon:(0,F.jsx)(eZ,{size:20})}],d=(t=cD(function(){return cM(this,function(e){return a(),o("/a/customers/groups"),[2]})}),function(){return t.apply(this,arguments)});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tI,{title:e.customerGroup.name,actionables:u,className:"min-h-0 w-full",subtitle:" "}),n&&(0,F.jsx)(tx,{onDelete:d,handleClose:function(){return i(!1)},confirmText:"Yes, delete",heading:"Delete the group",successText:"Group deleted",text:"Are you sure you want to delete this customer group?"}),(0,F.jsx)(ct,{open:s,onClose:c,customerGroup:e.customerGroup})]})}function cF(){var e=(0,V.useParams)().id,t=(0,V.useNavigate)(),r=(0,en.useAdminCustomerGroup)(e),n=r.customer_group,i=r.isLoading,o=r.error,a=(0,ig.e)().getWidgets;if(o){var l=ix(o);if(l&&404===l.status)return t("/404"),null;throw o}return i||!n?(0,F.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}):(0,F.jsxs)("div",{className:"-mt-4 pb-4",children:[(0,F.jsx)(eb,{path:"/a/customers/groups",label:"Back to customer groups",className:"mb-4"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[a("customer_group.details.before").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:n,injectionZone:"customer_group.details.before",widget:e},t)}),(0,F.jsx)(cq,{customerGroup:n}),a("customer_group.details.after").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:n,injectionZone:"customer_group.details.after",widget:e},t)}),(0,F.jsx)(cz,{group:n})]})]})}function cH(){var e=(0,s1.Z)(),t=e.state,r=e.open,n=e.close,i=(0,ig.e)().getWidgets,o=[{label:"New group",onClick:r,icon:(0,F.jsx)("span",{className:"text-grey-90",children:(0,F.jsx)(sh.Z,{size:20})})}];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"gap-y-xsmall flex h-full grow flex-col",children:[i("customer_group.list.before").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:null,widget:e,injectionZone:"customer_group.list.before"},t)}),(0,F.jsx)(tI,{actionables:o,className:"h-auto",customHeader:(0,F.jsx)(s5,{activeView:"groups"}),children:(0,F.jsx)(s0,{})}),i("customer_group.list.after").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:null,widget:e,injectionZone:"customer_group.list.after"},t)})]}),(0,F.jsx)(ct,{open:t,onClose:n})]})}function cU(){var e=(0,(0,W.V)().getNestedRoutes)("/customers/groups");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(cH,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(cF,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/customers/groups"})},t)})]})}var cG=function(){var e=(0,ig.e)().getWidgets;return(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[e("customer.list.before").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:null,widget:e,injectionZone:"customer.list.before"},t)}),(0,F.jsx)(tI,{customHeader:(0,F.jsx)(s5,{activeView:"customers"}),className:"h-fit",children:(0,F.jsx)(om,{})}),e("customer.list.after").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:null,widget:e,injectionZone:"customer.list.after"},t)}),(0,F.jsx)(ev,{})]})},cV=function(){var e=(0,(0,W.V)().getNestedRoutes)("/customers");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(cG,{})}),(0,F.jsx)(V.Route,{path:"/groups/*",element:(0,F.jsx)(cU,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(sy,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/customers"})},t)})]})};function cB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cW(e){if(Array.isArray(e))return e}function cQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cY(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function c$(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cK(e,t){return cW(e)||cY(e,t)||cJ(e,t)||c$()}function cJ(e,t){if(e){if("string"==typeof e)return cB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cB(e,t)}}var cX=function(e){var t,r=e.isVisible,n=e.start,i=e.end,o=e.classname,a=e.children,l=e.isFullScreen,s=void 0!==l&&l,c=cK((0,B.useState)(!1),2),u=c[0],d=c[1];(0,B.useEffect)(function(){u&&!r?setTimeout(function(){return d(!1)},100):d(r)});var f=(cQ(t={},n||"scale-[0.98] opacity-0",!r),cQ(t,i||"scale-100 opacity-100",r),cQ(t,"absolute inset-0",u&&s),t);return(0,F.jsx)("div",{className:(0,ec.Z)("z-50 transition-all duration-100",f,o),children:u?a:null})},c0=r(25282),c1=r(80889),c2=r(22699),c3=function(e){var t=e.className,r=e.children;return(0,F.jsx)("div",{className:(0,ec.Z)("bg-grey-0 absolute inset-0 z-50 flex flex-col items-center",t),children:r})};c3.Header=function(e){var t=e.children,r=e.className;return(0,F.jsx)("div",{className:(0,ec.Z)("border-b-grey-20 flex w-full justify-center border-b py-4",r),children:t})},c3.Main=function(e){var t=e.children,r=e.className;return(0,F.jsx)("div",{className:(0,ec.Z)("h-full w-full overflow-y-auto px-8",r),children:t})},c3.BasicFocusModal=function(e){var t=e.handleClose,r=e.onSubmit,n=e.children,i=e.cancelText,o=e.submitText;return(0,F.jsxs)(c3,{children:[(0,F.jsx)(c5,{handleClose:t,onSubmit:r,cancelText:void 0===i?"Cancel":i,submitText:void 0===o?"Save changes":o}),(0,F.jsx)(c3.Main,{children:n})]})};var c5=function(e){var t=e.handleClose,r=e.onSubmit,n=e.cancelText,i=e.submitText;return(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:t,className:"rounded-rounded h-8 w-8 border",children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-small flex",children:[(0,F.jsx)(Y.Z,{onClick:t,size:"small",variant:"ghost",className:"rounded-rounded border",children:n||"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:r,className:"rounded-rounded",children:i||"Save changes"})]})]})})},c6=r(27132);function c4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c4(e,t,r[t])})}return e}function c7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c9(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c7(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var ue=function(){var e=(0,td.Z)(),t=(0,c1.F2)(),r=t.mutate,n=t.isLoading,i=(0,tR.cI)({defaultValues:{config:{anonymize:!1,opt_out:!1}}}),o=i.register,a=i.formState.errors,l=i.control,s=uc().setSubmittingConfig,c=(0,tR.qo)({control:l,name:"config.opt_out"}),u=(0,tR.qo)({control:l,name:"config.anonymize"}),d=i.handleSubmit(function(t){s(!0);var n=t.email,i=t.config,o=!i.anonymize&&!i.opt_out;r(i,{onSuccess:function(){e("Success","Your preferences were successfully updated","success"),o&&c1.co.track("userEmail",{email:n}),s(!1)},onError:function(t){e("Error",(0,tf.e)(t),"error"),s(!1)}})});return(0,F.jsx)(c3,{children:(0,F.jsx)(c3.Main,{children:(0,F.jsx)("div",{className:"flex flex-col items-center",children:(0,F.jsxs)("div",{className:"mt-5xlarge flex w-full max-w-[664px] flex-col",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold mb-large",children:"Help us get better"}),(0,F.jsxs)("p",{className:"text-grey-50",children:["To create the most compelling e-commerce experience we would like to gain insights in how you use Medusa. User insights allow us to build a better, more engaging, and more usable products. We only collect data for product improvements. Read what data we gather in our"," ",(0,F.jsx)("a",{href:"https://docs.medusajs.com/usage",rel:"noreferrer noopener",target:"_blank",className:"text-violet-60",children:"documentation"}),"."]}),(0,F.jsxs)("div",{className:"mt-xlarge gap-y-xlarge flex flex-col",children:[(0,F.jsx)(ry.Z,c9(c8({label:"Email",placeholder:"you@company.com",disabled:c||u,className:(0,ec.Z)("transition-opacity",{"opacity-50":c||u})},o("email",{pattern:{message:"Please enter a valid email",value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i}})),{errors:a})),(0,F.jsx)(c6.Z,{form:(0,tL.G)(i,"config")})]}),(0,F.jsx)("div",{className:"mt-5xlarge flex items-center justify-end",children:(0,F.jsx)(Y.Z,{variant:"primary",size:"small",loading:n,onClick:d,children:"Continue"})})]})})})})};function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ur(e){if(Array.isArray(e))return e}function un(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ui(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uo(e,t){return ur(e)||un(e,t)||ua(e,t)||ui()}function ua(e,t){if(e){if("string"==typeof e)return ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ut(e,t)}}var ul=(0,B.createContext)(null),us=function(e){var t=e.writeKey,r=e.children,n=uo((0,B.useState)(!1),2),i=n[0],o=n[1],a=(0,c1.Je)(),l=a.analytics_config,s=a.isLoading,c=(0,V.useLocation)(),u=(0,en.useAdminGetSession)().user,d=(0,en.useAdminUsers)().users,f=(0,en.useAdminStore)().store,p=(0,o3.ye)().isFeatureEnabled,m=(0,B.useMemo)(function(){return p("analytics")},[p]),y=(0,B.useMemo)(function(){return l&&m&&!l.opt_out?c0.b.load({writeKey:t}):null},[l,t,m]);(0,B.useEffect)(function(){y&&l&&u&&f&&y.identify(u.id,{store:f.name})},[l,y,u,f]);var h=(0,B.useMemo)(function(){return!!i||!!m&&!!u&&!l&&!s},[l,s,m,u,i]),b=(0,rk.N)(h,1e3),v=(0,B.useCallback)(function(e,t){y&&y.track(e,t)},[y]),g=(0,B.useCallback)(function(e){v("numUsers",e)},[v]),x=(0,B.useCallback)(function(e){v("storeName",e)},[v]);return(0,B.useEffect)(function(){d&&g({count:d.length})},[d,g]),(0,B.useEffect)(function(){f&&x({name:f.name})},[f,x]),(0,B.useEffect)(function(){y&&y.page()},[c]),(0,F.jsxs)(ul.Provider,{value:{trackRegions:function(e){v("regions",e)},trackCurrencies:function(e){v("currencies",e)},trackNumberOfOrders:function(e){v("numOrders",e)},trackNumberOfProducts:function(e){v("numProducts",e)},trackNumberOfDiscounts:function(e){v("numDiscounts",e)},setSubmittingConfig:o},children:[h&&(0,F.jsx)(cX,{isVisible:b,isFullScreen:!0,children:(0,F.jsx)(ue,{})}),r]})},uc=function(){var e=(0,B.useContext)(ul);if(!e)throw Error("useAnalytics must be used within a AnalyticsProvider");return e},uu=r(29416),ud=r(4467);function uf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function up(e){if(Array.isArray(e))return e}function um(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function uy(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uh(e,t){return up(e)||um(e,t)||ub(e,t)||uy()}function ub(e,t){if(e){if("string"==typeof e)return uf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uf(e,t)}}var uv=function(e){var t=e.submitFilters,r=e.clearFilters,n=e.triggerElement,i=e.children,o=(0,ud.d)().height,a=(0,B.useRef)(null),l=uh((0,B.useState)(!1),2),s=l[0],c=l[1],u=uh((0,B.useState)({maxHeight:o}),2),d=u[0],f=u[1];(0,B.useEffect)(function(){var e,t;f({maxHeight:o-(null!==(t=null==a?void 0:null===(e=a.current)||void 0===e?void 0:e.getBoundingClientRect().y)&&void 0!==t?t:0)-50})},[a]);var p=function(){c(!1),t()},m=function(){c(!1),r()};return(0,F.jsxs)(uu.fC,{open:s,onOpenChange:c,children:[(0,F.jsx)(uu.xz,{ref:a,asChild:!0,children:n}),(0,F.jsxs)(uu.VY,{sideOffset:8,style:d,className:"bg-grey-0 rounded-rounded shadow-dropdown z-40 max-w-[320px] overflow-y-auto pt-1",children:[B.Children.toArray(i).filter(Boolean).map(function(e,t){return(0,F.jsx)("div",{className:"border-grey-20 border-b last:border-0 last:pb-0",children:e},t)}),(0,F.jsxs)("div",{className:"border-grey-20 gap-x-small flex grid grid-cols-2 border-b px-3 py-2.5",children:[(0,F.jsx)(Y.Z,{size:"small",tabIndex:-1,className:"border-grey-20 mr-2 w-full border",variant:"ghost",onClick:function(){return m()},children:"Clear"}),(0,F.jsx)(Y.Z,{tabIndex:-1,variant:"primary",className:"w-full justify-center",size:"small",onClick:function(){return p()},children:"Apply"})]})]})]})};function ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ux(e){if(Array.isArray(e))return e}function uj(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function uO(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function uw(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uS(e,t){return ux(e)||uO(e,t)||uP(e,t)||uw()}function uP(e,t){if(e){if("string"==typeof e)return ug(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ug(e,t)}}var uC=function(e){return uj(e,Date)?(e.getTime()/1e3).toFixed(0):null},uN=function(e){var t=iW()(e);return iW().isMoment(t)?(t.hour(0),t.minute(0),t.second(0),t.millisecond(0),t):(console.log("date is not instance of Moment: ",e),null)},uk=function(e,t){var r;return null===(r=iW()(e))||void 0===r?void 0:r.add(t,"hours")},u_=function(e){var t=uS(e.split("|"),2),r=t[0],n=t[1],i=iW()();return i.subtract(parseInt(r),n),i=uN(i),"".concat(i.format("X"))},uA=function(e){return Object.entries(e).reduce(function(e,t){var r=uS(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=u_(i):e[n]=i,e},{})},uD=r(73006),uE=r(40702),uZ=r(95969);function uI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){uI(e,t,r[t])})}return e}function uM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uM(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function uL(e,t){if(null==e)return{};var r,n,i=uz(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function uz(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var uq=16,uF=function(e){var t=e.children,r=e.triggerProps,n=uL(e,["children","triggerProps"]);return(0,F.jsxs)(uE.fC,uR(uT({},n),{children:[(0,F.jsxs)(uE.i4,uR(uT({className:"inter-base-semibold flex items-center gap-3 px-2"},r),{children:[(0,F.jsx)(uE.B4,{}),(0,F.jsx)(uE.JO,{children:(0,F.jsx)(e4.Z,{size:uq})})]})),(0,F.jsxs)(uE.VY,{position:"popper",className:"rounded-rounded scrollbar-hide border-grey-20 bg-grey-0 shadow-dropdown z-[9999] flex max-h-[305px] w-full overflow-y-auto border px-2 py-2",children:[(0,F.jsx)(uE.u_,{className:"to-grey-0 flex h-[25px] items-center justify-center bg-gradient-to-b from-transparent",children:(0,F.jsx)(uZ.Z,{size:uq})}),(0,F.jsx)(uE.l_,{className:"p-2",children:t}),(0,F.jsx)(uE.$G,{className:"to-grey-0 flex h-[25px] items-center justify-center bg-gradient-to-b from-transparent",children:(0,F.jsx)(e4.Z,{size:uq})})]})]}))},uH=function(e){var t=e.children,r=uL(e,["children"]);return(0,F.jsxs)(uE.ck,uR(uT({className:(0,ec.Z)("inter-base-regular hover:bg-grey-10 relative flex items-center justify-start rounded py-1.5 px-9")},r),{children:[(0,F.jsx)(uE.wU,{className:"bold-active-item absolute left-2.5 flex items-center justify-center pr-2.5",children:(0,F.jsx)(rT,{size:uq})}),(0,F.jsx)(uE.eT,{children:t})]}))};uF.Item=uH;var uU=function(e,t){for(var r=[],n=e;n<=t;n++)r.push(n);return r},uG=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return uU(new Date().getFullYear()-e,new Date().getFullYear()+e)},uV=["January","February","March","April","May","June","July","August","September","October","November","December"],uB=function(e){var t=e.date,r=e.changeYear,n=e.changeMonth,i=uV[t.getMonth()],o=t.getFullYear();return(0,F.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,F.jsx)("div",{className:"flex flex-1 items-center justify-end gap-3",children:(0,F.jsx)(uF,{defaultValue:i,onValueChange:function(e){return n(uV.indexOf(e))},children:uV.map(function(e){return(0,F.jsx)(uF.Item,{value:e,children:e},e)})})}),(0,F.jsx)("div",{className:"flex flex-1 items-center justify-start gap-3",children:(0,F.jsx)(uF,{defaultValue:o.toString(),onValueChange:function(e){return r(parseInt(e,10))},children:uG().map(function(e){return(0,F.jsx)(uF.Item,{value:e.toString(),children:e.toString()},e)})})})]})};function uW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){uW(e,t,r[t])})}return e}function uY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u$(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uY(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function uK(e,t){if(null==e)return{};var r,n,i=uJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function uJ(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var uX=function(e){var t=e.onClick,r=e.onFocusLost,n=e.children,i=e.className,o=uK(e,["onClick","onFocusLost","children","className"]);return(0,F.jsx)("div",u$(uQ({},o),{tabIndex:-1,onClick:t,onBlur:function(e){r&&!e.currentTarget.contains(e.relatedTarget)&&r()},className:(0,ec.Z)(["bg-grey-5 inter-base-regular h-18 border-grey-20 focus-within:shadow-input focus-within:border-violet-60 rounded-rounded flex w-full cursor-text flex-col border p-3",i]),children:n}))},u0=r(54608),u1=r(62783),u2=r.n(u1);function u3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u5(e){if(Array.isArray(e))return e}function u6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u4(){return(u4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u8(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function u7(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u9(e){if(null==e)throw TypeError("Cannot destructure "+e);return e}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){u6(e,t,r[t])})}return e}function dt(e,t){return u5(e)||u8(e,t)||dr(e,t)||u7()}function dr(e,t){if(e){if("string"==typeof e)return u3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u3(e,t)}}var dn=function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=["date"];return t&&iW()(e).format("YY,MM,DD")===iW()(t).format("YY,MM,DD")?n.push("chosen"):r&&iW()(e).format("YY,MM,DD")<iW()(new Date).format("YY,MM,DD")&&n.push("past"),n.join(" ")},di=function(e){var t=e.date,r=e.onSubmitDate,n=e.label,i=void 0===n?"start date":n,o=e.required,a=e.tooltipContent,l=e.tooltip,s=dt((0,B.useState)(t||null),2),c=s[0],u=s[1],d=dt((0,B.useState)(!1),2),f=d[0],p=d[1];(0,B.useEffect)(function(){return u(t)},[f]);var m=function(){if(!c||!t){r(null),p(!1);return}var e=new Date(t.getTime());e.setUTCDate(c.getUTCDate()),e.setUTCMonth(c.getUTCMonth()),e.setUTCFullYear(c.getUTCFullYear()),r(e),p(!1)};return(0,F.jsx)("div",{className:"w-full",children:(0,F.jsxs)(uu.fC,{open:f,onOpenChange:p,children:[(0,F.jsx)(uu.xz,{asChild:!0,children:(0,F.jsx)("button",{className:(0,ec.Z)("rounded-rounded w-full border ",{"shadow-input border-violet-60":f,"border-grey-20":!f}),type:"button",children:(0,F.jsxs)(uX,{className:"shadown-none border-0 focus-within:shadow-none",children:[(0,F.jsxs)("div",{className:"text-grey-50 flex w-full justify-between pr-0.5",children:[i&&(0,F.jsx)(u0.Z,{label:i,required:void 0!==o&&o,tooltipContent:a,tooltip:l}),(0,F.jsx)(tz.Z,{size:16})]}),(0,F.jsx)("label",{className:"w-full text-left",children:t?iW()(t).format("ddd, DD MMM YYYY"):"---, -- -- ----"})]})})}),(0,F.jsxs)(uu.VY,{side:"top",sideOffset:8,className:"rounded-rounded border-grey-20  bg-grey-0 shadow-dropdown w-full border px-8",children:[(0,F.jsx)(da,{date:c,onChange:function(e){return u(e)}}),(0,F.jsxs)("div",{className:"mb-8 mt-5 flex w-full",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"medium",onClick:function(){return p(!1)},className:"border-grey-20 mr-2 flex w-1/3 justify-center border",children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"medium",variant:"primary",onClick:function(){return m()},className:"flex w-2/3 justify-center",children:"Set ".concat(i)})]})]})]})})},da=function(e){var t=e.date,r=e.onChange,n=e.greyPastDates,i=void 0===n||n;return(0,F.jsx)(u2(),{selected:t,inline:!0,onChange:r,calendarClassName:"date-picker",dayClassName:function(e){return dn(e,t,i)},renderCustomHeader:function(e){var t=u4({},u9(e));return(0,F.jsx)(uB,de({},t))}})},dl="is in the last",ds={InTheLast:"is in the last",OlderThan:"is older than",After:"is after",Before:"is before",EqualTo:"is equal to"},dc={},du={},dd={};function df(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dp(e){if(Array.isArray(e))return e}function dm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dy(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function dh(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function db(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){dm(e,t,r[t])})}return e}function dv(e,t){return dp(e)||dy(e,t)||dg(e,t)||dh()}function dg(e,t){if(e){if("string"==typeof e)return df(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return df(e,t)}}var dx=86400,dj=function(e){var t=e.filterTitle,r=e.options,n=e.filters,i=e.open,o=e.setFilter,a=e.isLoading,l=e.hasMore,s=e.hasPrev,c=e.onShowNext,u=e.onShowPrev,d=(0,B.useMemo)(function(){try{return n.reduce(function(e,t){return e[t]=!0,e},{})}catch(e){return{}}},[n]),f=dv((0,B.useState)(d),2),p=f[0],m=f[1];(0,B.useEffect)(function(){i||m({})},[i]);var y=function(e){p[e]?p[e]=!1:p[e]=!0;var t=Object.entries(p).reduce(function(e,t){var r=dv(t,2),n=r[0];return!0===r[1]&&e.push(n),e},[]);m(p),o({open:i,filter:t})};return(0,F.jsx)("div",{className:(0,ec.Z)("w-full cursor-pointer py-2 px-4 ",{"inter-small-semibold":i,"inter-small-regular":!i}),children:(0,F.jsxs)(eY.fC,{className:"w-full",open:i,onOpenChange:function(e){return o({filter:n,open:e})},children:[(0,F.jsxs)(eY.xz,{className:(0,ec.Z)("hover:bg-grey-5 flex w-full items-center justify-between rounded py-1.5 px-3",{"inter-small-semibold":i,"inter-small-regular":!i}),children:[(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(i&&"bg-violet-60"),children:(0,F.jsx)("span",{className:"self-center",children:i&&(0,F.jsx)(rT,{size:16})})}),(0,F.jsx)("input",{id:t,className:"hidden",checked:i,readOnly:!0,type:"checkbox"}),(0,F.jsx)("span",{className:"ml-2",children:t})]}),i&&(0,F.jsx)("span",{className:"text-grey-50 self-end",children:(0,F.jsx)(uZ.Z,{size:20})})]}),(0,F.jsxs)(eY.VY,{className:"w-full",children:[s&&(0,F.jsx)("div",{className:"flex py-2 pl-6",children:(0,F.jsx)("button",{onClick:function(){u&&u()},className:"hover:text-violet-60 text-grey-90 font-semibold",children:"Back"})}),a?(0,F.jsx)("div",{className:"flex items-center justify-center py-1",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})}):"Date"===t?(0,F.jsx)(dw,{options:r,open:i,setFilter:o,existingDate:n,filterTitle:t}):r.map(function(e,t){var r,n;return"string"==typeof e?(r=e,n=e):(r=e.value,n=e.label),(0,F.jsxs)("div",{className:(0,ec.Z)("hover:bg-grey-20 my-1 flex w-full items-center rounded py-1.5 pl-6",{"inter-small-semibold":p[r],"inter-small-regular":!p[r]}),onClick:function(){return y(r)},children:[(0,F.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base mr-2 flex h-5 w-5 justify-center border ".concat(!0===p[r]&&"bg-violet-60"),children:(0,F.jsx)("span",{className:"self-center",children:!0===p[r]&&(0,F.jsx)(rT,{size:16})})}),(0,F.jsx)("input",{type:"checkbox",className:"hidden",id:r,name:n,value:r,checked:!0===p[r],readOnly:!0,style:{marginRight:"5px"}}),n]},t)}),l&&(0,F.jsx)("div",{className:"flex py-2 pl-6",children:(0,F.jsx)("button",{onClick:function(){c&&c()},className:"hover:text-violet-60 text-grey-90 font-semibold",children:"Show more"})})]})]})})},dO=function(e){if(!e)return{};var t=Object.entries(e),r={sawGt:!1,sawLt:!1,sawGtRelative:!1,sawLtRelative:!1},n=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=dv(a.value,2),c=s[0],u=s[1];switch(c){case"gt":r.sawGt=!0,r.sawGtRelative=u.includes("|");break;case"lt":r.sawLt=!0,r.sawLtRelative=u.includes("|")}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}if(r.sawGt&&r.sawGtRelative){var d=dv(e.gt.split("|"),2),f=d[0],p=d[1];return{filterType:ds.InTheLast,daysMonthsValue:p,relativeAmount:f,value:null}}if(r.sawLt&&r.sawLtRelative){var m=dv(e.lt.split("|"),2),y=m[0],h=m[1];return{filterType:ds.OlderThan,daysMonthsValue:h,relativeAmount:y,value:null}}if(r.sawLt&&r.sawGt){var b=e.gt;if(e.lt-b===dx)return{filterType:ds.EqualTo,value:iW().unix(b).toDate()}}if(r.sawLt){var v=e.lt;return{filterType:ds.Before,value:iW().unix(v).toDate()}}if(r.sawGt){var g=e.gt;return{filterType:ds.After,value:iW().unix(g).toDate()}}return{}},dw=function(e){var t=e.options,r=(e.open,e.setFilter),n=e.existingDate;e.existingFilter;var i=(0,B.useMemo)(function(){var e=dO(n);return db({filterType:t[0],value:null,relativeAmount:void 0,daysMonthsValue:"days"},e)},[n]),o=dv((0,B.useState)(i.filterType),2),a=o[0],l=o[1],s=dv((0,B.useState)(i.relativeAmount),2),c=s[0],u=s[1],d=dv((0,B.useState)(i.daysMonthsValue),2),f=d[0],p=d[1],m=dv((0,B.useState)(i.value),2),y=m[0],h=m[1];(0,B.useEffect)(function(){switch(a){case ds.InTheLast:case ds.OlderThan:r({open:!0,filter:b(c)});break;case ds.EqualTo:default:r({open:!0,filter:b(y)})}},[a,c,f,y]);var b=function(e){switch(a){case ds.InTheLast:return{gt:"".concat(e,"|").concat(f)};case ds.OlderThan:return{lt:"".concat(e,"|").concat(f)};case ds.EqualTo:var t=uN(e);if(t)return{gt:uC(t.toDate()),lt:uC(uk(t,24).toDate())};return{};case ds.After:var r=uN(e);if(r)return{gt:uC(r.toDate())};return{};case ds.Before:var n=uN(e);if(n)return{lt:uC(n.toDate())};return{};default:return{}}};return(0,F.jsxs)("div",{className:"pl-9",children:[(0,F.jsx)(dP,{trigger:(0,F.jsxs)("div",{className:"bg-grey-5 border-grey-20 inter-small-semibold text-grey-90 flex w-full items-center justify-between rounded border px-3 py-1.5",children:[(0,F.jsx)("label",{children:a}),(0,F.jsx)("span",{className:"text-grey-50",children:(0,F.jsx)(nw,{size:16})})]}),children:(0,F.jsx)(dS,{options:t,onClick:function(e){return l(e)},selectedItem:a})}),a&&(0,F.jsx)("div",{className:"w-full",children:function(){switch(a){case ds.InTheLast:case ds.OlderThan:return(0,F.jsxs)("div",{className:"flex w-full flex-col",children:[(0,F.jsx)(ry.Z,{className:"pt-0 pb-1",type:"number",placeholder:"2",value:c,onChange:function(e){u(e.target.value)}}),(0,F.jsx)(dP,{trigger:(0,F.jsxs)("div",{className:"bg-grey-5 border-grey-20 inter-small-semibold text-grey-90 flex w-full items-center justify-between rounded border px-3 py-1.5",children:[(0,F.jsx)("label",{children:f}),(0,F.jsx)("span",{className:"text-grey-50",children:(0,F.jsx)(nw,{size:16})})]}),children:(0,F.jsx)(dS,{options:["days","months"],onClick:p,selectedItem:f})})]});case ds.EqualTo:case ds.After:case ds.Before:return(0,F.jsx)("div",{className:"flex w-full flex-col",children:(0,F.jsx)(dP,{trigger:(0,F.jsxs)("div",{className:"bg-grey-5 border-grey-20 inter-small-semibold text-grey-90 flex w-full items-center justify-between rounded border px-3 py-1.5",children:[(0,F.jsx)("label",{children:y?iW()(y).format("MM.DD.YYYY"):"-"}),(0,F.jsx)("span",{className:"text-grey-50",children:(0,F.jsx)(nw,{size:16})})]}),children:(0,F.jsx)(da,{date:y,onChange:function(e){h(e)}})})})}}()})]})},dS=function(e){var t=e.options,r=e.onClick,n=e.selectedItem;return(0,F.jsx)(F.Fragment,{children:t.map(function(e){return(0,F.jsxs)("div",{onClick:function(t){t.stopPropagation(),r(e)},className:(0,ec.Z)("hover:bg-grey-5 my-1 flex cursor-pointer items-center rounded px-3 py-1.5",{"inter-small-semibold":e===n,"inter-small-regular":e!==n}),children:[(0,F.jsx)("div",{className:(0,ec.Z)("mr-2 flex h-4 w-4 items-center justify-center rounded-full",{"border-violet-60 border-2":e===n,"border-grey-30 border ":e!==n}),children:e===n&&(0,F.jsx)("div",{className:"bg-violet-60 h-2 w-2 rounded-full"})}),e]})})})},dP=function(e){var t=e.trigger,r=e.children;return(0,F.jsxs)(uu.fC,{children:[(0,F.jsx)(uu.xz,{className:"my-1 w-full",children:t}),(0,F.jsx)(uu.VY,{side:"right",align:"start",alignOffset:-8,sideOffset:20,className:"bg-grey-0 rounded-rounded shadow-dropdown top-2/4 flex flex-col p-2",children:r})]})},dC=function(e){var t=e.saveFilter,r=e.setName,n=e.name;return(0,F.jsxs)("div",{className:"mt-2 flex w-full",children:[(0,F.jsx)(ry.Z,{className:"max-w-[172px] pt-0 pb-1",placeholder:"Name your filter...",onChange:function(e){return r(e.target.value)},value:n}),(0,F.jsx)(Y.Z,{className:"border-grey-20 ml-2 border",variant:"ghost",size:"small",onClick:function(){""!==(0,iM.trim)(n)&&(t(),r(""))},children:"Save"})]})};function dN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dk=function(e){var t=e.label,r=e.isActive,n=e.onClick,i=e.removable,o=e.onRemove;return(0,F.jsxs)("button",{onKeyUp:function(e){i&&o&&"Backspace"===e.key&&o()},onClick:function(e){void 0!==n&&n(e)},className:(0,ec.Z)("bg-grey-5 border-grey-20 inter-small-regular text-grey-50 rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex flex h-6 items-center items-center space-x-1 border px-2 focus-visible:outline-none",dN({},"bg-violet-5 border-violet-60 text-violet-60 ",r)),children:[t,i&&(0,F.jsx)("div",{onClick:function(){void 0!==o&&o()},className:"ml-1 cursor-pointer",children:(0,F.jsx)(c2.Z,{size:16})})]})};function d_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function dA(e){if(Array.isArray(e))return e}function dD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dE(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function dZ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){dD(e,t,r[t])})}return e}function dT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dM(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dT(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function dR(e,t){return dA(e)||dE(e,t)||dL(e,t)||dZ()}function dL(e,t){if(e){if("string"==typeof e)return d_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d_(e,t)}}var dz=["normal","dynamic"],dq=null,dF=function(e){var t=e.tabs,r=e.activeTab,n=e.onTabClick,i=e.onSaveTab,o=e.onRemoveTab,a=e.filters,l=e.submitFilters,s=e.clearFilters,c=dR((0,B.useState)(a),2),u=c[0],d=c[1],f=dR((0,B.useState)(""),2),p=f[0],m=f[1],y=function(e){o&&o(e)},h=function(e){n&&n(e)};(0,B.useEffect)(function(){d(a)},[a]);var b=function(e,t){d(function(r){return dM(dI({},r),dD({},e,t))})},v=Object.entries(a).reduce(function(e,t){var r=dR(t,2),n=(r[0],r[1]);return(null==n?void 0:n.open)&&(e+=1),e},0);return(0,F.jsxs)("div",{className:"flex space-x-1",children:[(0,F.jsxs)(uv,{submitFilters:function(){l(u)},clearFilters:function(){s()},triggerElement:(0,F.jsxs)("button",{className:(0,ec.Z)("rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex items-center space-x-1 focus-visible:outline-none"),children:[(0,F.jsxs)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex h-6 items-center border px-2",children:["Filters",(0,F.jsx)("div",{className:"text-grey-40 ml-1 flex items-center rounded",children:(0,F.jsx)("span",{className:"text-violet-60 inter-small-semibold",children:v||"0"})})]}),(0,F.jsx)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex items-center border p-1",children:(0,F.jsx)(sh.Z,{size:14})})]}),children:[(0,F.jsx)(dj,{filterTitle:"Types",options:dz,filters:u.isDynamic.filter,open:u.isDynamic.open,setFilter:function(e){return b("isDynamic",e)}}),(0,F.jsx)(dC,{saveFilter:function(){i&&i(p,u)},name:p,setName:m})]}),t&&t.map(function(e){return(0,F.jsx)(dk,{onClick:function(){return h(e.value)},label:e.label,isActive:r===e.value,removable:!!e.removable,onRemove:function(){return y(e.value)}},e.value)})]})},dH=r(81798);!function(e){e.SCHEDULED="SCHEDULED",e.EXPIRED="EXPIRED",e.ACTIVE="ACTIVE",e.DISABLED="DISABLED"}(f||(f={}));var dU=function(e){if(!e.is_disabled){var t=new Date;return new Date(e.starts_at)>t?f.SCHEDULED:e.ends_at&&new Date(e.ends_at)<t||e.valid_duration&&t>(0,dH.ut)((0,dH.Qc)(e.valid_duration),new Date(e.starts_at))||e.usage_count===e.usage_limit?f.EXPIRED:f.ACTIVE}return f.DISABLED},dG=function(e){switch(dU(e)){case f.SCHEDULED:return(0,F.jsx)(nN.Z,{title:"Scheduled",variant:"warning"});case f.EXPIRED:return(0,F.jsx)(nN.Z,{title:"Expired",variant:"danger"});case f.ACTIVE:return(0,F.jsx)(nN.Z,{title:"Active",variant:"success"});case f.DISABLED:default:return(0,F.jsx)(nN.Z,{title:"Disabled",variant:"default"})}},dV=function(e){if("fixed"===e.rule.type){var t;return(null===(t=e.regions)||void 0===t?void 0:t.length)?e.regions[0].currency_code.toUpperCase():""}return""},dB=function(e){switch(e.rule.type){case"fixed":var t;if(!(null===(t=e.regions)||void 0===t?void 0:t.length))return"";return(0,oy.rX)({currency:e.regions[0].currency_code,amount:e.rule.value});case"percentage":return"".concat(e.rule.value,"%");case"free_shipping":return"Free Shipping";default:return""}},dW=function(){return[(0,B.useMemo)(function(){return[{Header:(0,F.jsx)("div",{className:"pl-2",children:"Code"}),accessor:"code",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{className:"overflow-hidden",children:(0,F.jsx)(oP.Z,{className:"rounded-rounded",variant:"default",children:(0,F.jsx)("span",{className:"inter-small-regular",children:t})})})}},{Header:"Description",accessor:"rule.description",Cell:function(e){return e.cell.value}},{Header:(0,F.jsx)("div",{className:"text-right",children:"Amount"}),id:"amount",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"text-right",children:dB(t)})}},{Header:(0,F.jsx)("div",{className:"w-[60px]"}),id:"currency",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"text-grey-40 px-2",children:dV(t)})}},{Header:"Status",accessor:"ends_at",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{children:dG(t)})}},{Header:function(){return(0,F.jsx)("div",{className:"text-right",children:"Redemptions"})},accessor:"usage_count",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"text-right",children:dQ(t.usage_count)})}}]},[])]},dQ=function(e){switch(!0){case e>9999999:return"".concat(Math.floor(e/1e6),"m");case e>9999:return"".concat(Math.floor(e/1e3),"k");default:return e}};function dY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d$(e){if(Array.isArray(e))return e}function dK(e){if(Array.isArray(e))return dY(e)}function dJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dX(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d0(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function d1(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d2(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){dJ(e,t,r[t])})}return e}function d5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d6(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d5(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function d4(e,t){return d$(e)||d0(e,t)||d7(e,t)||d1()}function d8(e){return dK(e)||dX(e)||d7(e)||d2()}function d7(e,t){if(e){if("string"==typeof e)return dY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dY(e,t)}}var d9=["status","is_dynamic","q","created_at","offset","limit"],fe={},ft=function(e){return null===e?e:Object.entries(e).reduce(function(e,t){var r=d4(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=u_(i):e[n]=i,e},{})},fr=function(e,t){switch(t.type){case"setFilters":var r;return d6(d3({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query,isDynamic:t.payload.isDynamic,date:t.payload.date});case"setQuery":return d6(d3({},e),{offset:0,query:t.payload});case"setOffset":return d6(d3({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},fn=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0},fi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return fl(e,t)},[e,t]),n=(0,B.useMemo)(function(){var e=localStorage.getItem("promotions::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=d4(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=d4((0,B.useReducer)(fr,r),2),o=i[0],a=i[1],l=d4((0,B.useState)(n),2),s=l[0],c=l[1],u=function(){var e=d3({},o.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=d4(i.value,2),s=l[0],c=l[1];if("query"===s)c&&"string"==typeof c&&(e.q=c);else if("offset"===s||"limit"===s)e[s]=c;else if(c.open){if("date"===s)e[fa[s]]=ft(c.filter);else if("isDynamic"===s){var u=c.filter;u&&u.includes("normal")&&u.includes("dynamic")||(u.includes("normal")?e[fa[s]]=!1:u.includes("dynamic")?e[fa[s]]=!0:e[fa[s]]=!1)}else e[fa[s]]=c.filter}}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:o,r={},n=!0,i=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=d4(l.value,2),u=c[0],d=c[1];if("query"===u)d&&"string"==typeof d&&(r.q=d);else if("isDynamic"===u){var f=d.filter;f&&f.includes("normal")&&f.includes("dynamic")?r[fa[u]]="all":f.includes("normal")?r[fa[u]]=!1:f.includes("dynamic")?r[fa[u]]=!0:r[fa[u]]=!1}else"offset"===u||"limit"===u?r[u]=d:d.open&&(r[fa[u]]=d.filter)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},f=function(){var e=d();return iL().stringify(e,{skipNulls:!0})},p=(0,B.useMemo)(function(){return u()},[o]),m=(0,B.useMemo)(function(){return d()},[o]),y=(0,B.useMemo)(function(){return f()},[o]),h=(0,B.useMemo)(function(){var e=(0,iM.omit)(m,["limit","offset"]),t=iL().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(fe)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=d4(a.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,y=!1,h=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=d4(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&fn(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){y=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(y)throw h}}if(f)return u}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return null},[m,s]),b=(0,B.useMemo)(function(){return d8(s)},[s]);return d6(d3({},o),{filters:d3({},o),removeTab:function(e){var t=localStorage.getItem("promotions::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("promotions::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(d3({},t)),n=(0,iM.omit)(r,["limit","offset"]),i=iL().stringify(n,{skipNulls:!0}),o=localStorage.getItem("promotions::filters"),l=null;if(o&&(l=JSON.parse(o)),l)l[e]=i,localStorage.setItem("promotions::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("promotions::filters",JSON.stringify(s))}c(function(t){return d8(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),a({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in fe)t=fe[e];else{var r=s.find(function(t){return t.value===e});r&&(t=iL().parse(r.representationString))}if(t){var n=d6(d3({},o),{date:{open:!1,filter:null},isDynamic:{open:!1,filter:["normal"]}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=d4(u.value,2),p=f[0],m=f[1];n[fo[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}a({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:h,representationObject:m,representationString:y,queryObject:p,paginate:function(e){e>0?a({type:"setOffset",payload:o.offset+o.limit}):a({type:"setOffset",payload:Math.max(o.offset-o.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return iL().stringify(e,{skipNulls:!0})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},reset:function(){a({type:"setFilters",payload:d6(d3({},o),{offset:0,date:{open:!1,filter:null},isDynamic:{open:!1,filter:["normal"]},query:null})})}})},fo={is_dynamic:"isDynamic",created_at:"date"},fa={isDynamic:"is_dynamic",date:"created_at"},fl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={date:{open:!1,filter:null},isDynamic:{open:!1,filter:["normal"]},offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=d4(l.value,2),u=c[0],d=c[1];if(d9.includes(u))switch(u){case"is_dynamic":"string"==typeof d&&("true"===d?r.isDynamic={open:!0,filter:["dynamic"]}:"false"===d?r.isDynamic={open:!0,filter:["normal"]}:"all"===d&&(r.isDynamic={open:!0,filter:["normal","dynamic"]}));break;case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"created_at":r.date={open:!0,filter:d};break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d)}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return r};function fs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){fs(e,t,r[t])})}return e}function fu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fd(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fu(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ff(e,t){if(null==e)return{};var r,n,i=fp(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fp(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var fm=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=ff(e,["size","color"]);return(0,F.jsxs)("svg",fd(fc({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M9.16667 3.33334H4C3.60218 3.33334 3.22064 3.48385 2.93934 3.75176C2.65804 4.01967 2.5 4.38303 2.5 4.76191V11.9048C2.5 12.2837 2.65804 12.647 2.93934 12.9149C3.22064 13.1828 3.60218 13.3333 4 13.3333H16C16.3978 13.3333 16.7794 13.1828 17.0607 12.9149C17.342 12.647 17.5 12.2837 17.5 11.9048V11.6667",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.08301 16.6667H12.9163",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10 13.3333V16.6667",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M13.333 7.50001L17.4997 3.33334",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M13.333 3.33334H17.4997V7.50001",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function fy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){fy(e,t,r[t])})}return e}function fb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fb(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function fg(e,t){if(null==e)return{};var r,n,i=fx(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fx(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var fj=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=fg(e,["size","color"]);return(0,F.jsxs)("svg",fv(fh({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M9.16667 3.33333H4C3.60218 3.33333 3.22064 3.48384 2.93934 3.75175C2.65804 4.01966 2.5 4.38302 2.5 4.7619V11.9048C2.5 12.2836 2.65804 12.647 2.93934 12.9149C3.22064 13.1828 3.60218 13.3333 4 13.3333H16C16.3978 13.3333 16.7794 13.1828 17.0607 12.9149C17.342 12.647 17.5 12.2836 17.5 11.9048V11.6667",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.08301 16.6667H12.9163",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10 13.3333V16.6667",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M17.4997 3.33333L13.333 7.49999",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M13.333 3.33333L17.4997 7.49999",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function fO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fw(e){if(Array.isArray(e))return e}function fS(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function fP(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fC(e,t){return fw(e)||fS(e,t)||fN(e,t)||fP()}function fN(e,t){if(e){if("string"==typeof e)return fO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fO(e,t)}}var fk=function(e){return Object.entries(e).reduce(function(e,t){var r=fC(t,2),n=r[0],i=r[1];return i&&(e[n]=i),e},{})},f_=function(e){return Object.entries(e).reduce(function(e,t){var r=fC(t,2),n=r[0],i=r[1];return null!=i&&(e[n]=i),e},{})};function fA(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function fD(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){fA(o,n,i,a,l,"next",e)}function l(e){fA(o,n,i,a,l,"throw",e)}a(void 0)})}}function fE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){fE(e,t,r[t])})}return e}function fI(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var fT=function(){var e,t=(0,V.useNavigate)(),r=(0,td.Z)(),n=(0,en.useAdminCreateDiscount)();return e=fD(function(e){var i;return fI(this,function(o){switch(o.label){case 0:return i={code:"".concat(e.code,"_COPY"),is_disabled:e.is_disabled,is_dynamic:e.is_dynamic,starts_at:e.starts_at,regions:e.regions.map(function(e){return e.id})},e.ends_at&&(i.ends_at=e.ends_at),e.valid_duration&&(i.valid_duration=e.valid_duration),"number"==typeof e.usage_limit&&(i.usage_limit=e.usage_limit),e.metadata&&(i.metadata=e.metadata),i.rule={type:e.rule.type,value:e.rule.value,description:e.rule.description},e.rule.allocation&&(i.rule.allocation=e.rule.allocation),e.rule.conditions&&(i.rule.conditions=e.rule.conditions.map(function(e){return fZ({operator:e.operator},fk({products:e.products,product_types:e.product_types,product_tags:e.product_tags,product_collections:e.product_collections,customer_groups:e.customer_groups}))})),[4,n.mutate(i,{onSuccess:function(e){t("/a/discounts/".concat(e.discount.id)),r("Success","Successfully copied discount","success")},onError:function(e){r("Error",(0,tf.e)(e),"error")}})];case 1:return o.sent(),[2]}})}),function(t){return e.apply(this,arguments)}};function fM(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function fR(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){fM(o,n,i,a,l,"next",e)}function l(e){fM(o,n,i,a,l,"throw",e)}a(void 0)})}}function fL(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var fz=function(e){var t,r=(0,V.useNavigate)(),n=(0,td.Z)(),i=o2(),o=fT(),a=(0,en.useAdminUpdateDiscount)(e.id),l=(0,en.useAdminDeleteDiscount)(null==e?void 0:e.id),s=(t=fR(function(){return fL(this,function(e){switch(e.label){case 0:return[4,i({heading:"Delete Discount",text:"Are you sure you want to delete this Discount?"})];case 1:return e.sent()&&l.mutate(),[2]}})}),function(){return t.apply(this,arguments)});return{getRowActions:function(){return[{label:"Edit",icon:(0,F.jsx)(eC,{size:20}),onClick:function(){return r("/a/discounts/".concat(e.id))}},{label:e.is_disabled?"Publish":"Unpublish",icon:e.is_disabled?(0,F.jsx)(fm,{size:20}):(0,F.jsx)(fj,{size:20}),onClick:function(){a.mutate({is_disabled:!e.is_disabled},{onSuccess:function(){n("Success","Successfully ".concat(e.is_disabled?"published":"unpublished"," discount"),"success")},onError:function(e){return n("Error",(0,tf.e)(e),"error")}})}},{label:"Duplicate",icon:(0,F.jsx)(tW,{size:20}),onClick:function(){return o(e)}},{label:"Delete",icon:(0,F.jsx)(eZ,{size:20}),variant:"danger",onClick:s}]}}};function fq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fF(e){if(Array.isArray(e))return e}function fH(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fU(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function fG(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){fH(e,t,r[t])})}return e}function fB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fW(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fB(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function fQ(e,t){return fF(e)||fU(e,t)||fY(e,t)||fG()}function fY(e,t){if(e){if("string"==typeof e)return fq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fq(e,t)}}var f$=15,fK={},fJ=function(){var e=fi(location.search,fK),t=e.removeTab,r=e.setTab,n=e.saveTab,i=e.availableTabs,o=e.activeFilterTab,a=e.reset,l=e.paginate,s=e.setFilters,c=e.filters,u=e.setQuery,d=e.queryObject,f=e.representationObject,p=uc().trackNumberOfDiscounts,m=parseInt(null==d?void 0:d.offset)||0,y=parseInt(d.limit)||f$,h=(0,en.useAdminDiscounts)(fV({is_dynamic:!1,expand:"rule,rule.conditions,rule.conditions.products,regions"},d),{keepPreviousData:!0,onSuccess:function(e){p({count:e.count})}}),b=h.discounts,v=h.isLoading,g=h.count,x=fQ((0,B.useState)(""),2),j=x[0],O=x[1],w=fQ((0,B.useState)(0),2),S=w[0],P=w[1];(0,B.useEffect)(function(){if(g&&d.limit){var e=Math.ceil(g/d.limit);e!==S&&P(e)}},[g,d.limit]);var C=fQ(dW(),1)[0],N=(0,rN.useTable)({columns:C,data:b||[],manualPagination:!0,initialState:{pageSize:y,pageIndex:m/y},pageCount:S,autoResetPage:!1},rN.usePagination),k=N.getTableProps,_=N.getTableBodyProps,A=N.headerGroups,D=N.rows,E=N.prepareRow,Z=N.canPreviousPage,I=N.canNextPage,T=N.pageCount,M=N.gotoPage,R=N.nextPage,L=N.previousPage,z=N.state.pageIndex;(0,B.useEffect)(function(){var e=setTimeout(function(){j?(u(j),M(0)):a()},400);return function(){return clearTimeout(e)}},[j]);var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=iL().stringify(e);window.history.replaceState("/a/discounts","","".concat("?".concat(t)))},H=function(){(0,iM.isEmpty)(f)?q({offset:0,limit:f$}):q(f)};return(0,B.useEffect)(function(){H()},[f]),(0,F.jsx)(nC,{hasPagination:!0,isLoading:v,numberOfRows:d.limit,pagingState:{count:g,offset:d.offset,pageSize:d.offset+D.length,title:"Discounts",currentPage:z+1,pageCount:T,nextPage:function(){I&&(l(1),R())},prevPage:function(){Z&&(l(-1),L())},hasNext:I,hasPrev:Z},children:(0,F.jsxs)(nf,fW(fV({filteringOptions:(0,F.jsx)(dF,{filters:c,submitFilters:s,clearFilters:function(){a(),O("")},tabs:i,onTabClick:r,activeTab:o,onRemoveTab:t,onSaveTab:n}),enableSearch:!0,handleSearch:O,searchPlaceholder:"Search by code or description...",searchValue:j},k()),{children:[(0,F.jsx)(nf.Head,{children:null==A?void 0:A.map(function(e){return(0,F.jsx)(nf.HeadRow,fW(fV({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,fW(fV({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,fW(fV({},_()),{children:D.map(function(e){return E(e),(0,F.jsx)(fX,{row:e},e.original.id)})}))]}))})},fX=function(e){var t=e.row,r=fz(t.original).getRowActions;return(0,F.jsx)(nf.Row,fW(fV({color:"inherit",linkTo:t.original.id},t.getRowProps()),{actions:r(),className:"group",children:t.cells.map(function(e){return(0,F.jsx)(nf.Cell,fW(fV({},e.getCellProps()),{children:e.render("Cell")}))})}))};function f0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f1(e){if(Array.isArray(e))return e}function f2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f3(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function f5(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){f2(e,t,r[t])})}return e}function f4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f8(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f4(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function f7(e,t){return f1(e)||f3(e,t)||f9(e,t)||f5()}function f9(e,t){if(e){if("string"==typeof e)return f0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f0(e,t)}}!function(e){e.PRODUCTS="products",e.PRODUCT_TYPES="product_types",e.PRODUCT_COLLECTIONS="product_collections",e.PRODUCT_TAGS="product_tags",e.CUSTOMER_GROUPS="customer_groups"}(p||(p={})),function(e){e.IN="in",e.NOT_IN="not_in"}(m||(m={})),function(e){e.ITEM="item",e.TOTAL="total"}(y||(y={})),function(e){e.FIXED="fixed",e.PERCENTAGE="percentage",e.FREE_SHIPPING="free_shipping"}(h||(h={}));var pe={products:{id:void 0,operator:m.IN,type:p.PRODUCTS,items:[]},product_collections:{id:void 0,operator:m.IN,type:p.PRODUCT_COLLECTIONS,items:[]},product_tags:{id:void 0,operator:m.IN,type:p.PRODUCT_TAGS,items:[]},product_types:{id:void 0,operator:m.IN,type:p.PRODUCT_TYPES,items:[]},customer_groups:{id:void 0,operator:m.IN,type:p.CUSTOMER_GROUPS,items:[]}},pt=function(e){var t=e.children,r=f7((0,B.useState)(!1),2),n=r[0],i=r[1],o=f7((0,B.useState)(!1),2),a=o[0],l=o[1],s=f7((0,B.useState)(null),2),c=s[0],u=s[1],d=f7((0,B.useState)(null),2),f=d[0],p=d[1],m=f7((0,B.useState)(pe),2),b=m[0],v=m[1],g=(0,tR.cI)({defaultValues:{rule:{type:h.PERCENTAGE,allocation:y.TOTAL}},shouldUnregister:!0}),x=g.watch("rule.type"),j=g.watch("is_dynamic"),O=g.watch("usage_limit"),w=g.watch("valid_duration"),S=g.watch("ends_at"),P=g.watch("starts_at");(0,B.useEffect)(function(){n&&!S&&g.setValue("ends_at",new Date(new Date().getTime()+6048e5)),!n&&S&&g.setValue("ends_at",null)},[S,n]),(0,B.useEffect)(function(){a&&!P&&g.setValue("starts_at",new Date(new Date().getTime())),!a&&P&&g.setValue("starts_at",void 0)},[S,n]);var C=function(){v(pe),g.reset({rule:{type:h.PERCENTAGE,allocation:y.TOTAL}})};return(0,B.useEffect)(function(){C()},[]),(0,F.jsx)(tR.RV,f8(f6({},g),{children:(0,F.jsx)(pr.Provider,{value:{type:x,isDynamic:j,hasExpiryDate:n,setHasExpiryDate:i,hasStartDate:a,setHasStartDate:l,handleConfigurationChanged:function(e){e.indexOf("ends_at")>-1&&!n?i(!0):-1===e.indexOf("ends_at")&&n&&i(!1),-1===e.indexOf("starts_at")&&a?l(!1):e.indexOf("starts_at")>-1&&!a&&l(!0),-1===e.indexOf("usage_limit")&&O?(u(O),setTimeout(function(){g.setValue("usage_limit",null)},300)):e.indexOf("usage_limit")>-1&&O&&g.setValue("usage_limit",c),-1===e.indexOf("valid_duration")&&""!==w?(p(w),setTimeout(function(){g.setValue("valid_duration","")},300)):e.indexOf("valid_duration")>-1&&""===w&&g.setValue("valid_duration",f)},conditions:b,updateCondition:function(e){var t=e.type,r=e.items,n=e.operator;v(function(e){return f8(f6({},e),f2({},t,f8(f6({},e[t]),{items:r,operator:n})))})},setConditions:v,handleReset:C,form:g},children:t})}))},pr=B.createContext(null),pn=function(){var e=B.useContext(pr),t=(0,tR.Gc)();if(!e)throw Error("useDiscountForm must be a child of DiscountFormContext");return f6({},t,e)},pi=function(e){var t=e.actions,r=e.index,n=e.title,i=e.description;return(0,F.jsxs)("div",{className:"p-base rounded-rounded gap-base flex items-center justify-between border",children:[(0,F.jsxs)("div",{className:"gap-base flex w-full overflow-hidden",children:[(0,F.jsx)("div",{children:(0,F.jsxs)(oP.Z,{className:"inter-base-semibold flex h-[40px] w-[40px] items-center justify-center",variant:"default",children:["\xa7",r]})}),(0,F.jsxs)("div",{className:"flex w-full flex-1 flex-col justify-center truncate",children:[(0,F.jsx)("div",{className:"inter-small-semibold",children:n}),i&&("string"==typeof i?(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:i}):i)]})]}),t&&(0,F.jsx)("div",{children:(0,F.jsx)(eQ,{forceDropdown:!0,actions:t})})]})};function po(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){po(e,t,r[t])})}return e}function pl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ps(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pl(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function pc(e,t){if(null==e)return{};var r,n,i=pu(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function pu(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var pd=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=pc(e,["size","color"]);return(0,F.jsx)("svg",ps(pa({width:r,height:r,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),{children:(0,F.jsx)("path",{d:"M6 12L10 8L6 4",stroke:void 0===n?"currentColor":n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))},pf=r(96227);function pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pm(e){if(Array.isArray(e))return e}function py(e){if(Array.isArray(e))return pp(e)}function ph(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pb(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function pv(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function pg(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function px(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ph(e,t,r[t])})}return e}function pO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function pS(e,t){return pm(e)||pv(e,t)||pC(e,t)||pg()}function pP(e){return py(e)||pb(e)||pC(e)||px()}function pC(e,t){if(e){if("string"==typeof e)return pp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pp(e,t)}}var pN=function(e){var t,r=e.label,n=e.resourceName,i=e.selectedIds,o=e.isLoading,a=e.totalCount,l=void 0===a?0:a,s=e.data,c=e.columns,u=e.onChange,d=e.options,f=e.renderRow,p=e.renderHeaderGroup,m=e.setQuery,y=e.queryObject,h=e.paginate,b=(0,B.useMemo)(function(){return s||[]},[s]),v=(0,rN.useTable)({columns:c,data:b,manualPagination:!0,initialState:{pageIndex:y.offset/y.limit,pageSize:y.limit,selectedRowIds:(void 0===i?[]:i).reduce(function(e,t){return e[t]=!0,e},{})},pageCount:Math.ceil(l/y.limit),autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},rN.useSortBy,rN.usePagination,rN.useRowSelect,pk);(0,B.useEffect)(function(){u&&u(Object.keys(v.state.selectedRowIds))},[v.state.selectedRowIds]);var g=(0,B.useCallback)(function(e){m(e),e&&v.gotoPage(0)},[m,v]),x=pS((0,B.useState)(""),2),j=x[0],O=x[1],w=(0,rk.N)(j,500);return(0,B.useEffect)(function(){g(w)},[w]),(0,F.jsxs)("div",{children:[r&&(0,F.jsx)("div",{className:"inter-base-semibold my-large",children:r}),(0,F.jsx)(nC,{isLoading:o,numberOfRows:y.limit,hasPagination:!0,pagingState:{count:l,offset:y.offset,pageSize:y.offset+v.rows.length,title:void 0===n?"":n,currentPage:v.state.pageIndex+1,pageCount:v.pageCount,nextPage:function(){v.canNextPage&&(h(1),v.nextPage())},prevPage:function(){v.canPreviousPage&&(h(-1),v.previousPage())},hasNext:v.canNextPage,hasPrev:v.canPreviousPage},children:(0,F.jsxs)(nf,pw(pj({},d,v.getTableProps()),{handleSearch:d.enableSearch?O:void 0,searchValue:j,className:"relative",children:[p&&(0,F.jsx)(nf.Head,{children:null===(t=v.headerGroups)||void 0===t?void 0:t.map(function(e){return p({headerGroup:e})})}),(0,F.jsx)(nf.Body,pw(pj({},v.getTableBodyProps()),{children:v.rows.map(function(e){return v.prepareRow(e),f({row:e})})}))]}))})]})},pk=function(e){e.visibleColumns.push(function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,F.jsx)("div",{className:"flex justify-center",children:(0,F.jsx)(rF,pw(pj({},t()),{onClick:function(e){return e.stopPropagation()}}))})},Cell:function(e){var t=e.row;return(0,F.jsx)("div",{className:"flex justify-center",children:(0,F.jsx)(rF,pw(pj({},t.getToggleRowSelectedProps()),{onClick:function(e){return e.stopPropagation()}}))})}}].concat(pP(e))})};function p_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p_(e,t,r[t])})}return e}function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pD(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var pZ=function(e){var t=e.row;return(0,F.jsx)(nf.Row,pE(pA({},t.getRowProps()),{children:t.cells.map(function(e){return(0,F.jsx)(nf.Cell,pE(pA({},e.getCellProps()),{children:e.render("Cell")}))})}))},pI=function(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,pE(pA({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,pE(pA({className:"w-[100px]"},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},pT=function(){return(0,B.useMemo)(function(){return[{Header:function(){return(0,F.jsxs)("div",{className:"flex min-w-[546px] items-center gap-1",children:["Title ",(0,F.jsx)(r8,{size:16})]})},accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsx)("span",{children:t.title})}},{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Products ",(0,F.jsx)(r8,{size:16})]})},id:"products",accessor:function(e){var t;return null==e?void 0:null===(t=e.products)||void 0===t?void 0:t.length},Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{className:"text-right",children:t})}}]},[])},pM={limit:12,offset:0},pR=r(48428);function pL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){pL(e,t,r[t])})}return e}function pq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pq(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function pH(e,t){if(null==e)return{};var r,n,i=pU(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function pU(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var pG=pR.fC,pV=function(e){var t=e.label,r=e.sublabel,n=e.description,i=e.className,o=e.disabled,a=e.disabledTooltip,l=e.children,s=pH(e,["label","sublabel","description","className","disabled","disabledTooltip","children"]);return(0,F.jsxs)("label",{className:(0,ec.Z)("rounded-rounded border-grey-20 p-base mb-xsmall gap-base relative flex cursor-pointer items-start border",{"bg-grey-5 text-grey-40":o},i),htmlFor:s.value,children:[o?(0,F.jsx)(a9.Z,{content:a,children:(0,F.jsx)(st.Z,{size:20,className:"text-grey-40"})}):(0,F.jsxs)(pR.ck,pF(pz({},s),{id:s.value,disabled:o,className:(0,ec.Z)("radio-outer-ring outline-0","shadow-grey-20 rounded-circle h-[20px] w-[20px] shrink-0 shadow-[0_0_0_1px]"),children:[(0,F.jsx)(pR.z$,{className:(0,ec.Z)("indicator relative flex h-full w-full items-center justify-center","after:bg-violet-60 after:rounded-circle after:absolute after:inset-0 after:m-auto after:block after:h-[12px] after:w-[12px]")}),(0,F.jsx)(pR.z$,{"aria-hidden":"true",className:(0,ec.Z)("shadow-violet-60 rounded-rounded absolute inset-0 shadow-[0_0_0_2px]")})]})),(0,F.jsxs)("div",{className:"truncate",children:[(0,F.jsx)("div",{className:"flex items-center",children:(0,F.jsxs)("p",{className:"inter-base-semibold truncate",children:[t," ",r?(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:r}):null]})}),n&&(0,F.jsx)("p",{className:(0,ec.Z)("inter-small-regular text-grey-50 mt-2xsmall truncate",{"text-grey-40":o}),children:n}),l]})]})},pB=function(e){var t=e.label,r=e.description,n=e.className,i=pH(e,["label","description","className"]);return(0,F.jsxs)("label",{className:(0,ec.Z)("mr-large flex items-center last:mr-0",pL({},"pointer-events-none select-none opacity-50",i.disabled),n),htmlFor:i.value,children:[(0,F.jsx)(pR.ck,pF(pz({},i),{id:i.value,className:(0,ec.Z)("radio-outer-ring outline-0","rounded-circle h-[20px] w-[20px] shrink-0 shadow-[0_0_0_1px] shadow-[#D1D5DB]"),children:(0,F.jsx)(pR.z$,{className:(0,ec.Z)("indicator relative flex h-full w-full items-center justify-center","after:bg-violet-60 after:rounded-circle after:absolute after:inset-0 after:m-auto after:block after:h-[12px] after:w-[12px]")})})),(0,F.jsxs)("div",{className:"ml-small inter-base-regular w-full cursor-pointer",children:[(0,F.jsx)("span",{children:t&&t}),(0,F.jsx)("span",{children:r&&r})]})]})},pW=function(e){var t=e.className,r=pH(e,["className"]);return(0,F.jsx)("label",{className:(0,ec.Z)(pL({},"pointer-events-none select-none opacity-50",r.disabled),t),htmlFor:r.value,children:(0,F.jsx)(pR.ck,pF(pz({},r),{id:r.value,className:(0,ec.Z)("radio-outer-ring outline-0","rounded-circle h-[20px] w-[20px] shrink-0 shadow-[0_0_0_1px] shadow-[#D1D5DB]"),children:(0,F.jsx)(pR.z$,{className:(0,ec.Z)("indicator relative flex h-full w-full items-center justify-center","after:bg-violet-60 after:rounded-circle after:absolute after:inset-0 after:m-auto after:block after:h-[12px] after:w-[12px]")})}))})};let pQ={Root:pG,Item:pV,SimpleItem:pB};var pY=function(e){var t=e.value,r=e.onChange;return(0,F.jsxs)(pQ.Root,{value:t,onValueChange:r,className:"gap-base mb-4 grid grid-cols-2",children:[(0,F.jsx)(pQ.Item,{className:"w-full",label:"In",value:m.IN,description:"Applies to the selected items."}),(0,F.jsx)(pQ.Item,{className:"w-full",label:"Not in",value:m.NOT_IN,description:"Applies to all items except the selected items."})]})},p$=function(e){var t=e.type,r=e.items,n=e.operator,i=e.onClose,o=(0,B.useContext)(pf.ej),a=o.pop,l=o.reset,s=pn().updateCondition;return(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:function(){i(),l()},children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){s({type:t,items:r,operator:n}),a()},children:"Save and add more"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){s({type:t,items:r,operator:n}),i(),l()},children:"Save and close"})]})};function pK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function pJ(e){if(Array.isArray(e))return e}function pX(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p0(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function p1(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){pX(e,t,r[t])})}return e}function p3(e,t){return pJ(e)||p0(e,t)||p5(e,t)||p1()}function p5(e,t){if(e){if("string"==typeof e)return pK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pK(e,t)}}var p6=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=p3((0,B.useState)((null===(t=i.product_collections)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=p3((0,B.useState)(i.product_collections.operator),2),c=s[0],u=s[1],d=(0,en.useAdminCollections)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.collections,y=pT();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,p2({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by title..."},resourceName:"Collections",totalCount:p||0,selectedIds:null==a?void 0:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:pZ,renderHeaderGroup:pI},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(p$,{type:"product_collections",items:a,onClose:r,operator:c})})]})};function p4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p4(e,t,r[t])})}return e}function p7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p9(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p7(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var me=function(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,p9(p8({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,p9(p8({className:"w-[100px]"},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},mt=function(e){var t=e.row;return(0,F.jsx)(nf.Row,p9(p8({},t.getRowProps()),{children:t.cells.map(function(e){return(0,F.jsx)(nf.Cell,p9(p8({},e.getCellProps()),{children:e.render("Cell")}))})}))},mr=function(){return(0,B.useMemo)(function(){return[{Header:function(){return(0,F.jsxs)("div",{className:"flex min-w-[540px] items-center gap-1",children:["Title ",(0,F.jsx)(r8,{size:16})]})},accessor:"name"},{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Members ",(0,F.jsx)(r8,{size:16})]})},id:"members",accessor:function(e){var t;return null===(t=e.customers)||void 0===t?void 0:t.length},Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{className:"text-right",children:t})}}]},[])};function mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mi(e){if(Array.isArray(e))return e}function mo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ma(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ml(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){mo(e,t,r[t])})}return e}function mc(e,t){return mi(e)||ma(e,t)||mu(e,t)||ml()}function mu(e,t){if(e){if("string"==typeof e)return mn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mn(e,t)}}var md=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=mc((0,B.useState)((null==i?void 0:null===(t=i.customer_groups)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=mc((0,B.useState)(i.customer_groups.operator),2),c=s[0],u=s[1],d=(0,en.useAdminCustomerGroups)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.customer_groups,y=mr();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,ms({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search groups..."},resourceName:"Customer groups",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.name}}))},renderRow:mt,renderHeaderGroup:me},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(p$,{type:"customer_groups",items:a,onClose:r,operator:c})})]})};function mf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){mf(e,t,r[t])})}return e}function mm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function my(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mm(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var mh=function(e){switch(e){case"proposed":return"warning";case"published":return"success";case"rejected":return"danger";default:return"default"}},mb=function(e){var t=e.row;return(0,F.jsx)(nf.Row,my(mp({},t.getRowProps()),{children:t.cells.map(function(e){return(0,F.jsx)(nf.Cell,my(mp({},e.getCellProps()),{children:e.render("Cell")}))})}))},mv=function(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,my(mp({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,my(mp({className:"w-[100px]"},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},mg=function(){return(0,B.useMemo)(function(){return[{Header:function(){return(0,F.jsxs)("div",{className:"flex min-w-[443px] items-center gap-1",children:["Title ",(0,F.jsx)(r8,{size:16})]})},accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.thumbnail?(0,F.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsx)("div",{className:"flex flex-col",children:(0,F.jsx)("span",{children:t.title})})]})}},{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center gap-1",children:["Status ",(0,F.jsx)(r8,{size:16})]})},accessor:"status",Cell:function(e){var t=e.row.original;return(0,F.jsx)(nN.Z,{title:"".concat(t.status.charAt(0).toUpperCase()).concat(t.status.slice(1)),variant:mh(t.status)})}},{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Variants ",(0,F.jsx)(r8,{size:16})]})},id:"variants",accessor:function(e){return e.variants.length},Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{className:"text-right",children:t})}}]},[])};function mx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mj(e){if(Array.isArray(e))return e}function mO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mw(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function mS(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){mO(e,t,r[t])})}return e}function mC(e,t){return mj(e)||mw(e,t)||mN(e,t)||mS()}function mN(e,t){if(e){if("string"==typeof e)return mx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mx(e,t)}}var mk=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=mC((0,B.useState)((null===(t=i.products)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=mC((0,B.useState)(i.products.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProducts)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.products,y=mg();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,mP({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search products..."},resourceName:"Products",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:mb,renderHeaderGroup:mv},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(p$,{type:"products",items:a,onClose:r,operator:c})})]})};function m_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m_(e,t,r[t])})}return e}function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mD(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var mZ=[{Header:function(){return(0,F.jsxs)("div",{className:"flex items-center gap-1",children:["Tag ",(0,F.jsx)(r8,{size:16})]})},accessor:"value",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"w-[220px]",children:(0,F.jsxs)("span",{className:"bg-grey-10 rounded-rounded px-2 py-0.5",children:["#",t.value]})})}}],mI=function(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,mE(mA({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,mE(mA({},e.getHeaderProps(e.getSortByToggleProps())),{className:"w-[20px]",children:e.render("Header")}))})}))},mT=function(e){var t=e.row;return(0,F.jsx)(nf.Row,mE(mA({},t.getRowProps()),{children:t.cells.map(function(e){return(0,F.jsx)(nf.Cell,mE(mA({},e.getCellProps()),{children:e.render("Cell")}))})}))};function mM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mR(e){if(Array.isArray(e))return e}function mL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mz(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function mq(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){mL(e,t,r[t])})}return e}function mH(e,t){return mR(e)||mz(e,t)||mU(e,t)||mq()}function mU(e,t){if(e){if("string"==typeof e)return mM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mM(e,t)}}var mG=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=mH((0,B.useState)((null===(t=i.product_tags)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=mH((0,B.useState)(i.product_tags.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProductTags)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.product_tags;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,mF({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by tag..."},resourceName:"Tags",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:mZ,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:mT,renderHeaderGroup:mI},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(p$,{type:"product_tags",items:a,onClose:r,operator:c})})]})};function mV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){mV(e,t,r[t])})}return e}function mW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mQ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mW(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var mY=function(e){var t=e.row;return(0,F.jsx)(nf.Row,mQ(mB({},t.getRowProps()),{children:t.cells.map(function(e){return(0,F.jsx)(nf.Cell,mQ(mB({},e.getCellProps()),{children:e.render("Cell")}))})}))},m$=function(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,mQ(mB({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,mQ(mB({className:"w-[100px]"},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},mK=function(){return(0,B.useMemo)(function(){return[{Header:function(){return(0,F.jsxs)("div",{className:"flex min-w-[626px] items-center gap-1",children:["Type ",(0,F.jsx)(r8,{size:16})]})},accessor:"value",Cell:function(e){var t=e.row.original;return(0,F.jsx)("span",{children:t.value})}}]},[])};function mJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mX(e){if(Array.isArray(e))return e}function m0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m1(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function m2(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m0(e,t,r[t])})}return e}function m5(e,t){return mX(e)||m1(e,t)||m6(e,t)||m2()}function m6(e,t){if(e){if("string"==typeof e)return mJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mJ(e,t)}}var m4=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=m5((0,B.useState)((null===(t=i.product_types)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=m5((0,B.useState)(i.product_types.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProductTypes)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.product_types,y=mK();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,m3({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by type..."},resourceName:"Types",totalCount:p||0,selectedIds:null==a?void 0:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:mY,renderHeaderGroup:m$},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(p$,{type:"product_types",items:a,onClose:r,operator:c})})]})};function m8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m7(e){if(Array.isArray(e))return e}function m9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function yt(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m9(e,t,r[t])})}return e}function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function yo(e,t){return m7(e)||ye(e,t)||ya(e,t)||yt()}function ya(e,t){if(e){if("string"==typeof e)return m8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m8(e,t)}}var yl={products:{id:void 0,operator:m.IN,type:p.PRODUCTS,items:[]},product_collections:{id:void 0,operator:m.IN,type:p.PRODUCT_COLLECTIONS,items:[]},product_tags:{id:void 0,operator:m.IN,type:p.PRODUCT_TAGS,items:[]},product_types:{id:void 0,operator:m.IN,type:p.PRODUCT_TYPES,items:[]},customer_groups:{id:void 0,operator:m.IN,type:p.CUSTOMER_GROUPS,items:[]}},ys=(0,B.createContext)(null),yc=function(e){var t=e.discount,r=e.children,n=yo((0,B.useState)(yl),2),i=n[0],o=n[1],a=(0,en.useAdminUpdateDiscount)(t.id).mutate,l=(0,td.Z)(),s=function(){if(t.rule.conditions.length){var e=yl,r=!0,n=!1,i=void 0;try{for(var a,l=t.rule.conditions[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;e=yi(yr({},e),m9({},s.type,yi(yr({},e[s.type]),{id:s.id}))),o(e)}}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}}else o(yl)};(0,B.useEffect)(function(){s()},[t]);var c=function(e){var r=Object.values(e).filter(function(e){return e.items.length}).map(function(e){var t;return m9(t={},e.type,e.items.map(function(e){return e.id})),m9(t,"operator",e.operator),t});r.length&&a({rule:{id:t.rule.id,conditions:r}},{onSuccess:function(){l("Condtions were succesfully added","Discount conditions updated","success")},onError:function(e){l("Error",(0,tf.e)(e),"error")}})};return(0,F.jsx)(ys.Provider,{value:{conditions:i,updateCondition:function(e){var t=e.type,r=e.items,n=e.operator;o(function(e){return yi(yr({},e),m9({},t,yi(yr({},e[t]),{items:r,operator:n})))})},reset:s,save:function(){c(i)},updateAndSave:function(e){var t=e.type,r=e.items,n=e.operator;c(yi(yr({},i),m9({},t,yi(yr({},i[t]),{items:r,operator:n}))))}},children:r})},yu=function(){var e=(0,B.useContext)(ys);if(null===e)throw Error("useConditions must be used within a ConditionsProvider");return e},yd=function(e){var t=e.type,r=e.items,n=e.operator,i=e.onClose,o=(0,B.useContext)(pf.ej),a=o.pop,l=o.reset,s=yu(),c=s.updateCondition,u=s.updateAndSave;return(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:i,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){c({type:t,items:r,operator:n}),a()},children:"Save and add more"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){u({type:t,items:r,operator:n}),i(),l()},children:"Save and close"})]})};function yf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yp(e){if(Array.isArray(e))return e}function ym(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yy(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function yh(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ym(e,t,r[t])})}return e}function yv(e,t){return yp(e)||yy(e,t)||yg(e,t)||yh()}function yg(e,t){if(e){if("string"==typeof e)return yf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yf(e,t)}}var yx=function(e){var t,r=e.onClose,n=sM(pM),i=yu().conditions,o=yv((0,B.useState)((null===(t=i.product_collections)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1];(0,B.useEffect)(function(){},[i]);var s=yv((0,B.useState)(i.product_collections.operator),2),c=s[0],u=s[1],d=(0,en.useAdminCollections)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.collections,y=pT();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,yb({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by title..."},resourceName:"Collections",totalCount:p||0,selectedIds:null==a?void 0:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:pZ,renderHeaderGroup:pI},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(yd,{type:"product_collections",items:a,onClose:r,operator:c})})]})};function yj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yO(e){if(Array.isArray(e))return e}function yw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yS(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function yP(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){yw(e,t,r[t])})}return e}function yN(e,t){return yO(e)||yS(e,t)||yk(e,t)||yP()}function yk(e,t){if(e){if("string"==typeof e)return yj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yj(e,t)}}var y_=function(e){var t,r=e.onClose,n=sM(pM),i=yu().conditions,o=yN((0,B.useState)((null==i?void 0:null===(t=i.customer_groups)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=yN((0,B.useState)(i.customer_groups.operator),2),c=s[0],u=s[1],d=(0,en.useAdminCustomerGroups)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.customer_groups,y=mr();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,yC({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search groups..."},resourceName:"Customer groups",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.name}}))},renderRow:mt,renderHeaderGroup:me},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(yd,{type:"customer_groups",items:a,onClose:r,operator:c})})]})};function yA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yD(e){if(Array.isArray(e))return e}function yE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yZ(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function yI(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){yE(e,t,r[t])})}return e}function yM(e,t){return yD(e)||yZ(e,t)||yR(e,t)||yI()}function yR(e,t){if(e){if("string"==typeof e)return yA(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yA(e,t)}}var yL=function(e){var t,r=e.onClose,n=sM(pM),i=yu().conditions,o=yM((0,B.useState)((null===(t=i.products)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=yM((0,B.useState)(i.products.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProducts)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.products,y=mg();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,yT({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search products..."},resourceName:"Products",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:mb,renderHeaderGroup:mv},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(yd,{type:"products",items:a,onClose:r,operator:c})})]})};function yz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yq(e){if(Array.isArray(e))return e}function yF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yH(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function yU(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){yF(e,t,r[t])})}return e}function yV(e,t){return yq(e)||yH(e,t)||yB(e,t)||yU()}function yB(e,t){if(e){if("string"==typeof e)return yz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yz(e,t)}}var yW=function(e){var t,r=e.onClose,n=sM(pM),i=yu().conditions,o=yV((0,B.useState)((null===(t=i.product_tags)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=yV((0,B.useState)(i.product_tags.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProductTags)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.product_tags;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,yG({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by tag..."},resourceName:"Tags",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:mZ,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:mT,renderHeaderGroup:mI},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(yd,{type:"product_tags",items:a,onClose:r,operator:c})})]})};function yQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yY(e){if(Array.isArray(e))return e}function y$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function yJ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y$(e,t,r[t])})}return e}function y0(e,t){return yY(e)||yK(e,t)||y1(e,t)||yJ()}function y1(e,t){if(e){if("string"==typeof e)return yQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yQ(e,t)}}var y2=function(e){var t,r=e.onClose,n=sM(pM),i=yu().conditions,o=y0((0,B.useState)((null===(t=i.product_types)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=y0((0,B.useState)(i.product_types.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProductTypes)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.product_types,y=mK();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,yX({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by type..."},resourceName:"Types",totalCount:p||0,selectedIds:null==a?void 0:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:mY,renderHeaderGroup:m$},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(yd,{type:"product_types",items:a,onClose:r,operator:c})})]})},y3=function(e){var t=e.isDetails,r=e.onClose,n=(0,B.useContext)(pf.ej);return(0,B.useMemo)(function(){return[{label:"Product",value:p.PRODUCTS,description:"Only for specific products",onClick:function(){return n.push({title:"Choose products",onBack:function(){return n.pop()},view:t?(0,F.jsx)(yL,{onClose:r}):(0,F.jsx)(mk,{onClose:r})})}},{label:"Customer group",value:p.CUSTOMER_GROUPS,description:"Only for specific customer groups",onClick:function(){n.push({title:"Choose groups",onBack:function(){return n.pop()},view:t?(0,F.jsx)(y_,{onClose:r}):(0,F.jsx)(md,{onClose:r})})}},{label:"Tag",value:p.PRODUCT_TAGS,description:"Only for specific tags",onClick:function(){return n.push({title:"Choose tags",onBack:function(){return n.pop()},view:t?(0,F.jsx)(yW,{onClose:r}):(0,F.jsx)(mG,{onClose:r})})}},{label:"Collection",value:p.PRODUCT_COLLECTIONS,description:"Only for specific product collections",onClick:function(){return n.push({title:"Choose collections",onBack:function(){return n.pop()},view:t?(0,F.jsx)(yx,{onClose:r}):(0,F.jsx)(p6,{onClose:r})})}},{label:"Type",value:p.PRODUCT_TYPES,description:"Only for specific product types",onClick:function(){return n.push({title:"Choose types",onBack:function(){return n.pop()},view:t?(0,F.jsx)(y2,{onClose:r}):(0,F.jsx)(m4,{onClose:r})})}}]},[t])};function y5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y6(e){if(Array.isArray(e))return e}function y4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y8(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function y7(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y4(e,t,r[t])})}return e}function he(e,t){return y6(e)||y8(e,t)||ht(e,t)||y7()}function ht(e,t){if(e){if("string"==typeof e)return y5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y5(e,t)}}var hr=function(e){var t=e.onClose,r=e.conditions,n=e.save,i=e.isDetails,o=void 0!==i&&i,a=(0,B.useContext)(pf.ej),l=he((0,B.useState)(y3({onClose:t,isDetails:o})),2),s=l[0],c=l[1];return(0,B.useEffect)(function(){var e=[],t=!0,n=!1,i=void 0;try{for(var a,l=Object.entries(r)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var u=he(a.value,2),d=u[0],f=u[1];(o?f.id:f.items.length)&&e.push(d)}}catch(e){n=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}c(s.filter(function(t){return!e.includes(t.value)}))},[r]),(0,F.jsx)(pf.ZP,{context:a,handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{className:"flex h-[calc(100vh-134px)] flex-col",children:[(0,F.jsxs)(tp.Z.Header,{handleClose:t,children:[(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Add Conditions"}),(0,F.jsxs)("span",{className:"text-grey-90 mt-6 flex items-center gap-1 font-semibold",children:["Choose a condition type"," ",(0,F.jsx)(rm.Z,{content:"You can only add one of each type of condition"})]})]}),(0,F.jsx)(tp.Z.Content,{className:"flex-1",children:s.length?s.map(function(e){return(0,F.jsx)(hn,y9({},e),e.value)}):(0,F.jsx)("div",{className:"flex h-full flex-1 flex-col items-center justify-center",children:(0,F.jsx)("span",{className:"inter-base-regular text-grey-40",children:"You cannot add any more conditions"})})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"small",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{onClick:function(){n&&n(),t()},size:"small",className:"text-small w-32 justify-center",variant:"primary",children:"Save"})]})})]})})},hn=function(e){var t=e.label,r=e.description,n=e.onClick;return(0,F.jsxs)("button",{onClick:n,className:"border-1 hover:bg-grey-5 mb-2 flex w-full cursor-pointer items-center justify-between rounded-lg border p-4 transition-all",children:[(0,F.jsxs)("div",{className:"flex flex-col items-start",children:[(0,F.jsx)("div",{className:"font-semibold ",children:t}),(0,F.jsx)("div",{className:"text-grey-50",children:r})]}),(0,F.jsx)(pd,{width:16,height:32,className:"text-grey-50"})]})},hi=function(e){var t=e.show,r=e.onClose,n=yu(),i=n.conditions,o=n.save,a=n.reset;return(0,F.jsx)("div",{children:t&&(0,F.jsx)(hr,{isDetails:!0,onClose:function(){r(),a()},conditions:i,save:o})})},ho=(0,B.createContext)(null),ha=function(e){var t=e.condition,r=e.discount,n=e.onClose,i=e.children,o=(0,td.Z)(),a=(0,B.useContext)(pf.ej),l=a.pop,s=a.reset,c=(0,en.useAdminAddDiscountConditionResourceBatch)(r.id,t.id),u=(0,en.useAdminDeleteDiscountConditionResourceBatch)(r.id,t.id),d=function(e,t){c.mutate({resources:e.map(function(e){return{id:e}})},{onSuccess:function(){o("Success","The resources were successfully added","success"),null==t||t()},onError:function(){return o("Error","Failed to add resources","error")}})};return(0,F.jsx)(ho.Provider,{value:{condition:t,discount:r,removeConditionResources:function(e){u.mutate({resources:e.map(function(e){return{id:e}})},{onSuccess:function(){o("Success","The resources were successfully removed","success")},onError:function(){return o("Error","Failed to remove resources","error")}})},saveAndClose:function(e){d(e,function(){return n()}),s()},saveAndGoBack:function(e){d(e),l()},isLoading:c.isLoading||u.isLoading},children:i})},hl=function(){var e=(0,B.useContext)(ho);if(null===e)throw Error("useEditConditionContext must be used within an EditConditionProvider");return e};function hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function hc(e){if(Array.isArray(e))return e}function hu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hd(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function hf(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){hu(e,t,r[t])})}return e}function hm(e,t){return hc(e)||hd(e,t)||hy(e,t)||hf()}function hy(e,t){if(e){if("string"==typeof e)return hs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hs(e,t)}}var hh=function(){var e=sM(pM),t=(0,B.useContext)(pf.ej).pop,r=hm((0,B.useState)([]),2),n=r[0],i=r[1],o=pT(),a=(0,en.useAdminCollections)(e.queryObject,{keepPreviousData:!0}),l=a.isLoading,s=a.count,c=a.collections,u=a.refetch,d=hl(),f=d.saveAndClose,p=d.saveAndGoBack;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,hp({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search..."},resourceName:"Collections",totalCount:null!=s?s:0,selectedIds:n,data:c||[],columns:o,isLoading:l,onChange:function(e){return i(e)},renderRow:pZ,renderHeaderGroup:pI},e))}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return p(n,function(){return u()})},children:"Save and go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return f(n)},children:"Save and close"})]})})]})};function hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function hv(e){if(Array.isArray(e))return e}function hg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hx(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function hj(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){hg(e,t,r[t])})}return e}function hw(e,t){return hv(e)||hx(e,t)||hS(e,t)||hj()}function hS(e,t){if(e){if("string"==typeof e)return hb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hb(e,t)}}var hP=function(){var e=sM(pM),t=(0,B.useContext)(pf.ej).pop,r=hw((0,B.useState)([]),2),n=r[0],i=r[1],o=mr(),a=(0,en.useAdminCustomerGroups)(e.queryObject,{keepPreviousData:!0}),l=a.isLoading,s=a.count,c=a.customer_groups,u=a.refetch,d=hl(),f=d.saveAndClose,p=d.saveAndGoBack;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,hO({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search..."},resourceName:"Groups",totalCount:null!=s?s:0,selectedIds:n,data:c||[],columns:o,isLoading:l,onChange:function(e){return i(e)},renderRow:mt,renderHeaderGroup:me},e))}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return p(n,function(){return u()})},children:"Save and go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return f(n)},children:"Save and close"})]})})]})};function hC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function hN(e){if(Array.isArray(e))return e}function hk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h_(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function hA(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){hk(e,t,r[t])})}return e}function hE(e,t){return hN(e)||h_(e,t)||hZ(e,t)||hA()}function hZ(e,t){if(e){if("string"==typeof e)return hC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hC(e,t)}}var hI=function(){var e=sM(pM),t=(0,B.useContext)(pf.ej).pop,r=hE((0,B.useState)([]),2),n=r[0],i=r[1],o=mK(),a=(0,en.useAdminProductTypes)(e.queryObject,{keepPreviousData:!0}),l=a.isLoading,s=a.count,c=a.product_types,u=a.refetch,d=hl(),f=d.saveAndClose,p=d.saveAndGoBack;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,hD({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search..."},resourceName:"Types",totalCount:null!=s?s:0,selectedIds:n,data:c||[],columns:o,isLoading:l,onChange:function(e){return i(e)},renderRow:mY,renderHeaderGroup:m$},e))}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return p(n,function(){return u()})},children:"Save and go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return f(n)},children:"Save and close"})]})})]})};function hT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function hM(e){if(Array.isArray(e))return e}function hR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hL(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function hz(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){hR(e,t,r[t])})}return e}function hF(e,t){return hM(e)||hL(e,t)||hH(e,t)||hz()}function hH(e,t){if(e){if("string"==typeof e)return hT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hT(e,t)}}var hU=function(){var e=sM(pM),t=(0,B.useContext)(pf.ej).pop,r=hF((0,B.useState)([]),2),n=r[0],i=r[1],o=mg(),a=(0,en.useAdminProducts)(e.queryObject,{keepPreviousData:!0}),l=a.isLoading,s=a.count,c=a.products,u=hl(),d=u.saveAndClose,f=u.saveAndGoBack;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,hq({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search..."},resourceName:"Products",totalCount:null!=s?s:0,selectedIds:n,data:c||[],columns:o,isLoading:l,onChange:function(e){return i(e)},renderRow:mb,renderHeaderGroup:mv},e))}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return f(n)},children:"Save and go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return d(n)},children:"Save and close"})]})})]})};function hG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function hV(e){if(Array.isArray(e))return e}function hB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hW(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function hQ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){hB(e,t,r[t])})}return e}function h$(e,t){return hV(e)||hW(e,t)||hK(e,t)||hQ()}function hK(e,t){if(e){if("string"==typeof e)return hG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hG(e,t)}}var hJ=function(){var e=sM(pM),t=(0,B.useContext)(pf.ej).pop,r=h$((0,B.useState)([]),2),n=r[0],i=r[1],o=(0,en.useAdminProductTags)(e.queryObject,{keepPreviousData:!0}),a=o.isLoading,l=o.count,s=o.product_tags,c=hl(),u=c.saveAndClose,d=c.saveAndGoBack;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,hY({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search..."},resourceName:"Tags",totalCount:null!=l?l:0,selectedIds:n,data:s||[],columns:mZ,isLoading:a,onChange:function(e){return i(e)},renderRow:mT,renderHeaderGroup:mI},e))}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return d(n)},children:"Save and go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return u(n)},children:"Save and close"})]})})]})},hX=function(e){return{title:"Add conditions",onBack:B.useContext(pf.ej).pop,view:function(){switch(e.type){case"products":return(0,F.jsx)(hU,{});case"product_collections":return(0,F.jsx)(hh,{});case"product_types":return(0,F.jsx)(hI,{});case"product_tags":return(0,F.jsx)(hJ,{});case"customer_groups":return(0,F.jsx)(hP,{})}}()}},h0=function(e){var t=e.numberOfSelectedRows,r=e.onDeselect,n=e.onRemove,i=hX(hl().condition),o=!!t,a=(0,B.useContext)(pf.ej).push;return(0,F.jsx)("div",{className:"space-x-xsmall flex h-[34px] overflow-hidden",children:(0,F.jsxs)("div",{className:(0,ec.Z)("transition-all duration-200",{"translate-y-[-42px]":!o,"translate-y-[0px]":o}),children:[(0,F.jsxs)("div",{className:"mb-2 flex h-[34px] items-center divide-x",children:[(0,F.jsxs)("span",{className:"inter-small-regular text-grey-50 mr-3",children:[t," selected"]}),(0,F.jsxs)("div",{className:"space-x-xsmall flex pl-3",children:[(0,F.jsx)(Y.Z,{onClick:r,size:"small",variant:"ghost",className:"border-grey-20 border",children:"Deselect"}),(0,F.jsx)(Y.Z,{onClick:n,size:"small",variant:"ghost",className:"border-grey-20 border text-rose-50",children:"Remove"})]})]}),(0,F.jsx)("div",{className:"flex h-[34px] justify-end",children:(0,F.jsxs)(Y.Z,{size:"small",variant:"ghost",className:"border-grey-20 border",onClick:function(){return a(i)},children:[(0,F.jsx)(sh.Z,{size:20})," Add"]})})]})})};function h1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h2(e){if(Array.isArray(e))return e}function h3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h5(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function h6(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){h3(e,t,r[t])})}return e}function h8(e,t){return h2(e)||h5(e,t)||h7(e,t)||h6()}function h7(e,t){if(e){if("string"==typeof e)return h1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h1(e,t)}}var h9=function(){var e=sM(pM),t=h8((0,B.useState)([]),2),r=t[0],n=t[1],i=hl(),o=i.condition,a=i.removeConditionResources,l=i.isLoading,s=(0,en.useAdminProducts)(h4({discount_condition_id:o.id},e.queryObject),{keepPreviousData:!0}),c=s.isLoading,u=s.count,d=s.products,f=s.refetch,p=mg(),m=function(){n([])};return(0,B.useEffect)(function(){l||(f(),m())},[l]),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,h4({options:{enableSearch:!1,tableActions:(0,F.jsx)(h0,{numberOfSelectedRows:r.length,onDeselect:m,onRemove:function(){a(r),m()}})},resourceName:"Products",totalCount:null!=u?u:0,selectedIds:r,data:d||[],columns:p,isLoading:c,onChange:function(e){return n(e)},renderRow:mb,renderHeaderGroup:mv},e))})};function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bt(e){if(Array.isArray(e))return e}function br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bn(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function bi(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){br(e,t,r[t])})}return e}function ba(e,t){return bt(e)||bn(e,t)||bl(e,t)||bi()}function bl(e,t){if(e){if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}}var bs=function(){var e=sM(pM),t=ba((0,B.useState)([]),2),r=t[0],n=t[1],i=hl(),o=i.condition,a=i.removeConditionResources,l=i.isLoading,s=(0,en.useAdminCollections)(bo({discount_condition_id:o.id},e.queryObject),{keepPreviousData:!0}),c=s.isLoading,u=s.count,d=s.collections,f=s.refetch,p=pT(),m=function(){n([])};return(0,B.useEffect)(function(){l||(f(),m())},[l]),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,bo({options:{enableSearch:!1,tableActions:(0,F.jsx)(h0,{numberOfSelectedRows:r.length,onDeselect:m,onRemove:function(){a(r),m()},deleting:l})},resourceName:"Collections",totalCount:null!=u?u:0,selectedIds:r,data:d||[],columns:p,isLoading:c,onChange:function(e){return n(e)},renderRow:pZ,renderHeaderGroup:pI},e))})};function bc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bu(e){if(Array.isArray(e))return e}function bd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bf(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function bp(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){bd(e,t,r[t])})}return e}function by(e,t){return bu(e)||bf(e,t)||bh(e,t)||bp()}function bh(e,t){if(e){if("string"==typeof e)return bc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bc(e,t)}}var bb=function(){var e=sM(pM),t=hl(),r=t.condition,n=t.removeConditionResources,i=t.isLoading,o=(0,en.useAdminProductTypes)(bm({discount_condition_id:r.id},e.queryObject),{keepPreviousData:!0}),a=o.isLoading,l=o.count,s=o.product_types,c=o.refetch,u=mK(),d=by((0,B.useState)([]),2),f=d[0],p=d[1],m=function(){p([])};return(0,B.useEffect)(function(){i||(c(),m())},[i]),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,bm({options:{enableSearch:!1,tableActions:(0,F.jsx)(h0,{numberOfSelectedRows:f.length,onDeselect:m,onRemove:function(){n(f),m()},deleting:i})},resourceName:"Types",totalCount:null!=l?l:0,selectedIds:f,data:s||[],columns:u,isLoading:a,onChange:function(e){return p(e)},renderRow:mY,renderHeaderGroup:m$},e))})};function bv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bg(e){if(Array.isArray(e))return e}function bx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bj(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function bO(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){bx(e,t,r[t])})}return e}function bS(e,t){return bg(e)||bj(e,t)||bP(e,t)||bO()}function bP(e,t){if(e){if("string"==typeof e)return bv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bv(e,t)}}var bC=function(){var e=sM(pM),t=hl(),r=t.condition,n=t.removeConditionResources,i=t.isLoading,o=(0,en.useAdminProductTags)(bw({discount_condition_id:r.id},e.queryObject),{keepPreviousData:!0}),a=o.isLoading,l=o.count,s=o.product_tags,c=o.refetch,u=bS((0,B.useState)([]),2),d=u[0],f=u[1],p=function(){f([])};return(0,B.useEffect)(function(){i||(c(),p())},[i]),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,bw({options:{enableSearch:!1,tableActions:(0,F.jsx)(h0,{numberOfSelectedRows:d.length,onDeselect:p,onRemove:function(){n(d),p()},deleting:i})},resourceName:"Tags",totalCount:null!=l?l:0,selectedIds:d,data:s||[],columns:mZ,isLoading:a,onChange:function(e){return f(e)},renderRow:mT,renderHeaderGroup:mI},e))})};function bN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bk(e){if(Array.isArray(e))return e}function b_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bA(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function bD(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){b_(e,t,r[t])})}return e}function bZ(e,t){return bk(e)||bA(e,t)||bI(e,t)||bD()}function bI(e,t){if(e){if("string"==typeof e)return bN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bN(e,t)}}var bT=function(){var e=sM(pM),t=hl(),r=t.condition,n=t.removeConditionResources,i=t.isLoading,o=(0,en.useAdminCustomerGroups)(bE({discount_condition_id:r.id},e.queryObject),{keepPreviousData:!0}),a=o.isLoading,l=o.count,s=o.customer_groups,c=o.refetch,u=mr(),d=bZ((0,B.useState)([]),2),f=d[0],p=d[1],m=function(){p([])};return(0,B.useEffect)(function(){i||(c(),m())},[i]),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(pN,bE({options:{enableSearch:!1,tableActions:(0,F.jsx)(h0,{numberOfSelectedRows:f.length,onDeselect:m,onRemove:function(){n(f),m()},deleting:i})},resourceName:"Groups",totalCount:null!=l?l:0,selectedIds:f,data:s||[],columns:u,isLoading:a,onChange:function(e){return p(e)},renderRow:mt,renderHeaderGroup:me},e))})};!function(e){e.PRODUCTS="products",e.PRODUCT_TYPES="product_types",e.PRODUCT_COLLECTIONS="product_collections",e.PRODUCT_TAGS="product_tags",e.CUSTOMER_GROUPS="customer_groups"}(b||(b={}));var bM=function(e){switch(e){case b.PRODUCTS:return"products";case b.CUSTOMER_GROUPS:return"groups";case b.PRODUCT_TAGS:return"tags";case b.PRODUCT_COLLECTIONS:return"collections";case b.PRODUCT_TYPES:return"types"}},bR=function(e){var t=e.open,r=e.condition,n=e.discount,i=e.onClose,o=(0,B.useContext)(pf.ej);return(0,F.jsx)(ha,{condition:r,discount:n,onClose:i,children:(0,F.jsx)(pf.ZP,{open:t,handleClose:i,context:o,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:i,children:(0,F.jsxs)("h1",{className:"inter-xlarge-semibold",children:["Edit ",(0,iM.capitalize)(bM(null==r?void 0:r.type))," in Discount Condition"]})}),function(){switch(r.type){case"products":return(0,F.jsx)(h9,{});case"product_collections":return(0,F.jsx)(bs,{});case"product_types":return(0,F.jsx)(bb,{});case"product_tags":return(0,F.jsx)(bC,{});case"customer_groups":return(0,F.jsx)(bT,{})}}(),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"button",onClick:i,children:"Close"})})})]})})})};function bL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bz(e){if(Array.isArray(e))return e}function bq(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function bF(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bH(e,t){return bz(e)||bq(e,t)||bU(e,t)||bF()}function bU(e,t){if(e){if("string"==typeof e)return bL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bL(e,t)}}var bG=function(e){var t=bH((0,B.useState)(null),2),r=t[0],n=t[1],i=(0,en.useAdminDiscount)(e.id).refetch,o=(0,en.useAdminGetDiscountCondition)(e.id,r,{expand:"product_collections,product_tags,product_types,customer_groups,products"},{enabled:!!r,cacheTime:0}).discount_condition,a=(0,en.useAdminDiscountRemoveCondition)(e.id).mutate,l=(0,td.Z)(),s=function(e){a(e,{onSuccess:function(){l("Success","Condition removed","success"),i()},onError:function(e){l("Error",(0,tf.e)(e),"error")}})};return{conditions:e.rule.conditions.map(function(e){return{type:e.type,title:bV(e.type),description:bB(e.type),actions:[{label:"Edit condition",icon:(0,F.jsx)(eC,{size:16}),variant:"ghost",onClick:function(){return n(e.id)}},{label:"Delete condition",icon:(0,F.jsx)(eZ,{size:16}),variant:"danger",onClick:function(){return s(e.id)}}]}}),selectedCondition:o,deSelectCondition:function(){n(null)}}},bV=function(e){switch(e){case p.PRODUCTS:return"Product";case p.PRODUCT_COLLECTIONS:return"Collection";case p.PRODUCT_TAGS:return"Tag";case p.PRODUCT_TYPES:return"Type";case p.CUSTOMER_GROUPS:return"Customer Group"}},bB=function(e){switch(e){case p.PRODUCTS:return"Discount is applicable to specific products";case p.PRODUCT_COLLECTIONS:return"Discount is applicable to specific collections";case p.PRODUCT_TAGS:return"Discount is applicable to specific product tags";case p.PRODUCT_TYPES:return"Discount is applicable to specific product types";case p.CUSTOMER_GROUPS:return"Discount is applicable to specific customer groups"}};function bW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bQ(e){if(Array.isArray(e))return e}function bY(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function b$(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bK(e,t){return bQ(e)||bY(e,t)||bJ(e,t)||b$()}function bJ(e,t){if(e){if("string"==typeof e)return bW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bW(e,t)}}var bX=function(e){var t=e.discount,r=bK((0,B.useState)(!1),2),n=r[0],i=r[1],o=bG(t),a=o.conditions,l=o.selectedCondition,s=o.deSelectCondition;return(0,F.jsx)(yc,{discount:t,children:(0,F.jsxs)("div",{children:[(0,F.jsx)(tI,{title:"Conditions",className:"min-h-[200px]",forceDropdown:!0,actionables:[{label:"Add condition",icon:(0,F.jsx)(sh.Z,{size:16}),onClick:function(){return i(!0)}}],children:a.length?(0,F.jsx)("div",{style:{gridTemplateRows:"repeat(".concat(Math.ceil((null==a?void 0:a.length)/2),", minmax(0, 1fr))")},className:"gap-y-base gap-x-xlarge grid grid-flow-col grid-cols-2",children:a.map(function(e,t){return(0,F.jsx)(pi,{title:e.title,index:t+1,description:e.description,actions:e.actions},t)})}):(0,F.jsx)("div",{className:"gap-y-small flex flex-1 flex-col items-center justify-center",children:(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:"This discount has no conditions"})})}),(0,F.jsx)(hi,{show:n,onClose:function(){return i(!1)}}),l&&(0,F.jsx)(bR,{open:!!l,condition:l,discount:t,onClose:function(){return s()}})]})})};function b0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){b0(e,t,r[t])})}return e}function b2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b3(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b2(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function b5(e,t){if(null==e)return{};var r,n,i=b6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function b6(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var b4=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=b5(e,["size","color"]);return(0,F.jsxs)("svg",b3(b1({width:r,height:r,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M8 4.66669V8.16669L10 9.33335",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function b8(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){b8(e,t,r[t])})}return e}function b9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ve(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b9(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function vt(e,t){if(null==e)return{};var r,n,i=vr(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vr(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var vn=function(e){var t=e.numbers,r=e.selected,n=e.onSelect,i=e.className,o=vt(e,["numbers","selected","onSelect","className"]);return(0,F.jsx)("div",ve(b7({},o),{className:(0,ec.Z)("time-list flex h-[305px] flex-col overflow-y-auto",i),children:t.map(function(e,t){return(0,F.jsx)("div",{className:(0,ec.Z)("inter-base-regular hover:bg-grey-20 h-[40px] w-[40px] rounded last:mb-4",{"bg-violet-60 text-grey-0 inter-base-semibold hover:bg-violet-50":e===r}),children:(0,F.jsx)("button",{onClick:function(){return n(e)},className:"h-full w-full py-2",type:"button",children:e.toLocaleString("en-US",{minimumIntegerDigits:2})})},t)})}))};function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vo(e){if(Array.isArray(e))return e}function va(e){if(Array.isArray(e))return vi(e)}function vl(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function vs(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function vc(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vu(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vd(e,t){return vo(e)||vs(e,t)||vp(e,t)||vc()}function vf(e){return va(e)||vl(e)||vp(e)||vu()}function vp(e,t){if(e){if("string"==typeof e)return vi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vi(e,t)}}var vm=function(e){var t=e.date,r=e.onSubmitDate,n=e.label,i=e.required,o=e.tooltipContent,a=e.tooltip,l=vd((0,B.useState)(new Date(t).getUTCMinutes()),2),s=l[0],c=l[1],u=vd((0,B.useState)(new Date(t).getUTCHours()),2),d=u[0],f=u[1];(0,B.useEffect)(function(){c(new Date(t).getUTCMinutes()),f(new Date(t).getUTCHours())},[t]),(0,B.useEffect)(function(){if(t&&!(0,iM.isNil)(d)&&!(0,iM.isNil)(s)){var e=new Date(new Date(t).getTime());e.setUTCHours(d),e.setUTCMinutes(s),r(e)}},[s,d]);var p=vd((0,B.useState)(!1),2),m=p[0],y=p[1],h=vf(Array(60).keys()),b=vf(Array(24).keys());return(0,F.jsx)("div",{className:"w-full",children:(0,F.jsxs)(uu.fC,{open:m,onOpenChange:y,children:[(0,F.jsx)(uu.xz,{asChild:!0,children:(0,F.jsx)("button",{className:(0,ec.Z)("rounded-rounded w-full border ",{"shadow-input border-violet-60":m,"border-grey-20":!m}),type:"button",children:(0,F.jsxs)(uX,{className:"shadown-none border-0 focus-within:shadow-none",children:[(0,F.jsxs)("div",{className:"text-grey-50 flex w-full justify-between pr-0.5",children:[(0,F.jsx)(u0.Z,{label:void 0===n?"start date":n,required:void 0!==i&&i,tooltipContent:o,tooltip:a}),(0,F.jsx)(tz.Z,{size:16})]}),(0,F.jsxs)("div",{className:"text-grey-40 flex w-full items-center text-left",children:[(0,F.jsx)(b4,{size:16}),(0,F.jsx)("span",{className:"mx-1",children:"UTC"}),(0,F.jsx)("span",{className:"text-grey-90",children:t?iW().utc(t).format("HH:mm"):"--:--"})]})]})})}),(0,F.jsxs)(uu.VY,{side:"top",sideOffset:8,className:"rounded-rounded scrollbar-hide border-grey-20 bg-grey-0 shadow-dropdown flex w-full border px-6 pt-6 pb-4",children:[(0,F.jsx)(vn,{numbers:b,selected:d,onSelect:function(e){return f(e)},className:"pr-4"}),(0,F.jsx)(vn,{numbers:h,selected:s,onSelect:function(e){return c(e)}}),(0,F.jsx)("div",{className:"to-grey-0 h-xlarge absolute bottom-4 left-0 right-0 z-10 bg-gradient-to-b from-transparent"})]})]})})};function vy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vh(e){if(Array.isArray(e))return e}function vb(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function vv(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vg(e,t){return vh(e)||vb(e,t)||vx(e,t)||vv()}function vx(e,t){if(e){if("string"==typeof e)return vy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vy(e,t)}}var vj=function(e){return parseFloat(e.target.value)},vO=function(e){var t=e.value,r=e.onChange,n=t?(0,dH.Qc)(t):{},i=vg((0,B.useState)(n.years||0),2),o=i[0],a=i[1],l=vg((0,B.useState)(n.months||0),2),s=l[0],c=l[1],u=vg((0,B.useState)(n.days||0),2),d=u[0],f=u[1],p=vg((0,B.useState)(n.hours||0),2),m=p[0],y=p[1],h=vg((0,B.useState)(n.minutes||0),2),b=h[0],v=h[1];return(0,B.useEffect)(function(){r("P".concat(o||0,"Y").concat(s||0,"M").concat(d||0,"DT").concat(m||0,"H").concat(b||0,"M"))},[o,s,d,m,b]),(0,F.jsx)("div",{children:(0,F.jsxs)("div",{className:"gap-x-xsmall gap-y-base mt-xlarge grid grid-cols-3 grid-rows-2",children:[(0,F.jsx)(ry.Z,{label:"Years",type:"number",placeholder:"0",value:o,onChange:function(e){return a(vj(e))},min:0}),(0,F.jsx)(ry.Z,{label:"Months",type:"number",placeholder:"0",value:s,onChange:function(e){return c(vj(e))},min:0}),(0,F.jsx)(ry.Z,{label:"Days",type:"number",placeholder:"0",value:d,onChange:function(e){return f(vj(e))},min:0}),(0,F.jsx)(ry.Z,{label:"Hours",type:"number",placeholder:"0",value:m,onChange:function(e){return y(vj(e))},min:0}),(0,F.jsx)(ry.Z,{label:"Minutes",type:"number",placeholder:"0",value:b,onChange:function(e){return v(vj(e))},min:0})]})})},vw=r(73560),vS=function(e){var t=e.title,r=e.description,n=e.tooltip,i=e.open,o=void 0!==i&&i,a=e.onSwitch,l=e.children;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-start justify-between",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:t}),n&&(0,F.jsx)(rm.Z,{content:n})]}),(0,F.jsx)("p",{className:"inter-small-regular text-grey-50 mt-1",children:r})]}),(0,F.jsx)(vw.Z,{checked:o,onClick:a,type:"button",className:"cursor-pointer"})]}),(0,F.jsx)("div",{className:(0,ec.Z)("overflow-hidden transition-[max-height,opacity] duration-500 ease-in-out",{"max-h-[1000px] opacity-100":o,"max-h-0 opacity-0":!o}),children:(0,F.jsx)("div",{className:"mt-base",children:l})})]})},vP=function(e){var t=e.form,r=e.isDynamic,n=t.control,i=t.path;return(0,F.jsx)("div",{children:(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsx)(tR.Qr,{name:i("starts_at"),control:n,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,F.jsx)(vS,{open:!!n,onSwitch:function(){n?r(null):r(new Date)},title:"Discount has a start date?",description:"Schedule the discount to activate in the future.",children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)(di,{date:n,label:"Start date",onSubmitDate:r}),(0,F.jsx)(vm,{label:"Start time",date:n,onSubmitDate:r})]})})}}),(0,F.jsx)(tR.Qr,{name:i("ends_at"),control:n,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vS,{open:!!r,onSwitch:function(){r?n(null):n(new Date(new Date().getTime()+6048e5))},title:"Discount has an expiry date?",description:"Schedule the discount to deactivate in the future.",children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)(di,{date:r,label:"Expiry date",onSubmitDate:n}),(0,F.jsx)(vm,{label:"Expiry time",date:r,onSubmitDate:n})]})})}}),(0,F.jsx)(tR.Qr,{name:i("usage_limit"),control:n,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vS,{open:!!r,onSwitch:function(){r?n(null):n(10)},title:"Limit the number of redemtions?",description:"Limit applies across all customers, not per customer.",children:(0,F.jsx)(ry.Z,{label:"Number of redemptions",type:"number",placeholder:"5",min:1,defaultValue:null!=r?r:void 0,onChange:function(e){return n(e.target.valueAsNumber)}})})}}),r&&(0,F.jsx)(tR.Qr,{name:i("valid_duration"),control:n,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,F.jsx)(vS,{open:!!n,onSwitch:function(){n?r(null):r("P0Y0M0DT00H00M")},title:"Availability duration?",description:"Set the duration of the discount.",children:(0,F.jsx)(vO,{value:null!=n?n:void 0,onChange:r})})}})]})})},vC=function(e){var t=e.discount,r=e.onClose,n=e.open,i=(0,en.useAdminUpdateDiscount)(t.id),o=i.mutate,a=i.isLoading,l=(0,td.Z)(),s=(0,tR.cI)({defaultValues:vN(t)}),c=s.handleSubmit,u=s.reset,d=c(function(e){var t;o({starts_at:null!==(t=e.config.starts_at)&&void 0!==t?t:new Date,ends_at:e.config.ends_at,usage_limit:e.config.usage_limit&&e.config.usage_limit>0?e.config.usage_limit:null,valid_duration:e.config.valid_duration},{onSuccess:function(e){var t=e.discount;l("Success","Discount updated successfully","success"),u(vN(t)),r()},onError:function(e){l("Error",(0,tf.e)(e),"error")}})});return(0,B.useEffect)(function(){n&&u(vN(t))},[t,u,n]),(0,F.jsx)(tp.Z,{open:n,handleClose:r,isLargeModal:!0,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:r,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit configurations"})}),(0,F.jsxs)("form",{onSubmit:d,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(vP,{form:(0,tL.G)(s,"config")})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"min-w-[128px]",type:"button",onClick:r,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",className:"min-w-[128px]",type:"submit",loading:a,disabled:a,children:"Save"})]})})]})]})})},vN=function(e){return{config:{starts_at:new Date(e.starts_at),ends_at:e.ends_at?new Date(e.ends_at):null,usage_limit:e.usage_limit,valid_duration:e.valid_duration}}};function vk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v_(e){if(Array.isArray(e))return e}function vA(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function vD(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){vA(o,n,i,a,l,"next",e)}function l(e){vA(o,n,i,a,l,"throw",e)}a(void 0)})}}function vE(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function vZ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vI(e,t){return v_(e)||vE(e,t)||vT(e,t)||vZ()}function vT(e,t){if(e){if("string"==typeof e)return vk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vk(e,t)}}function vM(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var vR=function(e){var t=e.date;return(0,F.jsxs)("div",{className:"text-grey-50 inter-small-regular flex ",children:[iW().utc(t).format("ddd, DD MMM YYYY"),(0,F.jsxs)("span",{className:"ml-3 flex items-center",children:[(0,F.jsx)(b4,{size:16}),(0,F.jsx)("span",{className:"ml-2.5",children:iW().utc(t).format("UTC HH:mm")})]})]})},vL=function(e){var t=e.text;return(0,F.jsx)("span",{className:"text-grey-50 inter-small-regular",children:t})},vz=function(e){var t=(0,en.useAdminUpdateDiscount)(e.id),r=(0,td.Z)(),n=[];return n.push({title:"Start date",description:(0,F.jsx)(vR,{date:e.starts_at})}),e.ends_at&&n.push({title:"End date",description:(0,F.jsx)(vR,{date:e.ends_at}),actions:[{label:"Delete configuration",icon:(0,F.jsx)(eZ,{size:20}),variant:"danger",onClick:vD(function(){return vM(this,function(e){switch(e.label){case 0:return[4,t.mutateAsync({ends_at:null},{onSuccess:function(){r("Success","Discount end date removed","success")},onError:function(e){r("Error",(0,tf.e)(e),"error")}})];case 1:return[2,e.sent()]}})})}]}),e.usage_limit&&n.push({title:"Number of redemptions",description:(0,F.jsx)(vL,{text:e.usage_limit.toLocaleString("en")}),actions:[{label:"Delete configuration",icon:(0,F.jsx)(eZ,{size:20}),variant:"danger",onClick:vD(function(){return vM(this,function(e){switch(e.label){case 0:return[4,t.mutateAsync({usage_limit:null},{onSuccess:function(){r("Success","Redemption limit removed","success")},onError:function(e){r("Error",(0,tf.e)(e),"error")}})];case 1:return[2,e.sent()]}})})}]}),e.valid_duration&&n.push({title:"Duration",description:(0,F.jsx)(vL,{text:Object.entries(fk((0,dH.Qc)(e.valid_duration))).map(function(e){var t=vI(e,2),r=t[0],n=t[1];return"".concat(n," ").concat(r)}).join(", ")}),actions:[{label:"Delete setting",icon:(0,F.jsx)(eZ,{size:20}),variant:"danger",onClick:vD(function(){return vM(this,function(e){switch(e.label){case 0:return[4,t.mutateAsync({valid_duration:null},{onSuccess:function(){r("Success","Discount duration removed","success")},onError:function(e){r("Error",(0,tf.e)(e),"error")}})];case 1:return[2,e.sent()]}})})}]}),n},vq=function(e){var t=e.discount,r=vz(t),n=(0,s1.Z)(),i=n.state,o=n.open,a=n.close;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tI,{title:"Configurations",className:"min-h-[200px]",actionables:[{label:"Edit configurations",onClick:o,icon:(0,F.jsx)(eC,{size:20})}],forceDropdown:!0,children:(0,F.jsx)("div",{style:{gridTemplateRows:"repeat(".concat(Math.ceil(r.length/2),", minmax(0, 1fr))")},className:"gap-y-base gap-x-xlarge grid grid-flow-col grid-cols-2",children:r.map(function(e,t){return(0,F.jsx)(pi,{title:e.title,index:t+1,description:e.description,actions:e.actions},t)})})}),(0,F.jsx)(vC,{discount:t,onClose:a,open:i})]})},vF=function(e){var t=e.isDraft,r=e.draftState,n=e.activeState,i=e.onChange;return(0,F.jsx)("div",{children:(0,F.jsxs)(eI.fC,{children:[(0,F.jsx)(eI.xz,{asChild:!0,children:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",children:(0,F.jsx)(nN.Z,{title:t?r:n,variant:t?"default":"active"})})}),(0,F.jsx)(eI.VY,{sideOffset:5,className:"bg-grey-0 border-grey-20 rounded-rounded shadow-dropdown p-xsmall z-30 min-w-[200px] border",children:(0,F.jsx)(eI.ck,{children:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-full justify-start",onClick:i,children:(0,F.jsx)(nN.Z,{title:t?n:r,variant:t?"active":"default"})})})})]})})},vH=r(89670);function vU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){vU(e,t,r[t])})}return e}function vV(e,t){if(null==e)return{};var r,n,i=vB(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vB(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var vW=(0,B.forwardRef)(function(e,t){var r=lg(e),n=r.label,i=r.helperText,o=r.required,a=vV(r,["label","helperText","required"]);return(0,F.jsx)(ai,{label:n,helperText:i,required:o,children:(0,F.jsx)(vH.Z,vG({ref:t},a))})}),vQ=r(79585),vY=r(89086),v$=r(3091);function vK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vJ(e){if(Array.isArray(e))return e}function vX(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function v0(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v1(e,t){return vJ(e)||vX(e,t)||v2(e,t)||v0()}function v2(e,t){if(e){if("string"==typeof e)return vK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vK(e,t)}}var v3=function(e){var t=e.name,r=e.currencyCode,n=e.errors,i=e.amount,o=e.onChange,a=e.label,l=e.required,s=v$.Q[r.toUpperCase()],c=s.symbol_native,u=s.decimal_digits,d=(0,B.useCallback)(function(e){return"".concat(e/Math.pow(10,u))},[u]),f=v1((0,B.useState)(null!=i?d(i):void 0),2),p=f[0],m=f[1];(0,B.useEffect)(function(){i&&m(d(i))},[i,u,d]);var y=function(e,t){"number"==typeof t?o(Math.round(t*Math.pow(10,u))):o(null),m(e)},h=Math.pow(10,-u);return(0,F.jsxs)("div",{children:[a&&(0,F.jsx)(u0.Z,{label:a,required:l,className:"mb-xsmall"}),(0,F.jsxs)("div",{className:(0,ec.Z)("bg-grey-5 border-gray-20 px-small py-xsmall rounded-rounded focus-within:shadow-input focus-within:border-violet-60 flex h-10 w-full items-center border",{"border-rose-50":n&&t&&n[t]}),children:[(0,F.jsx)("span",{className:"inter-base-regular text-grey-40",children:c}),(0,F.jsx)(vY.Z,{step:h,value:p,onValueChange:function(e,t,r){return y(e,null==r?void 0:r.float)},allowNegativeValue:!1,placeholder:"-",decimalScale:u,className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-transparent text-right font-normal outline-none outline-0"})]}),(0,F.jsx)(o9.Z,{name:t,errors:n})]})};function v5(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){v5(e,t,r[t])})}return e}!function(e){e.FIXED="fixed",e.PERCENTAGE="percentage",e.FREE_SHIPPING="free_shipping"}(v||(v={}));var v4=function(e){var t=e.form,r=e.type,n=e.isEdit,i=t.register,o=t.path,a=t.control,l=t.formState.errors,s=(0,en.useAdminRegions)().regions,c=(0,B.useMemo)(function(){return(null==s?void 0:s.map(function(e){return{value:e.id,label:e.name,currency_code:e.currency_code}}))||[]},[s]),u=(0,tR.qo)({control:a,name:o("region_ids.0.currency_code"),defaultValue:"usd"});return(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsx)(tR.Qr,{name:o("region_ids"),control:a,rules:{required:s6.Z.required("Regions")},render:function(e){var t=e.field,n=t.value,i=t.onChange,o=t.name,a=t.ref;return(0,F.jsx)(lS,{name:o,ref:a,value:n,onChange:function(e){i(r===v.FIXED?[e]:e)},label:"Choose valid regions",isMulti:r!==v.FIXED,selectAll:r!==v.FIXED,isSearchable:!0,required:!0,options:c,errors:l})}}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:(0,ec.Z)("gap-small grid",{"grid-cols-2":r===v.FIXED||r===v.PERCENTAGE,"grid-cols-1":r===v.FREE_SHIPPING}),children:[(0,F.jsx)(ry.Z,v6({label:"Code",required:!0,errors:l},i(o("code"),{required:s6.Z.required("Code")}))),r===v.FIXED?(0,F.jsx)(tR.Qr,{name:o("value"),rules:{required:s6.Z.required("Amount"),shouldUnregister:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(v3,{label:"Amount",amount:r,onChange:n,currencyCode:u,errors:l})}}):r===v.PERCENTAGE?(0,F.jsx)(ry.Z,v6({label:"Percentage",placeholder:"Percentage",errors:l,prefix:"%",required:!0},i(o("value"),{valueAsNumber:!0,required:s6.Z.required("Percentage"),shouldUnregister:!0}))):null]}),(0,F.jsx)("p",{className:"inter-small-regular text-grey-50 mt-small max-w-[60%]",children:"The code your customers will enter during checkout. This will appear on your customer's invoice. Uppercase letters and numbers only."})]}),(0,F.jsx)("div",{children:(0,F.jsx)(vQ.Z,v6({label:"Description",errors:l,required:!0},i(o("description"),{required:s6.Z.required("Description")})))}),!n&&(0,F.jsx)("div",{children:(0,F.jsx)(tR.Qr,{name:o("is_dynamic"),control:a,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.ref;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)(rF,{checked:r,onChange:n,ref:i}),(0,F.jsx)("p",{className:"ml-small mr-xsmall",children:"Template discount"}),(0,F.jsx)(rm.Z,{content:"Template discounts allow you to define a set of rules that can be used across a group of discounts. This is useful in campaigns that should generate unique codes for each user, but where the rules for all unique codes should be the same."})]}),(0,F.jsx)(o9.Z,{errors:l,name:o("is_dynamic")})]})}})})]})},v8=function(e){var t=e.discount,r=e.open,n=e.onClose,i=(0,en.useAdminUpdateDiscount)(t.id),o=i.mutate,a=i.isLoading,l=(0,td.Z)(),s=(0,tR.cI)({defaultValues:v7(t)}),c=s.handleSubmit,u=s.reset,d=c(function(e){o({regions:e.general.region_ids.map(function(e){return e.value}),code:e.general.code,rule:{id:t.rule.id,description:e.general.description,value:e.general.value,allocation:t.rule.allocation},metadata:rd(e.metadata)},{onSuccess:function(){l("Success","Discount updated successfully","success"),n()},onError:function(e){l("Error",(0,tf.e)(e),"error")}})});return(0,B.useEffect)(function(){r&&u(v7(t))},[t,u,r]),(0,F.jsx)(tp.Z,{open:r,handleClose:n,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit general information"})}),(0,F.jsxs)("form",{onSubmit:d,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Details"}),(0,F.jsx)(v4,{form:(0,tL.G)(s,"general"),type:t.rule.type,isEdit:!0})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(s,"metadata")})]})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:n,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",disabled:a,loading:a,children:"Save and close"})]})})]})]})})},v7=function(e){return{general:{code:e.code,description:e.rule.description,region_ids:e.regions.map(function(e){return{label:e.name,value:e.id,currency_code:e.currency_code}}),value:e.rule.value},metadata:rf(e.metadata)}};function v9(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function ge(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){v9(o,n,i,a,l,"next",e)}function l(e){v9(o,n,i,a,l,"throw",e)}a(void 0)})}}function gt(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var gr=function(e){var t,r,n=e.discount,i=o2(),o=(0,V.useNavigate)(),a=(0,td.Z)(),l=(0,en.useAdminUpdateDiscount)(n.id),s=(0,en.useAdminDeleteDiscount)(n.id),c=(t=ge(function(){return gt(this,function(e){switch(e.label){case 0:return[4,i({heading:"Delete Promotion",text:"Are you sure you want to delete this promotion?"})];case 1:return e.sent()&&s.mutate(void 0,{onSuccess:function(){a("Success","Promotion deleted successfully","success"),o("/a/discounts/")},onError:function(e){a("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)}),u=(r=ge(function(){return gt(this,function(e){return l.mutate({is_disabled:!n.is_disabled},{onSuccess:function(e){var t=e.discount.is_disabled;a("Success","Discount ".concat(t?"drafted":"published"," successfully"),"success")},onError:function(e){a("Error",(0,tf.e)(e),"error")}}),[2]})}),function(){return r.apply(this,arguments)}),d=(0,s1.Z)(),f=d.state,p=d.open,m=d.close,y=[{label:"Edit general information",onClick:p,icon:(0,F.jsx)(eC,{size:20})},{label:"Delete discount",onClick:c,variant:"danger",icon:(0,F.jsx)(eZ,{size:20})}];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tI,{actionables:y,title:n.code,subtitle:n.rule.description,forceDropdown:!0,className:"min-h-[200px]",status:(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[n.is_dynamic&&(0,F.jsx)("span",{children:(0,F.jsx)(oP.Z,{variant:"default",children:(0,F.jsx)("span",{className:"text-grey-90 inter-small-regular",children:"Template discount"})})}),(0,F.jsx)(vF,{isDraft:null==n?void 0:n.is_disabled,activeState:"Published",draftState:"Draft",onChange:u})]}),children:(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsxs)("div",{className:"border-grey-20 border-l pl-6",children:[gn(n),(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Discount Amount"})]}),(0,F.jsxs)("div",{className:"border-grey-20 ml-12 border-l pl-6",children:[(0,F.jsx)("h2",{className:"inter-xlarge-regular text-grey-90",children:n.regions.length.toLocaleString("en-US")}),(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Valid Regions"})]}),(0,F.jsxs)("div",{className:"border-grey-20 ml-12 border-l pl-6",children:[(0,F.jsx)("h2",{className:"inter-xlarge-regular text-grey-90",children:n.usage_count.toLocaleString("en-US")}),(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Total Redemptions"})]})]})}),(0,F.jsx)(v8,{discount:n,onClose:m,open:f})]})},gn=function(e){switch(e.rule.type){case"fixed":return(0,F.jsxs)("div",{className:"flex items-baseline",children:[(0,F.jsx)("h2",{className:"inter-xlarge-regular",children:(0,oy.rX)({currency:e.regions[0].currency_code,amount:e.rule.value})}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 ml-1",children:e.regions[0].currency_code.toUpperCase()})]});case"percentage":return(0,F.jsxs)("div",{className:"flex items-baseline",children:[(0,F.jsx)("h2",{className:"inter-xlarge-regular text-grey-90",children:e.rule.value}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 ml-1",children:"%"})]});case"free_shipping":return(0,F.jsx)("h2",{className:"inter-xlarge-regular text-grey-90",children:"FREE SHIPPING"});default:return"Unknown discount type"}};function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function go(e){if(Array.isArray(e))return e}function ga(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function gl(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ga(o,n,i,a,l,"next",e)}function l(e){ga(o,n,i,a,l,"throw",e)}a(void 0)})}}function gs(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function gc(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gu(e,t){return go(e)||gs(e,t)||gd(e,t)||gc()}function gd(e,t){if(e){if("string"==typeof e)return gi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gi(e,t)}}function gf(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var gp=function(){var e=(0,V.useParams)().id,t=(0,V.useNavigate)(),r=(0,en.useAdminDiscount)(e,{expand:"rule,rule.conditions"},{enabled:!!e}),n=r.discount,i=r.isLoading,o=r.error,a=gu((0,B.useState)(!1),2),l=a[0],s=a[1],c=(0,en.useAdminDeleteDiscount)(e),u=(0,td.Z)(),d=(0,ig.e)().getWidgets,f=function(){c.mutate(void 0,{onSuccess:function(){u("Success","Discount deleted","success")},onError:function(e){u("Error",(0,tf.e)(e),"error")}})};if(o){var p=ix(o);if(p&&404===p.status)return t("/404"),null;throw o}return i||!n?(0,F.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}):(0,F.jsxs)("div",{className:"pb-xlarge",children:[l&&(0,F.jsx)(tx,{handleClose:function(){return s(!l)},onDelete:gl(function(){return gf(this,function(e){return[2,f()]})}),successText:"Discount deleted",confirmText:"Yes, delete",text:"Are you sure you want to delete this discount?",heading:"Delete discount"}),(0,F.jsx)(eb,{label:"Back to Discounts",path:"/a/discounts",className:"mb-xsmall"}),(0,F.jsx)("div",{className:"gap-y-xsmall flex flex-col",children:(0,F.jsxs)(pt,{children:[d("discount.details.before").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:n,widget:e,injectionZone:"discount.details.before"},t)}),(0,F.jsx)(gr,{discount:n}),(0,F.jsx)(vq,{discount:n}),(0,F.jsx)(bX,{discount:n}),d("discount.details.after").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:n,widget:e,injectionZone:"discount.details.after"},t)}),(0,F.jsx)(tT,{data:n,title:"Raw discount"})]})})]})},gm=r(80350);function gy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){gy(e,t,r[t])})}return e}function gb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gb(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function gg(e,t){if(null==e)return{};var r,n,i=gx(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gx(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var gj=function(e){var t=e.children,r=gg(e,["children"]);return(0,F.jsx)(gm.fC,gv(gh({},r),{children:t}))},gO=function(e){var t=e.title,r=e.subtitle,n=e.description,i=e.required,o=e.tooltip,a=e.children,l=e.className,s=e.headingSize,c=void 0===s?"large":s,u=e.customTrigger,d=e.forceMountContent,f=gg(e,["title","subtitle","description","required","tooltip","children","className","headingSize","customTrigger","forceMountContent"]),p=(0,ec.Z)({"inter-small-semibold":"small"===c,"inter-base-semibold":"medium"===c,"inter-large-semibold":"large"===c}),m=(0,ec.Z)({"pb-0 mb-6 ":"medium"===c,"pb-5 radix-state-open:pb-5xlarge mb-5 ":"large"===c});return(0,F.jsxs)(gm.ck,gv(gh({},f),{className:(0,ec.Z)("border-grey-20 group border-b last:mb-0",{"opacity-30":f.disabled},m,l),children:[(0,F.jsx)(gm.h4,{className:"px-1",children:(0,F.jsx)(gm.xz,{className:"w-full",asChild:!0,children:(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsxs)("span",{className:p,children:[t,i&&(0,F.jsx)("span",{className:"text-rose-50",children:"*"})]}),o&&(0,F.jsx)(rm.Z,{content:o})]}),(void 0===u?void 0:u)||(0,F.jsx)(gw,{})]}),r&&(0,F.jsx)("span",{className:"inter-small-regular text-grey-50 mt-1",children:r})]})})}),(0,F.jsx)(gm.VY,{forceMount:void 0===d?void 0:d,className:(0,ec.Z)("radix-state-closed:animate-accordion-close radix-state-open:animate-accordion-open radix-state-closed:pointer-events-none px-1"),children:(0,F.jsxs)("div",{className:"inter-base-regular group-radix-state-closed:animate-accordion-close",children:[n&&(0,F.jsx)("p",{className:"text-grey-50 ",children:n}),(0,F.jsx)("div",{className:"w-full",children:a})]})})]}))};gj.Item=gO;var gw=function(){return(0,F.jsx)("div",{className:"btn-ghost rounded-rounded group relative p-[6px]",children:(0,F.jsxs)("div",{className:"h-5 w-5",children:[(0,F.jsx)("span",{className:"bg-grey-50 rounded-circle group-radix-state-open:rotate-90 absolute inset-y-[31.75%] left-[48%] right-1/2 w-[1.5px] duration-300"}),(0,F.jsx)("span",{className:"bg-grey-50 rounded-circle group-radix-state-open:rotate-90 group-radix-state-open:left-1/2 group-radix-state-open:right-1/2 absolute inset-x-[31.75%] top-[48%] bottom-1/2 h-[1.5px] duration-300"})]})})};function gS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gP(e){if(Array.isArray(e))return e}function gC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gN(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function gk(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g_(e,t){return gP(e)||gN(e,t)||gA(e,t)||gk()}function gA(e,t){if(e){if("string"==typeof e)return gS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gS(e,t)}}!function(e){e.PRODUCTS="products",e.PRODUCT_TYPES="product_types",e.PRODUCT_COLLECTIONS="product_collections",e.PRODUCT_TAGS="product_tags",e.CUSTOMER_GROUPS="customer_groups"}(g||(g={}));var gD=function(e){var t=[],r=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=g_(o.value,2),s=l[0],c=l[1];c&&c.items.length&&t.push(gC({operator:c.operator},s,c.items.map(function(e){return e.id})))}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}if(t.length)return t},gE=function(e,t){var r,n,i;return{code:e.code,rule:{allocation:e.rule.type===h.FIXED?e.rule.allocation:y.TOTAL,type:e.rule.type,value:"free_shipping"!==e.rule.type?e.rule.value:0,description:e.rule.description,conditions:gD(t)},is_dynamic:e.is_dynamic,ends_at:null!==(i=e.ends_at)&&void 0!==i?i:void 0,regions:(null===(r=e.regions)||void 0===r?void 0:r.map(function(e){return e.value}))||[],starts_at:e.starts_at,usage_limit:e.usage_limit&&e.usage_limit>0?e.usage_limit:void 0,valid_duration:e.is_dynamic&&(null===(n=e.valid_duration)||void 0===n?void 0:n.length)?e.valid_duration:void 0,metadata:rd(e.metadata)}};function gZ(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function gI(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){gZ(o,n,i,a,l,"next",e)}function l(e){gZ(o,n,i,a,l,"throw",e)}a(void 0)})}}function gT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){gT(e,t,r[t])})}return e}function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gR(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function gz(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var gq=function(){var e,t,r=(0,V.useNavigate)(),n=(0,en.useAdminCreateDiscount)(),i=pn().conditions;return{onSaveAsInactive:(e=gI(function(e){return gz(this,function(t){switch(t.label){case 0:return[4,n.mutateAsync(gL(gM({},gE(e,i)),{is_disabled:!0}),{onSuccess:function(){r("/a/discounts")}})];case 1:return t.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),onSaveAsActive:(t=gI(function(e){return gz(this,function(t){switch(t.label){case 0:return[4,n.mutateAsync(gL(gM({},gE(e,i)),{is_disabled:!1}),{onSuccess:function(){r("/a/discounts")}})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)})}},gF=function(e){var t=e.type,r=e.items,n=e.operator,i=e.onClose,o=pn().updateCondition;return(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:i,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"danger",size:"small",onClick:function(){o({type:t,items:[],operator:m.IN}),i()},children:"Delete condition"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){o({type:t,items:r,operator:n}),i()},className:"min-w-[128px]",children:"Save"})]})};function gH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gU(e){if(Array.isArray(e))return e}function gG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gV(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function gB(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){gG(e,t,r[t])})}return e}function gQ(e,t){return gU(e)||gV(e,t)||gY(e,t)||gB()}function gY(e,t){if(e){if("string"==typeof e)return gH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gH(e,t)}}var g$=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=gQ((0,B.useState)((null===(t=i.product_collections)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=gQ((0,B.useState)(i.product_collections.operator),2),c=s[0],u=s[1],d=(0,en.useAdminCollections)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.collections,y=pT();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,gW({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by title...",filters:[{title:"Title",name:"title"}]},resourceName:"Collections",totalCount:p||0,selectedIds:null==a?void 0:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:pZ,renderHeaderGroup:pI},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(gF,{type:"product_collections",items:a,operator:c,onClose:r})})]})};function gK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gJ(e){if(Array.isArray(e))return e}function gX(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g0(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function g1(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){gX(e,t,r[t])})}return e}function g3(e,t){return gJ(e)||g0(e,t)||g5(e,t)||g1()}function g5(e,t){if(e){if("string"==typeof e)return gK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gK(e,t)}}var g6=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=g3((0,B.useState)((null===(t=i.customer_groups)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=g3((0,B.useState)(i.customer_groups.operator),2),c=s[0],u=s[1],d=(0,en.useAdminCustomerGroups)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.customer_groups,y=mr();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,g2({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search groups..."},resourceName:"Customer groups",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.name}}))},renderRow:mt,renderHeaderGroup:me},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(gF,{type:"customer_groups",items:a,operator:c,onClose:r})})]})};function g4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g8(e){if(Array.isArray(e))return e}function g7(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g9(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function xe(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){g7(e,t,r[t])})}return e}function xr(e,t){return g8(e)||g9(e,t)||xn(e,t)||xe()}function xn(e,t){if(e){if("string"==typeof e)return g4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g4(e,t)}}var xi=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=xr((0,B.useState)((null===(t=i.products)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=xr((0,B.useState)(i.products.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProducts)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.products,y=mg();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,xt({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search products..."},resourceName:"Products",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.title}}))},renderRow:mb,renderHeaderGroup:mv},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(gF,{type:"products",items:a,operator:c,onClose:r})})]})};function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xa(e){if(Array.isArray(e))return e}function xl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xs(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function xc(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){xl(e,t,r[t])})}return e}function xd(e,t){return xa(e)||xs(e,t)||xf(e,t)||xc()}function xf(e,t){if(e){if("string"==typeof e)return xo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xo(e,t)}}var xp=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=xd((0,B.useState)((null===(t=i.product_tags)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=xd((0,B.useState)(i.product_tags.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProductTags)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.product_tags;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:f?(0,F.jsx)(ei.Z,{}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,xu({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by tag..."},resourceName:"Tags",totalCount:p||0,selectedIds:a.map(function(e){return e.id}),data:m,columns:mZ,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:mT,renderHeaderGroup:mI},n))]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(gF,{type:"product_tags",items:a,operator:c,onClose:r})})]})};function xm(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xy(e){if(Array.isArray(e))return e}function xh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xb(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function xv(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){xh(e,t,r[t])})}return e}function xx(e,t){return xy(e)||xb(e,t)||xj(e,t)||xv()}function xj(e,t){if(e){if("string"==typeof e)return xm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xm(e,t)}}var xO=function(e){var t,r=e.onClose,n=sM(pM),i=pn().conditions,o=xx((0,B.useState)((null===(t=i.product_types)||void 0===t?void 0:t.items)||[]),2),a=o[0],l=o[1],s=xx((0,B.useState)(i.product_types.operator),2),c=s[0],u=s[1],d=(0,en.useAdminProductTypes)(n.queryObject,{keepPreviousData:!0}),f=d.isLoading,p=d.count,m=d.product_types,y=mK();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(pY,{value:c,onChange:u}),(0,F.jsx)(pN,xg({options:{enableSearch:!0,immediateSearchFocus:!0,searchPlaceholder:"Search by type..."},resourceName:"Types",totalCount:p||0,selectedIds:null==a?void 0:a.map(function(e){return e.id}),data:m,columns:y,isLoading:f,onChange:function(e){l(((null==m?void 0:m.filter(function(t){return e.includes(t.id)}))||[]).map(function(e){return{id:e.id,label:e.value}}))},renderRow:mY,renderHeaderGroup:m$},n))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)(gF,{type:"product_types",items:a,operator:c,onClose:r})})]})},xw=function(e){var t=e.onClose,r=e.view;return(0,F.jsxs)(tp.Z,{open:!0,handleClose:t,children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsxs)("h1",{className:"inter-xlarge-semibold",children:["Edit ",bM(r)]})}),(0,F.jsx)(tp.Z.Body,{children:(0,F.jsx)(xS,{view:r,onClose:t})})]})},xS=function(e){var t=e.view,r=e.onClose;switch(t){case p.PRODUCTS:return(0,F.jsx)(xi,{onClose:r});case p.CUSTOMER_GROUPS:return(0,F.jsx)(g6,{onClose:r});case p.PRODUCT_COLLECTIONS:return(0,F.jsx)(g$,{onClose:r});case p.PRODUCT_TAGS:return(0,F.jsx)(xp,{onClose:r});case p.PRODUCT_TYPES:return(0,F.jsx)(xO,{onClose:r})}};function xP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xC(e){if(Array.isArray(e))return e}function xN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xk(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function x_(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){xN(e,t,r[t])})}return e}function xD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xE(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xD(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function xZ(e,t){return xC(e)||xk(e,t)||xI(e,t)||x_()}function xI(e,t){if(e){if("string"==typeof e)return xP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xP(e,t)}}var xT=function(e){var t=e.index,r=e.discountId,n=e.conditionId,i=e.type,o=e.setCondition,a=e.items,l=(0,B.useMemo)(function(){switch(i){case p.PRODUCTS:return{expand:"products"};case p.PRODUCT_COLLECTIONS:return{expand:"product_collections"};case p.PRODUCT_TAGS:return{expand:"product_tags"};case p.CUSTOMER_GROUPS:return{expand:"customer_groups"};case p.PRODUCT_TYPES:return{expand:"product_types"}}},[i]),s=(0,en.useAdminGetDiscountCondition)(r,n,l,{enabled:!!r&&!!n,cacheTime:0}).discount_condition,c=pn().updateCondition,u=xZ((0,B.useState)(!1),2),d=u[0],f=u[1];(0,B.useEffect)(function(){if(s)switch(i){case p.PRODUCTS:o(function(e){return xE(xA({},e),{products:xE(xA({},e.products),{id:s.id,operator:s.operator,items:s.products.map(function(e){return{id:e.id,label:e.title}})})})});break;case p.PRODUCT_COLLECTIONS:o(function(e){return xE(xA({},e),{product_collections:xE(xA({},e.product_collections),{id:s.id,operator:s.operator,items:s.product_collections.map(function(e){return{id:e.id,label:e.title}})})})});break;case p.PRODUCT_TAGS:o(function(e){return xE(xA({},e),{product_tags:xE(xA({},e.product_tags),{id:s.id,operator:s.operator,items:s.product_tags.map(function(e){return{id:e.id,label:e.value}})})})});break;case p.CUSTOMER_GROUPS:o(function(e){return xE(xA({},e),{customer_groups:xE(xA({},e.customer_groups),{id:s.id,operator:s.operator,items:s.customer_groups.map(function(e){return{id:e.id,label:e.name}})})})});break;case p.PRODUCT_TYPES:o(function(e){return xE(xA({},e),{product_types:xE(xA({},e.product_types),{id:s.id,operator:s.operator,items:s.product_types.map(function(e){return{id:e.id,label:e.value}})})})})}},[s,i]);var y=xZ((0,B.useMemo)(function(){var e=Math.max(Math.floor(400/110)-1,1);return[a.slice(0,e),a.length-e]},[a]),2),h=y[0],b=y[1];return a.length?(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"p-base rounded-rounded gap-base flex items-center justify-between border",children:[(0,F.jsxs)("div",{className:"gap-base flex w-full overflow-hidden",children:[(0,F.jsx)("div",{children:(0,F.jsxs)(oP.Z,{className:"inter-base-semibold flex h-[40px] w-[40px] items-center justify-center",variant:"default",children:["\xa7",t+1]})}),(0,F.jsxs)("div",{className:"flex w-full flex-1 flex-col justify-center truncate",children:[(0,F.jsx)("div",{className:"inter-small-semibold",children:xM(i)}),(0,F.jsx)("div",{className:"inter-small-regular gap-x-xsmall flex w-full flex-1 items-center",children:(0,F.jsxs)("div",{className:"gap-x-2xsmall text-grey-50 inter-small-regular flex w-full flex-1 items-center",children:[h.map(function(e,t){return(0,F.jsxs)("span",{children:[i===p.PRODUCT_TAGS&&"#",e.label,t!==h.length-1&&", "]},t)}),b>0&&(0,F.jsxs)("span",{className:"text-grey-40 ml-2",children:["+",b," more"]})]})})]})]}),(0,F.jsx)("div",{children:(0,F.jsx)(eQ,{forceDropdown:!0,actions:[{label:"Edit",onClick:function(){return f(!0)},icon:(0,F.jsx)(eC,{size:16})},{label:"Delete condition",onClick:function(){return c({type:i,items:[],operator:m.IN})},icon:(0,F.jsx)(eZ,{size:16}),variant:"danger"}]})})]}),d&&(0,F.jsx)(xw,{onClose:function(){return f(!1)},view:i})]}):null},xM=function(e){switch(e){case p.PRODUCTS:return"Product";case p.PRODUCT_COLLECTIONS:return"Collection";case p.PRODUCT_TAGS:return"Tag";case p.CUSTOMER_GROUPS:return"Customer group";case p.PRODUCT_TYPES:return"Type"}};function xR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xL(e){if(Array.isArray(e))return e}function xz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xq(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function xF(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){xz(e,t,r[t])})}return e}function xU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xU(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function xV(e,t){return xL(e)||xq(e,t)||xB(e,t)||xF()}function xB(e,t){if(e){if("string"==typeof e)return xR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xR(e,t)}}var xW=function(e){var t,r=e.discount,n=pn(),i=n.setConditions,o=n.conditions,a=xV((0,B.useState)(!1),2),l=a[0],s=a[1];(0,B.useEffect)(function(){var e;if(null==r?void 0:null===(e=r.rule)||void 0===e?void 0:e.conditions){var t=!0,n=!1,a=void 0;try{for(var l,s=r.rule.conditions[Symbol.iterator]();!(t=(l=s.next()).done);t=!0)!function(){var e=l.value;i(function(t){return xG(xH({},t),xz({},e.type,xG(xH({},o[e.type]),{id:e.id,operator:e.operator,type:e.type})))})}()}catch(e){n=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}}},[null==r?void 0:null===(t=r.rule)||void 0===t?void 0:t.conditions]);var c=(0,B.useMemo)(function(){return Object.values(o).every(function(e){return e.items.length})},[o]),u=(0,B.useMemo)(function(){return Object.values(o).filter(function(e){return e.id||e.items.length})},[o]);return(0,F.jsxs)("div",{className:"pt-5",children:[(0,F.jsx)("div",{className:"gap-y-small flex flex-col",children:u.map(function(e,t){return(0,F.jsx)(xT,{index:t,discountId:null==r?void 0:r.id,conditionId:e.id,type:e.type,setCondition:i,items:e.items},t)})}),!c&&(0,F.jsxs)(Y.Z,{size:"small",variant:"ghost",onClick:function(){return s(!0)},className:"rounded-rounded mt-4 w-full border p-2",children:[(0,F.jsx)(sh.Z,{size:18}),(0,F.jsx)("span",{children:"Add Condition"})]}),l&&(0,F.jsx)(hr,{onClose:function(){return s(!1)},conditions:o})]})};function xQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xY(e){if(Array.isArray(e))return e}function x$(e){if(Array.isArray(e))return xQ(e)}function xK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xJ(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function xX(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function x0(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x1(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){xK(e,t,r[t])})}return e}function x3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x3(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function x6(e,t){return xY(e)||xX(e,t)||x8(e,t)||x0()}function x4(e){return x$(e)||xJ(e)||x8(e)||x1()}function x8(e,t){if(e){if("string"==typeof e)return xQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xQ(e,t)}}var x7=function(e){var t=[];return null!==e.usage_limit&&t.push("usage_limit"),null!==e.starts_at&&t.push("starts_at"),null!==e.ends_at&&t.push("ends_at"),null!==e.valid_duration&&t.push("valid_duration"),t},x9=function(e){var t=e.promotion,r=e.isEdit,n=pn(),i=n.register,o=n.control,a=n.isDynamic,l=n.hasExpiryDate,s=n.handleConfigurationChanged,c=x6(B.useState(void 0!==r&&r&&t?x7(t):x4(l?["ends_at"]:[])),2),u=c[0],d=c[1],f="transition-[margin] duration-300 ease-[cubic-bezier(0.87, 0, 0.13, 1) forwards]",p=x6((0,B.useState)(!1),2),m=p[0],y=p[1];return(0,B.useEffect)(function(){setTimeout(function(){return y(!0)},300)},[]),(0,F.jsx)("div",{className:"flex flex-col",children:(0,F.jsx)(gj,{className:"text-grey-90 pt-7",type:"multiple",value:u||[],onValueChange:function(e){s(e),d(e)},children:m&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(gj.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:"Start date",subtitle:"Schedule the discount to activate in the future.",tooltip:"If you want to schedule the discount to activate in the future, you can set a start date here, otherwise the discount will be active immediately.",value:"starts_at",customTrigger:(0,F.jsx)(vw.Z,{checked:u.indexOf("starts_at")>-1}),children:(0,F.jsx)("div",{className:(0,ec.Z)("gap-xsmall flex items-center",f,{"mt-4":u.indexOf("starts_at")>-1}),children:(0,F.jsx)(tR.Qr,{name:"starts_at",control:o,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=r||new Date;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(di,{date:i,label:"Start date",onSubmitDate:n}),(0,F.jsx)(vm,{label:"Start time",date:i,onSubmitDate:n})]})}})})}),(0,F.jsx)(gj.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:"Discount has an expiry date?",subtitle:"Schedule the discount to deactivate in the future.",tooltip:"If you want to schedule the discount to deactivate in the future, you can set an expiry date here.",value:"ends_at",customTrigger:(0,F.jsx)(vw.Z,{checked:u.indexOf("ends_at")>-1}),children:(0,F.jsx)("div",{className:(0,ec.Z)("gap-xsmall flex items-center",f,{"mt-4":u.indexOf("ends_at")>-1}),children:(0,F.jsx)(tR.Qr,{name:"ends_at",control:o,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=r||new Date(new Date().getTime()+6048e5);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(di,{date:i,label:"Expiry date",onSubmitDate:n}),(0,F.jsx)(vm,{label:"Expiry time",date:i,onSubmitDate:n})]})}})})}),(0,F.jsx)(gj.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:"Limit the number of redemptions?",subtitle:"Limit applies across all customers, not per customer.",tooltip:"If you wish to limit the amount of times a customer can redeem this discount, you can set a limit here.",value:"usage_limit",customTrigger:(0,F.jsx)(vw.Z,{checked:u.indexOf("usage_limit")>-1}),children:(0,F.jsx)("div",{className:(0,ec.Z)(f,{"mt-4":u.indexOf("usage_limit")>-1}),children:(0,F.jsx)(ry.Z,x5(x2({},i("usage_limit",{valueAsNumber:!0})),{label:"Number of redemptions",type:"number",placeholder:"5",min:1}))})}),a&&(0,F.jsx)(gj.Item,{disabled:!a,headingSize:"medium",forceMountContent:!0,title:"Availability duration?",className:"border-b-0",subtitle:"Set the duration of the discount.",tooltip:"Select a discount type",value:"valid_duration",customTrigger:(0,F.jsx)(vw.Z,{checked:u.indexOf("valid_duration")>-1}),children:(0,F.jsx)("div",{className:(0,ec.Z)(f,{"mt-4":u.indexOf("valid_duration")>-1}),children:(0,F.jsx)(tR.Qr,{name:"valid_duration",control:o,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vO,{value:null!=r?r:void 0,onChange:n})}})})})]})})})},je=function(){var e=pn().control;return(0,F.jsx)(tR.Qr,{name:"rule.allocation",control:e,rules:{required:!0},render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,F.jsxs)(pQ.Root,{value:n,onValueChange:r,className:(0,ec.Z)("gap-base mt-base flex items-center px-1"),children:[(0,F.jsx)(pQ.Item,{value:y.TOTAL,className:"flex-1",label:"Total amount",description:"Apply to the total amount"}),(0,F.jsx)(pQ.Item,{value:y.ITEM,className:"flex-1",label:"Item specific",description:"Apply to every allowed item"})]})}})},jt=function(){var e=pn().control,t=(0,tR.qo)({control:e,name:"regions"});return(0,F.jsx)(tR.Qr,{name:"rule.type",control:e,rules:{required:!0},render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,F.jsxs)(pQ.Root,{value:i,onValueChange:n,className:(0,ec.Z)("gap-base mt-base flex items-center px-1"),children:[(0,F.jsx)(pQ.Item,{value:h.PERCENTAGE,className:"flex-1",label:"Percentage",description:"Discount applied in %"}),(0,F.jsx)(pQ.Item,{value:h.FIXED,className:"flex-1",label:"Fixed amount",description:"Discount in whole numbers",disabled:Array.isArray(t)&&t.length>1,disabledTooltip:"You can only select one valid region if you want to use the fixed amount type"}),(0,F.jsx)(pQ.Item,{value:h.FREE_SHIPPING,className:"flex-1",label:"Free shipping",description:"Override delivery amount"})]})}})};function jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){jr(e,t,r[t])})}return e}function ji(e,t){if(null==e)return{};var r,n,i=jo(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jo(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var ja=B.forwardRef(function(e,t){var r=e.label,n=e.value,i=e.className,o=e.id,a=ji(e,["label","value","className","id"]),l=B.useRef(null);return(0,B.useImperativeHandle)(t,function(){return l.current}),(0,F.jsxs)("label",{className:(0,ec.Z)("flex cursor-pointer items-center",i),htmlFor:o,children:[(0,F.jsx)("input",jn({type:"checkbox",ref:l,className:"form-checkbox rounded-base text-violet-60 mr-small border-grey-30 h-[20px] w-[20px] focus:ring-0",value:n,id:o},a)),r]})}),jl=r(61180),js=r(48051);function jc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ju(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){jc(e,t,r[t])})}return e}function jd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jf(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jd(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function jp(e,t){if(null==e)return{};var r,n,i=jm(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jm(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var jy=function(e){var t=e.isSelected;return(0,F.jsx)("div",{className:(0,ec.Z)("text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border",{"bg-violet-60":t}),children:(0,F.jsx)("span",{className:"self-center",children:t&&(0,F.jsx)(rT,{size:16})})})},jh=function(e){var t=e.isSelected;return(0,F.jsx)("div",{className:(0,ec.Z)("radio-outer-ring outline-0","rounded-circle h-[20px] w-[20px] shrink-0",{"shadow-[0_0_0_1px] shadow-[#D1D5DB]":!t,"shadow-violet-60 shadow-[0_0_0_2px]":t}),children:t&&(0,F.jsx)("div",{className:(0,ec.Z)("group relative flex h-full w-full items-center justify-center","after:bg-violet-60 after:rounded-circle after:absolute after:inset-0 after:m-auto after:block after:h-[12px] after:w-[12px]")})})},jb=function(e){e.className;var t,r,n=jp(e,["className"]);return(0,F.jsx)(ah.wx.Option,jf(ju({},n),{className:"bg-grey-0 active:bg-grey-0 my-1 py-0 px-2",children:(0,F.jsx)("div",{className:"item-renderer hover:bg-grey-10 h-full cursor-pointer rounded py-2 px-2",children:(0,F.jsx)("div",{className:"flex h-full items-center",children:(null===(t=n.data)||void 0===t?void 0:t.value)!=="all"&&(null===(r=n.data)||void 0===r?void 0:r.label)!=="Select All"?(0,F.jsxs)(F.Fragment,{children:[n.isMulti?(0,F.jsx)(jy,{isSelected:n.isSelected}):(0,F.jsx)(jh,{isSelected:n.isSelected}),(0,F.jsx)("span",{className:"text-grey-90 inter-base-regular ml-3",children:n.data.label})]}):(0,F.jsx)("span",{className:"text-grey-90 inter-base-regular",children:n.data.label})})})}))},jv={Menu:function(e){e.className;var t=jp(e,["className"]);return(0,F.jsx)(ah.wx.Menu,jf(ju({className:(0,ec.Z)("!rounded-rounded",{"z-60 -mt-1":!t.selectProps.isSearchable&&"bottom"===t.menuPlacement,"z-60 mb-3":!t.selectProps.isSearchable&&"top"===t.menuPlacement})},t),{children:t.children}))},MenuList:function(e){var t=e.className,r=jp(e,["className"]);return(0,F.jsx)(ah.wx.MenuList,ju({className:(0,ec.Z)(t,"!rounded-rounded !no-scrollbar")},r))},Placeholder:function(e){return e.selectProps.menuIsOpen?null:(0,F.jsx)(ah.wx.Placeholder,jf(ju({},e),{className:"!text-grey-40 !mx-0"}))},SingleValue:function(e){var t=e.children,r=jp(e,["children"]);return r.selectProps.menuIsOpen&&r.selectProps.isSearchable?null:(0,F.jsx)(ah.wx.SingleValue,jf(ju({},r),{children:t}))},DropdownIndicator:function(e){var t=e.innerProps,r=e.selectProps.menuIsOpen;return(0,F.jsx)("div",jf(ju({},t),{className:"flex items-center justify-center",children:(0,F.jsx)(e4.Z,{size:16,className:(0,ec.Z)("text-grey-50 transition-all",{"rotate-180":r})})}))},SelectContainer:function(e){return(0,F.jsx)("div",{className:"bg-grey-5 border-grey-20 rounded-rounded focus-within:shadow-cta focus-within:border-violet-60 px-small h-10 border",children:(0,F.jsx)(ah.wx.SelectContainer,ju({},e))})},Input:function(e){return!e.isHidden&&e.selectProps.menuIsOpen&&e.selectProps.isSearchable?(0,F.jsx)("div",{className:"space-between flex h-full w-full items-center",children:(0,F.jsxs)("div",{className:"flex w-full items-center",children:[(0,F.jsx)("span",{className:"text-grey-40 mr-2",children:(0,F.jsx)(r7.Z,{size:16})}),(0,F.jsx)(ah.wx.Input,ju({},e))]})}):(0,F.jsx)(ah.wx.Input,jf(ju({},e),{className:"pointer-events-none"}))},ClearIndicator:function(e){var t=e.innerProps,r=e.selectProps,n=r.isMulti;return r.menuIsOpen||n?(0,F.jsx)(F.Fragment,{}):(0,F.jsx)("div",jf(ju({},t),{className:"hover:bg-grey-10 text-grey-50 cursor-pointer rounded",children:(0,F.jsx)(t1.Z,{size:16})}))},CheckboxAdornment:jy,RadioAdornment:jh,NoOptionsMessage:function(e){var t=e.innerProps,r=e.selectProps.isLoading;return(0,F.jsx)("div",jf(ju({className:"text-grey-50 inter-small-semibold p-xsmall text-center"},t),{children:(0,F.jsx)("p",{children:r?"Loading...":"No options"})}))},Option:jb,IndicatorSeparator:function(){return null},MultiValueRemove:function(){return null},MultiValueLabel:function(e){var t=e.innerProps,r=e.data,n=e.selectProps,i=n.value,o=n.isSearchable,a=n.menuIsOpen,l=e.children,s=!Array.isArray(i)||i[i.length-1]===r;return a&&o?null:(0,F.jsx)("div",jf(ju({},t),{className:(0,ec.Z)("bg-grey-5 inter-base-regular mx-0 p-0",{"after:content-[',']":!s}),children:l}))}};function jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jx(e){if(Array.isArray(e))return e}function jj(e){if(Array.isArray(e))return jg(e)}function jO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jw(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function jS(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function jP(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jC(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){jO(e,t,r[t])})}return e}function jk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jk(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function jA(e,t){if(null==e)return{};var r,n,i=jD(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jD(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function jE(e,t){return jx(e)||jS(e,t)||jI(e,t)||jP()}function jZ(e){return jj(e)||jw(e)||jI(e)||jC()}function jI(e,t){if(e){if("string"==typeof e)return jg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jg(e,t)}}var jT=B.forwardRef(function(e,t){var r,n=e.label,i=e.name,o=e.fullWidth,a=e.required,l=e.value,s=e.onChange,c=e.className,u=e.isMultiSelect,d=e.hasSelectAll,f=e.tooltipContent,p=e.tooltip,m=e.enableSearch,y=void 0===m||m,h=e.clearSelected,b=e.isCreatable,v=e.filterOptions,g=e.placeholder,x=e.options,j=e.onCreateOption,O=e.menuPortalStyles,w=void 0===O?{}:O,S=(0,B.useContext)(tp.t).portalRef,P=jE((0,B.useState)(!1),2),C=P[0],N=P[1],k=jE((0,B.useState)(!0),2),_=k[0],A=k[1];(0,B.useEffect)(function(){window.addEventListener("resize",function(){var e;N(!1),null==D||null===(e=D.current)||void 0===e||e.blur()})},[]);var D=(0,B.useRef)(null);(0,B.useImperativeHandle)(t,function(){return D.current});var E=(0,B.useRef)(null);return(0,B.useEffect)(function(){var e=setTimeout(function(){C&&A(!1)},50);return function(){return clearTimeout(e)}},[C]),(0,F.jsx)("div",{ref:E,className:(0,ec.Z)({"w-full":void 0!==o&&o}),children:(0,F.jsxs)("div",{className:(0,ec.Z)(c,{"rounded-t-rounded bg-white":C}),children:[(0,F.jsx)("div",{className:"text-grey-50 pointer-events-none mb-2 flex w-full cursor-pointer justify-between pr-0.5",children:(0,F.jsx)(u0.Z,{label:n,required:a,tooltip:p,tooltipContent:f})}),(0,F.jsx)(jM,{isCreatable:b,searchBackend:v,options:d&&u?[{value:"all",label:"Select All"}].concat(jZ(x)):x,ref:D,value:l,isMulti:u,openMenuOnFocus:u,isSearchable:y,isClearable:void 0!==h&&h,onChange:function(e){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(null==e?void 0:e.length)&&(null==e?void 0:e.find(function(e){return"all"===e.value}))&&d&&u?s(x):(s(e),u||(null==D||null===(t=D.current)||void 0===t||t.blur(),N(!1)))},onMenuOpen:function(){N(!0)},onMenuClose:function(){A(!0),N(!1)},closeMenuOnScroll:function(e){var t;if(!_&&(null===(t=e.target)||void 0===t?void 0:t.contains(E.current))&&e.target!==document)return!0},closeMenuOnSelect:!u,blurInputOnSelect:!u,styles:{menuPortal:function(e){return jN({},e,w)}},hideSelectedOptions:!1,menuPortalTarget:(null==S?void 0:null===(r=S.current)||void 0===r?void 0:r.lastChild)||document.body,menuPlacement:"auto",backspaceRemovesValue:!1,classNamePrefix:"react-select",placeholder:void 0===g?"Search...":g,className:"react-select-container",onCreateOption:function(e){if(j){var t;j(e),N(!1),null==D||null===(t=D.current)||void 0===t||t.blur()}},components:jv}),C&&y&&(0,F.jsx)("div",{className:"h-5 w-full"})]},i)})}),jM=B.forwardRef(function(e,t){var r=e.isCreatable,n=e.searchBackend,i=e.onCreateOption,o=(e.handleClose,jA(e,["isCreatable","searchBackend","onCreateOption","handleClose"]));return r?n?(0,F.jsx)(js.Z,jN({ref:t,defaultOptions:!0,onCreateOption:i,isSearchable:!0,loadOptions:n},o)):(0,F.jsx)(vH.Z,j_(jN({},o),{isSearchable:!0,ref:t,onCreateOption:i})):n?(0,F.jsx)(jl.Z,jN({ref:t,defaultOptions:!0,loadOptions:n},o)):(0,F.jsx)(ah.ZP,jN({ref:t},o))});function jR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jL(e){if(Array.isArray(e))return e}function jz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jq(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function jF(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){jz(e,t,r[t])})}return e}function jU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jU(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function jV(e,t){if(null==e)return{};var r,n,i=jB(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jB(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function jW(e,t){return jL(e)||jq(e,t)||jQ(e,t)||jF()}function jQ(e,t){if(e){if("string"==typeof e)return jR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jR(e,t)}}var jY=B.createContext({currencyInfo:void 0}),j$=function(e){if(e)return v$.Q[e.toUpperCase()]},jK=function(e){var t,r=e.currentCurrency,n=e.currencyCodes,i=e.size,o=void 0===i?"full":i,a=e.readOnly,l=void 0!==a&&a,s=e.hideCurrency,c=e.onChange,u=e.children,d=e.className,f=null!==(t=null==n?void 0:n.map(function(e){return{label:e.toUpperCase(),value:e}}))&&void 0!==t?t:[],p=jW((0,B.useState)(j$(r)),2),m=p[0],y=p[1],h=jW((0,B.useState)(r?{label:r.toUpperCase(),value:r}:null),2),b=h[0],v=h[1];return(0,B.useEffect)(function(){r&&(y(j$(r)),v({label:r.toUpperCase(),value:r}))},[r]),(0,F.jsx)(jY.Provider,{value:{currencyInfo:m},children:(0,F.jsxs)("div",{className:(0,ec.Z)("gap-x-xsmall flex items-center",d),children:[!(void 0!==s&&s)&&(0,F.jsx)("div",{className:(0,ec.Z)({"w-[144px]":"medium"===o},{"w-[120px]":"small"===o},{"flex-1":"full"===o}),children:l?(0,F.jsx)(ry.Z,{label:"Currency",value:null==b?void 0:b.label,readOnly:!0,className:"pointer-events-none",tabIndex:-1}):(0,F.jsx)(jT,{enableSearch:!0,label:"Currency",value:b,onChange:function(e){e&&(v(e),y(j$(e.value)),c&&c(e.value))},options:f,disabled:l})}),u&&(0,F.jsx)("div",{className:"flex-1",children:u})]})})},jJ=(0,B.forwardRef)(function(e,t){var r=e.label,n=e.required,i=e.amount,o=e.step,a=void 0===o?1:o,l=e.allowNegative,s=void 0!==l&&l,c=e.onChange,u=e.onValidate,d=e.invalidMessage,f=e.errors,p=e.name,m=jV(e,["label","required","amount","step","allowNegative","onChange","onValidate","invalidMessage","errors","name"]),y=(0,B.useContext)(jY).currencyInfo,h=jW((0,B.useState)(!1),2),b=h[0],v=h[1],g=jW((0,B.useState)(i?"".concat((0,oy.Kt)(null==y?void 0:y.code,i)):void 0),2),x=g[0],j=g[1],O=(0,B.useRef)(null);(0,B.useImperativeHandle)(t,function(){return O.current}),(0,B.useEffect)(function(){var e;null===(e=O.current)||void 0===e||e.dispatchEvent(new Event("blur"))},[null==y?void 0:y.decimal_digits]),(0,B.useEffect)(function(){y&&i&&j("".concat((0,oy.Kt)(null==y?void 0:y.code,i)))},[i]);var w=function(e,t){var r=void 0;if(r="number"==typeof t&&y?Math.round((0,oy.xl)(y.code,t)):void 0,c){var n=!0;if(u&&(n=u(r)),n)c(r),v(!1);else{v(!0);return}}j(e)},S=function(e){var t=parseFloat(null!=x?x:"0")+e;(s||!(t<0))&&w("".concat(t),t)};return(0,F.jsxs)("div",jG(jH({},m),{children:[(0,F.jsx)(u0.Z,{label:r,required:void 0!==n&&n,className:"mb-xsmall"}),(0,F.jsxs)("div",{className:(0,ec.Z)("bg-grey-5 border-gray-20 px-small py-xsmall rounded-rounded focus-within:shadow-input focus-within:border-violet-60 flex h-10 w-full items-center border",{"focus-within:shadow-cta focus-within:shadow-rose-60/10 border-rose-50 focus-within:border-rose-50":f&&p&&f[p]}),children:[(null==y?void 0:y.symbol_native)&&(0,F.jsx)(a9.Z,{open:b,side:"top",content:d||"Amount is not valid",children:(0,F.jsx)("span",{className:"inter-base-regular text-grey-40 mr-xsmall",children:y.symbol_native})}),(0,F.jsx)(vY.Z,{className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-transparent font-normal outline-none outline-0",decimalScale:null==y?void 0:y.decimal_digits,value:x,onValueChange:function(e,t,r){return w(e,null==r?void 0:r.float)},ref:O,step:a,allowNegativeValue:s,placeholder:"0.00",name:p}),(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("button",{className:"text-grey-50 hover:bg-grey-10 rounded-soft mr-2 h-4 w-4 cursor-pointer",type:"button",onClick:function(){return S(-a)},children:(0,F.jsx)(rM.Z,{size:16})}),(0,F.jsx)("button",{type:"button",className:"text-grey-50 hover:bg-grey-10 rounded-soft h-4 w-4 cursor-pointer",onClick:function(){return S(a)},children:(0,F.jsx)(sh.Z,{size:16})})]})]}),(0,F.jsx)(o9.Z,{name:p,errors:f})]}))});let jX={Root:jK,Amount:jJ};function j0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function j1(e){if(Array.isArray(e))return e}function j2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j3(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function j5(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){j2(e,t,r[t])})}return e}function j4(e,t){return j1(e)||j3(e,t)||j8(e,t)||j5()}function j8(e,t){if(e){if("string"==typeof e)return j0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j0(e,t)}}var j7=function(e){var t,r=e.discount,n=(null==r?void 0:null===(t=r.regions)||void 0===t?void 0:t[0].currency_code)||void 0,i=j4((0,B.useState)(n),2),o=i[0],a=i[1],l=(0,en.useAdminRegions)(),s=l.regions,c=l.isLoading,u=pn(),d=u.register,f=u.control,p=u.type,m=(0,tR.qo)({control:f,name:"regions"});(0,B.useEffect)(function(){if("fixed"===p&&m){e=Array.isArray(m)&&m.length?m[0].value:m.value;var e,t=null==s?void 0:s.find(function(t){return t.id===e});t&&a(t.currency_code)}},[p,s,m]);var y=(0,B.useMemo)(function(){return(null==s?void 0:s.map(function(e){return{value:e.id,label:e.name}}))||[]},[s]);return(0,F.jsx)("div",{className:"pt-5",children:!c&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tR.Qr,{name:"regions",control:f,rules:{required:"At least one region is required",validate:function(e){return Array.isArray(e)?e.length>0:!!e}},render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,F.jsx)(lS,{value:n||null,onChange:function(e){r("fixed"===p?[e]:e)},label:"Choose valid regions",isMulti:"fixed"!==p,selectAll:"fixed"!==p,isSearchable:!0,required:!0,options:y})}}),(0,F.jsxs)("div",{className:"gap-x-base gap-y-base my-base flex",children:[(0,F.jsx)(ry.Z,j6({label:"Code",className:"flex-1",placeholder:"SUMMERSALE10",required:!0},d("code",{required:"Code is required"}))),"free_shipping"!==p&&(0,F.jsx)(F.Fragment,{children:"fixed"===p?(0,F.jsx)("div",{className:"flex-1",children:(0,F.jsx)(jX.Root,{size:"small",currentCurrency:o,readOnly:!0,hideCurrency:!0,children:(0,F.jsx)(tR.Qr,{name:"rule.value",control:f,rules:{required:"Amount is required",min:1},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(jX.Amount,{label:"Amount",required:!0,amount:r,onChange:n})}})})}):(0,F.jsx)("div",{className:"flex-1",children:(0,F.jsx)(ry.Z,j6({label:"Percentage",min:0,required:!0,type:"number",placeholder:"10",prefix:"%"},d("rule.value",{required:!0,valueAsNumber:!0})))})})]}),(0,F.jsxs)("div",{className:"text-grey-50 inter-small-regular mb-6 flex flex-col",children:[(0,F.jsx)("span",{children:"The code your customers will enter during checkout. This will appear on your customer’s invoice."}),(0,F.jsx)("span",{children:"Uppercase letters and numbers only."})]}),(0,F.jsx)(vQ.Z,j6({label:"Description",required:!0,placeholder:"Summer Sale 2022",rows:1},d("rule.description",{required:!0}))),(0,F.jsxs)("div",{className:"mt-xlarge flex items-center",children:[(0,F.jsx)(tR.Qr,{name:"is_dynamic",control:f,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,F.jsx)(ja,{label:"This is a template discount",name:"is_dynamic",id:"is_dynamic",checked:n,onChange:function(e){return r(e.target.checked)}})}}),(0,F.jsx)(rm.Z,{content:"Template discounts allow you to define a set of rules that can be used across a group of discounts. This is useful in campaigns that should generate unique codes for each user, but where the rules for all unique codes should be the same."})]})]})})};function j9(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Oe(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){j9(o,n,i,a,l,"next",e)}function l(e){j9(o,n,i,a,l,"throw",e)}a(void 0)})}}function Ot(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Or=function(e){var t,r,n=e.closeForm,i=(0,V.useNavigate)(),o=(0,td.Z)(),a=pn(),l=a.handleSubmit,s=a.handleReset,c=a.control,u=a.form,d=gq(),f=d.onSaveAsActive,p=d.onSaveAsInactive,m=function(){n?n():i("/a/discounts"),s()},y=(t=Oe(function(e){return Ot(this,function(t){return p(e).then(function(){m(),s()}).catch(function(e){o("Error",(0,tf.e)(e),"error")}),[2]})}),function(e){return t.apply(this,arguments)}),b=(r=Oe(function(e){var t;return Ot(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,f(e)];case 1:return r.sent(),m(),s(),[3,3];case 2:return t=r.sent(),o("Error",(0,tf.e)(t),"error"),[3,3];case 3:return[2]}})}),function(e){return r.apply(this,arguments)}),v=(0,tR.qo)({control:c,name:"rule.type"});return(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:n,className:"rounded-rounded h-8 w-8 border",children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-small flex",children:[(0,F.jsx)(Y.Z,{onClick:l(y),size:"small",variant:"ghost",className:"rounded-rounded border",children:"Save as draft"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:l(b),className:"rounded-rounded",children:"Publish discount"})]})]})}),(0,F.jsx)(c3.Main,{children:(0,F.jsx)("div",{className:"mb-[25%] flex justify-center",children:(0,F.jsxs)("div",{className:"w-full max-w-[700px] pt-16",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Create new discount"}),(0,F.jsxs)(gj,{className:"text-grey-90 pt-7",defaultValue:["promotion-type"],type:"multiple",children:[(0,F.jsxs)(gj.Item,{forceMountContent:!0,title:"Discount type",required:!0,tooltip:"Select a discount type",value:"promotion-type",children:[(0,F.jsx)(jt,{}),v===h.FIXED&&(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsxs)("h3",{className:"inter-base-semibold",children:["Allocation",(0,F.jsx)("span",{className:"text-rose-50",children:"*"})]}),(0,F.jsx)(je,{})]})]}),(0,F.jsx)(gj.Item,{title:"General",required:!0,value:"general",forceMountContent:!0,children:(0,F.jsx)(j7,{})}),(0,F.jsx)(gj.Item,{forceMountContent:!0,title:"Configuration",value:"configuration",description:"Discount code applies from you hit the publish button and forever if left untouched.",children:(0,F.jsx)(x9,{})}),(0,F.jsx)(gj.Item,{forceMountContent:!0,title:"Conditions",description:"Discount code apply to all products if left untouched.",value:"conditions",tooltip:"Add conditions to your Discount",children:(0,F.jsx)(xW,{})}),(0,F.jsx)(gj.Item,{title:"Metadata",subtitle:"Metadata allows you to add additional information to your discount.",value:"metadata",forceMountContent:!0,children:(0,F.jsx)("div",{className:"mt-small",children:(0,F.jsx)(rs,{form:(0,tL.G)(u,"metadata")})})})]})]})})})]})},On=function(){return(0,F.jsx)("div",{className:"pb-xlarge",children:(0,F.jsx)(pt,{children:(0,F.jsx)(Or,{})})})};function Oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Oo(e){if(Array.isArray(e))return e}function Oa(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ol(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Os(e,t){return Oo(e)||Oa(e,t)||Oc(e,t)||Ol()}function Oc(e,t){if(e){if("string"==typeof e)return Oi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oi(e,t)}}var Ou=function(){var e=Os((0,B.useState)(!1),2),t=e[0],r=e[1],n=[{label:"Add Discount",onClick:function(){return r(!0)},icon:(0,F.jsx)(sh.Z,{size:20})}],i=(0,ig.e)().getWidgets;return(0,F.jsxs)("div",{className:"flex h-full flex-col",children:[(0,F.jsxs)("div",{className:"gap-y-xsmall flex w-full grow flex-col",children:[i("discount.list.before").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,injectionZone:"discount.list.before",entity:null},t)}),(0,F.jsx)(tI,{actionables:n,customHeader:(0,F.jsx)(s3,{views:["discounts"]}),className:"h-fit",children:(0,F.jsx)(fJ,{})}),i("discount.list.after").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,injectionZone:"discount.list.after",entity:null},t)}),(0,F.jsx)(ev,{})]}),(0,F.jsx)(pt,{children:(0,F.jsx)(cX,{isVisible:t,isFullScreen:!0,children:(0,F.jsx)(Or,{closeForm:function(){return r(!1)}})})})]})},Od=function(){var e=(0,(0,W.V)().getNestedRoutes)("/discounts");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(Ou,{})}),(0,F.jsx)(V.Route,{path:"/new",element:(0,F.jsx)(On,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(gp,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/discounts"})},t)})]})};function Of(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Op(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Of(e,t,r[t])})}return e}function Om(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Oy(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Om(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Oh(e,t){if(null==e)return{};var r,n,i=Ob(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ob(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Ov=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=Oh(e,["size","color"]);return(0,F.jsxs)("svg",Oy(Op({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M12 3V21",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M17 6H9.5C8.57174 6 7.6815 6.31607 7.02513 6.87868C6.36875 7.44129 6 8.20435 6 9C6 9.79565 6.36875 10.5587 7.02513 11.1213C7.6815 11.6839 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3161 16.9749 12.8787C17.6313 13.4413 18 14.2044 18 15C18 15.7956 17.6313 16.5587 16.9749 17.1213C16.3185 17.6839 15.4283 18 14.5 18H6",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},Og=function(e){var t=e.form,r=t.control,n=t.path;return(0,F.jsx)(tR.Qr,{name:n("ends_at"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vS,{open:!!r,onSwitch:function(){r?n(null):n(new Date(new Date().getTime()+6048e5))},title:"Gift Card has an expiry date?",description:"Schedule the Gift Card to deactivate in the future.",children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)(di,{date:r,label:"Expiry date",onSubmitDate:n}),(0,F.jsx)(vm,{label:"Expiry time",date:r,onSubmitDate:n})]})})}})};function Ox(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ox(e,t,r[t])})}return e}function OO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ow(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):OO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var OS=function(e){var t=e.form,r=t.control,n=t.path,i=t.formState.errors,o=t.setValue,a=(0,en.useAdminRegions)({limit:100}).regions,l=(0,B.useMemo)(function(){return(null==a?void 0:a.map(function(e){return{label:e.name,value:e.id,currency_code:e.currency_code}}))||[]},[a]),s=(0,tR.qo)({control:r,name:n("region_id")});return(0,B.useEffect)(function(){s||o(n("region_id"),l[0],{shouldDirty:!0})},[s,l,o,n]),(0,F.jsx)(tR.Qr,{name:n("region_id"),rules:{required:s6.Z.required("Region")},control:r,render:function(e){var t=e.field;return(0,F.jsx)(lS,Ow(Oj({label:"Region",required:!0},t),{errors:i,options:l}))}})},OP=function(e){var t=e.open,r=e.onClose,n=e.giftCard,i=(0,tR.cI)({defaultValues:OC(n)}),o=i.handleSubmit,a=i.reset,l=i.formState.isDirty,s=(0,en.useAdminUpdateGiftCard)(n.id),c=s.mutate,u=s.isLoading,d=(0,td.Z)(),f=o(function(e){c({region_id:e.region.region_id.value,ends_at:e.ends_at.ends_at},{onSuccess:function(){d("Updated Gift card","Gift card was succesfully updated","success"),r()},onError:function(e){d("Failed to update Gift card",(0,tf.e)(e),"error")}})});return(0,B.useEffect)(function(){t&&a(OC(n))},[t,a,n]),(0,F.jsx)(tp.Z,{open:t,handleClose:r,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:r,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit Gift Card"})}),(0,F.jsxs)("form",{onSubmit:f,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Details"}),(0,F.jsx)(OS,{form:(0,tL.G)(i,"region")})]}),(0,F.jsx)(Og,{form:(0,tL.G)(i,"ends_at")})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:r,type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",disabled:u||!l,loading:u,children:"Save and close"})]})})]})]})})},OC=function(e){return{region:{region_id:{label:e.region.name,value:e.region.id,currency_code:e.region.currency_code}},ends_at:{ends_at:e.ends_at}}},ON=function(e){var t=e.form,r=e.currencyCode,n=e.originalAmount,i=t.control,o=t.path,a=t.formState.errors;return(0,F.jsx)(tR.Qr,{name:o("amount"),rules:{required:s6.Z.required("Balance"),min:{value:0,message:"Balance must be greater than 0"},max:n?{value:n,message:"The updated balance cannot exceed the original value of ".concat((0,oy.rX)({amount:n,currency:r}))}:void 0},control:i,render:function(e){var t=e.field,n=t.value,i=t.onChange,o=t.name;return(0,F.jsx)(v3,{label:"Amount",currencyCode:r,onChange:i,amount:n,name:o,errors:a,required:!0})}})},Ok=function(e){var t=e.open,r=e.onClose,n=e.giftCard,i=(0,tR.cI)({defaultValues:O_(n)}),o=i.handleSubmit,a=i.reset,l=i.formState.isDirty,s=(0,en.useAdminUpdateGiftCard)(n.id),c=s.mutate,u=s.isLoading,d=(0,td.Z)(),f=o(function(e){c({balance:e.balance.amount},{onSuccess:function(){d("Balance updated","Gift card balance was updated","success"),r()},onError:function(e){d("Failed to update balance",(0,tf.e)(e),"error")}})});return(0,B.useEffect)(function(){t&&a(O_(n))},[t,a,n]),(0,F.jsx)(tp.Z,{open:t,handleClose:r,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:r,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Update Balance"})}),(0,F.jsxs)("form",{onSubmit:f,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(ON,{form:(0,tL.G)(i,"balance"),currencyCode:n.region.currency_code,originalAmount:n.value})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:r,type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",loading:u,disabled:u||!l,children:"Save and close"})]})})]})]})})},O_=function(e){return{balance:{amount:e.balance}}},OA=function(){var e=(0,V.useParams)().id,t=(0,en.useAdminGiftCard)(e,{enabled:!!e}),r=t.gift_card,n=t.isLoading,i=(0,en.useAdminUpdateGiftCard)(null==r?void 0:r.id),o=(0,ig.e)().getWidgets,a=(0,td.Z)(),l=(0,s1.Z)(),s=l.state,c=l.open,u=l.close,d=(0,s1.Z)(),f=d.state,p=d.open,m=d.close,y=[{label:"Edit details",onClick:c,icon:(0,F.jsx)(eC,{size:20})},{label:"Update balance",onClick:p,icon:(0,F.jsx)(Ov,{size:20})}],h=function(e){i.mutate({is_disabled:e.is_disabled},{onSuccess:function(){a("Updated status","Succesfully updated the status of the Gift Card","success")},onError:function(e){return a("Error",(0,tf.e)(e),"error")}})};return(0,F.jsxs)("div",{children:[(0,F.jsx)(eb,{label:"Back to Gift Cards",path:"/a/gift-cards",className:"mb-xsmall"}),n||!r?(0,F.jsx)("div",{className:"bg-grey-0 border-grey-20 rounded-rounded py-xlarge flex w-full items-center justify-center border",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[o("custom_gift_card.before").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,entity:r,injectionZone:"custom_gift_card.before"},t)}),(0,F.jsx)(tI,{className:"h-auto min-h-0 w-full",title:"".concat(null==r?void 0:r.code),status:(0,F.jsx)(vF,{isDraft:!!(null==r?void 0:r.is_disabled),activeState:"Active",draftState:"Disable",onChange:function(){return h({is_disabled:!r.is_disabled})}}),actionables:y,children:(0,F.jsx)("div",{className:"flex justify-between",children:(0,F.jsxs)("div",{className:"flex space-x-6 divide-x",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Original amount"}),(0,F.jsx)("div",{children:(0,oy.rX)({amount:r.value,currency:r.region.currency_code})})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Balance"}),(0,F.jsx)("div",{children:(0,oy.rX)({amount:r.balance,currency:r.region.currency_code})})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Region"}),(0,F.jsx)("div",{children:r.region.name})]}),r.ends_at&&(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Expires on"}),(0,F.jsx)("div",{children:iW()(r.ends_at).format("DD MMM YYYY")})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Created"}),(0,F.jsx)("div",{children:iW()(r.created_at).format("DD MMM YYYY")})]})]})})}),o("custom_gift_card.after").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,entity:r,injectionZone:"custom_gift_card.after"},t)}),(0,F.jsx)(tT,{data:r,title:"Raw gift card"})]}),(0,F.jsx)(Ok,{giftCard:r,onClose:m,open:f}),(0,F.jsx)(OP,{onClose:u,open:s,giftCard:r})]})]})};function OD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){OD(e,t,r[t])})}return e}function OZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):OZ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function OT(e,t){if(null==e)return{};var r,n,i=OM(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OM(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var OR=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=OT(e,["size","color"]);return(0,F.jsxs)("svg",OI(OE({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M21 9H3V7L12 3L21 7V9Z",stroke:i,strokeWidth:"1.5",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10 20.75C10.4142 20.75 10.75 20.4142 10.75 20C10.75 19.5858 10.4142 19.25 10 19.25V20.75ZM3 20L2.28 19.79C2.2139 20.0166 2.25836 20.2611 2.4 20.45C2.54164 20.6389 2.76393 20.75 3 20.75V20ZM3.875 17V16.25C3.54167 16.25 3.24833 16.47 3.155 16.79L3.875 17ZM10 17.75C10.4142 17.75 10.75 17.4142 10.75 17C10.75 16.5858 10.4142 16.25 10 16.25V17.75ZM10 19.25H3V20.75H10V19.25ZM3.72 20.21L4.595 17.21L3.155 16.79L2.28 19.79L3.72 20.21ZM3.875 17.75H10V16.25H3.875V17.75Z",fill:i}),(0,F.jsx)("path",{d:"M5 9V17M9 17V9",stroke:i,strokeWidth:"1.5"}),(0,F.jsx)("path",{d:"M20.5625 13.4375L14.4375 19.5625",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14.75 14.5C15.1642 14.5 15.5 14.1642 15.5 13.75C15.5 13.3358 15.1642 13 14.75 13C14.3358 13 14 13.3358 14 13.75C14 14.1642 14.3358 14.5 14.75 14.5Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M20.25 20C20.6642 20 21 19.6642 21 19.25C21 18.8358 20.6642 18.5 20.25 18.5C19.8358 18.5 19.5 18.8358 19.5 19.25C19.5 19.6642 19.8358 20 20.25 20Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},OL=function(e){var t=e.includesTax;return(0,F.jsx)(a9.Z,{content:t?"Tax incl. price":"Tax excl. price",children:(0,F.jsx)("div",{className:"w-large h-large rounded-rounded border-grey-20 flex items-center justify-center border",children:(0,F.jsx)(OR,{size:16,className:(0,ec.Z)({"text-grey-50":t,"text-grey-30":!t})})})})};function Oz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Oz(e,t,r[t])})}return e}function OF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OH(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):OF(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function OU(e,t){if(null==e)return{};var r,n,i=OG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OG(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var OV=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=OU(e,["size","color"]);return(0,F.jsxs)("svg",OH(Oq({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M8.39844 13.2534C11.1599 13.2534 13.3984 11.0148 13.3984 8.25336C13.3984 5.49193 11.1599 3.25336 8.39844 3.25336C5.63701 3.25336 3.39844 5.49193 3.39844 8.25336C3.39844 11.0148 5.63701 13.2534 8.39844 13.2534Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M18.187 11.7466C18.8282 12.1161 19.3757 12.6281 19.7872 13.2431C20.1987 13.8582 20.4631 14.5596 20.56 15.2932C20.6569 16.0268 20.5837 16.7729 20.346 17.4737C20.1083 18.1744 19.7125 18.8111 19.1892 19.3343C18.666 19.8576 18.0293 20.2534 17.3286 20.4911C16.6278 20.7288 15.8818 20.802 15.1481 20.7051C14.4145 20.6082 13.7131 20.3438 13.0981 19.9323C12.4831 19.5208 11.971 18.9733 11.6016 18.3321",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.39844 6.75336H8.39844V9.75336",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M15.9874 13.6536L16.5964 14.2129L14.1602 16.4501",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function OB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){OB(e,t,r[t])})}return e}function OQ(e,t){if(null==e)return{};var r,n,i=OY(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OY(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var O$=function(e){var t=e.form,r=t.control,n=t.path,i=t.formState.errors,o=(0,tR.Dq)({control:r,name:n("currencyDenominations"),keyName:"fieldKey"}).fields,a=(0,tR.qo)({control:r,name:n("defaultDenomination")}),l=(0,tR.qo)({control:r,name:n("useSameValue")});return(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Default currency"}),(0,F.jsx)(rm.Z,{type:"info",content:"The denomination in your store's default currency"})]}),(0,F.jsxs)("div",{className:"pt-small gap-x-base rounded-rounded relative grid grid-cols-[1fr_223px] justify-between transition-colors",children:[(0,F.jsxs)("div",{className:"gap-x-small flex items-center",children:[(0,F.jsx)("div",{className:"bg-grey-10 rounded-rounded text-grey-50 flex h-10 w-10 items-center justify-center",children:(0,F.jsx)(OV,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:a.currency_code.toUpperCase()}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:v$.Q[a.currency_code.toUpperCase()].name}),(0,F.jsx)(OL,{includesTax:a.includes_tax})]})]}),(0,F.jsx)(tR.Qr,{name:n("defaultDenomination.amount"),control:r,rules:{required:"An amount for your store's default currency is required"},render:function(e){var t=e.field,r=t.value,n=t.onChange,o=t.name;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(v3,{onChange:n,amount:null!==r?r:void 0,currencyCode:a.currency_code,errors:i}),(0,F.jsx)(o9.Z,{errors:i,name:o})]})}})]})]}),(0,F.jsx)("div",{children:(0,F.jsxs)("div",{className:"flex items-start justify-between",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Use value for all currencies?"}),(0,F.jsx)("p",{className:"inter-small-regular text-grey-50 max-w-[60%]",children:"If enabled the value used for the store's default currency code will also be applied to all other currencies in your store."})]}),(0,F.jsx)(tR.Qr,{control:r,name:n("useSameValue"),render:function(e){var t=e.field,r=t.value,n=t.onChange,i=OQ(e.field,["value","onChange"]);return(0,F.jsx)(vw.Z,OW({checked:r,onCheckedChange:n},i))}})]})}),!l&&(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Other currencies"}),(0,F.jsx)(rm.Z,{type:"info",content:"The denomination in your store's other currencies"})]}),(0,F.jsx)("div",{className:"gap-y-xsmall pt-small flex flex-col",children:o.map(function(e,t){return(0,F.jsxs)("div",{className:"gap-x-base rounded-rounded relative grid grid-cols-[1fr_223px] justify-between transition-colors",children:[(0,F.jsxs)("div",{className:"gap-x-small flex items-center",children:[(0,F.jsx)("div",{className:"bg-grey-10 rounded-rounded text-grey-50 flex h-10 w-10 items-center justify-center",children:(0,F.jsx)(OV,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:e.currency_code.toUpperCase()}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:v$.Q[e.currency_code.toUpperCase()].name}),(0,F.jsx)(OL,{includesTax:e.includes_tax})]})]}),(0,F.jsx)(tR.Qr,{name:n("currencyDenominations.".concat(t,".amount")),control:r,render:function(t){var r=t.field,n=r.value,i=r.onChange,o=t.formState.errors;return(0,F.jsx)(v3,{onChange:i,amount:null!==n?n:void 0,currencyCode:e.currency_code,errors:o})}})]},e.fieldKey)})})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(t,"metadata")})]})]})},OK=function(e){var t=e.open,r=e.onClose,n=e.giftCard,i=(0,en.useAdminCreateVariant)(n.id),o=i.mutate,a=i.isLoading,l=(0,en.useAdminStore)().store,s=(0,B.useMemo)(function(){var e;if(l)return{denominations:{defaultDenomination:{currency_code:l.default_currency_code,includes_tax:null===(e=l.currencies.find(function(e){return e.code===l.default_currency_code}))||void 0===e?void 0:e.includes_tax},currencyDenominations:l.currencies.filter(function(e){return e.code!==l.default_currency_code}).map(function(e){return{currency_code:e.code,includes_tax:e.includes_tax}})}}},[l]),c=(0,tR.cI)({defaultValues:s}),u=c.handleSubmit,d=c.reset,f=c.formState.isDirty,p=(0,td.Z)(),m=(0,B.useCallback)(function(){d(s),r()},[d,s,r]),y=u(function(e){var t={title:"".concat(n.variants.length),options:[{value:"".concat(e.denominations.defaultDenomination.amount),option_id:n.options[0].id}],prices:[{amount:e.denominations.defaultDenomination.amount,currency_code:e.denominations.defaultDenomination.currency_code}],inventory_quantity:0,manage_inventory:!1};e.denominations.currencyDenominations.forEach(function(r){(null!==r.amount&&void 0!==r.amount||e.denominations.useSameValue)&&t.prices.push({amount:e.denominations.useSameValue?e.denominations.defaultDenomination.amount:r.amount,currency_code:r.currency_code})}),o(t,{onSuccess:function(){p("Denomination added","A new denomination was succesfully added","success"),m()},onError:function(e){var t,r;p("Error",(null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.type)==="duplicate_error"?"A denomination with that default value already exists":(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{open:t,handleClose:m,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:m,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Add Denomination"})}),(0,F.jsxs)("form",{onSubmit:y,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(O$,{form:(0,tL.G)(c,"denominations")})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:m,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",disabled:a||!f,loading:a,children:"Save and close"})]})})]})]})})},OJ=r(60423),OX=r(88028);function O0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){O0(e,t,r[t])})}return e}var O2=function(e){var t=e.denomination,r=e.onClose,n=e.open,i=(0,en.useAdminStore)().store,o=(0,en.useAdminUpdateVariant)(t.product_id),a=o.mutate,l=o.isLoading,s=(0,OX.useQueryClient)(),c=(0,tR.cI)({defaultValues:O3(i,t.prices)}),u=c.handleSubmit,d=c.reset,f=c.formState.isDirty,p=(0,td.Z)();(0,B.useEffect)(function(){n&&d(O3(i,t.prices))},[n,i,t.prices,d]);var m=(0,B.useCallback)(function(){d(),r()},[d,r]),y=u(function(e){var r={prices:[{amount:e.denominations.defaultDenomination.amount,currency_code:e.denominations.defaultDenomination.currency_code}]};e.denominations.currencyDenominations.forEach(function(t){(void 0!==t.amount&&null!==t.amount||e.denominations.useSameValue)&&r.prices.push({amount:e.denominations.useSameValue?e.denominations.defaultDenomination.amount:t.amount,currency_code:t.currency_code})}),a(O1({variant_id:t.id},r),{onSuccess:function(){p("Denomination updated","A new denomination was succesfully updated","success"),s.invalidateQueries(en.adminProductKeys.all),m()},onError:function(e){p("Error",(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{open:n,handleClose:m,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:m,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit Denomination"})}),(0,F.jsxs)("form",{onSubmit:y,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(O$,{form:(0,tL.G)(c,"denominations")})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-2xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:m,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",loading:l,disabled:!f||l,children:"Save and close"})]})})]})]})})},O3=function(e,t){if(e){var r,n={denominations:{defaultDenomination:{currency_code:e.default_currency_code,includes_tax:null===(r=e.currencies.find(function(t){return t.code===e.default_currency_code}))||void 0===r?void 0:r.includes_tax,amount:O5(e.default_currency_code,t)},currencyDenominations:e.currencies.filter(function(t){return t.code!==e.default_currency_code}).map(function(e){return{currency_code:e.code,includes_tax:e.includes_tax,amount:O5(e.code,t)}})}};return n.denominations.currencyDenominations.every(function(e){return e.amount===n.denominations.defaultDenomination.amount})&&(n.denominations.useSameValue=!0),n}},O5=function(e,t){var r;return null===(r=t.find(function(t){return t.currency_code===e&&null===t.region_id&&null===t.price_list_id}))||void 0===r?void 0:r.amount};function O6(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function O4(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){O6(o,n,i,a,l,"next",e)}function l(e){O6(o,n,i,a,l,"throw",e)}a(void 0)})}}function O8(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var O7=(0,OJ.createColumnHelper)(),O9=function(){var e=(0,en.useAdminStore)().store;return(0,B.useMemo)(function(){if(!e)return[];var t=e.default_currency_code;return[O7.display({header:"Denomination",id:"denomination",cell:function(e){var r=e.row.original.prices.find(function(e){return e.currency_code===t&&null===e.region_id&&null===e.price_list_id});return r?(0,F.jsxs)("p",{children:[(0,oy.Kt)(t,r.amount)," ",(0,F.jsx)("span",{className:"text-grey-50",children:t.toUpperCase()})]}):"-"}}),O7.display({header:"In other currencies",id:"other_currencies",cell:function(e){var r=e.row.original.prices.filter(function(e){return e.currency_code!==t&&null===e.region_id&&null===e.price_list_id}),n=[];return r.length>2&&(n=r.splice(2)),r.length>0?(0,F.jsxs)("p",{children:[r.map(function(e,t){return(0,F.jsxs)("span",{children:[(0,oy.Kt)(e.currency_code,e.amount)," ",(0,F.jsx)("span",{className:"text-grey-50",children:e.currency_code.toUpperCase()}),t<r.length-1&&", "]},t)}),n.length>0&&(0,F.jsx)(a9.Z,{content:(0,F.jsx)("ul",{children:n.map(function(e,t){return(0,F.jsx)("li",{children:(0,F.jsxs)("p",{children:[(0,oy.Kt)(e.currency_code,e.amount)," ",(0,F.jsx)("span",{className:"text-grey-50",children:e.currency_code.toUpperCase()})]})},t)})}),children:(0,F.jsx)("span",{className:"text-grey-50 cursor-default",children:", and ".concat(n.length," more")})})]}):"-"}}),O7.display({id:"actions",cell:function(e){var t=e.row.original;return(0,F.jsx)(we,{original:t})}})]},[e])},we=function(e){var t,r=e.original,n=(0,s1.Z)(),i=n.state,o=n.open,a=n.close,l=(0,en.useAdminDeleteVariant)(r.product_id).mutateAsync,s=(0,td.Z)(),c=o2(),u=(t=O4(function(){return O8(this,function(e){switch(e.label){case 0:return[4,c({heading:"Delete denomination",text:"Are you sure you want to delete this denomination?"})];case 1:return e.sent()&&l(r.id,{onSuccess:function(){s("Denomination deleted","Denomination was successfully deleted","success")},onError:function(e){s("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)}),d=[{label:"Edit",onClick:o,icon:(0,F.jsx)(eC,{size:20})},{label:"Delete",onClick:u,icon:(0,F.jsx)(eZ,{size:20}),variant:"danger"}];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"flex items-center justify-end",children:(0,F.jsx)(eQ,{actions:d,forceDropdown:!0})}),(0,F.jsx)(O2,{open:i,onClose:a,denomination:r})]})},wt=function(e){var t=e.denominations,r=O9(),n=(0,OJ.useReactTable)({columns:r,data:t,getCoreRowModel:(0,OJ.getCoreRowModel)()}),i=n.getHeaderGroups,o=n.getRowModel;return(0,F.jsxs)(nf,{children:[(0,F.jsx)(nf.Head,{children:i().map(function(e){return(0,F.jsx)(nf.HeadRow,{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,F.jsx)(nf.Body,{children:o().rows.map(function(e){return(0,F.jsx)(nf.Row,{className:"last-of-type:border-b-0",children:e.getVisibleCells().map(function(e){return(0,F.jsx)(nf.Cell,{style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})};function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wn(e){if(Array.isArray(e))return wr(e)}function wi(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function wo(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wa(e){return wn(e)||wi(e)||wl(e)||wo()}function wl(e,t){if(e){if("string"==typeof e)return wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wr(e,t)}}var ws=function(e){var t=e.giftCard,r=(0,s1.Z)(),n=r.state,i=r.close,o=r.open;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tM,{title:"Denominations",forceDropdown:!0,actions:[{label:"Add Denomination",onClick:o,icon:(0,F.jsx)(sh.Z,{size:20})}],children:(0,F.jsx)("div",{className:"mb-large mt-base",children:(0,F.jsx)(wt,{denominations:wa(t.variants)})})}),(0,F.jsx)(OK,{giftCard:t,open:n,onClose:i})]})};function wc(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function wu(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){wc(o,n,i,a,l,"next",e)}function l(e){wc(o,n,i,a,l,"throw",e)}a(void 0)})}}function wd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){wd(e,t,r[t])})}return e}function wp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wm(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wp(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function wy(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var wh=function(e){var t,r=o2(),n=(0,V.useNavigate)(),i=(0,td.Z)(),o=(0,en.useAdminProduct)(e),a=(0,en.useAdminUpdateProduct)(e),l=(0,en.useAdminDeleteProduct)(e),s=(0,en.useAdminUpdateVariant)(e),c=(0,en.useAdminDeleteVariant)(e),u=(0,en.useAdminCreateVariant)(e);return{getProduct:o,onDelete:(t=wu(function(){return wy(this,function(e){switch(e.label){case 0:return[4,r({heading:"Delete Product",text:"Are you sure you want to delete this product"})];case 1:return e.sent()&&l.mutate(void 0,{onSuccess:function(){i("Success","Product deleted successfully","success"),n("/a/products/")},onError:function(e){i("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)}),onStatusChange:function(e){var t="published"===e?"draft":"published";a.mutate({status:t},{onSuccess:function(){i("Success","Product ".concat("published"===t?"published":"drafted"," successfully"),"success")},onError:function(e){i("Ooops",(0,tf.e)(e),"error")}})},onUpdate:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Product was successfully updated";a.mutate(e,{onSuccess:function(){i("Success",r,"success"),t()},onError:function(e){i("Error",(0,tf.e)(e),"error")}})},onAddVariant:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Variant was created successfully";u.mutate(e,{onSuccess:function(e){i("Success",r,"success"),o.refetch(),t(e.product)},onError:function(e){i("Error",(0,tf.e)(e),"error")}})},onUpdateVariant:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Variant was updated successfully";s.mutate(wm(wf({variant_id:e},fk(t)),{manage_inventory:t.manage_inventory,allow_backorder:t.allow_backorder}),{onSuccess:function(){i("Success",n,"success"),o.refetch(),r()},onError:function(e){i("Error",(0,tf.e)(e),"error")}})},onDeleteVariant:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Variant was succesfully deleted";c.mutate(e,{onSuccess:function(){i("Success",r,"success"),o.refetch(),t&&t()},onError:function(e){i("Error",(0,tf.e)(e),"error")}})},updating:a.isLoading,deleting:l.isLoading,addingVariant:u.isLoading,updatingVariant:s.isLoading,deletingVariant:c.isLoading}},wb={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"South Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},wv=[{alpha2:"AF",name:"Afghanistan",alpha3:"AFG",numeric:"004"},{alpha2:"AL",name:"Albania",alpha3:"ALB",numeric:"008"},{alpha2:"DZ",name:"Algeria",alpha3:"DZA",numeric:"012"},{alpha2:"AS",name:"American Samoa",alpha3:"ASM",numeric:"016"},{alpha2:"AD",name:"Andorra",alpha3:"AND",numeric:"020"},{alpha2:"AO",name:"Angola",alpha3:"AGO",numeric:"024"},{alpha2:"AI",name:"Anguilla",alpha3:"AIA",numeric:"660"},{alpha2:"AQ",name:"Antarctica",alpha3:"ATA",numeric:"010"},{alpha2:"AG",name:"Antigua and Barbuda",alpha3:"ATG",numeric:"028"},{alpha2:"AR",name:"Argentina",alpha3:"ARG",numeric:"032"},{alpha2:"AM",name:"Armenia",alpha3:"ARM",numeric:"051"},{alpha2:"AW",name:"Aruba",alpha3:"ABW",numeric:"533"},{alpha2:"AU",name:"Australia",alpha3:"AUS",numeric:"036"},{alpha2:"AT",name:"Austria",alpha3:"AUT",numeric:"040"},{alpha2:"AZ",name:"Azerbaijan",alpha3:"AZE",numeric:"031"},{alpha2:"BS",name:"Bahamas",alpha3:"BHS",numeric:"044"},{alpha2:"BH",name:"Bahrain",alpha3:"BHR",numeric:"048"},{alpha2:"BD",name:"Bangladesh",alpha3:"BGD",numeric:"050"},{alpha2:"BB",name:"Barbados",alpha3:"BRB",numeric:"052"},{alpha2:"BY",name:"Belarus",alpha3:"BLR",numeric:"112"},{alpha2:"BE",name:"Belgium",alpha3:"BEL",numeric:"056"},{alpha2:"BZ",name:"Belize",alpha3:"BLZ",numeric:"084"},{alpha2:"BJ",name:"Benin",alpha3:"BEN",numeric:"204"},{alpha2:"BM",name:"Bermuda",alpha3:"BMU",numeric:"060"},{alpha2:"BT",name:"Bhutan",alpha3:"BTN",numeric:"064"},{alpha2:"BO",name:"Bolivia",alpha3:"BOL",numeric:"068"},{alpha2:"BQ",name:"Bonaire",alpha3:"BES",numeric:"535"},{alpha2:"BA",name:"Bosnia and Herzegovina",alpha3:"BIH",numeric:"070"},{alpha2:"BW",name:"Botswana",alpha3:"BWA",numeric:"072"},{alpha2:"BV",name:"Bouvet Island",alpha3:"BVD",numeric:"074"},{alpha2:"BR",name:"Brazil",alpha3:"BRA",numeric:"076"},{alpha2:"IO",name:"British Indian Ocean Territory",alpha3:"IOT",numeric:"086"},{alpha2:"BN",name:"Brunei Darussalam",alpha3:"BRN",numeric:"096"},{alpha2:"BG",name:"Bulgaria",alpha3:"BGR",numeric:"100"},{alpha2:"BF",name:"Burkina Faso",alpha3:"BFA",numeric:"854"},{alpha2:"BI",name:"Burundi",alpha3:"BDI",numeric:"108"},{alpha2:"KH",name:"Cambodia",alpha3:"KHM",numeric:"116"},{alpha2:"CM",name:"Cameroon",alpha3:"CMR",numeric:"120"},{alpha2:"CA",name:"Canada",alpha3:"CAN",numeric:"124"},{alpha2:"CV",name:"Cape Verde",alpha3:"CPV",numeric:"132"},{alpha2:"KY",name:"Cayman Islands",alpha3:"CYM",numeric:"136"},{alpha2:"CF",name:"Central African Republic",alpha3:"CAF",numeric:"140"},{alpha2:"TD",name:"Chad",alpha3:"TCD",numeric:"148"},{alpha2:"CL",name:"Chile",alpha3:"CHL",numeric:"152"},{alpha2:"CN",name:"China",alpha3:"CHN",numeric:"156"},{alpha2:"CX",name:"Christmas Island",alpha3:"CXR",numeric:"162"},{alpha2:"CC",name:"Cocos (Keeling) Islands",alpha3:"CCK",numeric:"166"},{alpha2:"CO",name:"Colombia",alpha3:"COL",numeric:"170"},{alpha2:"KM",name:"Comoros",alpha3:"COM",numeric:"174"},{alpha2:"CG",name:"Congo",alpha3:"COG",numeric:"178"},{alpha2:"CD",name:"D.R. Congo",alpha3:"COD",numeric:"180"},{alpha2:"CK",name:"Cook Islands",alpha3:"COK",numeric:"184"},{alpha2:"CR",name:"Costa Rica",alpha3:"CRI",numeric:"188"},{alpha2:"CI",name:"Cote D'Ivoire",alpha3:"CIV",numeric:"384"},{alpha2:"HR",name:"Croatia",alpha3:"HRV",numeric:"191"},{alpha2:"CU",name:"Cuba",alpha3:"CUB",numeric:"192"},{alpha2:"CW",name:"Cura\xe7ao",alpha3:"CUW",numeric:"531"},{alpha2:"CY",name:"Cyprus",alpha3:"CYP",numeric:"196"},{alpha2:"CZ",name:"Czech Republic",alpha3:"CZE",numeric:"203"},{alpha2:"DK",name:"Denmark",alpha3:"DNK",numeric:"208"},{alpha2:"DJ",name:"Djibouti",alpha3:"DJI",numeric:"262"},{alpha2:"DM",name:"Dominica",alpha3:"DMA",numeric:"212"},{alpha2:"DO",name:"Dominican Republic",alpha3:"DOM",numeric:"214"},{alpha2:"EC",name:"Ecuador",alpha3:"ECU",numeric:"218"},{alpha2:"EG",name:"Egypt",alpha3:"EGY",numeric:"818"},{alpha2:"SV",name:"El Salvador",alpha3:"SLV",numeric:"222"},{alpha2:"GQ",name:"Equatorial Guinea",alpha3:"GNQ",numeric:"226"},{alpha2:"ER",name:"Eritrea",alpha3:"ERI",numeric:"232"},{alpha2:"EE",name:"Estonia",alpha3:"EST",numeric:"233"},{alpha2:"ET",name:"Ethiopia",alpha3:"ETH",numeric:"231"},{alpha2:"FK",name:"Falkland Islands (Malvinas)",alpha3:"FLK",numeric:"238"},{alpha2:"FO",name:"Faroe Islands",alpha3:"FRO",numeric:"234"},{alpha2:"FJ",name:"Fiji",alpha3:"FJI",numeric:"242"},{alpha2:"FI",name:"Finland",alpha3:"FIN",numeric:"246"},{alpha2:"FR",name:"France",alpha3:"FRA",numeric:"250"},{alpha2:"GF",name:"French Guiana",alpha3:"GUF",numeric:"254"},{alpha2:"PF",name:"French Polynesia",alpha3:"PYF",numeric:"258"},{alpha2:"TF",name:"French Southern Territories",alpha3:"ATF",numeric:"260"},{alpha2:"GA",name:"Gabon",alpha3:"GAB",numeric:"266"},{alpha2:"GM",name:"Gambia",alpha3:"GMB",numeric:"270"},{alpha2:"GE",name:"Georgia",alpha3:"GEO",numeric:"268"},{alpha2:"DE",name:"Germany",alpha3:"DEU",numeric:"276"},{alpha2:"GH",name:"Ghana",alpha3:"GHA",numeric:"288"},{alpha2:"GI",name:"Gibraltar",alpha3:"GIB",numeric:"292"},{alpha2:"GR",name:"Greece",alpha3:"GRC",numeric:"300"},{alpha2:"GL",name:"Greenland",alpha3:"GRL",numeric:"304"},{alpha2:"GD",name:"Grenada",alpha3:"GRD",numeric:"308"},{alpha2:"GP",name:"Guadeloupe",alpha3:"GLP",numeric:"312"},{alpha2:"GU",name:"Guam",alpha3:"GUM",numeric:"316"},{alpha2:"GT",name:"Guatemala",alpha3:"GTM",numeric:"320"},{alpha2:"GG",name:"Guernsey",alpha3:"GGY",numeric:"831"},{alpha2:"GN",name:"Guinea",alpha3:"GIN",numeric:"324"},{alpha2:"GW",name:"Guinea-Bissau",alpha3:"GNB",numeric:"624"},{alpha2:"GY",name:"Guyana",alpha3:"GUY",numeric:"328"},{alpha2:"HT",name:"Haiti",alpha3:"HTI",numeric:"332"},{alpha2:"HN",name:"Honduras",alpha3:"HND",numeric:"340"},{alpha2:"HK",name:"Hong Kong",alpha3:"HKG",numeric:"344"},{alpha2:"HU",name:"Hungary",alpha3:"HUN",numeric:"348"},{alpha2:"IS",name:"Iceland",alpha3:"ISL",numeric:"352"},{alpha2:"IN",name:"India",alpha3:"IND",numeric:"356"},{alpha2:"ID",name:"Indonesia",alpha3:"IDN",numeric:"360"},{alpha2:"IR",name:"Iran, Islamic Republic of",alpha3:"IRN",numeric:"364"},{alpha2:"IQ",name:"Iraq",alpha3:"IRQ",numeric:"368"},{alpha2:"IE",name:"Ireland",alpha3:"IRL",numeric:"372"},{alpha2:"IM",name:"Isle Of Man",alpha3:"IMN",numeric:"833"},{alpha2:"IL",name:"Israel",alpha3:"ISR",numeric:"376"},{alpha2:"IT",name:"Italy",alpha3:"ITA",numeric:"380"},{alpha2:"JM",name:"Jamaica",alpha3:"JAM",numeric:"388"},{alpha2:"JP",name:"Japan",alpha3:"JPN",numeric:"392"},{alpha2:"JE",name:"Jersey",alpha3:"JEY",numeric:"832"},{alpha2:"JO",name:"Jordan",alpha3:"JOR",numeric:"400"},{alpha2:"KZ",name:"Kazakhstan",alpha3:"KAZ",numeric:"398"},{alpha2:"KE",name:"Kenya",alpha3:"KEN",numeric:"404"},{alpha2:"KI",name:"Kiribati",alpha3:"KIR",numeric:"296"},{alpha2:"KR",name:"South Korea",alpha3:"KOR",numeric:"410"},{alpha2:"XK",name:"Kosovo",alpha3:"XKX",numeric:"900"},{alpha2:"KW",name:"Kuwait",alpha3:"KWT",numeric:"414"},{alpha2:"KG",name:"Kyrgyzstan",alpha3:"KGZ",numeric:"417"},{alpha2:"LV",name:"Latvia",alpha3:"LVA",numeric:"428"},{alpha2:"LB",name:"Lebanon",alpha3:"LBN",numeric:"422"},{alpha2:"LS",name:"Lesotho",alpha3:"LSO",numeric:"426"},{alpha2:"LR",name:"Liberia",alpha3:"LBR",numeric:"430"},{alpha2:"LI",name:"Liechtenstein",alpha3:"LIE",numeric:"438"},{alpha2:"LT",name:"Lithuania",alpha3:"LTU",numeric:"440"},{alpha2:"LU",name:"Luxembourg",alpha3:"LUX",numeric:"442"},{alpha2:"MO",name:"Macao",alpha3:"MAC",numeric:"446"},{alpha2:"MK",name:"Macedonia",alpha3:"MKD",numeric:"807"},{alpha2:"MG",name:"Madagascar",alpha3:"MDG",numeric:"450"},{alpha2:"MW",name:"Malawi",alpha3:"MWI",numeric:"454"},{alpha2:"MY",name:"Malaysia",alpha3:"MYS",numeric:"458"},{alpha2:"MV",name:"Maldives",alpha3:"MDV",numeric:"462"},{alpha2:"ML",name:"Mali",alpha3:"MLI",numeric:"466"},{alpha2:"MT",name:"Malta",alpha3:"MLT",numeric:"470"},{alpha2:"MH",name:"Marshall Islands",alpha3:"MHL",numeric:"584"},{alpha2:"MQ",name:"Martinique",alpha3:"MTQ",numeric:"474"},{alpha2:"MR",name:"Mauritania",alpha3:"MRT",numeric:"478"},{alpha2:"MU",name:"Mauritius",alpha3:"MUS",numeric:"480"},{alpha2:"YT",name:"Mayotte",alpha3:"MYT",numeric:"175"},{alpha2:"MX",name:"Mexico",alpha3:"MEX",numeric:"484"},{alpha2:"FM",name:"Micronesia, Federated States of",alpha3:"FSM",numeric:"583"},{alpha2:"MD",name:"Moldova, Republic of",alpha3:"MDA",numeric:"498"},{alpha2:"MC",name:"Monaco",alpha3:"MCO",numeric:"492"},{alpha2:"MN",name:"Mongolia",alpha3:"MNG",numeric:"496"},{alpha2:"ME",name:"Montenegro",alpha3:"MNE",numeric:"499"},{alpha2:"MS",name:"Montserrat",alpha3:"MSR",numeric:"500"},{alpha2:"MA",name:"Morocco",alpha3:"MAR",numeric:"504"},{alpha2:"MZ",name:"Mozambique",alpha3:"MOZ",numeric:"508"},{alpha2:"MM",name:"Myanmar",alpha3:"MMR",numeric:"104"},{alpha2:"NA",name:"Namibia",alpha3:"NAM",numeric:"516"},{alpha2:"NR",name:"Nauru",alpha3:"NRU",numeric:"520"},{alpha2:"NP",name:"Nepal",alpha3:"NPL",numeric:"524"},{alpha2:"NL",name:"Netherlands",alpha3:"NLD",numeric:"528"},{alpha2:"NC",name:"New Caledonia",alpha3:"NCL",numeric:"540"},{alpha2:"NZ",name:"New Zealand",alpha3:"NZL",numeric:"554"},{alpha2:"NI",name:"Nicaragua",alpha3:"NIC",numeric:"558"},{alpha2:"NE",name:"Niger",alpha3:"NER",numeric:"562"},{alpha2:"NG",name:"Nigeria",alpha3:"NGA",numeric:"566"},{alpha2:"NU",name:"Niue",alpha3:"NIU",numeric:"570"},{alpha2:"NF",name:"Norfolk Island",alpha3:"NFK",numeric:"574"},{alpha2:"MP",name:"Northern Mariana Islands",alpha3:"MNP",numeric:"580"},{alpha2:"NO",name:"Norway",alpha3:"NOR",numeric:"578"},{alpha2:"OM",name:"Oman",alpha3:"OMN",numeric:"512"},{alpha2:"PK",name:"Pakistan",alpha3:"PAK",numeric:"586"},{alpha2:"PW",name:"Palau",alpha3:"PLW",numeric:"585"},{alpha2:"PS",name:"Palestinian Territory, Occupied",alpha3:"PSE",numeric:"275"},{alpha2:"PA",name:"Panama",alpha3:"PAN",numeric:"591"},{alpha2:"PG",name:"Papua New Guinea",alpha3:"PNG",numeric:"598"},{alpha2:"PY",name:"Paraguay",alpha3:"PRY",numeric:"600"},{alpha2:"PE",name:"Peru",alpha3:"PER",numeric:"604"},{alpha2:"PH",name:"Philippines",alpha3:"PHL",numeric:"608"},{alpha2:"PN",name:"Pitcairn",alpha3:"PCN",numeric:"612"},{alpha2:"PL",name:"Poland",alpha3:"POL",numeric:"616"},{alpha2:"PT",name:"Portugal",alpha3:"PRT",numeric:"620"},{alpha2:"PR",name:"Puerto Rico",alpha3:"PRI",numeric:"630"},{alpha2:"QA",name:"Qatar",alpha3:"QAT",numeric:"634"},{alpha2:"RE",name:"Reunion",alpha3:"REU",numeric:"638"},{alpha2:"RO",name:"Romania",alpha3:"ROU",numeric:"642"},{alpha2:"RO",name:"Romania",alpha3:"ROM",numeric:"642"},{alpha2:"RU",name:"Russian Federation",alpha3:"RUS",numeric:"643"},{alpha2:"RW",name:"Rwanda",alpha3:"RWA",numeric:"646"},{alpha2:"BL",name:"Saint Barth\xe9lemy",alpha3:"BLM",numeric:"652"},{alpha2:"SH",name:"Saint Helena",alpha3:"SHN",numeric:"654"},{alpha2:"KN",name:"Saint Kitts and Nevis",alpha3:"KNA",numeric:"659"},{alpha2:"LC",name:"Saint Lucia",alpha3:"LCA",numeric:"662"},{alpha2:"MF",name:"Saint Martin (French part)",alpha3:"MAF",numeric:"663"},{alpha2:"PM",name:"Saint Pierre and Miquelon",alpha3:"SPM",numeric:"666"},{alpha2:"VC",name:"Saint Vincent and the Grenadines",alpha3:"VCT",numeric:"670"},{alpha2:"WS",name:"Samoa",alpha3:"WSM",numeric:"882"},{alpha2:"SM",name:"San Marino",alpha3:"SMR",numeric:"674"},{alpha2:"ST",name:"Sao Tome and Principe",alpha3:"STP",numeric:"678"},{alpha2:"SA",name:"Saudi Arabia",alpha3:"SAU",numeric:"682"},{alpha2:"SN",name:"Senegal",alpha3:"SEN",numeric:"686"},{alpha2:"RS",name:"Serbia",alpha3:"SRB",numeric:"688"},{alpha2:"SC",name:"Seychelles",alpha3:"SYC",numeric:"690"},{alpha2:"SL",name:"Sierra Leone",alpha3:"SLE",numeric:"694"},{alpha2:"SG",name:"Singapore",alpha3:"SGP",numeric:"702"},{alpha2:"SX",name:"Sint Maarten",alpha3:"SXM",numeric:"534"},{alpha2:"SK",name:"Slovakia",alpha3:"SVK",numeric:"703"},{alpha2:"SI",name:"Slovenia",alpha3:"SVN",numeric:"705"},{alpha2:"SB",name:"Solomon Islands",alpha3:"SLB",numeric:"090"},{alpha2:"SO",name:"Somalia",alpha3:"SOM",numeric:"706"},{alpha2:"ZA",name:"South Africa",alpha3:"ZAF",numeric:"710"},{alpha2:"SS",name:"South Sudan",alpha3:"SSD",numeric:"728"},{alpha2:"ES",name:"Spain",alpha3:"ESP",numeric:"724"},{alpha2:"LK",name:"Sri Lanka",alpha3:"LKA",numeric:"144"},{alpha2:"SD",name:"Sudan",alpha3:"SDN",numeric:"729"},{alpha2:"SR",name:"Suriname",alpha3:"SUR",numeric:"740"},{alpha2:"SJ",name:"Svalbard and Jan Mayen",alpha3:"SJM",numeric:"744"},{alpha2:"SZ",name:"Swaziland",alpha3:"SWZ",numeric:"748"},{alpha2:"SE",name:"Sweden",alpha3:"SWE",numeric:"752"},{alpha2:"CH",name:"Switzerland",alpha3:"CHE",numeric:"756"},{alpha2:"SY",name:"Syrian Arab Republic",alpha3:"SYR",numeric:"760"},{alpha2:"TW",name:"Taiwan, Province of China",alpha3:"TWN",numeric:"158"},{alpha2:"TJ",name:"Tajikistan",alpha3:"TJK",numeric:"762"},{alpha2:"TZ",name:"Tanzania, United Republic of",alpha3:"TZA",numeric:"834"},{alpha2:"TH",name:"Thailand",alpha3:"THA",numeric:"764"},{alpha2:"TL",name:"Timor Leste",alpha3:"TLS",numeric:"626"},{alpha2:"TG",name:"Togo",alpha3:"TGO",numeric:"768"},{alpha2:"TK",name:"Tokelau",alpha3:"TKL",numeric:"772"},{alpha2:"TO",name:"Tonga",alpha3:"TON",numeric:"776"},{alpha2:"TT",name:"Trinidad and Tobago",alpha3:"TTO",numeric:"780"},{alpha2:"TN",name:"Tunisia",alpha3:"TUN",numeric:"788"},{alpha2:"TR",name:"Turkey",alpha3:"TUR",numeric:"792"},{alpha2:"TM",name:"Turkmenistan",alpha3:"TKM",numeric:"795"},{alpha2:"TC",name:"Turks and Caicos Islands",alpha3:"TCA",numeric:"796"},{alpha2:"TV",name:"Tuvalu",alpha3:"TUV",numeric:"798"},{alpha2:"UG",name:"Uganda",alpha3:"UGA",numeric:"800"},{alpha2:"UA",name:"Ukraine",alpha3:"UKR",numeric:"804"},{alpha2:"AE",name:"United Arab Emirates",alpha3:"ARE",numeric:"784"},{alpha2:"GB",name:"United Kingdom",alpha3:"GBR",numeric:"826"},{alpha2:"US",name:"United States",alpha3:"USA",numeric:"840"},{alpha2:"UM",name:"United States Minor Outlying Islands",alpha3:"UMI",numeric:"581"},{alpha2:"UY",name:"Uruguay",alpha3:"URY",numeric:"858"},{alpha2:"UZ",name:"Uzbekistan",alpha3:"UZB",numeric:"860"},{alpha2:"VU",name:"Vanuatu",alpha3:"VUT",numeric:"548"},{alpha2:"VE",name:"Venezuela",alpha3:"VEN",numeric:"862"},{alpha2:"VN",name:"Viet Nam",alpha3:"VNM",numeric:"704"},{alpha2:"VG",name:"Virgin Islands, British",alpha3:"VGB",numeric:"092"},{alpha2:"VI",name:"Virgin Islands, U.S.",alpha3:"VIR",numeric:"850"},{alpha2:"WF",name:"Wallis and Futuna",alpha3:"WLF",numeric:"876"},{alpha2:"EH",name:"Western Sahara",alpha3:"ESH",numeric:"732"},{alpha2:"YE",name:"Yemen",alpha3:"YEM",numeric:"887"},{alpha2:"ZM",name:"Zambia",alpha3:"ZMB",numeric:"894"},{alpha2:"ZW",name:"Zimbabwe",alpha3:"ZWE",numeric:"716"},{alpha2:"AX",name:"\xc5land Islands",alpha3:"ALA",numeric:"248"}];function wg(e){if(e){var t=e.toUpperCase();if(wb[t])return wb[t];var r=wv.find(function(e){return e.alpha3===t});if(r)return r.name;throw Error("Invalid country code")}}function wx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){wx(e,t,r[t])})}return e}function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ww(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var wS=function(e){var t=e.form,r=t.register,n=t.path,i=t.control,o=t.formState.errors,a=wv.map(function(e){return{label:e.name,value:e.alpha2}});return(0,F.jsxs)("div",{className:"gap-large pb-2xsmall grid grid-cols-2",children:[(0,F.jsx)(ry.Z,ww(wj({label:"MID Code",placeholder:"XDSKLAD9999..."},r(n("mid_code"),{pattern:s6.Z.whiteSpaceRule("MID Code")})),{errors:o})),(0,F.jsx)(ry.Z,ww(wj({label:"HS Code",placeholder:"BDJSK39277W..."},r(n("hs_code"),{pattern:s6.Z.whiteSpaceRule("HS Code")})),{errors:o})),(0,F.jsx)(tR.Qr,{name:n("origin_country"),control:i,render:function(e){var t=e.field;return(0,F.jsx)(lS,wj({label:"Country of origin",placeholder:"Choose a country",options:a,isSearchable:!0,isClearable:!0},t))}})]})};function wP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){wP(e,t,r[t])})}return e}function wN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wk(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wN(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var w_=function(e){var t=e.form,r=t.register,n=t.path,i=t.formState.errors;return(0,F.jsxs)("div",{className:"gap-x-large grid grid-cols-4",children:[(0,F.jsx)(ry.Z,wk(wC({label:"Width",placeholder:"100...",type:"number"},r(n("width"),{min:s6.Z.nonNegativeNumberRule("Width"),valueAsNumber:!0})),{errors:i})),(0,F.jsx)(ry.Z,wk(wC({label:"Length",placeholder:"100...",type:"number"},r(n("length"),{min:s6.Z.nonNegativeNumberRule("Length"),valueAsNumber:!0})),{errors:i})),(0,F.jsx)(ry.Z,wk(wC({label:"Height",placeholder:"100...",type:"number"},r(n("height"),{min:s6.Z.nonNegativeNumberRule("Height"),valueAsNumber:!0})),{errors:i})),(0,F.jsx)(ry.Z,wk(wC({label:"Weight",placeholder:"100...",type:"number"},r(n("weight"),{min:s6.Z.nonNegativeNumberRule("Weight"),valueAsNumber:!0})),{errors:i}))]})},wA=function(e){var t=e.product,r=e.open,n=e.onClose,i=wh(t.id),o=i.onUpdate,a=i.updating,l=(0,tR.cI)({defaultValues:wD(t)}),s=l.formState.isDirty,c=l.handleSubmit,u=l.reset;(0,B.useEffect)(function(){u(wD(t))},[t]);var d=function(){u(wD(t)),n()},f=c(function(e){var t;o({weight:e.dimensions.weight,width:e.dimensions.width,height:e.dimensions.height,length:e.dimensions.length,mid_code:e.customs.mid_code,hs_code:e.customs.hs_code,origin_country:null===(t=e.customs.origin_country)||void 0===t?void 0:t.value},d)});return(0,F.jsx)(tp.Z,{open:r,handleClose:d,isLargeModal:!0,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:d,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold m-0",children:"Edit Attributes"})}),(0,F.jsxs)("form",{onSubmit:f,children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"mb-xlarge",children:[(0,F.jsx)("h2",{className:"inter-large-semibold mb-2xsmall",children:"Dimensions"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure to calculate the most accurate shipping rates"}),(0,F.jsx)(w_,{form:(0,tL.G)(l,"dimensions")})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-large-semibold mb-2xsmall",children:"Customs"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure to calculate the most accurate shipping rates"}),(0,F.jsx)(wS,{form:(0,tL.G)(l,"customs")})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",onClick:d,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",disabled:!s,loading:a,children:"Save"})]})})]})]})})},wD=function(e){var t=wv.find(function(t){return t.alpha2===e.origin_country}),r=t?{label:t.name,value:t.alpha2}:null;return{dimensions:{weight:e.weight,width:e.width,height:e.height,length:e.length},customs:{mid_code:e.mid_code,hs_code:e.hs_code,origin_country:r}}},wE=function(e){var t=e.product,r=(0,s1.Z)(),n=r.state,i=r.toggle,o=r.close,a=[{label:"Edit Attributes",onClick:i,icon:(0,F.jsx)(eC,{size:20})}];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tM,{title:"Attributes",actions:a,forceDropdown:!0,children:[(0,F.jsxs)("div",{className:"gap-y-xsmall mb-large mt-base flex flex-col",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Dimensions"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,F.jsx)(wZ,{attribute:"Height",value:t.height}),(0,F.jsx)(wZ,{attribute:"Width",value:t.width}),(0,F.jsx)(wZ,{attribute:"Length",value:t.length}),(0,F.jsx)(wZ,{attribute:"Weight",value:t.weight})]})]}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Customs"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,F.jsx)(wZ,{attribute:"MID Code",value:t.mid_code}),(0,F.jsx)(wZ,{attribute:"HS Code",value:t.hs_code}),(0,F.jsx)(wZ,{attribute:"Country of origin",value:t.origin_country})]})]})]}),(0,F.jsx)(wA,{onClose:o,open:n,product:t})]})},wZ=function(e){var t=e.attribute,r=e.value;return(0,F.jsxs)("div",{className:"inter-base-regular text-grey-50 flex w-full items-center justify-between",children:[(0,F.jsx)("p",{children:t}),(0,F.jsx)("p",{children:r||"–"})]})},wI=function(e){var t=e.featureFlag,r=e.showOnlyWhenDisabled,n=e.children;return(0,(0,o3.ye)().isFeatureEnabled)(t)===!(void 0!==r&&r)?(0,F.jsx)(F.Fragment,{children:n}):null};function wT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){wT(e,t,r[t])})}return e}function wR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wR(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function wz(e,t){if(null==e)return{};var r,n,i=wq(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wq(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var wF=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=void 0===n?"currentColor":n,o=wz(e,["size","color"]);return(0,F.jsxs)("svg",wL(wM({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M17.6627 7.05C18.7811 7.05 19.6877 6.14338 19.6877 5.025C19.6877 3.90662 18.7811 3 17.6627 3C16.5443 3 15.6377 3.90662 15.6377 5.025C15.6377 6.14338 16.5443 7.05 17.6627 7.05Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M17.6627 14.025C18.7811 14.025 19.6877 13.1184 19.6877 12C19.6877 10.8816 18.7811 9.97498 17.6627 9.97498C16.5443 9.97498 15.6377 10.8816 15.6377 12C15.6377 13.1184 16.5443 14.025 17.6627 14.025Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M5.5123 14.025C6.63068 14.025 7.5373 13.1184 7.5373 12C7.5373 10.8816 6.63068 9.97498 5.5123 9.97498C4.39393 9.97498 3.4873 10.8816 3.4873 12C3.4873 13.1184 4.39393 14.025 5.5123 14.025Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M17.6627 21C18.7811 21 19.6877 20.0933 19.6877 18.975C19.6877 17.8566 18.7811 16.95 17.6627 16.95C16.5443 16.95 15.6377 17.8566 15.6377 18.975C15.6377 20.0933 16.5443 21 17.6627 21Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M15.6369 5.02502H13.3869C12.3924 5.02502 11.5869 5.83052 11.5869 6.82502V17.175C11.5869 18.1695 12.3924 18.975 13.3869 18.975H15.6369",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M15.6361 12H7.53613",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},wH=function(e){var t=e.list,r=e.delimit,n=void 0===r?1:r;if(!t.length)return(0,F.jsx)(F.Fragment,{});var i=t.slice(0,n).join(", "),o=t.length>n,a=t.length-n;return(0,F.jsxs)("span",{className:"inter-base-regular text-grey-50",children:[i,o&&(0,F.jsx)(a9.Z,{content:(0,F.jsx)(function(){return(0,F.jsx)("div",{className:"flex flex-col",children:t.slice(n).map(function(e){return(0,F.jsx)("span",{children:e},e)})})},{}),children:(0,F.jsxs)("span",{className:"text-grey-40",children:[" ","+ ",a," more"]})})]})},wU=function(e){var t=e.channels,r=void 0===t?[]:t,n=(0,en.useAdminSalesChannels)().count,i=Math.max(r.length-3,0);return(0,F.jsxs)("div",{className:"gap-y-small flex flex-col",children:[r.length>0&&(0,F.jsxs)("div",{className:"flex gap-x-1",children:[(0,F.jsx)("div",{className:"flex max-w-[600px] gap-x-1 overflow-clip",children:r.slice(0,3).map(function(e){return(0,F.jsx)(wG,{channel:e},e.id)})}),i>0&&(0,F.jsx)(a9.Z,{content:(0,F.jsx)("div",{className:"flex flex-col",children:r.slice(3).map(function(e){return(0,F.jsx)("span",{children:e.name},e.id)})}),children:(0,F.jsx)(oP.Z,{variant:"ghost",className:"px-3 py-1.5",children:(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50 flex h-full items-center",children:["+ ",i," more"]})})})]}),(0,F.jsxs)("p",{className:"inter-base-regular text-grey-50",children:["Available in"," ",(0,F.jsx)("span",{className:"inter-base-semibold text-grey-90",children:r.length?r.length:0})," ","out of"," ",(0,F.jsx)("span",{className:"inter-base-semibold text-grey-90",children:n||0})," ","Sales Channels"]})]})},wG=function(e){var t=e.channel;return(0,F.jsx)(oP.Z,{variant:"ghost",className:"px-3 py-1.5",children:(0,F.jsx)("div",{className:"flex items-center",children:(0,F.jsx)("span",{className:"inter-small-regular text-grey-90",children:t.name})})})},wV=B.createContext(null),wB=function(){var e=(0,B.useContext)(wV);if(null===e)throw Error("useSalesChannelsModal must be used within a SalesChannelsModalProvider");return e};function wW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wQ(e){if(Array.isArray(e))return e}function wY(e){if(Array.isArray(e))return wW(e)}function w$(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function wK(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function wJ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wX(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w0(e,t){return wQ(e)||wK(e,t)||w2(e,t)||wJ()}function w1(e){return wY(e)||w$(e)||w2(e)||wX()}function w2(e,t){if(e){if("string"==typeof e)return wW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wW(e,t)}}var w3=15,w5=function(){var e=w0(Sr(),1)[0],t=w0((0,B.useState)(void 0),2),r=t[0],n=t[1],i=w0((0,B.useState)(0),2),o=i[0],a=i[1],l=(0,rk.N)(r,500),s=(0,en.useAdminSalesChannels)({q:l,limit:w3,offset:o}),c=s.sales_channels,u=s.count,d=s.isLoading,f=wB(),p=f.source,m=f.onClose,y=f.onSave,h=B.useMemo(function(){var e=p.map(function(e){return e.id})||[];return(null==c?void 0:c.filter(function(t){var r=t.id;return!e.includes(r)}))||[]},[c,p]),b=(0,pf.N6)(),v=b.pop,g=b.reset,x=(0,rN.useTable)({columns:e,data:h,manualPagination:!0,initialState:{pageIndex:Math.floor(o/w3),pageSize:w3},autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.id},pageCount:Math.ceil((u||0)/w3)},rN.usePagination,rN.useRowSelect),j=(0,B.useMemo)(function(){return 0===x.selectedFlatRows.length},[x.selectedFlatRows.length]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(So,{isLoading:d,count:u||0,limit:w3,offset:o,setOffset:a,setQuery:n,tableState:x})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:v,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){y(w1(p).concat(w1(x.selectedFlatRows.map(function(e){return e.original})))),v()},disabled:j,children:"Save and go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){y(w1(p).concat(w1(x.selectedFlatRows.map(function(e){return e.original})))),g(),m()},disabled:j,children:"Save and close"})]})})]})},w6=function(){return{title:"Add Sales Channels",onBack:(0,pf.N6)().pop,view:(0,F.jsx)(w5,{})}};function w4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){w4(e,t,r[t])})}return e}function w7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w9(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w7(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Se(e,t){if(null==e)return{};var r,n,i=St(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function St(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Sr=function(){return[(0,B.useMemo)(function(){return[{width:30,id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,F.jsx)("span",{className:"flex w-[30px] justify-center",children:(0,F.jsx)(rF,w8({},t()))})},Cell:function(e){var t=e.row;return(0,F.jsx)("span",{onClick:function(e){return e.stopPropagation()},className:"flex w-[30px] justify-center",children:(0,F.jsx)(rF,w8({},t.getToggleRowSelectedProps()))})}},{Header:"Title",accessor:"name"},{Header:"Description",accessor:"description"}]},[])]},Sn=function(e){var t=e.count,r=e.limit,n=e.offset,i=e.setOffset,o=e.setQuery,a=e.tableState,l=e.setSelectedRowIds,s=e.tableAction,c=e.isLoading,u=a.getTableProps,d=a.getTableBodyProps,f=a.headerGroups,p=a.rows,m=a.prepareRow,y=a.canPreviousPage,h=a.canNextPage,b=a.pageCount,v=a.nextPage,g=a.previousPage,x=a.state.pageIndex,j=Se(a.state,["pageIndex"]);return B.useEffect(function(){l&&l(Object.keys(j.selectedRowIds))},[Object.keys(j.selectedRowIds).length]),(0,F.jsx)(nC,{hasPagination:!0,pagingState:{count:t,offset:n,pageSize:n+p.length,title:"Sales Channels",currentPage:x+1,pageCount:b,nextPage:function(){h&&(i(n+r),v())},prevPage:function(){y&&(i(Math.max(n-r,0)),g())},hasNext:h,hasPrev:y},numberOfRows:r,isLoading:c,children:(0,F.jsxs)(nf,w9(w8({},u()),{enableSearch:!0,handleSearch:o,tableActions:s,children:[(0,F.jsx)(nf.Head,{children:null==f?void 0:f.map(function(e){return(0,F.jsx)(nf.HeadRow,w9(w8({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,w9(w8({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,w9(w8({},d()),{children:p.map(function(e){return m(e),(0,F.jsx)(nf.Row,w9(w8({color:"inherit"},e.getRowProps()),{children:e.cells.map(function(e){return(0,F.jsx)(nf.Cell,w9(w8({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))})},Si=function(e){var t=e.numberOfSelectedRows,r=e.onDeselect,n=e.onRemove,i=w6(),o=!!t,a=(0,pf.N6)().push;return(0,F.jsx)("div",{className:"space-x-xsmall flex h-[34px] overflow-hidden",children:(0,F.jsxs)("div",{className:(0,ec.Z)("transition-all duration-200",{"translate-y-[-42px]":!o,"translate-y-[0px]":o}),children:[(0,F.jsxs)("div",{className:"mb-2 flex h-[34px] items-center divide-x",children:[(0,F.jsxs)("span",{className:"inter-small-regular text-grey-50 mr-3",children:[t," selected"]}),(0,F.jsxs)("div",{className:"space-x-xsmall flex pl-3",children:[(0,F.jsx)(Y.Z,{onClick:r,size:"small",variant:"ghost",className:"border-grey-20 border",children:"Deselect"}),(0,F.jsx)(Y.Z,{onClick:n,size:"small",variant:"ghost",className:"border-grey-20 border text-rose-50",children:"Remove"})]})]}),(0,F.jsx)("div",{className:"flex h-[34px] justify-end",children:(0,F.jsxs)(Y.Z,{size:"small",variant:"ghost",className:"border-grey-20 border",onClick:function(){return a(i)},children:[(0,F.jsx)(sh.Z,{size:20})," Add Channels"]})})]})})};let So=Sn;function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Sl(e){if(Array.isArray(e))return e}function Ss(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Sc(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Su(e,t){return Sl(e)||Ss(e,t)||Sd(e,t)||Sc()}function Sd(e,t){if(e){if("string"==typeof e)return Sa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sa(e,t)}}var Sf=12,Sp=function(){var e=wB(),t=e.source,r=e.onSave,n=Su(Sr(),1)[0],i=Su((0,B.useState)(void 0),2),o=i[0],a=i[1],l=Su((0,B.useState)(0),2),s=l[0],c=l[1],u=Su((0,B.useState)([]),2),d=u[0],f=u[1],p=(0,rk.N)(o,500),m=B.useMemo(function(){return p?null==t?void 0:t.filter(function(e){var t=e.name,r=e.description;return t.toLowerCase().includes(p.toLowerCase())||(null==r?void 0:r.toLowerCase().includes(p.toLowerCase()))}):t},[t,p]),y=(0,rN.useTable)({columns:n,data:m,manualPagination:!0,initialState:{pageIndex:Math.floor(s/Sf),pageSize:Sf},autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.id},pageCount:Math.ceil(m.length/Sf)},rN.usePagination,rN.useRowSelect),h=function(){f([]),y.toggleAllRowsSelected(!1)};return(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(So,{count:t.length,tableAction:(0,F.jsx)(Si,{numberOfSelectedRows:d.length,onRemove:function(){r(t.filter(function(e){return!d.includes(e.id)})),h()},onDeselect:h}),setSelectedRowIds:f,limit:Sf,offset:s,setOffset:c,setQuery:a,tableState:y})})},Sm=function(e){var t=e.open,r=e.source,n=e.onClose,i=e.onSave,o=(0,pf.N6)();return(0,F.jsx)(wV.Provider,{value:{source:void 0===r?[]:r,onClose:n,onSave:i},children:(0,F.jsx)(pf.ZP,{open:t,handleClose:n,context:o,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Current Sales Channels"})}),(0,F.jsx)(Sp,{}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"button",onClick:n,children:"Close"})})})]})})})};function Sy(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Sh(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Sy(o,n,i,a,l,"next",e)}function l(e){Sy(o,n,i,a,l,"throw",e)}a(void 0)})}}function Sb(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Sv=function(e){var t,r=e.product,n=e.open,i=e.onClose,o=(0,td.Z)(),a=(0,en.useAdminUpdateProduct)(r.id).mutateAsync,l=(t=Sh(function(e){return Sb(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,a({sales_channels:e.map(function(e){return{id:e.id}})})];case 1:return t.sent(),o("Success","Successfully updated sales channels","success"),[3,3];case 2:return t.sent(),o("Error","Failed to update sales channels","error"),[3,3];case 3:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,F.jsx)(Sm,{onClose:i,open:n,source:r.sales_channels,onSave:l})},Sg=function(e){var t=e.form,r=e.isGiftCard,n=t.control,i=t.path;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"mb-2xsmall flex items-center justify-between",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Discountable"}),(0,F.jsx)(tR.Qr,{control:n,name:i("value"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:r,onCheckedChange:n})}})]}),(0,F.jsxs)("p",{className:"inter-base-regular text-grey-50",children:["When unchecked discounts will not be applied to this"," ",r?"gift card":"product","."]})]})};function Sx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Sx(e,t,r[t])})}return e}function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var SS=function(e){var t=e.form,r=e.requireHandle,n=void 0===r||r,i=e.isGiftCard,o=t.register,a=t.path,l=t.formState.errors;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"gap-x-large mb-small grid grid-cols-2",children:[(0,F.jsx)(ry.Z,Sw(Sj({label:"Title",placeholder:i?"Gift Card":"Winter Jacket",required:!0},o(a("title"),{required:"Title is required",minLength:{value:1,message:"Title must be at least 1 character"},pattern:s6.Z.whiteSpaceRule("Title")})),{errors:l})),(0,F.jsx)(ry.Z,Sw(Sj({label:"Subtitle",placeholder:"Warm and cozy..."},o(a("subtitle"),{pattern:s6.Z.whiteSpaceRule("Subtitle")})),{errors:l}))]}),(0,F.jsxs)("p",{className:"inter-base-regular text-grey-50 mb-large",children:["Give your ",i?"gift card":"product"," a short and clear title.",(0,F.jsx)("br",{}),"50-60 characters is the recommended length for search engines."]}),(0,F.jsxs)("div",{className:"gap-x-large mb-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,Sw(Sj({label:"Handle",tooltipContent:n?void 0:"The handle is the part of the URL that identifies the ".concat(i?"gift card":"product",". If not specified, it will be generated from the title."),placeholder:i?"gift-card":"winter-jacket",required:n},o(a("handle"),{required:n?"Handle is required":void 0,minLength:s6.Z.minOneCharRule("Handle"),pattern:s6.Z.whiteSpaceRule("Handle")})),{prefix:"/",errors:l})),(0,F.jsx)(ry.Z,Sw(Sj({label:"Material",placeholder:i?"Paper":"100% Cotton"},o(a("material"),{minLength:s6.Z.minOneCharRule("Material"),pattern:s6.Z.whiteSpaceRule("Material")})),{errors:l}))]}),(0,F.jsx)(vQ.Z,Sw(Sj({label:"Description",placeholder:i?"The gift card is...":"A warm and cozy jacket...",rows:3,className:"mb-small"},o(a("description"))),{errors:l})),(0,F.jsxs)("p",{className:"inter-base-regular text-grey-50",children:["Give your ",i?"gift card":"product"," a short and clear description.",(0,F.jsx)("br",{}),"120-160 characters is the recommended length for search engines."]})]})},SP=r(93007),SC=r(27332);function SN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Sk(e){if(Array.isArray(e))return e}function S_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SA(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function SD(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){S_(e,t,r[t])})}return e}function SZ(e,t){return Sk(e)||SA(e,t)||SI(e,t)||SD()}function SI(e,t){if(e){if("string"==typeof e)return SN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SN(e,t)}}var ST=function(e){return(0,F.jsx)("div",{className:"flex flex-col",children:e.list.map(function(e){return(0,F.jsx)("span",{children:e},e)})})};function SM(e){var t=e.placeholder,r=e.isOpen,n=e.selected,i=e.openPopup,o=e.resetSelected,a=e.options,l=e.disabled,s=Object.keys(n).length,c=(0,B.useMemo)(function(){var e=[],t=function(r){var i;n[r.value]&&e.push(r.label),null===(i=r.children)||void 0===i||i.forEach(t)};return a.forEach(t),e},[n,a]);return(0,F.jsxs)("div",{onClick:i,className:(0,ec.Z)("rounded-rounded border-grey-20 bg-grey-5 px-small focus-within:border-violet-60 focus-within:shadow-cta flex h-10 items-center justify-between border",{"opacity-50":l},{"pointer-events-none":l}),children:[(0,F.jsxs)("div",{className:"flex items-center gap-1",children:[!!s&&(0,F.jsx)(a9.Z,{side:"top",delayDuration:1500,content:(0,F.jsx)(ST,{list:c}),children:(0,F.jsxs)("span",{className:"rounded-rounded bg-grey-10 text-small flex h-[28px] items-center gap-2 border px-2 font-medium text-gray-500",children:[s,(0,F.jsx)(c2.Z,{className:"cursor-pointer",onClick:o,size:16})]})}),0===s?(0,F.jsx)("span",{className:"text-grey-50",children:t||"Choose categories"}):null]}),(0,F.jsx)(e4.Z,{size:16,style:{transition:".2s transform",transform:"rotate(".concat(r?180:0,"deg)")}})]})}var SR=function(e){var t=e.isSelected;return(0,F.jsx)("div",{className:(0,ec.Z)("rounded-base border-grey-30 text-grey-0 flex h-5 w-5 justify-center border",{"bg-violet-60":t}),children:(0,F.jsx)("span",{className:"self-center",children:t&&(0,F.jsx)(rT,{size:12})})})};function SL(e){var t,r=e.option,n=e.isSelected,i=e.onOptionClick,o=e.onOptionCheckboxClick,a=e.selectedSubcategoriesCount,l=!!(null===(t=r.children)||void 0===t?void 0:t.length);return(0,F.jsxs)("div",{onClick:function(e){e.stopPropagation(),l&&i(r)},className:(0,ec.Z)("flex h-[40px] items-center justify-between gap-2 px-3",{"hover:bg-grey-10 cursor-pointer":l}),children:[(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)("div",{className:"cursor-pointer",onClick:function(e){e.stopPropagation(),o(r)},children:(0,F.jsx)(SR,{isSelected:n})}),r.label]}),l&&(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[!!a&&(0,F.jsxs)("span",{className:"text-small text-gray-400",children:[a," selected"]}),(0,F.jsx)(pd,{size:16})]})]})}function Sz(e){var t=e.activeOption,r=e.onOptionClick,n=e.onOptionCheckboxClick,i=e.pop,o=e.selected,a=e.selectedSubcategoriesCount,l=!!t.value;return(0,F.jsxs)("div",{style:{top:8,overflow:"scroll",boxShadow:"0px 2px 16px rgba(0, 0, 0, 0.08)",maxHeight:null===t.value?228:242},className:"rounded-rounded relative z-50 w-[100%] border bg-white",children:[l&&(0,F.jsxs)("div",{onClick:function(e){e.stopPropagation(),i()},className:"border-grey-20 hover:bg-grey-10 mb-1 flex h-[50px] cursor-pointer items-center gap-2 border-b px-3",children:[(0,F.jsx)(SP.Z,{size:16}),(0,F.jsx)("span",{className:"font-medium",children:t.label})]}),t.children.map(function(e){return(0,F.jsx)(SL,{option:e,isSelected:o[e.value],onOptionClick:r,onOptionCheckboxClick:n,selectedSubcategoriesCount:a[e.value]},e.value)})]})}function Sq(e){var t=e.options,r=e.initiallySelected,n=e.onSelect,i=e.placeholder,o=SZ((0,s1.Z)(!1),3),a=o[0],l=o[1],s=o[2],c=B.useRef(null);(0,SC.Z)(s,c,!0);var u=SZ((0,B.useState)({value:null,label:null,children:t}),2),d=u[0],f=u[1],p=SZ((0,B.useState)(r||{}),2),m=p[0],y=p[1],h=function(e){var t=SE({},m);t[e.value]=!0,y(t)},b=function(e){var t=SE({},m);delete t[e.value],y(t)};(0,B.useEffect)(function(){a||f({value:null,label:null,children:t})},[a]),(0,B.useEffect)(function(){n(Object.keys(m))},[m]);var v=(0,B.useMemo)(function(){var e={},r=function(t){var n,i=(0,iM.sum)(null===(n=t.children)||void 0===n?void 0:n.map(r));return e[t.value]=i,m[t.value]?i+1:i};return t.forEach(r),e},[m,t]);return(0,F.jsxs)("div",{ref:c,className:" h-[40px]",children:[(0,F.jsx)(SM,{isOpen:a,openPopup:l,resetSelected:function(){y({}),s()},selected:m,options:t,placeholder:i,disabled:!(null==t?void 0:t.length)}),a&&!!(null==t?void 0:t.length)&&(0,F.jsx)(Sz,{pop:function(){var e,r=function(t){var n,i;(null===(n=t.children)||void 0===n?void 0:n.some(function(e){return e.value===d.value}))&&(e=t),null===(i=t.children)||void 0===i||i.forEach(r)};r({value:null,label:null,children:t}),e&&f(e)},selected:m,activeOption:d,onOptionClick:function(e){f(e)},onOptionCheckboxClick:function(e){m[e.value]?b(e):h(e)},selectedSubcategoriesCount:v})]})}function SF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function SH(e){if(Array.isArray(e))return e}function SU(e){if(Array.isArray(e))return SF(e)}function SG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SV(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function SB(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function SW(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SQ(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){SG(e,t,r[t])})}return e}function S$(e,t){if(null==e)return{};var r,n,i=SK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function SK(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function SJ(e,t){return SH(e)||SB(e,t)||S0(e,t)||SW()}function SX(e){return SU(e)||SV(e)||S0(e)||SQ()}function S0(e,t){if(e){if("string"==typeof e)return SF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SF(e,t)}}var S1=13,S2=9,S3=8,S5=37,S6=39,S4=function(e){var t,r=e.onChange,n=e.onValidate,i=e.values,o=void 0===i?[]:i,a=e.label,l=e.showLabel,s=(e.containerProps,e.className),c=e.required,u=e.placeholder,d=(e.withTooltip,e.tooltipContent),f=e.tooltip,p=e.invalidMessage,m=S$(e,["onChange","onValidate","values","label","showLabel","containerProps","className","required","placeholder","withTooltip","tooltipContent","tooltip","invalidMessage"]),y=SJ((0,B.useState)(!1),2),h=y[0],b=y[1],v=SJ((0,B.useState)(-1),2),g=v[0],x=v[1],j=(0,B.useRef)(null),O=function(e){var t=e;void 0!==n&&(t=n(e)),t?(r(SX(o).concat([t])),(null==j?void 0:j.current)&&(j.current.value="")):b(!0)},w=function(e){var t=SX(o);t.splice(e,1),r(t)};return(0,F.jsxs)("div",{className:s,children:[(void 0===l||l)&&(0,F.jsx)(u0.Z,{label:a||"Tags (comma separated)",required:c,tooltipContent:d,tooltip:f,className:"mb-2"}),(0,F.jsx)(a9.Z,{open:h,side:"top",content:(0,F.jsxs)("p",{className:"text-rose-50",children:[null==j?void 0:null===(t=j.current)||void 0===t?void 0:t.value," ",void 0===p?"is not a valid tag":p]}),children:(0,F.jsx)("div",{className:(0,ec.Z)("bg-grey-5 shadow-border focus-within:outline-violet-60/10 focus-within:shadow-focus-border rounded-rounded box-border flex h-auto min-h-[40px] items-center px-3 transition-colors focus-within:outline focus-within:outline-4",{"shadow-error-border focus-within:shadow-error-border focus-within:outline-rose-60/10":h}),children:(0,F.jsx)("div",{className:"h-full",children:(0,F.jsxs)("div",{className:"gap-xsmall h-28px box-border flex w-full flex-wrap py-1.5",children:[o.map(function(e,t){return(0,F.jsxs)("div",{className:(0,ec.Z)("bg-grey-20 rounded-rounded flex w-max items-center justify-center gap-x-1 whitespace-nowrap px-3 py-1",SG({},"!bg-grey-90",t===g)),children:[(0,F.jsx)("span",{className:(0,ec.Z)("text-grey-50 inter-small-semibold inline-block",SG({},"text-grey-20",t===g)),children:e}),(0,F.jsx)(c2.Z,{className:"text-grey-40 inline cursor-pointer",size:"16",onClick:function(){return w(t)}})]},t)}),(0,F.jsx)("input",SY({id:"tag-input",ref:j,onBlur:function(e){var t,r=null==j?void 0:null===(t=j.current)||void 0===t?void 0:t.value;x(-1),r&&O(r)},onKeyDown:function(e){if(h&&b(!1),null==j?void 0:j.current){var t=j.current,n=t.value,i=t.selectionStart;switch(e.keyCode){case S5:-1!==g?g>0&&x(g-1):i||(x(o.length-1),e.preventDefault());break;case S6:-1!==g&&(g<o.length-1?(x(g+1),e.preventDefault()):x(-1));break;case S1:e.preventDefault();break;case S2:n&&(O(n),e.preventDefault());break;case S3:if(j.current.selectionStart||-1!==g||(x(o.length-1),e.preventDefault()),-1!==g){var a=SX(o);a.splice(g,1),r(a),x(-1)}break;default:x(-1)}}},onChange:function(){if(null==j?void 0:j.current){var e=j.current.value;(null==e?void 0:e.endsWith(","))&&(j.current.value=e.slice(0,-1),O(e.slice(0,-1)))}},className:(0,ec.Z)("flex-1 bg-transparent focus:outline-none"),placeholder:(null==o?void 0:o.length)?"":u},m))]})})})})]})};function S8(e){var t,r=(null===(t=e.category_children)||void 0===t?void 0:t.map(S8))||[];return{value:e.id,label:e.name,children:r}}var S7=function(){var e=(0,o3.ye)().isFeatureEnabled,t=(0,en.useAdminProductTypes)(void 0,{staleTime:0,refetchOnWindowFocus:!0}).product_types,r=(0,en.useAdminCollections)().collections,n=(0,en.useAdminProductCategories)({parent_category_id:"null",include_descendants_tree:!0},{enabled:e(o3.TT.PRODUCT_CATEGORIES)}).product_categories,i=void 0===n?[]:n;return{productTypeOptions:(0,B.useMemo)(function(){return(null==t?void 0:t.map(function(e){return{value:e.id,label:e.value}}))||[]},[t]),collectionOptions:(0,B.useMemo)(function(){return(null==r?void 0:r.map(function(e){return{value:e.id,label:e.title}}))||[]},[r]),categoriesOptions:(0,B.useMemo)(function(){return null==i?void 0:i.map(S8)},[i])}},S9=function(e){var t=e.form,r=t.control,n=t.path,i=t.setValue,o=S7(),a=o.productTypeOptions,l=o.collectionOptions,s=o.categoriesOptions,c=void 0===s?[]:s,u=(0,o3.ye)().isFeatureEnabled,d=function(e){a.push({label:e,value:e}),i(n("type"),{label:e,value:e},{shouldDirty:!0})};return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"mb-large gap-x-large grid grid-cols-2",children:[(0,F.jsx)(tR.Qr,{name:n("type"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vW,{label:"Type",onChange:n,options:a,value:r||null,placeholder:"Choose a type",onCreateOption:d,isClearable:!0})}}),(0,F.jsx)(tR.Qr,{name:n("collection"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(lS,{label:"Collection",onChange:n,options:l,value:r,placeholder:"Choose a collection",isClearable:!0})}})]}),u(o3.TT.PRODUCT_CATEGORIES)?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(u0.Z,{label:"Categories",className:"mb-2"}),(0,F.jsx)(tR.Qr,{name:n("categories"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=(r||[]).reduce(function(e,t){return e[t]=!0,e},{});return(0,F.jsx)(Sq,{placeholder:(null==c?void 0:c.length)?"Choose categories":"No categories available",onSelect:n,options:c,initiallySelected:i})}})]}):null,(0,F.jsx)("div",{className:"mb-large"}),(0,F.jsx)(tR.Qr,{control:r,name:n("tags"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(S4,{onChange:n,values:r||[]})}})]})},Pe=function(e){var t=e.product,r=e.open,n=e.onClose,i=wh(t.id),o=i.onUpdate,a=i.updating,l=(0,tR.cI)({defaultValues:Pt(t)}),s=l.formState.isDirty,c=l.handleSubmit,u=l.reset;(0,B.useEffect)(function(){u(Pt(t))},[t,u]);var d=function(){u(Pt(t)),n()},f=c(function(e){var t,r;o({title:e.general.title,handle:e.general.handle,material:e.general.material,subtitle:e.general.subtitle,description:e.general.description,type:e.organize.type?{id:e.organize.type.value,value:e.organize.type.label}:null,collection_id:e.organize.collection?e.organize.collection.value:null,tags:e.organize.tags?e.organize.tags.map(function(e){return{value:e}}):null,categories:(null===(r=e.organize)||void 0===r?void 0:null===(t=r.categories)||void 0===t?void 0:t.length)?e.organize.categories.map(function(e){return{id:e}}):[],discountable:e.discountable.value,metadata:rd(e.metadata)},d)});return(0,F.jsx)(tp.Z,{open:r,handleClose:d,isLargeModal:!0,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:d,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold m-0",children:"Edit General Information"})}),(0,F.jsxs)("form",{onSubmit:f,children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(SS,{form:(0,tL.G)(l,"general"),isGiftCard:t.is_giftcard}),(0,F.jsxs)("div",{className:"my-xlarge",children:[(0,F.jsxs)("h2",{className:"inter-base-semibold mb-base",children:["Organize ",t.is_giftcard?"Gift Card":"Product"]}),(0,F.jsx)(S9,{form:(0,tL.G)(l,"organize")})]}),(0,F.jsx)(Sg,{form:(0,tL.G)(l,"discountable"),isGiftCard:t.is_giftcard}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(l,"metadata")})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",onClick:d,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",disabled:!s,loading:a,children:"Save"})]})})]})]})})},Pt=function(e){var t;return{general:{title:e.title,subtitle:e.subtitle,material:e.material,handle:e.handle,description:e.description||null},organize:{collection:e.collection?{label:e.collection.title,value:e.collection.id}:null,type:e.type?{label:e.type.value,value:e.type.id}:null,tags:e.tags?e.tags.map(function(e){return e.value}):null,categories:null===(t=e.categories)||void 0===t?void 0:t.map(function(e){return e.id})},discountable:{value:e.discountable},metadata:rf(e.metadata)}},Pr=function(e){var t=e.product,r=wh(t.id),n=r.onDelete,i=r.onStatusChange,o=(0,s1.Z)(),a=o.state,l=o.close,s=o.toggle,c=(0,s1.Z)(!1),u=c.state,d=c.close,f=c.toggle,p=(0,o3.ye)().isFeatureEnabled,m=[{label:"Edit General Information",onClick:s,icon:(0,F.jsx)(eC,{size:20})},{label:"Delete",onClick:n,variant:"danger",icon:(0,F.jsx)(eZ,{size:20})}];return p("sales_channels")&&m.splice(1,0,{label:"Edit Sales Channels",onClick:f,icon:(0,F.jsx)(wF,{size:20})}),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tM,{title:t.title,actions:m,forceDropdown:!0,status:(0,F.jsx)(vF,{isDraft:(null==t?void 0:t.status)==="draft",activeState:"Published",draftState:"Draft",onChange:function(){return i(t.status)}}),children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mt-2 whitespace-pre-wrap",children:t.description}),(0,F.jsx)(Po,{product:t}),(0,F.jsx)(Pi,{product:t}),(0,F.jsx)(Pa,{product:t})]}),(0,F.jsx)(Pe,{product:t,open:a,onClose:l}),(0,F.jsx)(wI,{featureFlag:"sales_channels",children:(0,F.jsx)(Sv,{product:t,open:u,onClose:d})})]})},Pn=function(e){var t=e.title,r=e.value;return(0,F.jsxs)("div",{className:"inter-base-regular text-grey-50 flex items-center justify-between",children:[(0,F.jsx)("p",{children:t}),(0,F.jsx)(function(){return Array.isArray(r)?r.length?(0,F.jsx)(wH,{list:r,delimit:2}):(0,F.jsx)("p",{children:"–"}):(0,F.jsx)("p",{children:r||"–"})},{})]})},Pi=function(e){var t,r,n=e.product,i=(0,o3.ye)().isFeatureEnabled;return(0,F.jsxs)("div",{className:"mt-8 flex flex-col gap-y-3",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Details"}),(0,F.jsx)(Pn,{title:"Subtitle",value:n.subtitle}),(0,F.jsx)(Pn,{title:"Handle",value:n.handle}),(0,F.jsx)(Pn,{title:"Type",value:null===(t=n.type)||void 0===t?void 0:t.value}),(0,F.jsx)(Pn,{title:"Collection",value:null===(r=n.collection)||void 0===r?void 0:r.title}),i(o3.TT.PRODUCT_CATEGORIES)&&(0,F.jsx)(Pn,{title:"Category",value:n.categories.map(function(e){return e.name})}),(0,F.jsx)(Pn,{title:"Discountable",value:n.discountable?"True":"False"}),(0,F.jsx)(Pn,{title:"Metadata",value:Object.entries(n.metadata||{}).length>0?"".concat(Object.entries(n.metadata||{}).length," ").concat(1===Object.keys(n.metadata||{}).length?"item":"items"):void 0})]})},Po=function(e){var t,r=e.product;return(null===(t=r.tags)||void 0===t?void 0:t.length)===0?null:(0,F.jsx)("ul",{className:"mt-4 flex flex-wrap items-center gap-1",children:r.tags.map(function(e){return(0,F.jsx)("li",{children:(0,F.jsx)("div",{className:"text-grey-50 bg-grey-10 inter-small-semibold rounded-rounded px-3 py-[6px]",children:e.value})},e.id)})})},Pa=function(e){var t=e.product;return(0,F.jsx)(wI,{featureFlag:"sales_channels",children:(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-xsmall",children:"Sales channels"}),(0,F.jsx)(wU,{channels:t.sales_channels})]})})};function Pl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ps(e){if(Array.isArray(e))return Pl(e)}function Pc(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Pu(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Pc(o,n,i,a,l,"next",e)}function l(e){Pc(o,n,i,a,l,"throw",e)}a(void 0)})}}function Pd(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Pf(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pp(e){return Ps(e)||Pd(e)||Pm(e)||Pf()}function Pm(e,t){if(e){if("string"==typeof e)return Pl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pl(e,t)}}function Py(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Ph=function(e){var t=[],r=[];return e.forEach(function(e){e.nativeFile?t.push(e):r.push(e)}),{uploadImages:t,existingImages:r}},Pb=function(){var e=Pu(function(e){var t,r,n,i,o;return Py(this,function(a){switch(a.label){case 0:if(r=(t=Ph(e)).uploadImages,n=t.existingImages,i=[],!(r.length>0))return[3,2];return o=r.map(function(e){return e.nativeFile}),[4,n8.uploads.create(o).then(function(e){return e.data.uploads})];case 1:i=a.sent(),a.label=2;case 2:return[2,Pp(n).concat(Pp(i))]}})});return function(t){return e.apply(this,arguments)}}();function Pv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Pg(e){if(Array.isArray(e))return e}function Px(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Pj(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function PO(e,t){return Pg(e)||Px(e,t)||Pw(e,t)||Pj()}function Pw(e,t){if(e){if("string"==typeof e)return Pv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pv(e,t)}}var PS=(0,F.jsxs)("span",{children:["Drop your images here, or"," ",(0,F.jsx)("span",{className:"text-violet-60",children:"click to browse"})]}),PP=function(e){var t=e.onFileChosen,r=e.filetypes,n=e.errorMessage,i=e.className,o=e.text,a=e.placeholder,l=e.multiple,s=(0,B.useRef)(null),c=PO((0,B.useState)(!1),2),u=c[0],d=c[1];return(0,F.jsxs)("div",{onClick:function(){var e;return null==s?void 0:null===(e=s.current)||void 0===e?void 0:e.click()},onDrop:function(e){d(!1),e.preventDefault();var n=[];if(e.dataTransfer.items){for(var i=0;i<e.dataTransfer.items.length;i++)if("file"===e.dataTransfer.items[i].kind){var o=e.dataTransfer.items[i].getAsFile();o&&r.indexOf(o.type)>-1&&n.push(o)}}else for(var a=0;a<e.dataTransfer.files.length;a++)r.indexOf(e.dataTransfer.files[a].type)>-1&&n.push(e.dataTransfer.files[a]);1===n.length?t(n):d(!0)},onDragOver:function(e){return e.preventDefault()},className:(0,ec.Z)("inter-base-regular text-grey-50 rounded-rounded border-grey-20 hover:border-violet-60 hover:text-grey-40 flex h-full w-full cursor-pointer select-none flex-col items-center justify-center border-2 border-dashed transition-colors",i),children:[(0,F.jsxs)("div",{className:"flex flex-col items-center",children:[(0,F.jsx)("p",{children:void 0===o?PS:o}),void 0===a?"":a]}),u&&(0,F.jsx)("span",{className:"text-rose-60",children:n||"Please upload an image file"}),(0,F.jsx)("input",{ref:s,accept:r.join(", "),multiple:void 0!==l&&l,type:"file",onChange:function(e){var r=e.target.files;r&&t(Array.from(r))},className:"hidden"})]})},PC=r(76826),PN=function(e){var t=e.form,r=t.control,n=t.path,i=t.setValue,o=(0,tR.Dq)({control:r,name:n("images")}),a=o.fields,l=o.append,s=o.remove,c=(0,tR.qo)({control:r,name:n("images"),defaultValue:[]}),u=(0,B.useMemo)(function(){var e=[];return c.forEach(function(t,r){t.selected&&e.push(r)}),e},[c]);return(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{children:(0,F.jsx)("div",{children:(0,F.jsx)(PP,{onFileChosen:function(e){e.length&&l(e.map(function(e){return{url:URL.createObjectURL(e),name:e.name,size:e.size,nativeFile:e,selected:!1}}))},placeholder:"1200 x 1600 (3:4) recommended, up to 10MB each",multiple:!0,filetypes:["image/gif","image/jpeg","image/png","image/webp"],className:"py-large"})})}),a.length>0&&(0,F.jsxs)("div",{className:"mt-large",children:[(0,F.jsxs)("div",{className:"mb-small flex items-center justify-between",children:[(0,F.jsx)("h2",{className:"inter-large-semibold",children:"Uploads"}),(0,F.jsx)(P_,{number:u.length,onDeselect:function(){u.forEach(function(e){i(n("images.".concat(e,".selected")),!1)})},onRemove:function(){s(u)}})]}),(0,F.jsx)("div",{className:"gap-y-2xsmall flex flex-col",children:a.map(function(e,r){return(0,F.jsx)(Pk,{image:e,index:r,remove:s,form:t},e.id)})})]})]})},Pk=function(e){var t=e.image,r=e.index,n=e.form,i=e.remove,o=n.control,a=n.path,l=[{label:"Delete",onClick:function(){return i(r)},icon:(0,F.jsx)(eZ,{size:20}),variant:"danger"}];return(0,F.jsx)(tR.Qr,{name:a("images.".concat(r,".selected")),control:o,render:function(e){var r=e.field,n=r.value,i=r.onChange;return(0,F.jsxs)("div",{className:"relative",children:[(0,F.jsxs)("button",{className:(0,ec.Z)("px-base py-xsmall hover:bg-grey-5 rounded-rounded group flex items-center justify-between",{"bg-grey-5":n}),type:"button",onClick:function(){return i(!n)},children:[(0,F.jsxs)("div",{className:"gap-x-large flex items-center",children:[(0,F.jsx)("div",{className:"flex h-16 w-16 items-center justify-center",children:(0,F.jsx)("img",{src:t.url,alt:t.name||"Uploaded image",className:"rounded-rounded max-h-[64px] max-w-[64px]"})}),(0,F.jsxs)("div",{className:"inter-small-regular flex flex-col text-left",children:[(0,F.jsx)("p",{children:t.name}),(0,F.jsx)("p",{className:"text-grey-50",children:t.size?"".concat((t.size/1024).toFixed(2)," KB"):""})]})]}),(0,F.jsx)("div",{className:"gap-x-base flex items-center",children:(0,F.jsx)("span",{className:(0,ec.Z)("hidden",{"!text-violet-60 !block":n}),children:(0,F.jsx)(PC.Z,{size:24})})})]}),(0,F.jsx)("div",{className:"right-base absolute top-0 bottom-0 flex items-center",children:(0,F.jsx)(eQ,{actions:l,forceDropdown:!0})})]})}})},P_=function(e){var t=e.number,r=e.onRemove,n=e.onDeselect;return(0,F.jsx)("div",{className:"flex h-10 items-center overflow-y-hidden pr-1",children:(0,F.jsxs)("div",{className:(0,ec.Z)("gap-x-small flex items-center transition-all duration-200",{"translate-y-[-42px]":!t,"translate-y-[0px]":t}),children:[(0,F.jsxs)("span",{children:[t," selected"]}),(0,F.jsx)("div",{className:"bg-grey-20 h-5 w-px"}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:n,children:"Deselect"}),(0,F.jsx)(Y.Z,{variant:"danger",size:"small",type:"button",onClick:r,children:"Delete"})]})]})})};function PA(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function PD(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){PA(o,n,i,a,l,"next",e)}function l(e){PA(o,n,i,a,l,"throw",e)}a(void 0)})}}function PE(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var PZ=function(e){var t,r=e.product,n=e.open,i=e.onClose,o=wh(r.id),a=o.onUpdate,l=o.updating,s=(0,tR.cI)({defaultValues:PI(r)}),c=s.formState.isDirty,u=s.handleSubmit,d=s.reset,f=(0,td.Z)();(0,B.useEffect)(function(){d(PI(r))},[r,d]);var p=function(){d(PI(r)),i()},m=u((t=PD(function(e){var t,r,n;return PE(this,function(i){switch(i.label){case 0:t=[],i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Pb(e.media.images)];case 2:return t=i.sent(),[3,4];case 3:return r=i.sent(),n="Something went wrong while trying to upload images.",500===r.response.status&&(n+=" You might not have a file service configured. Please contact your administrator"),f("Error",n,"error"),[2];case 4:return a({images:t.map(function(e){return e.url})},p),[2]}})}),function(e){return t.apply(this,arguments)}));return(0,F.jsx)(tp.Z,{open:n,handleClose:p,isLargeModal:!0,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:p,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold m-0",children:"Edit Media"})}),(0,F.jsxs)("form",{onSubmit:m,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-large-semibold mb-2xsmall",children:"Media"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Add images to your product."}),(0,F.jsx)("div",{children:(0,F.jsx)(PN,{form:(0,tL.G)(s,"media")})})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",onClick:p,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",disabled:!c,loading:l,children:"Save and close"})]})})]})]})})},PI=function(e){var t;return{media:{images:(null===(t=e.images)||void 0===t?void 0:t.map(function(e){return{url:e.url,selected:!1}}))||[]}}},PT=function(e){var t=e.product,r=(0,s1.Z)(),n=r.state,i=r.close,o=r.toggle;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tM,{title:"Media",actions:[{label:"Edit Media",onClick:o}],children:t.images&&t.images.length>0&&(0,F.jsx)("div",{className:"gap-xsmall mt-base grid grid-cols-3",children:t.images.map(function(e,t){return(0,F.jsx)("div",{className:"flex aspect-square items-center justify-center",children:(0,F.jsx)("img",{src:e.url,alt:"Image ".concat(t+1),className:"rounded-rounded max-h-full max-w-full object-contain"})},e.id)})})}),(0,F.jsx)(PZ,{product:t,open:n,onClose:i})]})},PM=function(e){var t=e.product;return(0,F.jsx)(tM,{title:t.is_giftcard?"Raw Gift Card":"Raw Product",children:(0,F.jsx)("div",{className:"pt-base",children:(0,F.jsx)(tu,{data:t})})})};function PR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function PL(e){if(Array.isArray(e))return e}function Pz(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Pq(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function PF(e,t){return PL(e)||Pz(e,t)||PH(e,t)||Pq()}function PH(e,t){if(e){if("string"==typeof e)return PR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PR(e,t)}}var PU=(0,B.forwardRef)(function(e,t){var r=e.onDelete,n=e.deleting,i=void 0!==n&&n,o=e.children,a=e.className,l=PF((0,B.useState)(!1),2),s=l[0],c=l[1],u=(0,B.useRef)(null);(0,B.useImperativeHandle)(t,function(){return u.current});var d=(0,B.useCallback)(function(e){u.current&&!u.current.contains(e.target)&&s&&c(!1)},[s]);return(0,B.useEffect)(function(){return document.addEventListener("mousedown",d),function(){document.removeEventListener("mousedown",d)}},[d]),(0,F.jsxs)("button",{className:(0,ec.Z)("flex items-center justify-center rounded-lg border transition-all",{"border-rose-50 bg-rose-50 px-3 py-1.5":s,"border-gray-20 bg-transparent p-1.5":!s},{"!bg-grey-40 !border-grey-40 !p-1.5":i},a),disabled:i,onClick:function(){if(!s){c(!0);return}r(),c(!1)},ref:u,children:[(0,F.jsx)("div",{className:(0,ec.Z)("inter-small-semibold text-rose-50",{hidden:s||i}),children:o||(0,F.jsx)(eZ,{className:"text-grey-50",size:20})}),(0,F.jsx)("span",{className:(0,ec.Z)("inter-small-semibold text-white",{hidden:!s||i}),children:(0,F.jsx)(a9.Z,{content:"Are you sure?",side:"top",sideOffset:16,open:s,children:"Confirm"})}),(0,F.jsx)("span",{className:(0,ec.Z)("flex items-center justify-center",{hidden:!i}),children:(0,F.jsx)(ei.Z,{size:"medium"})})]})}),PG=function(e){var t=e.form,r=t.control,n=t.path,i=(0,tR.Dq)({control:r,name:n("images")}),o=i.fields,a=i.remove,l=i.replace,s=i.append;return(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{children:(0,F.jsx)("div",{className:"mt-large",children:(0,F.jsx)(PP,{onFileChosen:function(e){var t=e.map(function(e){return{url:URL.createObjectURL(e),name:e.name,size:e.size,nativeFile:e,selected:!1}});e.length?l(t):s(t)},placeholder:"1200 x 1600 (3:4) recommended, up to 10MB each",filetypes:["image/gif","image/jpeg","image/png","image/webp"],className:"py-large"})})}),o.length>0&&(0,F.jsxs)("div",{className:"mt-large",children:[(0,F.jsx)("h2",{className:"inter-large-semibold mb-small",children:"Upload"}),(0,F.jsx)("div",{className:"gap-y-2xsmall flex flex-col",children:o.map(function(e,t){return(0,F.jsx)(PV,{image:e,index:t,remove:a},e.id)})})]})]})},PV=function(e){var t=e.image,r=e.index,n=e.remove,i=[{label:"Delete",onClick:function(){return n(r)},icon:(0,F.jsx)(eZ,{size:20}),variant:"danger"}];return(0,F.jsxs)("div",{className:"px-base py-xsmall hover:bg-grey-5 rounded-rounded group flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-large flex items-center",children:[(0,F.jsx)("div",{className:"flex h-16 w-16 items-center justify-center",children:(0,F.jsx)("img",{src:t.url,alt:t.name||"Uploaded image",className:"rounded-rounded max-h-[64px] max-w-[64px]"})}),(0,F.jsxs)("div",{className:"inter-small-regular flex flex-col text-left",children:[(0,F.jsx)("p",{children:t.name}),(0,F.jsx)("p",{className:"text-grey-50",children:t.size?"".concat((t.size/1024).toFixed(2)," KB"):""})]})]}),(0,F.jsx)(eQ,{actions:i,forceDropdown:!0})]})};function PB(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function PW(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){PB(o,n,i,a,l,"next",e)}function l(e){PB(o,n,i,a,l,"throw",e)}a(void 0)})}}function PQ(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var PY=function(e){var t,r=e.product,n=e.open,i=e.onClose,o=wh(r.id),a=o.onUpdate,l=o.updating,s=(0,tR.cI)({defaultValues:P$(r)}),c=s.formState.isDirty,u=s.handleSubmit,d=s.reset,f=(0,td.Z)();(0,B.useEffect)(function(){d(P$(r))},[r,d]);var p=function(){d(P$(r)),i()},m=u((t=PW(function(e){var t,r,n,i,o;return PQ(this,function(l){switch(l.label){case 0:n=[],l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Pb(e.thumbnail.images)];case 2:return n=l.sent(),[3,4];case 3:return i=l.sent(),o="Something went wrong while trying to upload the thumbnail.",500===i.response.status&&(o+=" You might not have a file service configured. Please contact your administrator"),f("Error",o,"error"),[2];case 4:return a({thumbnail:(null===(r=n)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.url)||null},p),[2]}})}),function(e){return t.apply(this,arguments)}));return(0,F.jsx)(tp.Z,{open:n,handleClose:p,isLargeModal:!0,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:p,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold m-0",children:"Upload Thumbnail"})}),(0,F.jsxs)("form",{onSubmit:m,children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)("h2",{className:"inter-large-semibold mb-2xsmall",children:"Thumbnail"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Used to represent your product during checkout, social sharing and more."}),(0,F.jsx)(PG,{form:(0,tL.G)(s,"thumbnail")})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end gap-x-2",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",onClick:p,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",disabled:!c,loading:l,children:"Save and close"})]})})]})]})})},P$=function(e){return{thumbnail:{images:e.thumbnail?[{url:e.thumbnail}]:[]}}},PK=function(e){var t=e.product,r=wh(t.id),n=r.onUpdate,i=r.updating,o=(0,s1.Z)(),a=o.state,l=o.toggle,s=o.close,c=(0,td.Z)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tM,{title:"Thumbnail",customActions:(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:l,children:t.thumbnail?"Edit":"Upload"}),t.thumbnail&&(0,F.jsx)(PU,{onDelete:function(){n({thumbnail:null},{onSuccess:function(){c("Success","Successfully deleted thumbnail","success")},onError:function(e){c("Error",(0,tf.e)(e),"error")}})},deleting:i})]}),children:(0,F.jsx)("div",{className:(0,ec.Z)("gap-xsmall mt-base grid grid-cols-3",{hidden:!t.thumbnail}),children:t.thumbnail&&(0,F.jsx)("div",{className:"flex aspect-square items-center justify-center",children:(0,F.jsx)("img",{src:t.thumbnail,alt:"Thumbnail for ".concat(t.title),className:"rounded-rounded max-h-full max-w-full object-contain"})})})}),(0,F.jsx)(PY,{product:t,open:a,onClose:s})]})},PJ=function(){var e=(0,V.useNavigate)(),t=(0,en.useAdminProducts)({is_giftcard:!0},{keepPreviousData:!0}),r=t.products,n=t.error,i=null==r?void 0:r[0],o=(0,ig.e)().getWidgets;if(!i)return(0,F.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary",size:"large"})});if(n){var a=ix(n);if(a&&404===a.status)return e("/404"),null;throw n}return(0,F.jsxs)("div",{className:"pb-5xlarge",children:[(0,F.jsx)(eb,{path:"/a/gift-cards",label:"Back to Gift Cards",className:"mb-xsmall"}),(0,F.jsxs)("div",{className:"gap-x-base grid grid-cols-12",children:[(0,F.jsxs)("div",{className:"gap-y-xsmall col-span-8 flex flex-col",children:[o("gift_card.details.before").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,injectionZone:"gift_card.details.before",entity:i},t)}),(0,F.jsx)(Pr,{product:i}),(0,F.jsx)(ws,{giftCard:i}),(0,F.jsx)(wE,{product:i}),o("gift_card.details.after").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,injectionZone:"gift_card.details.after",entity:i},t)}),(0,F.jsx)(PM,{product:i})]}),(0,F.jsxs)("div",{className:"gap-y-xsmall col-span-4 flex flex-col",children:[(0,F.jsx)(PK,{product:i}),(0,F.jsx)(PT,{product:i})]})]})]})},PX=function(e){var t=e.title,r=e.subtitle;return(0,F.jsxs)("div",{className:"mb-xlarge",children:[(0,F.jsx)("h1",{className:"inter-2xlarge-semibold mb-xsmall",children:t}),(0,F.jsx)("h2",{className:"inter-base-regular text-grey-50",children:r})]})},P0=function(e){var t=e.title,r=e.thumbnail,n=e.actions,i=e.children;return(0,F.jsx)("div",{className:"rounded-rounded bg-grey-0 border-grey-20 p-base medium:p-xlarge w-full border",children:(0,F.jsxs)("div",{className:"gap-large flex items-start",children:[r&&(0,F.jsx)("div",{className:"rounded-base h-[72px] min-h-[72px] w-[72px] min-w-[72px] overflow-hidden",children:(0,F.jsx)("img",{src:r,alt:"Thumbnail",className:"h-full w-full object-cover"})}),(0,F.jsxs)("div",{className:"w-full",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between pb-2",children:[(0,F.jsx)("p",{className:"inter-large-semibold",children:t}),(0,F.jsx)(eQ,{actions:n})]}),i]})]})})},P1=function(e){var t=e.cta,r=e.children;return(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-small-regular text-grey-50 line-clamp-2 max-w-[460px]",children:r}),t&&(0,F.jsx)("button",{className:"text-violet-60 inter-small-semibold mt-base",onClick:t.onClick,children:t.label})]})},P2=function(e){var t=e.children;return(0,F.jsx)("div",{className:"mt-base",children:t})};P0.Description=P1,P0.Footer=P2;var P3=function(e){var t=e.tags,r=e.badgeVariant,n=(0,B.useRef)(null),i=Math.max(Math.floor(lF(n)/70)-1,1),o=t.slice(0,i),a=t.length-i;return(0,F.jsxs)("div",{className:"gap-x-2xsmall flex w-1/2 items-center",ref:n,children:[null==o?void 0:o.map(function(e,t){return(0,F.jsx)(oP.Z,{className:"mr-2xsmall",variant:r,children:e},t)}),a>0&&(0,F.jsxs)(oP.Z,{variant:"default",children:["+",a]})]})},P5=function(e){var t=e.title,r=e.status,n=e.thumbnail,i=e.description,o=e.variants,a=e.defaultCurrency,l=e.onEdit,s=e.onUnpublish,c=e.onDelete,u=[{label:"Edit",onClick:l,icon:(0,F.jsx)(eC,{size:16})},{label:"published"===r?"Unpublish":"Publish",onClick:s,icon:(0,F.jsx)(fj,{size:16})},{label:"Delete",onClick:c,icon:(0,F.jsx)(eZ,{size:16}),variant:"danger"}],d=(0,B.useMemo)(function(){return o.map(function(e){var t=e.prices.find(function(e){return e.currency_code===a});return t?"".concat((0,oy.Kt)(a,t.amount)," ").concat(a.toUpperCase()):""}).filter(Boolean)},[o,a]);return(0,F.jsxs)(P0,{title:t,thumbnail:n,actions:u,children:[(0,F.jsx)(P0.Description,{children:i}),(0,F.jsx)(P0.Footer,{children:(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)(P3,{tags:d,badgeVariant:"default"}),(0,F.jsx)(nN.Z,{variant:"published"===r?"success":"danger",title:"published"===r?"Published":"Unpublished"})]})})]})},P6=function(){return[(0,B.useMemo)(function(){return[{Header:(0,F.jsx)("div",{className:"pl-2",children:"Code"}),accessor:"code",Cell:function(e){var t=e.cell.value,r=e.index;return(0,F.jsx)(nf.Cell,{className:"text-grey-90 group-hover:text-violet-60 w-[20%] pl-2",children:t},r)}},{Header:"Order",accessor:"order",Cell:function(e){var t=e.cell.value,r=e.index;return(0,F.jsx)(nf.Cell,{className:"text-grey-90 group-hover:text-violet-60 w-[10%] pl-2",children:t&&(null==t?void 0:t.display_id)?"#".concat(t.display_id):(0,F.jsx)("span",{className:"text-grey-90",children:"-"})},r)}},{Header:"Original Amount",accessor:"value",Cell:function(e){var t=e.row,r=e.cell.value,n=e.index;return(0,F.jsx)(nf.Cell,{children:t.original.region?(0,oy.rX)({amount:r,currency:t.original.region.currency_code}):(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,F.jsx)("span",{children:"N / A"}),(0,F.jsx)(rm.Z,{content:"Region has been deleted"})]})},n)}},{Header:"Balance",accessor:"balance",Cell:function(e){var t=e.row,r=e.cell.value,n=e.index;return(0,F.jsx)(nf.Cell,{children:r?t.original.region?(0,oy.rX)({amount:r,currency:t.original.region.currency_code}):(0,F.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,F.jsx)("span",{children:"N / A"}),(0,F.jsx)(rm.Z,{content:"Region has been deleted"})]}):(0,F.jsx)(nN.Z,{title:"None",variant:"danger"})},n)}},{Header:function(){return(0,F.jsx)("div",{className:"rounded-rounded flex w-full justify-end pr-2",children:"Created"})},accessor:"created_at",Cell:function(e){var t=e.cell.value,r=e.index;return(0,F.jsx)(nf.Cell,{className:"pr-2",children:(0,F.jsx)("div",{className:"rounded-rounded flex w-full justify-end",children:iW()(t).format("MMM Do YYYY")})},r)}}]},[])]};function P4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function P8(e){if(Array.isArray(e))return e}function P7(e){if(Array.isArray(e))return P4(e)}function P9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ct(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Cr(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cn(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ci(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){P9(e,t,r[t])})}return e}function Co(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ca(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Co(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Cl(e,t){return P8(e)||Ct(e,t)||Cc(e,t)||Cr()}function Cs(e){return P7(e)||Ce(e)||Cc(e)||Cn()}function Cc(e,t){if(e){if("string"==typeof e)return P4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P4(e,t)}}var Cu=["status","fulfillment_status","payment_status","created_at","q","offset","limit"],Cd={incomplete:{fulfillment_status:["not_fulfilled","fulfilled"],payment_status:["awaiting"]},complete:{fulfillment_status:["shipped"],payment_status:["captured"]}},Cf=function(e){return null===e?e:Object.entries(e).reduce(function(e,t){var r=Cl(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=u_(i):e[n]=i,e},{})},Cp=function(e,t){switch(t.type){case"setFilters":var r;return Ca(Ci({},e),{fulfillment:t.payload.fulfillment,payment:t.payload.payment,status:t.payload.status,date:t.payload.date,query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return Ca(Ci({},e),{query:t.payload});case"setDate":var n=e.date;return Ca(Ci({},e),{date:n});case"setOffset":return Ca(Ci({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},Cm=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0},Cy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return Cv(e,t)},[e,t]),n=(0,B.useMemo)(function(){var e=localStorage.getItem("GiftCards::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=Cl(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=Cl((0,B.useReducer)(Cp,r),2),o=i[0],a=i[1],l=Cl((0,B.useState)(n),2),s=l[0],c=l[1],u=function(){var e=Ci({},o.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=Cl(i.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):"offset"===s||"limit"===s?e[s]=c:c.open&&("date"===s?e[Cb[s]]=Cf(c.filter):e[Cb[s]]=c.filter)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:o,r={},n=!0,i=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=Cl(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:d.open&&(r[Cb[u]]=d.filter)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},f=function(){var e=d();return iL().stringify(e,{skipNulls:!0})},p=(0,B.useMemo)(function(){return u()},[o]),m=(0,B.useMemo)(function(){return d()},[o]),y=(0,B.useMemo)(function(){return f()},[o]),h=(0,B.useMemo)(function(){var e=(0,iM.omit)(m,["limit","offset"]),t=iL().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(Cd)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=Cl(a.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,y=!1,h=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=Cl(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&Cm(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){y=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(y)throw h}}if(f)return u}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return null},[m,s]),b=(0,B.useMemo)(function(){return[{label:"Complete",value:"complete"},{label:"Incomplete",value:"incomplete"}].concat(Cs(s))},[s]);return Ca(Ci({},o),{filters:Ci({},o),removeTab:function(e){var t=localStorage.getItem("GiftCards::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("GiftCards::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(Ci({},t)),n=(0,iM.omit)(r,["limit","offset"]),i=iL().stringify(n,{skipNulls:!0}),o=localStorage.getItem("GiftCards::filters"),l=null;if(o&&(l=JSON.parse(o)),l)l[e]=i,localStorage.setItem("GiftCards::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("GiftCards::filters",JSON.stringify(s))}c(function(t){return Cs(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),a({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in Cd)t=Cd[e];else{var r=s.find(function(t){return t.value===e});r&&(t=iL().parse(r.representationString))}if(t){var n=Ca(Ci({},o),{date:{open:!1,filter:null},payment:{open:!1,filter:null},fulfillment:{open:!1,filter:null},status:{open:!1,filter:null}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=Cl(u.value,2),p=f[0],m=f[1];n[Ch[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}a({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:h,representationObject:m,representationString:y,queryObject:p,paginate:function(e){e>0?a({type:"setOffset",payload:o.offset+o.limit}):a({type:"setOffset",payload:Math.max(o.offset-o.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return iL().stringify(e,{skipNulls:!0})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},setDateFilter:function(e){a({type:"setDate",payload:e})},setFulfillmentFilter:function(e){a({type:"setFulfillment",payload:e})},setPaymentFilter:function(e){a({type:"setPayment",payload:e})},setStatusFilter:function(e){a({type:"setStatus",payload:e})},reset:function(){a({type:"setFilters",payload:Ca(Ci({},o),{offset:0,payment:{open:!1,filter:null},fulfillment:{open:!1,filter:null},status:{open:!1,filter:null},date:{open:!1,filter:null},query:null})})}})},Ch={status:"status",fulfillment_status:"fulfillment",payment_status:"payment",created_at:"date"},Cb={status:"status",fulfillment:"fulfillment_status",payment:"payment_status",date:"created_at"},Cv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={status:{open:!1,filter:null},fulfillment:{open:!1,filter:null},payment:{open:!1,filter:null},date:{open:!1,filter:null},offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=Cl(l.value,2),u=c[0],d=c[1];if(Cu.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d);break;case"status":("string"==typeof d||Array.isArray(d))&&(r.status={open:!0,filter:d});break;case"fulfillment_status":("string"==typeof d||Array.isArray(d))&&(r.fulfillment={open:!0,filter:d});break;case"payment_status":("string"==typeof d||Array.isArray(d))&&(r.payment={open:!0,filter:d});break;case"created_at":r.date={open:!0,filter:d}}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return r};function Cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Cx(e){if(Array.isArray(e))return e}function Cj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CO(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Cw(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Cj(e,t,r[t])})}return e}function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function CC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CP(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function CN(e,t){return Cx(e)||CO(e,t)||Ck(e,t)||Cw()}function Ck(e,t){if(e){if("string"==typeof e)return Cg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cg(e,t)}}var C_=15,CA={},CD=function(){var e=Cy((0,V.useLocation)().search,CA),t=e.reset,r=e.paginate,n=e.setQuery,i=e.queryObject,o=e.representationObject,a=parseInt(null==i?void 0:i.offset)||0,l=parseInt(i.limit)||C_,s=CN((0,B.useState)(null==i?void 0:i.query),2),c=s[0],u=s[1],d=CN((0,B.useState)(0),2),f=d[0],p=d[1],m=(0,en.useAdminGiftCards)(i,{keepPreviousData:!0}),y=m.gift_cards,h=m.isLoading,b=m.count;(0,B.useEffect)(function(){p(Math.ceil(b/i.limit))},[y]);var v=CN(P6(),1)[0],g=(0,rN.useTable)({columns:v,data:y||[],manualPagination:!0,initialState:{pageSize:l,pageIndex:a/l},pageCount:f,autoResetPage:!1},rN.usePagination),x=g.getTableProps,j=g.getTableBodyProps,O=g.headerGroups,w=g.rows,S=g.prepareRow,P=g.canPreviousPage,C=g.canNextPage,N=g.pageCount,k=g.gotoPage,_=g.nextPage,A=g.previousPage,D=g.state.pageIndex;(0,B.useEffect)(function(){var e=setTimeout(function(){c?(n(c),k(0)):t()},400);return function(){return clearTimeout(e)}},[c]);var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=iL().stringify(e);window.history.replaceState("/a/gift-cards","","".concat("?".concat(t)))},Z=function(){(0,iM.isEmpty)(o)?E({offset:0,limit:C_}):E(o)};return(0,B.useEffect)(function(){Z()},[o]),(0,F.jsx)(nC,{isLoading:h,hasPagination:!0,numberOfRows:i.limit,pagingState:{count:b,offset:i.offset,pageSize:i.offset+w.length,title:"Gift cards",currentPage:D+1,pageCount:N,nextPage:function(){C&&(r(1),_())},prevPage:function(){P&&(r(-1),A())},hasNext:C,hasPrev:P},children:(0,F.jsxs)(nf,CC(CS({filteringOptions:null,enableSearch:!0,handleSearch:u,searchValue:c},x()),{className:(0,ec.Z)(Cj({},"relative",h)),children:[(0,F.jsx)(nf.Head,{children:null==O?void 0:O.map(function(e){return(0,F.jsx)(nf.HeadRow,CC(CS({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,CC(CS({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),h||!y?(0,F.jsx)(nf.Body,CC(CS({},j()),{children:(0,F.jsx)(nf.Row,{children:(0,F.jsx)(nf.Cell,{colSpan:v.length,children:(0,F.jsx)("div",{className:"absolute mt-10 flex h-full w-full items-center justify-center",children:(0,F.jsx)("div",{className:"",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})})})})})})):(0,F.jsx)(nf.Body,CC(CS({},j()),{children:w.map(function(e){return S(e),(0,F.jsx)(nf.Row,CC(CS({color:"inherit",linkTo:e.original.id},e.getRowProps()),{className:"group",children:e.cells.map(function(e,t){return e.render("Cell",{index:t})})}))})}))]}))})};function CE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){CE(e,t,r[t])})}return e}function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function CT(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CI(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}!function(e){e.DRAFT="draft",e.PROPOSED="proposed",e.PUBLISHED="published",e.REJECTED="rejected"}(x||(x={})),function(e){e.REGION="region",e.RATE="rate"}(j||(j={}));var CM=function(e){var t=e.form,r=t.register,n=t.path,i=t.formState.errors;return(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsx)(ry.Z,CT(CZ({label:"Email"},r(n("email"),{required:s6.Z.required("Email"),pattern:s6.Z.email("Email")})),{required:!0,errors:i})),(0,F.jsx)(vQ.Z,CZ({label:"Personal Message",placeholder:"Write a personal message here",rows:7},r(n("message"))))]})},CR=function(e){var t=e.onClose,r=e.open,n=(0,tR.cI)(),i=n.handleSubmit,o=n.reset,a=n.control,l=n.formState.isDirty,s=(0,tR.qo)({control:a,name:"region.region_id.currency_code",defaultValue:"usd"}),c=(0,td.Z)(),u=(0,en.useAdminCreateGiftCard)(),d=u.mutate,f=u.isLoading;(0,B.useEffect)(function(){r&&o()},[r,o]);var p=i(function(e){d({region_id:e.region.region_id.value,value:e.balance.amount,ends_at:e.ends_at.ends_at||void 0,metadata:{email:e.receiver.email,personal_message:e.receiver.message}},{onSuccess:function(){c("Created gift card","Custom gift card was created successfully","success"),t()},onError:function(e){c("Error",(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{open:r,handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"Custom Gift Card"})}),(0,F.jsxs)("form",{onSubmit:p,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Details"}),(0,F.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-2",children:[(0,F.jsx)(OS,{form:(0,tL.G)(n,"region")}),(0,F.jsx)(ON,{form:(0,tL.G)(n,"balance"),currencyCode:s})]})]}),(0,F.jsx)(Og,{form:(0,tL.G)(n,"ends_at")}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Receiver"}),(0,F.jsx)(CM,{form:(0,tL.G)(n,"receiver")})]})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",onClick:t,size:"small",type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",type:"submit",size:"small",disabled:f||!l,loading:f,children:"Create and send"})]})})]})]})})};function CL(e){var t,r,n;null===(n=document)||void 0===n||null===(r=n.getElementsByName(e))||void 0===r||null===(t=r[0])||void 0===t||t.focus()}function Cz(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Cq(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Cz(o,n,i,a,l,"next",e)}function l(e){Cz(o,n,i,a,l,"throw",e)}a(void 0)})}}function CF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){CF(e,t,r[t])})}return e}function CU(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var CG=function(e){var t,r=e.onClose,n=(0,en.useAdminStore)().store,i=(0,en.useAdminProducts)().refetch,o=(0,en.useAdminCreateProduct)(),a=o.mutate,l=o.isLoading,s=(0,V.useNavigate)(),c=(0,td.Z)(),u=(0,tR.cI)({shouldUnregister:!0}),d=u.register,f=u.setValue,p=u.handleSubmit,m=u.control,y=(0,tR.Dq)({control:m,name:"denominations"}),h=y.fields,b=y.append,v=y.remove,g=(0,tR.qo)({control:m,name:"thumbnail"}),j=(t=Cq(function(e){var t,r;return CU(this,function(o){switch(o.label){case 0:if(!e.title.trim())return c("Error","Please enter a name for the Gift Card","error"),CL("name"),[2];if(!(null===(t=e.denominations)||void 0===t?void 0:t.length))return c("Error","Please add at least one denomination","error"),CL("add-denomination"),[2];if(r=[],!g)return[3,2];return[4,n8.uploads.create([g.nativeFile]).then(function(e){return e.data.uploads.map(function(e){return e.url})})];case 1:r=o.sent(),o.label=2;case 2:return a({is_giftcard:!0,title:e.title,description:e.description,discountable:!1,options:[{title:"Denominations"}],variants:e.denominations.map(function(e,t){return{title:"".concat(t+1),inventory_quantity:0,manage_inventory:!1,prices:[{amount:e.amount,currency_code:null==n?void 0:n.default_currency_code}],options:[{value:"".concat(e.amount)}]}}),images:r.length?r:void 0,thumbnail:r.length?r[0]:void 0,status:x.PUBLISHED},{onSuccess:function(){c("Success","Successfully created Gift Card","success"),i(),s("/a/gift-cards/manage")},onError:function(e){c("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(e){return t.apply(this,arguments)});return(0,F.jsx)(tp.Z,{handleClose:r,children:(0,F.jsx)("form",{onSubmit:p(j,function(e){return console.log(e)}),children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:r,children:(0,F.jsx)("div",{children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Create Gift Card"})})}),(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)("div",{className:"mb-base",children:(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Gift Card Details"})}),(0,F.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,F.jsx)(ry.Z,CH({label:"Name",required:!0,placeholder:"The best Gift Card"},d("title",{required:!0}))),(0,F.jsx)(vQ.Z,CH({label:"Description",placeholder:"The best Gift Card of all time"},d("description")))]}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Thumbnail"}),(0,F.jsx)("div",{className:"mt-base h-[80px]",children:g?(0,F.jsxs)("div",{className:"flex items-center gap-x-6",children:[(0,F.jsx)("img",{src:g.url,alt:"",className:"rounded-base h-20 w-20 object-cover object-center"}),(0,F.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,F.jsx)("span",{className:"inter-small-regular",children:g.name}),(0,F.jsx)("div",{children:(0,F.jsx)("button",{className:"inter-small-semibold text-rose-50",type:"button",onClick:function(){return f("thumbnail",null)},children:"Delete"})})]})]}):(0,F.jsx)(PP,{filetypes:["image/gif","image/jpeg","image/png","image/webp"],onFileChosen:function(e){var t=e[0];f("thumbnail",{url:URL.createObjectURL(t),name:t.name,size:t.size,nativeFile:t})},placeholder:"1200 x 1600 (3:4) recommended, up to 10MB each"})})]}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsxs)("h3",{className:"inter-base-semibold mb-base",children:["Denominations",(0,F.jsx)("span",{className:"text-rose-50",children:"*"})]}),(0,F.jsx)("div",{className:"gap-y-xsmall flex flex-col",children:h.map(function(e,t){return(0,F.jsxs)("div",{className:"gap-x-base last:mb-large flex items-end",children:[(0,F.jsx)(jX.Root,{currentCurrency:null==n?void 0:n.default_currency_code,readOnly:!0,size:"medium",children:(0,F.jsx)(tR.Qr,{control:m,name:"denominations.".concat(t,".amount"),rules:{required:!0,shouldUnregister:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.ref;return(0,F.jsx)(jX.Amount,{label:"Amount",amount:r||void 0,onChange:n,ref:i})}})}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"large",className:"text-grey-40 h-10 w-10",type:"button",onClick:function(){return v(t)},children:(0,F.jsx)(eZ,{size:20})})]},e.id)})}),(0,F.jsxs)(Y.Z,{name:"add-denomination",variant:"ghost",size:"small",onClick:function(){return b({amount:void 0})},type:"button",children:[(0,F.jsx)(sh.Z,{size:20}),"Add Denomination"]})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{type:"submit",variant:"ghost",size:"small",className:"w-eventButton",onClick:r,children:"Cancel"}),(0,F.jsx)(Y.Z,{type:"submit",variant:"primary",size:"small",className:"w-eventButton",loading:l,disabled:l,children:"Create & Publish"})]})})]})})})};function CV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function CB(e){if(Array.isArray(e))return e}function CW(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function CQ(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){CW(o,n,i,a,l,"next",e)}function l(e){CW(o,n,i,a,l,"throw",e)}a(void 0)})}}function CY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C$(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function CK(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){CY(e,t,r[t])})}return e}function CX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C0(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CX(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function C1(e,t){return CB(e)||C$(e,t)||C2(e,t)||CK()}function C2(e,t){if(e){if("string"==typeof e)return CV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CV(e,t)}}function C3(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var C5=function(){var e=(0,en.useAdminProducts)({is_giftcard:!0}),t=e.products,r=e.isLoading,n=(0,en.useAdminStore)().store,i=C1((0,B.useState)(!1),2),o=i[0],a=i[1],l=null==t?void 0:t[0],s=(0,V.useNavigate)(),c=(0,td.Z)(),u=(0,en.useAdminUpdateProduct)(null==l?void 0:l.id),d=(0,en.useAdminDeleteProduct)(null==l?void 0:l.id),f=(0,s1.Z)(),p=f.state,m=f.close,y=f.open,h=(0,s1.Z)();h.state,h.close,h.open;var b=(0,s1.Z)(),v=b.state,g=b.close,j=b.open,O=function(){d.mutate(void 0,{onSuccess:function(){s("/a/gift-cards")}})},w=[{label:"Custom Gift Card",onClick:y,icon:(0,F.jsx)(sh.Z,{size:20})}],S=(0,B.useMemo)(function(){return l&&n?C0(CJ({},l),{defaultCurrency:n.default_currency_code}):null},[l,n]),P=(0,ig.e)().getWidgets;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)(PX,{title:"Gift Cards",subtitle:"Manage the Gift Cards of your Medusa store"}),r?(0,F.jsx)("div",{className:"rounded-rounded border-grey-20 flex h-44 w-full items-center justify-center border",children:(0,F.jsx)(ei.Z,{variant:"secondary",size:"large"})}):(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[P("gift_card.list.before").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,injectionZone:"gift_card.list.before",entity:null},t)}),S?(0,F.jsx)(P5,C0(CJ({},S),{onDelete:j,onEdit:function(){return s("/a/gift-cards/manage")},onUnpublish:function(){var e=x.PUBLISHED;(null==l?void 0:l.status)==="published"&&(e=x.DRAFT),u.mutate({status:e},{onSuccess:function(){return c("Success","Successfully updated Gift Card","success")},onError:function(e){return c("Error",(0,tf.e)(e),"error")}})}})):(0,F.jsx)(P0,{title:"Are you ready to sell your first Gift Card?",children:(0,F.jsx)(P0.Description,{cta:{label:"Create Gift Card",onClick:function(){return a(!0)}},children:"No Gift Card has been added yet."})}),(0,F.jsx)(tI,{title:"History",subtitle:"See the history of purchased Gift Cards",actionables:w,children:(0,F.jsx)(CD,{})}),P("gift_card.list.after").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,injectionZone:"gift_card.list.after",entity:null},t)})]})]}),(0,F.jsx)(CR,{onClose:m,open:p}),o&&(0,F.jsx)(CG,{onClose:function(){return a(!o)}}),v&&(0,F.jsx)(tx,{handleClose:g,onDelete:CQ(function(){return C3(this,function(e){return[2,O()]})}),successText:"Successfully deleted Gift Card",confirmText:"Yes, delete",heading:"Delete Gift Card"}),(0,F.jsx)(ev,{})]})},C6=function(){var e=(0,(0,W.V)().getNestedRoutes)("/gift-cards");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{path:"/",element:(0,F.jsx)(C5,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(OA,{})}),(0,F.jsx)(V.Route,{path:"/manage",element:(0,F.jsx)(PJ,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/gift-cards"})},t)})]})};function C4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C8(e){if(Array.isArray(e))return e}function C7(e){if(Array.isArray(e))return C4(e)}function C9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Nt(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Nr(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nn(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){C9(e,t,r[t])})}return e}function No(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Na(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):No(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Nl(e,t){return C8(e)||Nt(e,t)||Nc(e,t)||Nr()}function Ns(e){return C7(e)||Ne(e)||Nc(e)||Nn()}function Nc(e,t){if(e){if("string"==typeof e)return C4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(e,t)}}var Nu=["q","offset","limit","location_id"],Nd={},Nf=function(e){return null===e?e:Object.entries(e).reduce(function(e,t){var r=Nl(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=u_(i):e[n]=i,e},{})},Np=function(e,t){switch(t.type){case"setFilters":var r;return Na(Ni({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return Na(Ni({},e),{query:t.payload});case"setLimit":return Na(Ni({},e),{limit:t.payload});case"setOffset":return Na(Ni({},e),{offset:t.payload});case"setLocation":return Na(Ni({},e),{location:t.payload});case"reset":return t.payload;default:return e}},Nm=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0},Ny=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return Nv(e,t)},[e,t]),n=(0,B.useMemo)(function(){var e=localStorage.getItem("inventory::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=Nl(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=Nl((0,B.useReducer)(Np,r),2),o=i[0],a=i[1],l=Nl((0,B.useState)(n),2),s=l[0],c=l[1],u=function(){var e=Ni({},o.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=Nl(i.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):"offset"===s||"limit"===s?e[s]=c:c.open?"date"===s?e[Nb[s]]=Nf(c.filter):e[Nb[s]]=c.filter:"location"===s&&(e[Nb[s]]=c)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:o,r={},n=!0,i=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=Nl(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u||"location"===u?r[Nb[u]||u]=d:d.open&&(r[Nb[u]]=d.filter)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},f=function(){var e=d();return iL().stringify(e,{skipNulls:!0})},p=(0,B.useMemo)(function(){return u()},[o]),m=(0,B.useMemo)(function(){return d()},[o]),y=(0,B.useMemo)(function(){return f()},[o]),h=(0,B.useMemo)(function(){var e=(0,iM.omit)(m,["limit","offset"]),t=iL().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(Nd)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=Nl(a.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,y=!1,h=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=Nl(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&Nm(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){y=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(y)throw h}}if(f)return u}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return null},[m,s]),b=(0,B.useMemo)(function(){return Ns(s)},[s]);return Na(Ni({},o),{filters:Ni({},o),removeTab:function(e){var t=localStorage.getItem("products::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("products::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(Ni({},t)),n=(0,iM.omit)(r,["limit","offset"]),i=iL().stringify(n,{skipNulls:!0}),o=localStorage.getItem("inventory::filters"),l=null;if(o&&(l=JSON.parse(o)),l)l[e]=i,localStorage.setItem("inventory::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("inventory::filters",JSON.stringify(s))}c(function(t){var r=t.findIndex(function(t){var r;return(null===(r=t.label)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()});return -1!==r&&t.splice(r,1),Ns(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),a({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in Nd)t=Nd[e];else{var r=s.find(function(t){return t.value===e});r&&(t=iL().parse(r.representationString))}if(t){var n=Ni({},o),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=Nl(u.value,2),p=f[0],m=f[1];n[Nh[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}a({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:h,representationObject:m,representationString:y,queryObject:p,paginate:function(e){e>0?a({type:"setOffset",payload:o.offset+o.limit}):a({type:"setOffset",payload:Math.max(o.offset-o.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return iL().stringify(e,{skipNulls:!0})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},setLocationFilter:function(e){a({type:"setLocation",payload:e}),a({type:"setOffset",payload:0})},setLimit:function(e){a({type:"setLimit",payload:e})},reset:function(){a({type:"setFilters",payload:Na(Ni({},o),{offset:0,query:null})})}})},Nh={location_id:"location"},Nb={location:"location_id"},Nv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={location:null!==(l=null==t?void 0:t.location_id)&&void 0!==l?l:"",offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s,c=Object.entries(n)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=Nl(s.value,2),d=u[0],f=u[1];if(Nu.includes(d))switch(d){case"offset":"string"==typeof f&&(r.offset=parseInt(f));break;case"limit":"string"==typeof f&&(r.limit=parseInt(f));break;case"location_id":"string"==typeof f&&(r.location=f);break;case"q":"string"==typeof f&&(r.query=f)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}return r},Ng=function(e){var t=e.location_id;return[(0,B.useMemo)(function(){return[{Header:"Item",accessor:"title",Cell:function(e){var t,r,n,i,o=e.row.original;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:(null===(r=o.variants[0])||void 0===r?void 0:null===(t=r.product)||void 0===t?void 0:t.thumbnail)?(0,F.jsx)("img",{src:o.variants[0].product.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)(lY,{})}),(null===(i=o.variants[0])||void 0===i?void 0:null===(n=i.product)||void 0===n?void 0:n.title)||""]})}},{Header:"Variant",Cell:function(e){var t,r=e.row.original;return(0,F.jsx)("div",{children:(null==r?void 0:null===(t=r.variants[0])||void 0===t?void 0:t.title)||"-"})}},{Header:"SKU",accessor:"sku",Cell:function(e){return e.cell.value}},{Header:"Reserved",accessor:"reserved_quantity",Cell:function(e){var r=e.row.original,n=(0,V.useNavigate)();return(0,F.jsx)("div",{className:"flex grow",children:(0,F.jsx)(a9.Z,{content:(0,F.jsx)(Y.Z,{size:"small",className:"inter-small-regular w-full",variant:"ghost",onClick:function(){n("/a/inventory/reservations?inventory_item_id%5B0%5D=".concat(r.id).concat(t?"&location_id=".concat(t):""))},children:"Go to reservations"}),children:(0,F.jsx)("div",{children:r.location_levels.reduce(function(e,t){return e+t.reserved_quantity},0)})})})}},{Header:"In stock",accessor:"stocked_quantity",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"bg-green-20",children:t.location_levels.reduce(function(e,t){return e+t.stocked_quantity},0)})}}]},[t])]};function Nx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Nj(e){if(Array.isArray(e))return e}function NO(e){if(Array.isArray(e))return Nx(e)}function Nw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NS(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function NP(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function NC(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function NN(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nk(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Nw(e,t,r[t])})}return e}function N_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NA(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N_(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ND(e,t){if(null==e)return{};var r,n,i=NE(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function NE(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function NZ(e,t){return Nj(e)||NP(e,t)||NT(e,t)||NC()}function NI(e){return NO(e)||NS(e)||NT(e)||NN()}function NT(e,t){if(e){if("string"==typeof e)return Nx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nx(e,t)}}var NM=15,NR={},NL=function(e){var t=e.selectedLocation,r=e.onChange,n=(0,en.useAdminStockLocations)(),i=n.stock_locations,o=n.isLoading;(0,B.useEffect)(function(){!t&&!o&&(null==i?void 0:i.length)&&r(i[0].id)},[o,i,r,t]);var a=(0,B.useMemo)(function(){return!o&&i?i.find(function(e){return e.id===t}):null},[t,i,o]);return!o&&i&&a?(0,F.jsx)("div",{className:"h-[40px] w-[200px]",children:(0,F.jsx)(lS,{isMulti:!1,onChange:function(e){r(e.value)},options:i.map(function(e){return{label:e.name,value:e.id}}),value:{value:a.id,label:a.name}})}):null},Nz=function(){var e=(0,en.useAdminStore)().store,t=(0,V.useLocation)(),r=(0,en.useAdminStockLocations)(),n=r.stock_locations,i=r.isLoading,o=(0,B.useMemo)(function(){return e?NA(Nk({},NR),{location_id:e.default_location_id}):NR},[e]),a=Ny(t.search,o),l=a.reset,s=a.paginate,c=a.setLocationFilter,u=a.setQuery,d=a.queryObject,f=a.representationObject,p=parseInt(d.offset)||0,m=parseInt(d.limit),y=NZ((0,B.useState)(d.query),2),h=y[0],b=y[1],v=NZ((0,B.useState)(0),2),g=v[0],x=v[1],j=(0,en.useAdminInventoryItems)(Nk({},d),{enabled:!!e}),O=j.inventory_items,w=j.isLoading,S=j.count;(0,B.useEffect)(function(){x(Math.ceil(S/d.limit))},[O]);var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=iL().stringify(e);window.history.replaceState("/a/inventory","","".concat("?".concat(t)))},C=function(){(0,iM.isEmpty)(f)?P({offset:0,limit:NM}):P(f)};(0,B.useEffect)(function(){C()},[f]);var N=NZ(Ng({location_id:d.location_id}),1)[0],k=(0,rN.useTable)({columns:N,data:O||[],manualPagination:!0,initialState:{pageIndex:Math.floor(p/m),pageSize:m},pageCount:g,autoResetPage:!1},rN.usePagination),_=k.getTableProps,A=k.getTableBodyProps,D=k.headerGroups,E=k.rows,Z=k.prepareRow,I=k.gotoPage,T=k.canPreviousPage,M=k.canNextPage,R=k.pageCount,L=k.nextPage,z=k.previousPage,q=k.state.pageIndex;return(0,B.useEffect)(function(){var e=setTimeout(function(){h?(u(h),I(0)):void 0!==h&&l()},400);return function(){return clearTimeout(e)}},[h]),(0,F.jsxs)(nC,{hasPagination:!0,pagingState:{count:S||0,offset:p,pageSize:p+E.length,title:"Inventory Items",currentPage:q+1,pageCount:R,nextPage:function(){M&&(s(1),L())},prevPage:function(){T&&(s(-1),z())},hasNext:M,hasPrev:T},numberOfRows:m,isLoading:w,children:[(0,F.jsxs)(nf,NA(Nk({enableSearch:!0,searchClassName:"h-[40px]",handleSearch:b,searchValue:h,tableActions:(0,F.jsx)(NL,{selectedLocation:d.location_id||(null==e?void 0:e.default_location_id),onChange:function(e){c(e),I(0)}})},_()),{children:[(0,F.jsx)(nf.Head,{children:null==D?void 0:D.map(function(e){var t=e.getHeaderGroupProps(),r=t.key,n=ND(t,["key"]);return(0,F.jsx)(nf.HeadRow,NA(Nk({},n),{children:e.headers.map(function(e){var t=e.getHeaderProps(),r=t.key,n=ND(t,["key"]);return(0,F.jsx)(nf.HeadCell,NA(Nk({className:"min-w-[100px]"},n),{children:e.render("Header")}),r)})}),r)})}),(0,F.jsx)(nf.Body,NA(Nk({},A()),{children:E.map(function(e){Z(e);var t=e.getRowProps(),r=t.key,n=ND(t,["key"]);return(0,F.jsx)(Nq,Nk({row:e},n),r)})}))]})),!E.length&&!i&&!(null==n?void 0:n.length)&&(0,F.jsx)("div",{className:"text-grey-50 w-full py-8 text-center",children:"You don't have any stock locations. Add one to see inventory."})]})},Nq=function(e){var t,r,n,i,o=e.row,a=ND(e,["row"]),l=o.original,s=(0,V.useNavigate)(),c=(0,s1.Z)(),u=c.state,d=c.open,f=c.close;return(0,F.jsxs)(nf.Row,NA(Nk({color:"inherit",onClick:d,clickable:!0,forceDropdown:!0,actions:(n=null===(r=l.variants)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.product_id,i=[{label:"Adjust Availability",onClick:d}],n?[{label:"View Product",onClick:function(){return s("/a/products/".concat(n))}}].concat(NI(i)):i)},a),{children:[o.cells.map(function(e,t){var r=e.getCellProps(),n=r.key,i=ND(r,["key"]);return(0,B.createElement)(nf.Cell,NA(Nk({},i),{key:n}),e.render("Cell",{index:t}))}),u&&(0,F.jsx)(NF,{inventory:l,handleClose:f})]}))},NF=function(e){var t,r,n,i,o,a,l,s=e.inventory,c=e.handleClose,u=null===(r=s.variants)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.id,d=null===(n=s.location_levels)||void 0===n?void 0:n[0],f=(0,en.useAdminVariant)(u||""),p=f.variant,m=f.isLoading,y=(0,en.useAdminUpdateLocationLevel)(s.id),h=y.mutate,b=y.isLoading,v=(0,td.Z)(),g=NZ((0,B.useState)((null==d?void 0:d.stocked_quantity)||0),2),x=g[0],j=g[1],O=x===((null==d?void 0:d.stocked_quantity)||0)||!p||!d;return(0,F.jsxs)(tp.Z,{handleClose:c,children:[(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:c,children:(0,F.jsx)("h1",{className:"inter-large-semibold",children:"Adjust availability"})}),(0,F.jsx)(tp.Z.Content,{children:m?(0,F.jsx)(ei.Z,{}):(0,F.jsxs)("div",{className:"grid grid-cols-2",children:[(0,F.jsx)(u0.Z,{label:"Item"}),(0,F.jsx)(u0.Z,{label:"Quantity"}),(0,F.jsx)("div",{className:"flex flex-col",children:(0,F.jsxs)("span",{className:"pr-base",children:[(0,F.jsx)("div",{className:"float-left my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:(null==p?void 0:null===(i=p.product)||void 0===i?void 0:i.thumbnail)?(0,F.jsx)("img",{src:null==p?void 0:null===(o=p.product)||void 0===o?void 0:o.thumbnail,className:"rounded-rounded h-full object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsxs)("span",{className:"truncate",children:[null==p?void 0:null===(a=p.product)||void 0===a?void 0:a.title,(0,F.jsxs)("span",{className:"text-grey-50 truncate",children:["(",s.sku,")"]})]}),(0,F.jsx)("span",{className:"text-grey-50",children:null==p?void 0:null===(l=p.options)||void 0===l?void 0:l.map(function(e){return(0,F.jsx)("span",{children:e.value},e.id)})})]})]})}),(0,F.jsx)(ry.Z,{onChange:function(e){return j(e.target.valueAsNumber)},autoFocus:!0,type:"number",placeholder:"0",min:0,value:x})]})})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",className:"border",onClick:c,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",disabled:O,loading:b,onClick:function(){h({stockLocationId:d.location_id,stocked_quantity:x},{onSuccess:function(){v("Success","Inventory item updated successfully","success"),c()},onError:function(e){v("Error",(0,tf.e)(e),"error")}})},children:"Save and close"})]})})]})};function NH(e){var t=(0,V.useNavigate)();return(0,F.jsx)(s3,{setActiveView:function(e){"inventory"===e?t("/a/inventory"):t("/a/inventory/".concat(e))},views:["inventory","locations","reservations"],activeView:e.activeView})}var NU=function(){return(0,F.jsx)("div",{className:"flex h-full grow flex-col",children:(0,F.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,F.jsx)(tI,{customHeader:(0,F.jsx)(NH,{activeView:"inventory"}),className:"h-fit",children:(0,F.jsx)(Nz,{})}),(0,F.jsx)(ev,{})]})})};function NG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){NG(e,t,r[t])})}return e}function NB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NW(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):NB(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var NQ=function(e){var t=e.form,r=t.register,n=t.path,i=t.formState.errors;return(0,F.jsx)("div",{children:(0,F.jsx)("div",{className:"gap-x-large mb-small grid grid-cols-2",children:(0,F.jsx)(ry.Z,NW(NV({label:"Location name",placeholder:"Flagship store, warehouse",required:!0},r(n("name"),{required:"Name is required",pattern:s6.Z.whiteSpaceRule("Location name")})),{errors:i}))})})};function NY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function N$(e){if(Array.isArray(e))return e}function NK(e){if(Array.isArray(e))return NY(e)}function NJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NX(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function N0(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function N1(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N2(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){NJ(e,t,r[t])})}return e}function N5(e,t){return N$(e)||N0(e,t)||N4(e,t)||N1()}function N6(e){return NK(e)||NX(e)||N4(e)||N2()}function N4(e,t){if(e){if("string"==typeof e)return NY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NY(e,t)}}var N8=function(e){var t=e.form,r=t.register,n=t.path,i=t.formState.errors,o=t.control,a=(0,en.useAdminRegions)().regions,l=(0,tR.qo)({control:o,name:[n("company"),n("address_1"),n("address_2"),n("postal_code"),n("city"),n("country_code")]}).some(function(e){return!!e}),s=N5((0,B.useState)(!1),2),c=s[0],u=s[1];(0,B.useEffect)(function(){u(!!l)},[l]);var d=(0,B.useMemo)(function(){return a?a.reduce(function(e,t){return N6(e).concat(N6(t.countries))},[]).map(function(e){return{label:e.display_name,value:e.iso_2}}):[]},[a]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"Address"}),(0,F.jsxs)("div",{className:"gap-y-large gap-x-large grid grid-cols-1",children:[(0,F.jsx)("div",{className:"gap-x-large grid grid-cols-2",children:(0,F.jsx)(ry.Z,N3({label:"Company",placeholder:"Company",errors:i},r(n("company"),{pattern:s6.Z.whiteSpaceRule("Company")})))}),(0,F.jsxs)("div",{className:"gap-x-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,N3({label:"Address 1",placeholder:"Address 1",errors:i,required:c},r(n("address_1"),{pattern:s6.Z.whiteSpaceRule("Address 1"),required:c?"This field is required":void 0}))),(0,F.jsx)(ry.Z,N3({label:"Address 2",placeholder:"Address 2",errors:i},r(n("address_2"),{pattern:s6.Z.whiteSpaceRule("Address 2")})))]}),(0,F.jsxs)("div",{className:"gap-x-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,N3({label:"Postal code",placeholder:"Postal code",errors:i},r(n("postal_code"),{pattern:s6.Z.whiteSpaceRule("Postal code")}))),(0,F.jsx)(ry.Z,N3({label:"City",placeholder:"City",errors:i},r(n("city"),{pattern:s6.Z.whiteSpaceRule("City")})))]}),(0,F.jsx)("div",{className:"gap-x-large grid grid-cols-2 pb-0.5",children:(0,F.jsx)(tR.Qr,{control:o,name:n("country_code"),rules:{required:c?"This field is required":void 0},render:function(e){var t=e.field,r=t.value,o=t.onChange,a=r;return"string"==typeof a&&(a=d.find(function(e){return e.value===a})),(0,F.jsx)(lS,{label:"Country",required:c,value:a,options:d,onChange:o,name:n("country_code"),errors:i,isClearable:!c})}})})]})]})};function N7(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function N9(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){N7(o,n,i,a,l,"next",e)}function l(e){N7(o,n,i,a,l,"throw",e)}a(void 0)})}}function ke(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var kt=function(e){var t,r=e.onClose,n=e.location,i=(0,tR.cI)({defaultValues:{general:{name:n.name},address:n.address,metadata:rf(n.metadata)},reValidateMode:"onBlur",mode:"onBlur"}),o=(0,td.Z)(),a=(0,en.useAdminUpdateStockLocation)(n.id),l=a.mutate,s=a.isLoading,c=i.handleSubmit,u=i.formState.isDirty,d=c((t=N9(function(e){return ke(this,function(t){return l(kr(e),{onSuccess:function(){r(),o("Success","Location edited successfully","success")},onError:function(e){o("Error",(0,tf.e)(e),"error")}}),[2]})}),function(e){return t.apply(this,arguments)}));return(0,F.jsxs)(tp.Z,{handleClose:r,children:[(0,F.jsxs)(tp.Z.Body,{className:"top-20",children:[(0,F.jsx)(tp.Z.Header,{handleClose:r,children:(0,F.jsx)("h1",{className:"text-xl font-semibold",children:"Edit Location Details"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)("form",{className:"w-full",children:(0,F.jsxs)("div",{className:"mt-xlarge gap-y-xlarge flex flex-col",children:[(0,F.jsx)(NQ,{form:(0,tL.G)(i,"general")}),(0,F.jsx)(N8,{form:(0,tL.G)(i,"address")}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(i,"metadata")})]})]})})})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end space-x-2",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",onClick:r,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"button",disabled:!u||s,onClick:d,children:"Save and close"})]})})]})},kr=function(e){var t,r,n=e.general,i=e.address,o=e.metadata;return i.address_1&&(t={company:i.company,address_1:i.address_1,address_2:i.address_2,postal_code:i.postal_code,city:i.city,country_code:(null===(r=i.country_code)||void 0===r?void 0:r.value)||i.country_code}),{name:n.name,address:t,metadata:rd(o)}},kn=function(e){var t=e.salesChannels,r=e.showMax,n=void 0===r?3:r,i=t.length>n;return(0,F.jsxs)("div",{className:"flex items-center py-1",children:[(0,F.jsx)(oE,{className:"mr-4",children:(0,F.jsx)(wF,{})}),t.slice(0,n).map(function(e,t,r){return(0,F.jsxs)("span",{className:"inter-base-regular text-grey-90 ml-1 first-of-type:ml-0",children:[e.name,t<r.length-1&&", "]})}),i&&(0,F.jsx)(a9.Z,{content:(0,F.jsx)(F.Fragment,{children:t.slice(n).map(function(e){return(0,F.jsx)("div",{className:"inter-small-regular",children:e.name})})}),side:"top",children:(0,F.jsxs)("span",{className:"text-grey-50 ml-1",children:["+ ",t.length-n," more"]})})]})};function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ko(e){if(Array.isArray(e))return ki(e)}function ka(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function kl(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ka(o,n,i,a,l,"next",e)}function l(e){ka(o,n,i,a,l,"throw",e)}a(void 0)})}}function ks(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function kc(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ku(e){return ko(e)||ks(e)||kd(e)||kc()}function kd(e,t){if(e){if("string"==typeof e)return ki(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ki(e,t)}}function kf(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var kp=function(e){var t,r,n=e.location,i=(0,s1.Z)(),o=i.state,a=i.close,l=i.open,s=(0,en.useAdminAddLocationToSalesChannel)().mutateAsync,c=(0,en.useAdminRemoveLocationFromSalesChannel)().mutateAsync,u=(t=kl(function(e){var t,r,i,o,a;return kf(this,function(l){return o=null!==(i=null===(t=r=n.sales_channels)||void 0===t?void 0:t.filter(function(t){return!e.some(function(e){return t.id===e.id})}))&&void 0!==i?i:[],a=e.filter(function(e){return r&&!r.some(function(t){return t.id===e.id})}),Promise.all(ku(o.map(function(e){return c({sales_channel_id:e.id,location_id:n.id})})).concat(ku(a.map(function(e){return s({sales_channel_id:e.id,location_id:n.id})})))),[2]})}),function(e){return t.apply(this,arguments)});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:l,children:(null===(r=n.sales_channels)||void 0===r?void 0:r.length)?"Edit channels":"Add channels"}),(0,F.jsx)(Sm,{open:o,source:n.sales_channels,onClose:a,onSave:u})]})},km=function(e){var t,r=e.location;return(0,F.jsx)("div",{className:"py-base",children:(0,F.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(null===(t=r.sales_channels)||void 0===t?void 0:t.length)?(0,F.jsx)(kn,{salesChannels:r.sales_channels}):(0,F.jsx)("span",{className:"inter-base-regular text-grey-40",children:"Not connected to any sales channels yet"}),(0,F.jsx)(kp,{location:r})]})})};function ky(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function kh(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ky(o,n,i,a,l,"next",e)}function l(e){ky(o,n,i,a,l,"throw",e)}a(void 0)})}}function kb(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var kv=function(e){var t,r=e.location,n=(0,en.useAdminDeleteStockLocation)(r.id).mutate,i=o2(),o=(0,td.Z)(),a=(0,o3.ye)().isFeatureEnabled,l=(0,s1.Z)(),s=l.state,c=l.close,u=l.open,d=(t=kh(function(){return kb(this,function(e){switch(e.label){case 0:return[4,i({heading:"Delete Location",text:"Are you sure you want to delete this location. This will also delete all inventory levels and reservations associated with this location.",extraConfirmation:!0,entityName:r.name})];case 1:return e.sent()&&n(void 0,{onSuccess:function(){o("Success","Location deleted successfully","success")},onError:function(e){o("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)}),f=[{label:"Edit details",onClick:u,variant:"normal",icon:(0,F.jsx)(eC,{size:"20px"})},{label:"Delete",onClick:d,variant:"danger",icon:(0,F.jsx)(eZ,{size:"20px"})}];return(0,F.jsxs)("div",{className:"my-base rounded-rounded bg-grey-0 border-grey-20 border",children:[(0,F.jsxs)("div",{className:"py-base flex items-center px-6",children:[(0,F.jsx)(oE,{children:(0,F.jsx)(oZ.Z,{})}),(0,F.jsxs)("div",{className:"ml-base flex flex-col",children:[(0,F.jsx)("span",{className:"text-grey-90 font-semibold",children:r.name}),r.address&&(0,F.jsxs)("div",{children:[r.address.city&&(0,F.jsxs)("span",{children:[r.address.city,", "]}),(0,F.jsx)("span",{children:wg(r.address.country_code)})]})]}),(0,F.jsx)("div",{className:"ml-auto",children:(0,F.jsx)(eQ,{actions:f,forceDropdown:!0})})]}),a("sales_channels")&&(0,F.jsxs)("div",{className:"py-base border-grey-20 border-t border-solid px-6",children:[(0,F.jsx)("h2",{className:"inter-small-semibold text-gray-500",children:"Connected sales channels"}),(0,F.jsx)(km,{location:r})]}),s&&(0,F.jsx)(kt,{onClose:c,location:r})]})},kg=function(e){var t=e.location,r=e.form,n=(0,s1.Z)(),i=n.state,o=n.close,a=n.open,l=r.control,s=r.path,c=(0,tR.Dq)({control:l,name:s("channels"),keyName:"fieldId"}),u=c.fields,d=c.replace;return(0,F.jsxs)(F.Fragment,{children:[(null==t?void 0:t.sales_channels)||u.length?(0,F.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,F.jsx)(kn,{salesChannels:(null==t?void 0:t.sales_channels)||u,showMax:1}),(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:a,children:"Edit channels"})]}):(0,F.jsx)(Y.Z,{variant:"secondary",className:"w-full",size:"small",onClick:a,type:"button",children:"Add sales channels"}),(0,F.jsx)(Sm,{open:i,source:u,onClose:function(){o()},onSave:function(e){return d(e)}})]})};function kx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kj(e){if(Array.isArray(e))return e}function kO(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function kw(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){kO(o,n,i,a,l,"next",e)}function l(e){kO(o,n,i,a,l,"throw",e)}a(void 0)})}}function kS(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function kP(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kC(e,t){return kj(e)||kS(e,t)||kN(e,t)||kP()}function kN(e,t){if(e){if("string"==typeof e)return kx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kx(e,t)}}function kk(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var k_=function(e){var t,r=e.onClose,n=kC(B.useState("general"),2),i=n[0],o=n[1],a=(0,tR.cI)({defaultValues:{general:{name:""},address:void 0,salesChannels:{channels:[]}},reValidateMode:"onBlur",mode:"onBlur"}),l=a.handleSubmit,s=a.formState.isDirty,c=(0,s1.Z)(),u=c.state,d=c.open,f=c.close,p=(0,td.Z)(),m=(0,o3.ye)().isFeatureEnabled,y=(0,en.useAdminCreateStockLocation)().mutateAsync,h=(0,en.useAdminAddLocationToSalesChannel)().mutateAsync,b=(t=kw(function(e){var t,n,i,a,l,s;return kk(this,function(c){switch(c.label){case 0:if(!e.general.name||(t=[e.address.address_1,e.address.country_code]).some(Boolean)&&!t.every(Boolean))return o("general"),[2];i=(n=kA(e)).locationPayload,a=n.salesChannelsPayload,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,y(i)];case 2:return l=c.sent().stock_location,Promise.all(a.map(function(e){return h({sales_channel_id:e.id,location_id:l.id})})).then(function(){p("Success","Location added successfully","success")}).catch(function(){p("Error","Location was created successfully, but there was an error associating sales channels","error")}).finally(function(){r()}),[3,4];case 3:return s=c.sent(),p("Error",(0,tf.e)(s),"error"),[3,4];case 4:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,F.jsx)("form",{onSubmit:l(b),className:"w-full",children:(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",type:"button",onClick:function(){s?d():r()},children:(0,F.jsx)(c2.Z,{size:20})}),u&&(0,F.jsx)(tx,{heading:"Are you sure you want to cancel with unsaved changes",confirmText:"Yes, cancel",cancelText:"No, continue creating",successText:!1,handleClose:f,onDelete:kw(function(){return kk(this,function(e){return[2,r()]})})}),(0,F.jsx)("div",{className:"gap-x-small flex",children:(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",disabled:!s,children:"Add location"})})]})}),(0,F.jsx)(c3.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,F.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 my-16 max-w-[700px]",children:[(0,F.jsx)("h1",{className:"mb-base text-grey-90 text-xlarge px-1 font-semibold",children:"Add new location"}),(0,F.jsxs)(gj,{value:i,onValueChange:o,type:"single",children:[(0,F.jsxs)(gj.Item,{value:"general",title:"General Information",required:!0,children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Specify the details about this location"}),(0,F.jsxs)("div",{className:"mt-xlarge gap-y-xlarge flex flex-col pb-0.5",children:[(0,F.jsx)(NQ,{form:(0,tL.G)(a,"general")}),(0,F.jsx)(N8,{form:(0,tL.G)(a,"address")}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(a,"metadata")})]})]})]}),m("sales_channels")&&(0,F.jsxs)(gj.Item,{value:"sales_channels",title:"Sales Channels",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Specify which Sales Channels this location's items can be purchased through."}),(0,F.jsx)("div",{className:"mt-xlarge flex",children:(0,F.jsx)(kg,{location:null,form:(0,tL.G)(a,"salesChannels")})})]})]})]})})]})})},kA=function(e){var t,r=e.general,n=e.address,i=e.metadata;return n.address_1&&((t=n).country_code=n.country_code.value),{locationPayload:{name:r.name,address:t,metadata:rd(i)},salesChannelsPayload:e.salesChannels.channels}},kD=function(){var e=(0,s1.Z)(),t=e.state,r=e.close,n=e.open,i=(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",onClick:n,children:[(0,F.jsx)(sh.Z,{size:20}),"Add location"]}),o=(0,en.useAdminStockLocations)({expand:"address,sales_channels"}),a=o.stock_locations,l=o.isLoading;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"flex h-full grow flex-col",children:(0,F.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,F.jsx)(tI,{customHeader:(0,F.jsx)(NH,{activeView:"locations"}),className:"h-[85px] min-h-[85px]",customActionable:i}),l?(0,F.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}):(0,F.jsx)("div",{children:null==a?void 0:a.map(function(e){return(0,F.jsx)(kv,{location:e},e.id)})})]})}),(0,F.jsx)(cX,{isVisible:t,isFullScreen:!0,children:(0,F.jsx)(k_,{onClose:r})})]})},kE=r(20073),kZ=r(58398),kI=r(70381),kT=560;function kM(e){var t=e.isVisible,r=e.children,n=e.close;return(0,F.jsx)(kI.f,{children:(0,F.jsx)(kE.M,{children:t&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(kZ.E.div,{onClick:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut"},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99,background:"rgba(0,0,0,.3)"}}),(0,F.jsx)(kZ.E.div,{transition:{ease:"easeInOut"},initial:{right:-kT},style:{position:"fixed",height:"100%",width:kT,background:"white",right:0,top:0,zIndex:200},className:"overflow-hidden rounded border",animate:{right:0},exit:{right:-kT},children:r})]})})})}var kR=function(e){var t=e.src,r=e.className,n=e.size,i=void 0===n?"small":n;return(0,F.jsx)("div",{className:(0,ec.Z)("bg-grey-5 rounded-rounded flex items-center justify-center overflow-hidden",{"h-6 w-[18px]":"xsmall"===i,"h-10 w-[30px]":"small"===i,"h-12 w-9":"medium"===i,"h-[226px] w-[170px]":"large"===i},r),children:t?(0,F.jsx)("img",{src:t,className:"flex-1 object-cover object-center"}):(0,F.jsx)(lQ,{})})};function kL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){kL(e,t,r[t])})}return e}function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kq(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var kH=function(e){return e.quantity-(e.fulfilled_quantity||0)},kU=function(e){var t=e.items,r=e.quantities,n=e.setQuantities,i=e.locationId,o=e.setErrors,a=B.useCallback(function(e,t){var i=kz({},r);n(i=kF(kz({},i),kL({},t,e)))},[r,n]);return(0,F.jsx)("div",{children:t.map(function(e,t){return(0,F.jsx)(kG,{item:e,locationId:i,quantities:r,handleQuantityUpdate:a,setErrors:o},"fulfillmentLine-".concat(t))})})},kG=function(e){var t,r=e.item,n=e.locationId,i=e.quantities,o=e.handleQuantityUpdate,a=e.setErrors,l=(0,o3.ye)().isFeatureEnabled,s=l("inventoryService")&&l("stockLocationService"),c=(0,en.useAdminVariantsInventory)(r.variant_id,{enabled:s}),u=c.variant,d=c.isLoading,f=c.refetch,p=!!(null==u?void 0:u.inventory.length);B.useEffect(function(){s&&f()},[s,f]);var m=(0,B.useMemo)(function(){if(!s)return{availableQuantity:r.variant.inventory_quantity,inStockQuantity:r.variant.inventory_quantity};if(d||!n||!u)return{};var e,t,i=null===(t=u.inventory[0])||void 0===t?void 0:null===(e=t.location_levels)||void 0===e?void 0:e.find(function(e){return e.location_id===n});return i?{availableQuantity:i.available_quantity,inStockQuantity:i.stocked_quantity}:{}},[d,n,u,r.variant,s]),y=m.availableQuantity,h=m.inStockQuantity,b=!n||n&&(!y||i[r.id]<=y);return(B.useEffect(function(){a(function(e){return b?delete e[r.id]:e[r.id]="Quantity is not valid",e})},[b,a,r.id]),B.useEffect(function(){if(!y&&p)o(0,r.id);else{var e;o((e=Math).min.apply(e,[kH(r),p?y:Number.MAX_VALUE]),r.id)}},[y,r,r.id]),0>=kH(r))?null:(0,F.jsxs)("div",{className:(0,ec.Z)("rounded-rounded hover:bg-grey-5 mx-[-5px] mb-1 flex h-[64px] justify-between py-2 px-[5px]",{"pointer-events-none opacity-50":!y&&p||!n&&s}),children:[(0,F.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,F.jsx)("div",{className:"rounded-rounded flex h-[48px] w-[36px] overflow-hidden",children:r.thumbnail?(0,F.jsx)("img",{src:r.thumbnail,className:"object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"flex max-w-[185px] flex-col justify-center",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-90 truncate",children:r.title}),(null==r?void 0:r.variant)&&(0,F.jsx)("span",{className:"inter-small-regular text-grey-50 truncate",children:"".concat(r.variant.title).concat(r.variant.sku?" (".concat(r.variant.sku,")"):"")})]})]}),(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)(wI,{featureFlag:"inventoryService",children:p&&(0,F.jsxs)("div",{className:"inter-base-regular text-grey-50 mr-6 flex flex-col items-end whitespace-nowrap",children:[(0,F.jsxs)("p",{children:[y||0," available"]}),(0,F.jsxs)("p",{children:["(",h||0," in stock)"]})]})}),(0,F.jsx)(ry.Z,{type:"number",name:"quantity",defaultValue:kH(r),min:0,suffix:(0,F.jsxs)("span",{className:"flex",children:["/",(0,F.jsx)("span",{className:"pl-1",children:kH(r)})]}),value:i[r.id],max:(t=Math).min.apply(t,[kH(r),p?y||0:Number.MAX_VALUE]),onChange:function(e){return o(e.target.valueAsNumber,r.id)},errors:b?void 0:{quantity:"Quantity is not valid"}})]})]})};function kV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){kV(e,t,r[t])})}return e}function kW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kQ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kW(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var kY=function(e){var t,r,n,i,o=e.close,a=e.reservation,l=e.item,s=e.totalReservedQuantity,c=void 0===s?0:s,u=(0,tR.cI)({defaultValues:{item:{description:a.description},metadata:rf(null==a?void 0:a.metadata)}}),d=(0,s1.Z)(!!a.metadata),f=d.state,p=d.toggle,m=u.control,y=u.setValue,h=u.handleSubmit,b=u.register,v=(0,en.useAdminStockLocations)(),g=v.stock_locations,x=v.isLoading,j=(0,en.useAdminInventoryItem)(a.inventory_item_id),O=j.inventory_item,w=j.isLoading,S=(0,en.useAdminUpdateReservation)((null==a?void 0:a.id)||"").mutate,P=(0,en.useAdminDeleteReservation)((null==a?void 0:a.id)||"").mutate,C=(0,B.useMemo)(function(){return!g||x?[]:g.map(function(e){return{value:e.id,label:e.name}})},[x,g]),N=(0,td.Z)(),k=function(){P(void 0,{onSuccess:function(){N("Reservation was deleted","The allocated items have been released.","success"),o()},onError:function(){N("Error","Failed to delete the reservation ","error")}})},_=(0,tR.qo)({control:m,name:"location"});(0,B.useEffect)(function(){if((null==g?void 0:g.length)&&a){var e=g.find(function(e){return e.id===a.location_id});e&&y("location",{value:null==e?void 0:e.id,label:null==e?void 0:e.name})}},[g,a,y]),(0,B.useEffect)(function(){a&&y("item.quantity",null==a?void 0:a.quantity)},[a,y]);var A=(0,B.useMemo)(function(){if(w||!(null==_?void 0:_.value)||!O)return{};var e,t=null===(e=O.location_levels)||void 0===e?void 0:e.find(function(e){return e.location_id===(null==_?void 0:_.value)});return t?{availableQuantity:t.available_quantity,inStockQuantity:t.stocked_quantity}:{}},[w,null==_?void 0:_.value,O]),D=A.availableQuantity,E=A.inStockQuantity,Z=(0,B.useMemo)(function(){return l?Math.min(kH(l)-(c-((null==a?void 0:a.quantity)||0)),"number"==typeof D?D:0):"number"==typeof D?D+a.quantity:a.quantity},[D,l,null==a?void 0:a.quantity,c]);return(0,F.jsx)(kM,{isVisible:!0,close:o,children:(0,F.jsx)("form",{className:"text-grey-90 h-full w-full",onSubmit:h(function(e){if(!e.item.quantity)return k();S({quantity:e.item.quantity,location_id:e.location.value,description:e.item.description,metadata:f?rd(e.metadata):void 0},{onSuccess:function(){N("Reservation was updated","The reservation change was saved.","success"),o()},onError:function(){N("Errors","Failed to update reservation","error")}})}),children:(0,F.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,F.jsxs)("div",{className:"border-grey-20 flex items-center justify-between border-b px-8 py-6",children:[(0,F.jsx)("h1",{className:"inter-large-semibold ",children:"Edit Reservation"}),(0,F.jsx)(Y.Z,{variant:"ghost",className:"p-1.5",type:"button",onClick:function(e){e.preventDefault(),o()},children:(0,F.jsx)(c2.Z,{})})]}),(0,F.jsx)("div",{className:"flex grow flex-col overflow-y-auto",children:(0,F.jsxs)("div",{className:"flex h-full flex-col justify-between gap-y-8 px-8 pb-8 pt-6",children:[(0,F.jsxs)("div",{className:"flex flex-col gap-y-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Location"}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:"Choose which location you want to ship the items from."}),(0,F.jsx)(tR.Qr,{name:"location",control:m,rules:{required:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(lS,{className:"mt-4",value:r,onChange:n,options:C})}})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Items to Allocate"}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:"Select the number of items that you wish to allocate."}),(0,F.jsxs)("div",{className:"\n                  bg-grey-5 text-grey-50 border-grey-20 \n                  inter-base-regular\n                  mt-6\n                  grid border-collapse grid-cols-2 grid-rows-3 \n                  [&>*]:border-r [&>*]:border-b [&>*]:py-2 \n                  [&>*:nth-child(odd)]:border-l [&>*:nth-child(odd)]:pl-4 \n                  [&>*:nth-child(even)]:pr-4 [&>*:nth-child(even)]:text-right \n                  [&>*:nth-child(-n+2)]:border-t",children:[(0,F.jsx)("div",{className:"rounded-tl-rounded",children:"Item"}),(0,F.jsxs)("div",{className:"rounded-tr-rounded flex justify-end space-x-3",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 truncate ",children:null!==(r=null!==(t=null==O?void 0:O.title)&&void 0!==t?t:null==l?void 0:l.title)&&void 0!==r?r:"-"}),(0,F.jsx)(kR,{size:"xsmall",src:null!==(n=null==O?void 0:O.thumbnail)&&void 0!==n?n:null==l?void 0:l.thumbnail})]}),(0,F.jsx)("div",{children:"SKU"}),(0,F.jsx)("div",{children:null!==(i=null==O?void 0:O.sku)&&void 0!==i?i:"N/A"}),(0,F.jsx)("div",{children:"In stock"}),(0,F.jsx)("div",{children:null!=E?E:"N/A"}),(0,F.jsx)("div",{children:"Available"}),(0,F.jsx)("div",{children:null!=D?D:"N/A"}),(0,F.jsx)("div",{className:"rounded-bl-rounded",children:"Allocate"}),(0,F.jsxs)("div",{className:"bg-grey-0 rounded-br-rounded text-grey-80 flex items-center",children:[(0,F.jsx)("input",kQ(kB({className:"remove-number-spinner inter-base-regular w-full shrink border-none bg-transparent text-right font-normal outline-none outline-0"},b("item.quantity",{valueAsNumber:!0})),{type:"number",min:0,max:Z})),(0,F.jsx)("span",{className:"text-grey-50 nowrap whitespace-nowrap pl-2",children:Z?" / ".concat(Z," requested"):" reserved"})]})]})]}),(0,F.jsxs)("div",{className:"border-grey-20 inter-base-regular border-t pt-6",children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:"Description"}),(0,F.jsx)("p",{className:"text-grey-50 mb-6",children:"What type of reservation is this?"}),(0,F.jsx)(ry.Z,kQ(kB({},b("item.description")),{placeholder:"Description"}))]}),(0,F.jsxs)("div",{className:"border-grey border-grey-20 w-full items-center border-t pt-6",children:[(0,F.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,F.jsx)("p",{className:"inter-base-semibold ",children:"Metadata"}),(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",type:"button",className:"border",onClick:p,children:f?"Remove metadata":"Add metadata"})]}),f&&(0,F.jsx)(rs,{form:(0,tL.G)(u,"metadata")})]})]}),(0,F.jsx)(Y.Z,{variant:"ghost",className:"my-1 w-full border text-rose-50",size:"small",onClick:k,type:"button",children:"Delete reservation"})]})}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end border-t px-8 pt-4 pb-6",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"border",onClick:o,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",children:"Save and close"})]})]})})})};function k$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kK(e){if(Array.isArray(e))return e}function kJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function k0(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){kJ(e,t,r[t])})}return e}function k2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k3(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k2(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function k5(e,t){if(null==e)return{};var r,n,i=k6(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function k6(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function k4(e,t){return kK(e)||kX(e,t)||k8(e,t)||k0()}function k8(e,t){if(e){if("string"==typeof e)return k$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k$(e,t)}}var k7=function(e){var t=e.onItemSelect,r=(e.clearOnSelect,e.filters),n=k4((0,B.useState)(),2),i=n[0],o=n[1],a=(0,rk.N)(i,500),l=!!(null==a?void 0:a.length),s=(0,en.useAdminInventoryItems)(k1({q:a},void 0===r?{}:r),{enabled:l}),c=s.isLoading,u=s.inventory_items,d=null==u?void 0:u.map(function(e){var t,r,n;return{label:e.title||(null===(n=e.variants)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:null===(t=r.product)||void 0===t?void 0:t.title)||e.sku,value:e.id,inventoryItem:e}});return(0,F.jsx)("div",{children:(0,F.jsx)(lS,{isMulti:!1,components:{Option:k9,Control:_e},onInputChange:o,options:d,placeholder:"Search by sku...",isSearchable:!0,noOptionsMessage:function(){return"No items found"},openMenuOnClick:!!(null==u?void 0:u.length),onChange:function(e){e&&t(e.inventoryItem)},value:null,isLoading:l&&c,filterOption:function(){return!0}})})},k9=function(e){var t=e.innerProps,r=e.data;return(0,F.jsxs)("div",k3(k1({},t),{className:"text-small grid w-full cursor-pointer grid-cols-2 place-content-between px-4 py-2 transition-all hover:bg-gray-50",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:r.label}),(0,F.jsx)("p",{className:"text-grey-50",children:r.inventoryItem.sku})]}),(0,F.jsxs)("div",{className:"text-right",children:[(0,F.jsx)("p",{className:"text-grey-50",children:"".concat(r.inventoryItem.stocked_quantity," stock")}),(0,F.jsx)("p",{className:"text-grey-50",children:"".concat(r.inventoryItem.stocked_quantity-r.inventoryItem.reserved_quantity," available")})]})]}))},_e=function(e){var t=e.children,r=k5(e,["children"]);return(0,F.jsxs)(af,k3(k1({},r),{children:[(0,F.jsx)("span",{className:"mr-4",children:(0,F.jsx)(r7.Z,{size:16,className:"text-grey-50"})}),t]}))},_t=function(e){var t=e.selectedLocation,r=e.onChange,n=(0,en.useAdminStockLocations)(),i=n.stock_locations,o=n.isLoading;(0,B.useEffect)(function(){!t&&!o&&(null==i?void 0:i.length)&&r(i[0].id)},[o,i,r,t]);var a=(0,B.useMemo)(function(){if(!o&&i){var e;return null!==(e=i.find(function(e){return e.id===t}))&&void 0!==e?e:i[0]}},[t,i,o]);return!o&&i&&a?(0,F.jsx)(lS,{isMulti:!1,onChange:function(e){r(e.value)},options:i.map(function(e){return{label:e.name,value:e.id}}),value:{value:a.id,label:a.name}}):null};function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _n(e){if(Array.isArray(e))return e}function _i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _o(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function _a(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_i(e,t,r[t])})}return e}function _s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_s(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function _u(e,t){return _n(e)||_o(e,t)||_d(e,t)||_a()}function _d(e,t){if(e){if("string"==typeof e)return _r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _r(e,t)}}var _f=function(e){var t,r,n,i=e.form,o=i.register,a=i.path,l=i.watch,s=i.control,c=i.setValue,u=l(a("location")),d=l(a("item")),f=_u(B.useState(u),2),p=f[0],m=f[1],y=null==d?void 0:null===(t=d.location_levels)||void 0===t?void 0:t.find(function(e){return e.location_id===p});return(0,F.jsxs)("div",{className:"flex w-full flex-col gap-6",children:[(0,F.jsxs)("div",{className:"grid w-full grid-cols-2 items-center",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-1",children:"Location"}),(0,F.jsx)("p",{className:"text-grey-50",children:"Choose where you wish to reserve from."})]}),(0,F.jsx)(tR.Qr,{control:s,name:a("location"),render:function(e){var t=e.field.onChange;return(0,F.jsx)(_t,{onChange:function(e){t(e),m(e)},selectedLocation:p})}})]}),(0,F.jsxs)("div",{className:"grid w-full grid-cols-2 items-center",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-1",children:"Item to reserve"}),(0,F.jsx)("p",{className:"text-grey-50",children:"Select the item that you wish to reserve."})]}),(0,F.jsx)(tR.Qr,{control:s,name:a("item"),render:function(e){var t=e.field.onChange;return(0,F.jsx)(k7,{onItemSelect:t,clearOnSelect:!0,filters:{location_id:p}})}}),d&&y&&(0,F.jsxs)("div",{className:"col-span-2 flex w-full flex-col",children:[(0,F.jsxs)("div",{className:"\n            bg-grey-5 text-grey-50 border-grey-20 \n            mt-8\n            grid border-collapse grid-cols-2 grid-rows-5 \n            [&>*]:border-r [&>*]:border-b [&>*]:py-2 \n            [&>*:nth-child(odd)]:border-l [&>*:nth-child(odd)]:pl-4 \n            [&>*:nth-child(even)]:pr-4 [&>*:nth-child(even)]:text-right \n            [&>*:nth-child(-n+2)]:border-t",children:[(0,F.jsx)("div",{className:"rounded-tl-rounded",children:"Item"}),(0,F.jsx)("div",{className:"rounded-tr-rounded",children:null!==(r=d.title)&&void 0!==r?r:"N/A"}),(0,F.jsx)("div",{children:"SKU"}),(0,F.jsx)("div",{children:null!==(n=d.sku)&&void 0!==n?n:"N/A"}),(0,F.jsx)("div",{children:"In stock"}),(0,F.jsx)("div",{children:null==y?void 0:y.stocked_quantity}),(0,F.jsx)("div",{children:"Available"}),(0,F.jsx)("div",{children:(null==y?void 0:y.stocked_quantity)-(null==y?void 0:y.reserved_quantity)}),(0,F.jsx)("div",{className:"rounded-bl-rounded",children:"Reserve"}),(0,F.jsx)("div",{className:"bg-grey-0 rounded-br-rounded text-grey-80 flex items-center",children:(0,F.jsx)("input",_c(_l({className:"remove-number-spinner inter-base-regular w-full shrink border-none bg-transparent text-right font-normal outline-none outline-0"},o(a("quantity"),{valueAsNumber:!0})),{type:"number",min:0,max:(null==y?void 0:y.stocked_quantity)-(null==y?void 0:y.reserved_quantity)}))})]}),(0,F.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,F.jsx)(Y.Z,{variant:"ghost",className:"border",size:"small",type:"button",onClick:function(){return c(a("item"),void 0)},children:"Remove item"})})]})]}),(0,F.jsxs)("div",{className:"border-grey border-grey-20 grid w-full grid-cols-2 items-center border-t py-6",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-1",children:"Description"}),(0,F.jsx)("p",{className:"text-grey-50",children:"What type of reservation is this?"})]}),(0,F.jsx)(ry.Z,_c(_l({},o(a("description"))),{placeholder:"Description"}))]})]})};function _p(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function _m(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){_p(o,n,i,a,l,"next",e)}function l(e){_p(o,n,i,a,l,"throw",e)}a(void 0)})}}function _y(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var _h=function(e){var t,r=e.onClose,n=e.locationId,i=(0,en.useAdminCreateReservation)().mutateAsync,o=(0,tR.cI)({defaultValues:{general:{location:n,item:void 0,description:void 0,quantity:0}},reValidateMode:"onBlur",mode:"onBlur"}),a=o.handleSubmit,l=(0,td.Z)(),s=(t=_m(function(e){return _y(this,function(t){switch(t.label){case 0:return[4,_b(e)];case 1:return i(t.sent(),{onSuccess:function(){l("Success","Successfully created reservation","success"),r()},onError:function(e){l("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(e){return t.apply(this,arguments)});return(0,F.jsx)("form",{onSubmit:a(s),className:"w-full",children:(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",type:"button",onClick:r,children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-small flex",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",onClick:r,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",children:"Save reservation"})]})]})}),(0,F.jsx)(c3.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,F.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 my-16 max-w-[700px]",children:[(0,F.jsx)("h1",{className:"mb-base text-grey-90 text-xlarge font-semibold",children:"Reserve Item"}),(0,F.jsx)("div",{className:"mt-xlarge gap-y-xlarge flex w-full pb-0.5",children:(0,F.jsx)(_f,{form:(0,tL.G)(o,"general")})}),(0,F.jsxs)("div",{className:"border-grey border-grey-20 w-full items-center border-t pt-6",children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-2",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(o,"metadata")})]})]})})]})})},_b=function(e){return{location_id:e.general.location,inventory_item_id:e.general.item.id,quantity:e.general.quantity,description:e.general.description,metadata:rd(e.metadata)}};function _v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_v(e,t,r[t])})}return e}function _x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _j(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_x(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function _O(e,t){if(null==e)return{};var r,n,i=_w(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _w(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var _S=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=_O(e,["size","color"]);return(0,F.jsx)("svg",_j(_g({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),{children:(0,F.jsx)("path",{d:"M8.75 5H16.875M8.75 5C8.75 5.33152 8.6183 5.64946 8.38388 5.88388C8.14946 6.1183 7.83152 6.25 7.5 6.25C7.16848 6.25 6.85054 6.1183 6.61612 5.88388C6.3817 5.64946 6.25 5.33152 6.25 5M8.75 5C8.75 4.66848 8.6183 4.35054 8.38388 4.11612C8.14946 3.8817 7.83152 3.75 7.5 3.75C7.16848 3.75 6.85054 3.8817 6.61612 4.11612C6.3817 4.35054 6.25 4.66848 6.25 5M3.125 5H6.25M8.75 15H16.875M8.75 15C8.75 15.3315 8.6183 15.6495 8.38388 15.8839C8.14946 16.1183 7.83152 16.25 7.5 16.25C7.16848 16.25 6.85054 16.1183 6.61612 15.8839C6.3817 15.6495 6.25 15.3315 6.25 15M8.75 15C8.75 14.6685 8.6183 14.3505 8.38388 14.1161C8.14946 13.8817 7.83152 13.75 7.5 13.75C7.16848 13.75 6.85054 13.8817 6.61612 14.1161C6.3817 14.3505 6.25 14.6685 6.25 15M3.125 15H6.25M13.75 10H16.875M13.75 10C13.75 10.3315 13.6183 10.6495 13.3839 10.8839C13.1495 11.1183 12.8315 11.25 12.5 11.25C12.1685 11.25 11.8505 11.1183 11.6161 10.8839C11.3817 10.6495 11.25 10.3315 11.25 10M13.75 10C13.75 9.66848 13.6183 9.35054 13.3839 9.11612C13.1495 8.8817 12.8315 8.75 12.5 8.75C12.1685 8.75 11.8505 8.8817 11.6161 9.11612C11.3817 9.35054 11.25 9.66848 11.25 10M3.125 10H11.25",stroke:void 0===n?"currentColor":n,strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}))};function _P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_P(e,t,r[t])})}return e}function _N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _k(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_N(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function __(e,t){if(null==e)return{};var r,n,i=_A(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _A(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var _D=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=void 0===n?"currentColor":n,o=__(e,["size","color"]);return(0,F.jsxs)("svg",_k(_C({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M6.5 4V5.5M13.5 4V5.5M4 14.5V7C4 6.60218 4.15804 6.22064 4.43934 5.93934C4.72064 5.65804 5.10218 5.5 5.5 5.5H14.5C14.8978 5.5 15.2794 5.65804 15.5607 5.93934C15.842 6.22064 16 6.60218 16 7V14.5M4 14.5C4 14.8978 4.15804 15.2794 4.43934 15.5607C4.72064 15.842 5.10218 16 5.5 16H14.5C14.8978 16 15.2794 15.842 15.5607 15.5607C15.842 15.2794 16 14.8978 16 14.5M4 14.5V9.5C4 9.10218 4.15804 8.72064 4.43934 8.43934C4.72064 8.15804 5.10218 8 5.5 8H14.5C14.8978 8 15.2794 8.15804 15.5607 8.43934C15.842 8.72064 16 9.10218 16 9.5V14.5",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.875 10.8672C7.875 11.0743 7.70711 11.2422 7.5 11.2422C7.29289 11.2422 7.125 11.0743 7.125 10.8672C7.125 10.6601 7.29289 10.4922 7.5 10.4922C7.70711 10.4922 7.875 10.6601 7.875 10.8672Z",stroke:i,strokeWidth:"0.75"}),(0,F.jsx)("path",{d:"M7.875 13.1943C7.875 13.4014 7.70711 13.5693 7.5 13.5693C7.29289 13.5693 7.125 13.4014 7.125 13.1943C7.125 12.9872 7.29289 12.8193 7.5 12.8193C7.70711 12.8193 7.875 12.9872 7.875 13.1943Z",stroke:i,strokeWidth:"0.75"}),(0,F.jsx)("path",{d:"M12.875 10.8672C12.875 11.0743 12.7071 11.2422 12.5 11.2422C12.2929 11.2422 12.125 11.0743 12.125 10.8672C12.125 10.6601 12.2929 10.4922 12.5 10.4922C12.7071 10.4922 12.875 10.6601 12.875 10.8672Z",stroke:i,strokeWidth:"0.75"}),(0,F.jsx)("path",{d:"M10.375 10.8672C10.375 11.0743 10.2071 11.2422 10 11.2422C9.79289 11.2422 9.625 11.0743 9.625 10.8672C9.625 10.6601 9.79289 10.4922 10 10.4922C10.2071 10.4922 10.375 10.6601 10.375 10.8672Z",stroke:i,strokeWidth:"0.75"}),(0,F.jsx)("path",{d:"M10.375 13.1943C10.375 13.4014 10.2071 13.5693 10 13.5693C9.79289 13.5693 9.625 13.4014 9.625 13.1943C9.625 12.9872 9.79289 12.8193 10 12.8193C10.2071 12.8193 10.375 12.9872 10.375 13.1943Z",stroke:i,strokeWidth:"0.75"})]}))};function _E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_E(e,t,r[t])})}return e}function _I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _T(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_I(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function _M(e,t){if(null==e)return{};var r,n,i=_R(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _R(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var _L=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=e.outerColor,o=_M(e,["size","color","outerColor"]);return(0,F.jsxs)("svg",_T(_Z({width:r,height:r,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("circle",{cx:"16",cy:"16",r:"6",fill:void 0===i?"transparent":i}),(0,F.jsx)("circle",{cx:"16",cy:"16",r:"3",fill:void 0===n?"#E5484D":n})]}))};function _z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _q(e){if(Array.isArray(e))return e}function _F(e){if(Array.isArray(e))return _z(e)}function _H(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function _U(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){_H(o,n,i,a,l,"next",e)}function l(e){_H(o,n,i,a,l,"throw",e)}a(void 0)})}}function _G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _V(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _B(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function _W(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _Q(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_G(e,t,r[t])})}return e}function _$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _K(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_$(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function _J(e,t){if(null==e)return{};var r,n,i=_X(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _X(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function _0(e,t){return _q(e)||_B(e,t)||_2(e,t)||_W()}function _1(e){return _F(e)||_V(e)||_2(e)||_Q()}function _2(e,t){if(e){if("string"==typeof e)return _z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _z(e,t)}}function _3(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var _5=function(e){var t=e.filters,r=e.submitFilters,n=e.clearFilters,i=_0((0,B.useState)(t),2),o=i[0],a=i[1];return(0,B.useEffect)(function(){a(t)},[t]),(0,F.jsx)("div",{className:"flex space-x-1",children:(0,F.jsx)(uv,{submitFilters:function(){var e=o.additionalFilters;r(_K(_Y({},f_(_J(o,["additionalFilters"]))),{additionalFilters:f_(e)}))},clearFilters:function(){n(),o(_K(_Y({},o),{additionalFilters:{}}))},triggerElement:(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",children:[(0,F.jsx)(_S,{size:20}),"View"]}),children:(0,F.jsxs)("div",{className:"w-[320px]",children:[(0,F.jsx)(_6,{title:"Inventory item",value:o.additionalFilters.inventory_item_id,setFilter:function(e){a(function(t){var r=t.additionalFilters;return _K(_Y({},_J(t,["additionalFilters"])),{additionalFilters:_K(_Y({},r),{inventory_item_id:e})})})}}),(0,F.jsx)(_9,{title:"Description",value:o.additionalFilters.description,options:[{label:"Equals",value:"equals"},{label:"Contains",value:"contains"}],setFilter:function(e){a(function(t){return _K(_Y({},t),{additionalFilters:{description:e}})})}}),(0,F.jsx)(At,{title:"Creation date",value:o.additionalFilters.created_at,setFilter:function(e){a(function(t){var r=t.additionalFilters;return _K(_Y({},_J(t,["additionalFilters"])),{additionalFilters:_K(_Y({},r),{created_at:e})})})}}),(0,F.jsx)(Ae,{title:"Quantity",value:o.additionalFilters.quantity,options:[{label:"Over",value:"gt"},{label:"Under",value:"lt"},{label:"Between",value:"between"}],setFilter:function(e){a(function(t){var r=t.additionalFilters;return _K(_Y({},_J(t,["additionalFilters"])),{additionalFilters:_K(_Y({},r),{quantity:e})})})}}),(0,F.jsx)(_8,{title:"Created by",value:o.additionalFilters.created_by,setFilter:function(e){a(function(t){var r=t.additionalFilters;return _K(_Y({},_J(t,["additionalFilters"])),{additionalFilters:_K(_Y({},r),{created_by:e})})})}})]})})})},_6=function(e){var t=e.title,r=e.setFilter,n=e.value,i=_0((0,B.useState)(new Set),2),o=i[0],a=i[1],l=_0((0,B.useState)(""),2),s=l[0],c=l[1],u=_0((0,B.useState)(),2),d=u[0],f=u[1],p=(0,en.useMedusa)().client;(0,B.useEffect)(function(){var e;(e=_U(function(e){var t,r;return _3(this,function(n){switch(n.label){case 0:if(!(null===(t=e)||void 0===t?void 0:t.length))return[3,2];return[4,p.admin.inventoryItems.list({id:_1(new Set(e))})];case 1:r=n.sent().inventory_items,a(new Set(r)),n.label=2;case 2:return[2]}})}),function(t){return e.apply(this,arguments)})(n)},[p.admin.inventoryItems,n]),(0,B.useEffect)(function(){var e=setTimeout(function(){c(null!=d?d:"")},400);return function(){return clearTimeout(e)}},[d]);var m=(0,en.useAdminInventoryItems)({q:s,limit:7},{enabled:!!s}),y=m.inventory_items,h=m.isLoading,b=function(e){var t=Ao(o,e);a(t),r(_1(t).map(function(e){return e.id}))},v=B.useMemo(function(){return new Set(_1(o).map(function(e){return e.id}))},[o]),g=function(){a(new Set),r(void 0)};return(0,F.jsx)("div",{className:(0,ec.Z)("w-full border-b"),children:(0,F.jsxs)(Ai,{title:t,defaultOpen:!!n,onOpenChange:function(e){e||g()},children:[(0,F.jsx)("div",{className:"gap-y-xsmall mb-2 flex w-full flex-col pt-2",children:(0,F.jsx)(ry.Z,{value:d,className:"pr-1",prefix:0===o.size?null:(0,F.jsxs)("div",{onClick:g,className:"bg-grey-10 border-grey-20 text-grey-40 rounded-rounded gap-x-2xsmall mr-xsmall flex cursor-pointer items-center border py-0.5 pr-1 pl-2",children:[(0,F.jsx)("span",{className:"text-grey-50",children:o.size}),(0,F.jsx)(c2.Z,{size:16})]}),placeholder:o.size?"Items selected":"Find items",onChange:function(e){return f(e.target.value)}})}),(0,F.jsxs)("div",{className:"flex flex-col gap-y-1 pb-2",children:[_1(o).map(function(e,t){return(0,F.jsx)(_4,{onClick:function(){return b(e)},selected:!0,item:e},"selected-item-".concat(t))}),s&&(h?(0,F.jsx)(ei.Z,{}):(0,F.jsx)(F.Fragment,{children:null==y?void 0:y.filter(function(e){return!v.has(e.id)}).map(function(e,t){return(0,F.jsx)(_4,{onClick:function(){return b(e)},selected:!1,item:e},"item-".concat(t))})}))]})]})})},_4=function(e){var t=e.key,r=e.onClick,n=e.selected,i=e.item;return(0,F.jsxs)("div",{onClick:r,className:"hover:bg-grey-10 rounded-rounded flex items-center py-1.5 px-2",children:[(0,F.jsx)("div",{className:"mr-2 flex h-[20px] w-[20px] items-center",children:n&&(0,F.jsx)(rT,{size:16,color:"#111827"})}),(0,F.jsxs)("div",{className:"inter-small-regular flex w-full items-center justify-between",children:[(0,F.jsx)("p",{className:"text-grey-90",children:i.title})," ",(0,F.jsx)("p",{className:"text-grey-50",children:i.sku})]})]},t)},_8=function(e){var t=e.title,r=e.setFilter,n=e.value,i=_0((0,B.useState)(new Set),2),o=i[0],a=i[1],l=_0((0,B.useState)(),2),s=l[0],c=l[1],u=_0((0,B.useState)(),2),d=u[0],f=u[1];(0,B.useEffect)(function(){var e=setTimeout(function(){c(null!=d?d:"")},400);return function(){return clearTimeout(e)}},[d]);var p=(0,en.useAdminUsers)({}),m=p.users,y=p.isLoading,h=_0((0,B.useState)([]),2),b=h[0],v=h[1];(0,B.useEffect)(function(){var e;(e=_U(function(e){var t;return _3(this,function(r){return e&&m&&(t=m.filter(function(t){return e.includes(t.id)}),a(new Set(t))),[2]})}),function(t){return e.apply(this,arguments)})(n)},[n]),(0,B.useEffect)(function(){s&&(null==m?void 0:m.length)&&v(m.filter(function(e){var t,r;return(null===(t=e.first_name)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(r=e.last_name)||void 0===r?void 0:r.toLowerCase().includes(s))}).slice(0,7))},[s,m]);var g=function(e){var t=Ao(o,e);a(t),r(_1(t).map(function(e){return e.id}))},x=function(){a(new Set),r(void 0)};return(0,F.jsx)("div",{className:(0,ec.Z)("w-full cursor-pointer"),children:(0,F.jsxs)(Ai,{title:t,defaultOpen:!!n,onOpenChange:function(e){e||x()},children:[(0,F.jsx)("div",{className:"gap-y-xsmall mb-2 flex w-full flex-col pt-2",children:(0,F.jsx)(ry.Z,{value:d,placeholder:"Find user",onChange:function(e){return f(e.target.value)},prefix:0===o.size?null:(0,F.jsxs)("div",{onClick:x,className:"bg-grey-10 border-grey-20 text-grey-40 rounded-rounded gap-x-2xsmall mr-xsmall flex cursor-pointer items-center border py-0.5 pr-1 pl-2",children:[(0,F.jsx)("span",{className:"text-grey-50",children:o.size}),(0,F.jsx)(c2.Z,{size:16})]})})}),(0,F.jsxs)("div",{className:"flex flex-col gap-y-1 pb-2",children:[_1(o).map(function(e,t){return(0,F.jsx)(_7,{onClick:function(){return g(e)},selected:!0,user:e},"selected-user-".concat(t))}),!y&&s&&(0,F.jsx)(F.Fragment,{children:null==b?void 0:b.filter(function(e){return!o.has(e)}).map(function(e,t){return(0,F.jsx)(_7,{onClick:function(){return g(e)},selected:!1,user:e},"user-".concat(t))})})]})]})})},_7=function(e){var t=e.key,r=e.onClick,n=e.selected,i=e.user;return(0,F.jsxs)("div",{onClick:r,className:"hover:bg-grey-10 inter-small-regular rounded-rounded flex items-center py-1.5 px-2",children:[(0,F.jsx)("div",{className:"inter-small-regular mr-2 flex h-[20px] w-[20px] items-center",children:n&&(0,F.jsx)(rT,{size:16,color:"#111827"})}),(0,F.jsx)("div",{children:"".concat(i.first_name," ").concat(i.last_name)})]},t)},_9=function(e){var t=e.title,r=e.setFilter,n=e.value,i=e.options,o=_0((0,B.useState)(n),2),a=o[0],l=o[1],s=_0((0,B.useState)(i.find(function(e){return!!(null==n?void 0:n[e.value])})||i[0]),2),c=s[0],u=s[1],d=function(e){l(_G({},c.value,e)),r(_G({},c.value,e))};return(0,F.jsx)("div",{className:(0,ec.Z)("w-full border-b"),children:(0,F.jsx)(Ai,{title:t,defaultOpen:!!n,onOpenChange:function(e){e||r(void 0)},children:(0,F.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col py-2",children:[(0,F.jsx)(An,{options:i,value:c,onChange:function(e){var t=null==a?void 0:a[c.value];u(e),l(_G({},e.value,t)),r(_G({},e.value,t))}}),(0,F.jsx)(ry.Z,{value:null==a?void 0:a[c.value],placeholder:"Write something",onChange:function(e){return d(e.target.value)}})]})})})},Ae=function(e){var t,r=e.title,n=e.setFilter,i=e.value,o=e.options,a=function(e){var t=e?Object.keys(e).length:0;return 1===t?o.find(function(t){return t.value===Object.keys(e)[0]})||o[0]:2===t?{label:"Between",value:"between"}:o[0]},l=_0((0,B.useState)(1===(t=i?Object.keys(i).length:0)?i:2===t?{gt:i.gt}:null),2),s=l[0],c=l[1],u=_0((0,B.useState)("between"===a(i).value?i.lt:void 0),2),d=u[0],f=u[1],p=_0((0,B.useState)(a(i)),2),m=p[0],y=p[1],h=function(e){switch(m.value){case"lt":case"gt":c(_G({},m.value,e)),n(_G({},m.value,e));break;case"between":c(_G({},"gt",e)),n(_G({},"gt",e))}},b=function(e){f(e),n({gt:null==s?void 0:s.gt,lt:e})},v=function(){n(void 0),c(null),f(null)};return(0,F.jsx)("div",{className:(0,ec.Z)("w-full border-b"),children:(0,F.jsx)(Ai,{title:r,defaultOpen:!!i,onOpenChange:function(e){e||v()},children:(0,F.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col py-2",children:[(0,F.jsx)(An,{options:o,value:m,onChange:function(e){var t=null==s?void 0:s[m.value];switch(e.value){case"lt":case"gt":c(_G({},e.value,t)),n(_G({},e.value,t));break;case"between":c(_G({},"gt",t)),n(_G({},"gt",t))}y(e)}}),(0,F.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,F.jsx)(ry.Z,{value:"between"===m.value?null==s?void 0:s.gt:null==s?void 0:s[m.value],placeholder:"0",type:"number",onChange:function(e){return h(e.target.value)}}),"between"===m.value&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{children:"-"}),(0,F.jsx)(ry.Z,{value:null!=d?d:void 0,placeholder:"0",type:"number",onChange:function(e){return b(e.target.value)}})]})]})]})})})},At=function(e){var t,r=e.title,n=e.setFilter,i=e.value,o=[{label:"Before",value:"lt"},{label:"After",value:"gt"},{label:"Between",value:"between"}],a=function(e){var t=e?Object.keys(e).length:0;return 1===t?o.find(function(t){return t.value===Object.keys(e)[0]})||o[0]:2===t?{label:"Between",value:"between"}:o[0]},l=_0((0,B.useState)(a(i)),2),s=l[0],c=l[1],u=_0((0,B.useState)(function(e){var t,r,n=a(e);switch(n.value){case"lt":case"gt":return null!==(t=null==e?void 0:e[n.value])&&void 0!==t?t:null;case"between":return null!==(r=null==e?void 0:e.gt)&&void 0!==r?r:null}return null}(i)),2),d=u[0],f=u[1],p=_0((0,B.useState)("between"===a(i).value&&null!==(t=i.lt)&&void 0!==t?t:null),2),m=p[0],y=p[1],h=function(e){var t=e.date1,r=e.date2;switch(f(t),y(r),s.value){case"lt":case"gt":t&&(n(_G({},s.value,t)),y(null));break;case"between":t&&r&&n({lt:r,gt:t})}};return(0,F.jsx)("div",{className:(0,ec.Z)("w-full border-b"),children:(0,F.jsx)(Ai,{title:r,defaultOpen:!!i,onOpenChange:function(e){e||n(void 0)},children:(0,F.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col py-2",children:[(0,F.jsx)(An,{options:o,value:s,onChange:function(e){switch(e.value){case"lt":case"gt":d&&(n(_G({},e.value,d)),y(null));break;case"between":d&&m&&n({lt:m,gt:d})}c(e)}}),(0,F.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,F.jsx)(Ar,{date:d,setDate:function(e){return h({date1:e,date2:m})}}),"between"===s.value&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{children:"-"}),(0,F.jsx)(Ar,{date:m,setDate:function(e){return h({date1:d,date2:e})}})]})]})]})})})},Ar=function(e){var t=e.date,r=e.setDate,n=e.side;return(0,F.jsxs)(uu.fC,{children:[(0,F.jsx)(uu.xz,{className:"w-full",children:(0,F.jsxs)("div",{className:"rounded-rounded inter-small-regular bg-grey-5 flex w-full items-center border py-1.5 pl-3 pr-2 text-left",children:[(0,F.jsx)("span",{className:"text-grey-40 mr-1.5",children:(0,F.jsx)(_D,{size:20})}),t?(0,F.jsx)("p",{className:"mt-0.5",children:iW()(t).format("MMM DD, YYYY")}):(0,F.jsx)("p",{className:"text-grey-40 mt-0.5",children:"Pick a date"})]})}),(0,F.jsx)(uu.VY,{side:void 0===n?"right":n,sideOffset:8,className:"bg-grey-0 rounded-rounded border p-1",children:(0,F.jsx)(da,{date:t,onChange:r,greyPastDates:!1})})]})},An=function(e){var t=e.value,r=e.options,n=e.onChange;return(0,F.jsxs)(uu.fC,{children:[(0,F.jsx)(uu.xz,{className:"w-full",children:(0,F.jsx)("div",{className:"rounded-rounded bg-grey-5 w-full border py-1.5 pl-3 pr-2 text-left",children:t.label})}),(0,F.jsx)(uu.VY,{side:"right",align:"start",sideOffset:2,className:"bg-grey-0 rounded-rounded w-52 border p-1",children:r.map(function(e,r){return(0,F.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mb-1 flex py-1.5 px-2",onClick:function(){return n(e)},children:[(0,F.jsx)("div",{className:"mr-2 h-[20px] w-[20px]",children:t.value===e.value&&(0,F.jsx)(_L,{size:20,outerColor:"#FFF",color:"#111827"})}),(0,F.jsx)("p",{children:e.label})]},r)})})]})},Ai=function(e){var t=e.onOpenChange,r=e.defaultOpen,n=e.title,i=e.children,o=_0((0,B.useState)(r),2),a=o[0],l=o[1];return(0,F.jsx)("div",{className:(0,ec.Z)("border-grey-5 w-full border-b"),children:(0,F.jsxs)(eY.fC,{defaultOpen:r,onOpenChange:function(e){l(e),t(e)},className:"w-full",children:[(0,F.jsxs)(eY.xz,{className:(0,ec.Z)("text-grey-50 flex w-full cursor-pointer items-center justify-between rounded py-1.5 px-3"),children:[(0,F.jsx)("p",{children:n}),(0,F.jsx)(vw.Z,{checked:a,type:"button",className:"cursor-pointer"})]}),(0,F.jsx)(eY.VY,{className:"flex w-full flex-col gap-y-2 px-2",children:i})]})})};function Ao(e,t){return e.has(t)?(e.delete(t),new Set(e)):new Set(e.add(t))}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Al(e){if(Array.isArray(e))return e}function As(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ac(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Au(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ad(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){As(e,t,r[t])})}return e}function Af(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ap(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Af(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Am(e,t){if(null==e)return{};var r,n,i=Ay(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ay(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function Ah(e,t){return Al(e)||Ac(e,t)||Ab(e,t)||Au()}function Ab(e,t){if(e){if("string"==typeof e)return Aa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Aa(e,t)}}var Av=["description","offset","limit","location_id","inventory_item_id","quantity","created_at","created_by"],Ag={location:"location_id",inventory_item:"inventory_item_id",created_at:"created_at",date:"created_at",created_by:"created_by",description:"description",query:"q",offset:"offset",limit:"limit"},Ax=function(e){return null===e?e:Object.entries(e).reduce(function(e,t){var r=Ah(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=u_(i):e[n]=i,e},{})},Aj=function(e,t){switch(t.type){case"setFilters":return Ad({},e,t.payload);case"setQuery":return Ap(Ad({},e),{query:t.payload});case"setDefaults":return Ap(Ad({},e),{additionalFilters:{}});case"setLimit":return Ap(Ad({},e),{limit:t.payload});case"setOffset":return Ap(Ad({},e),{offset:t.payload});case"setLocation":return Ap(Ad({},e),{location:t.payload});case"reset":return t.payload;default:return e}},AO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return Aw(e,t)},[e,t]),n=Ah((0,B.useReducer)(Aj,r),2),i=n[0],o=n[1],a=function(){var e=Ad({},i.additionalFilters);"string"==typeof(null===(o=e.description)||void 0===o?void 0:o.equals)&&(e.description=e.description.equals);var t=!0,r=!1,n=void 0;try{for(var o,a,l=Object.entries(i)[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var s=Ah(a.value,2),c=s[0],u=s[1];"query"===c?u&&"string"==typeof u&&(e.q=u):"offset"===c||"limit"===c?e[c]=u:(null==u?void 0:u.open)?"date"===c?e[Ag[c]]=Ax(u.filter):e[Ag[c]]=u.filter:"location"===c&&(u?e[Ag[c]]=u:delete e[Ag[c]])}}catch(e){r=!0,n=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw n}}return e.expand="line_item,inventory_item",e},l=function(e){var t=null!=e?e:i,r=Ad({},t.additionalFilters,Am(t,["additionalFilters"])),n={},o=!0,a=!1,l=void 0;try{for(var s,c=Object.entries(r)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=Ah(s.value,2),d=u[0],f=u[1];"query"===d?f&&"string"==typeof f&&(n.q=f):f&&(n[Ag[d]||d]=f)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return n},s=(0,B.useMemo)(function(){return a()},[i]),c=(0,B.useMemo)(function(){return l()},[i]);return Ap(Ad({},i),{filters:Ad({},i),representationObject:c,queryObject:s,paginate:function(e){e>0?o({type:"setOffset",payload:i.offset+i.limit}):o({type:"setOffset",payload:Math.max(i.offset-i.limit,0)})},setQuery:function(e){o({type:"setQuery",payload:e})},setFilters:function(e){o({type:"setFilters",payload:e})},setDefaultFilters:function(e){o({type:"setDefaults",payload:e})},setLocationFilter:function(e){o({type:"setLocation",payload:e}),o({type:"setOffset",payload:0})},reset:function(){o({type:"setFilters",payload:Ap(Ad({},i),{offset:0,query:null})})}})},Aw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={location:null!==(l=null==t?void 0:t.location_id)&&void 0!==l?l:"",offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s,c=Object.entries(n)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=Ah(s.value,2),d=u[0],f=u[1];if(Av.includes(d)&&f)switch(d){case"offset":"string"==typeof f&&(r.offset=parseInt(f));break;case"limit":"string"==typeof f&&(r.limit=parseInt(f));break;case"location_id":"string"==typeof f&&(r.location=f);break;case"description":r.additionalFilters.description=f;break;case"quantity":r.additionalFilters.quantity=f;break;case"inventory_item_id":case"created_by":r.additionalFilters[d]=Array.isArray(f)?f:[f];break;case"created_at":r.additionalFilters.created_at=f}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}return r},AS=function(){return[(0,B.useMemo)(function(){return[{Header:"SKU",accessor:"inventory_item.sku",Cell:function(e){return e.cell.value}},{Header:"Order ID",accessor:"line_item.order.display_id",Cell:function(e){var t=e.cell.value;return null!=t?t:"-"}},{Header:"Description",accessor:"description",Cell:function(e){return e.cell.value}},{Header:"Created",accessor:"created_at",Cell:function(e){var t=e.cell.value;return iW()(t).format("MMM Do YYYY")}},{Header:function(){return(0,F.jsx)("div",{className:"pr-2 text-right",children:"Quantity"})},accessor:"quantity",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{className:"w-full pr-2 text-right",children:t})}}]},[])]};function AP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function AC(e){if(Array.isArray(e))return e}function AN(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Ak(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){AN(o,n,i,a,l,"next",e)}function l(e){AN(o,n,i,a,l,"throw",e)}a(void 0)})}}function A_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AA(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function AD(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function AE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){A_(e,t,r[t])})}return e}function AZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function AI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AZ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function AT(e,t){if(null==e)return{};var r,n,i=AM(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function AM(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function AR(e,t){return AC(e)||AA(e,t)||AL(e,t)||AD()}function AL(e,t){if(e){if("string"==typeof e)return AP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AP(e,t)}}function Az(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Aq=15,AF=function(e){var t,r=e.selectedLocation,n=e.onChange,i=AR((0,B.useState)(!1),2),o=i[0],a=i[1],l=(0,B.useRef)(null),s=(0,en.useAdminStockLocations)(),c=s.stock_locations,u=s.isLoading,d=(0,B.useMemo)(function(){var e=[];return!u&&c&&(e=c.map(function(e){return{label:e.name,value:e.id}})),e.unshift({label:"All locations",value:void 0}),e},[u,c]),f=(0,B.useMemo)(function(){var e;if(null==d?void 0:d.length)return null!==(e=d.find(function(e){return e.value===r}))&&void 0!==e?e:d[0]},[r,d]);return!u&&(null==d?void 0:d.length)?(0,F.jsx)("div",{className:"max-w-[220px]",children:(0,F.jsxs)(uu.fC,{open:o,onOpenChange:a,children:[(0,F.jsx)(uu.xz,{className:"w-full",children:(0,F.jsx)(a9.Z,{className:(0,ec.Z)({hidden:!((t=l.current)&&t.offsetWidth<t.scrollWidth)}),delayDuration:1e3,content:(0,F.jsx)("div",{children:null==f?void 0:f.label}),children:(0,F.jsxs)(Y.Z,{size:"small",variant:"secondary",spanClassName:"flex grow",className:"max-w-[220px] items-center justify-start",children:[(0,F.jsx)(oZ.Z,{size:20}),(0,F.jsx)("span",{ref:l,className:"max-w-[166px] truncate",children:null==f?void 0:f.label})]})})}),(0,F.jsx)(uu.VY,{side:"bottom",align:"center",sideOffset:2,className:"rounded-rounded z-50 w-[220px] border bg-white p-1",children:d.map(function(e,t){return(0,F.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mb-1 flex py-1.5 px-2",onClick:function(){a(!1),n(e.value)},children:[(0,F.jsx)("div",{className:"mr-2 h-[20px] w-[20px]",children:(null==f?void 0:f.value)===e.value&&(0,F.jsx)(_L,{size:20,outerColor:"#FFF",color:"#111827"})}),(0,F.jsx)("p",{className:"w-[166px]",children:e.label})]},t)})})]})}):null},AH=function(){var e=(0,en.useAdminStore)().store,t=(0,s1.Z)(),r=t.state,n=t.close,i=t.open,o=(0,V.useLocation)(),a=(0,B.useMemo)(function(){return e?{location_id:e.default_location_id}:{}},[e]),l=AO(o.search,a),s=l.reset,c=l.paginate,u=l.setLocationFilter,d=l.setQuery,f=l.queryObject,p=l.representationObject,m=l.filters,y=l.setFilters,h=l.setDefaultFilters,b=parseInt(f.offset)||0,v=parseInt(f.limit),g=AR((0,B.useState)(f.query),2),x=g[0],j=g[1],O=AR((0,B.useState)(0),2),w=O[0],S=O[1],P=(0,en.useAdminReservations)(AI(AE({},f),{expand:"line_item,inventory_item"}),{enabled:!!e}),C=P.reservations,N=P.isLoading,k=P.count;(0,B.useEffect)(function(){S(Math.ceil(k/f.limit))},[C]);var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=iL().stringify(e);window.history.replaceState("/a/reservations","","".concat("?".concat(t)))},A=function(){(0,iM.isEmpty)(p)?_({offset:0,limit:Aq}):_(p)};(0,B.useEffect)(function(){A()},[p]);var D=AR(AS(),1)[0],E=(0,rN.useTable)({columns:D,data:C||[],manualPagination:!0,initialState:{pageIndex:Math.floor(b/v),pageSize:v},pageCount:w,autoResetPage:!1},rN.usePagination),Z=E.getTableProps,I=E.getTableBodyProps,T=E.headerGroups,M=E.rows,R=E.prepareRow,L=E.gotoPage,z=E.canPreviousPage,q=E.canNextPage,H=E.pageCount,U=E.nextPage,G=E.previousPage,W=E.state.pageIndex;return(0,B.useEffect)(function(){var e=setTimeout(function(){x?(d(x),L(0)):void 0!==x&&s()},400);return function(){return clearTimeout(e)}},[x]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(nC,{hasPagination:!0,pagingState:{count:k||0,offset:b,pageSize:b+M.length,title:"Reservations",currentPage:W+1,pageCount:H,nextPage:function(){q&&(c(1),U())},prevPage:function(){z&&(c(-1),G())},hasNext:q,hasPrev:z},numberOfRows:v,isLoading:N,children:(0,F.jsxs)(nf,AI(AE({searchClassName:"h-[40px]",handleSearch:j,searchValue:x,tableActions:(0,F.jsxs)("div",{className:"flex gap-2",children:[(0,F.jsx)(_5,{submitFilters:y,clearFilters:h,filters:m}),(0,F.jsx)(AF,{selectedLocation:f.location_id,onChange:function(e){u(e),L(0)}}),(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:i,children:"Create reservation"})]})},Z()),{children:[(0,F.jsx)(nf.Head,{children:null==T?void 0:T.map(function(e){var t=e.getHeaderGroupProps(),r=t.key,n=AT(t,["key"]);return(0,F.jsx)(nf.HeadRow,AI(AE({},n),{children:e.headers.map(function(e){var t=e.getHeaderProps(),r=t.key,n=AT(t,["key"]);return(0,F.jsx)(nf.HeadCell,AI(AE({className:"min-w-[100px]"},n),{children:e.render("Header")}),r)})}),r)})}),(0,F.jsx)(nf.Body,AI(AE({},I()),{children:M.map(function(e){R(e);var t=e.getRowProps(),r=t.key,n=AT(t,["key"]);return(0,F.jsx)(AU,AE({row:e},n),r)})}))]}))}),(0,F.jsx)(cX,{isVisible:r,isFullScreen:!0,children:(0,F.jsx)(_h,{locationId:f.location_id,onClose:n})})]})},AU=function(e){var t=e.row,r=AT(e,["row"]),n=t.original,i=(0,en.useAdminDeleteReservation)(n.id).mutate,o=AR((0,B.useState)(null),2),a=o[0],l=o[1],s=AR((0,B.useState)(!1),2),c=s[0],u=s[1];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(nf.Row,AI(AE({color:"inherit",forceDropdown:!0,actions:[{label:"Edit",onClick:function(){return l(t.original)},icon:(0,F.jsx)(eC,{size:20})},{label:"Delete",variant:"danger",icon:(0,F.jsx)(eZ,{size:20}),onClick:function(){return u(!0)}}]},r),{children:t.cells.map(function(e,t){var r=e.getCellProps(),n=r.key,i=AT(r,["key"]);return(0,B.createElement)(nf.Cell,AI(AE({},i),{key:n}),e.render("Cell",{index:t}))})})),a&&(0,F.jsx)(kY,{close:function(){return l(null)},reservation:t.original}),c&&(0,F.jsx)(tx,{text:"Are you sure you want to remove this reservation?",heading:"Remove reservation",successText:"Reservation has been removed",onDelete:Ak(function(){return Az(this,function(e){switch(e.label){case 0:return[4,i(void 0)];case 1:return[2,e.sent()]}})}),handleClose:function(){return u(!1)}})]})},AG=function(){return(0,F.jsx)("div",{className:"flex h-full grow flex-col",children:(0,F.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,F.jsx)(tI,{customHeader:(0,F.jsx)(NH,{activeView:"reservations"}),className:"h-fit",children:(0,F.jsx)(AH,{})}),(0,F.jsx)(ev,{})]})})},AV=function(){return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(NU,{})}),(0,F.jsx)(V.Route,{path:"/locations/*",element:(0,F.jsx)(kD,{})}),(0,F.jsx)(V.Route,{path:"/reservations/*",element:(0,F.jsx)(AG,{})})]})},AB=function(){var e=(0,V.useParams)(),t=e.app_name,r=e.code,n=e.state;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{children:t}),(0,F.jsx)(Y.Z,{variant:"primary",size:"large",onClick:function(){return n8.apps.authorize({application_name:t,code:r,state:n})},children:"Complete Installation"})]})};function AW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){AW(e,t,r[t])})}return e}function AY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A$(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AY(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function AK(e,t){if(null==e)return{};var r,n,i=AJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function AJ(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var AX=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=AK(e,["size","color"]);return(0,F.jsxs)("svg",A$(AQ({width:r,height:r,viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M17.5 13V15.6667C17.5 16.0203 17.3361 16.3594 17.0444 16.6095C16.7527 16.8595 16.357 17 15.9444 17H5.05556C4.643 17 4.24733 16.8595 3.95561 16.6095C3.66389 16.3594 3.5 16.0203 3.5 15.6667V13",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14.6673 6.92057L10.5007 2.75391L6.33398 6.92057",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10.5 2.75391V12.7539",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},A0=function(e){var t=e.handleClose,r=e.title,n=e.loading,i=e.onSubmit;return(0,F.jsx)(tp.Z,{handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:r})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)("div",{className:"inter-small-regular text-grey-50 mb-4 flex",children:"Initialize an export of your data"})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:t,className:"mr-2",children:"Cancel"}),(0,F.jsx)(Y.Z,{loading:n,disabled:n,variant:"primary",size:"small",onClick:i,children:"Export"})]})})]})})};function A1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function A2(e){if(Array.isArray(e))return e}function A3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A5(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function A6(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){A3(e,t,r[t])})}return e}function A8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A7(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A8(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function A9(e,t){return A2(e)||A5(e,t)||De(e,t)||A6()}function De(e,t){if(e){if("string"==typeof e)return A1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A1(e,t)}}var Dt=10,Dr=10,Dn=["completed","pending","canceled","archived","requires_action"],Di=["awaiting","captured","refunded","canceled","partially_refunded","requires_action","not_paid"],Do=["fulfilled","not_fulfilled","partially_fulfilled","returned","partially_returned","shipped","partially_shipped","requires_action","canceled"],Da=["is in the last","is older than","is after","is before","is equal to"],Dl=function(e){var t=e.tabs,r=e.activeTab,n=e.onTabClick,i=e.onSaveTab,o=e.onRemoveTab,a=e.filters,l=e.submitFilters,s=e.clearFilters,c=A9((0,B.useState)(a),2),u=c[0],d=c[1],f=A9((0,B.useState)(""),2),p=f[0],m=f[1],y=(0,(0,o3.ye)().isFeatureEnabled)("sales_channels"),h=function(e){o&&o(e)},b=function(e){n&&n(e)};(0,B.useEffect)(function(){d(a)},[a]);var v=function(e,t){d(function(r){return A7(A4({},r),A3({},e,t))})},g=Object.entries(a).reduce(function(e,t){var r=A9(t,2),n=(r[0],r[1]);return(null==n?void 0:n.open)&&(e+=1),e},0),x=A9((0,B.useState)({offset:0,limit:Dt}),2),j=x[0],O=x[1],w=(0,en.useAdminRegions)(j),S=w.regions,P=w.count,C=w.isLoading,N=(0,en.useAdminSalesChannels)({limit:Dr},{enabled:y}),k=N.sales_channels,_=N.isLoading,A=function(e){e>0?O(function(e){return A7(A4({},e),{offset:e.offset+e.limit})}):e<0&&O(function(e){return A7(A4({},e),{offset:Math.max(e.offset-e.limit,0)})})};return(0,F.jsxs)("div",{className:"flex space-x-1",children:[(0,F.jsxs)(uv,{submitFilters:function(){l(u)},clearFilters:function(){s()},triggerElement:(0,F.jsxs)("button",{className:(0,ec.Z)("rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex items-center space-x-1 focus-visible:outline-none"),children:[(0,F.jsxs)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex h-6 items-center border px-2",children:["Filters",(0,F.jsx)("div",{className:"text-grey-40 ml-1 flex items-center rounded",children:(0,F.jsx)("span",{className:"text-violet-60 inter-small-semibold",children:g||"0"})})]}),(0,F.jsx)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex items-center border p-1",children:(0,F.jsx)(sh.Z,{size:14})})]}),children:[(0,F.jsx)(dj,{filterTitle:"Status",options:Dn,filters:u.status.filter,open:u.status.open,setFilter:function(e){return v("status",e)}}),(0,F.jsx)(dj,{filterTitle:"Payment Status",options:Di,filters:u.payment.filter,open:u.payment.open,setFilter:function(e){return v("payment",e)}}),(0,F.jsx)(dj,{filterTitle:"Fulfillment Status",options:Do,filters:u.fulfillment.filter,open:u.fulfillment.open,setFilter:function(e){return v("fulfillment",e)}}),(0,F.jsx)(dj,{filterTitle:"Regions",options:(null==S?void 0:S.map(function(e){return{value:e.id,label:e.name}}))||[],isLoading:C,hasPrev:j.offset>0,hasMore:j.offset+j.limit<(null!=P?P:0),onShowPrev:function(){return A(-1)},onShowNext:function(){return A(1)},filters:u.region.filter,open:u.region.open,setFilter:function(e){return v("region",e)}}),y&&(0,F.jsx)(dj,{filterTitle:"Sales Channel",options:(null==k?void 0:k.map(function(e){return{value:e.id,label:e.name}}))||[],isLoading:_,filters:u.salesChannel.filter,open:u.salesChannel.open,setFilter:function(e){return v("salesChannel",e)}}),(0,F.jsx)(dj,{filterTitle:"Date",options:Da,filters:u.date.filter,open:u.date.open,setFilter:function(e){return v("date",e)}}),(0,F.jsx)(dC,{saveFilter:function(){i&&i(p,u)},name:p,setName:m})]}),t&&t.map(function(e){return(0,F.jsx)(dk,{onClick:function(){return b(e.value)},label:e.label,isActive:r===e.value,removable:!!e.removable,onRemove:function(){return h(e.value)}},e.value)})]})},Ds=r(17249),Dc=function(){var e,t=function(e){switch(e){case"captured":return(0,F.jsx)(nN.Z,{variant:"success",title:"Paid"});case"awaiting":return(0,F.jsx)(nN.Z,{variant:"default",title:"Awaiting"});case"requires_action":return(0,F.jsx)(nN.Z,{variant:"danger",title:"Requires action"});case"canceled":return(0,F.jsx)(nN.Z,{variant:"warning",title:"Canceled"});default:return(0,F.jsx)(nN.Z,{variant:"primary",title:"N/A"})}};return[(0,B.useMemo)(function(){return[{Header:(0,F.jsx)("div",{className:"pl-2",children:"Order"}),accessor:"display_id",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("p",{className:"text-grey-90 group-hover:text-violet-60 min-w-[100px] pl-2",children:"#".concat(t)})}},{Header:"Date added",accessor:"created_at",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{children:(0,F.jsx)(a9.Z,{content:iW()(t).format("DD MMM YYYY hh:mm a"),children:iW()(t).format("DD MMM YYYY")})})}},{Header:"Customer",accessor:"customer",Cell:function(e){var t,r,n=e.row,i=e.cell.value;return(0,F.jsx)("div",{children:(0,F.jsx)(i$,{customer:{first_name:(null==i?void 0:i.first_name)||(null===(t=n.original.shipping_address)||void 0===t?void 0:t.first_name),last_name:(null==i?void 0:i.last_name)||(null===(r=n.original.shipping_address)||void 0===r?void 0:r.last_name),email:n.original.email},color:iQ(n.index)})})}},{Header:"Fulfillment",accessor:"fulfillment_status",Cell:function(e){return e.cell.value}},{Header:"Payment status",accessor:"payment_status",Cell:function(e){return t(e.cell.value)}},{Header:"Sales Channel",accessor:"sales_channel",Cell:function(t){var r=t.cell.value;return null!==(e=null==r?void 0:r.name)&&void 0!==e?e:"N/A"}},{Header:function(){return(0,F.jsx)("div",{className:"text-right",children:"Total"})},accessor:"total",Cell:function(e){var t=e.row,r=e.cell.value;return(0,F.jsx)("div",{className:"text-right",children:(0,oy.rX)({amount:r,currency:t.original.currency_code,digits:2})})}},{Header:"",accessor:"currency_code",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{className:"text-grey-40 text-right",children:t.toUpperCase()})}},{Header:"",accessor:"country_code",Cell:function(e){var t,r,n,i,o,a=e.row;return(0,F.jsx)("div",{className:"pr-2",children:(0,F.jsx)("div",{className:"rounded-rounded flex w-full justify-end",children:(0,F.jsx)(a9.Z,{content:wb[null===(r=a.original.shipping_address)||void 0===r?void 0:null===(t=r.country_code)||void 0===t?void 0:t.toUpperCase()]||(null===(i=a.original.shipping_address)||void 0===i?void 0:null===(n=i.country_code)||void 0===n?void 0:n.toUpperCase()),children:(0,F.jsx)(Ds.Z,{className:"rounded",svg:!0,countryCode:null===(o=a.original.shipping_address)||void 0===o?void 0:o.country_code})})})})}}]},[])]};function Du(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Dd(e){if(Array.isArray(e))return e}function Df(e){if(Array.isArray(e))return Du(e)}function Dp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dm(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Dy(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Dh(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Db(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Dp(e,t,r[t])})}return e}function Dg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Dx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dg(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Dj(e,t){return Dd(e)||Dy(e,t)||Dw(e,t)||Dh()}function DO(e){return Df(e)||Dm(e)||Dw(e)||Db()}function Dw(e,t){if(e){if("string"==typeof e)return Du(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Du(e,t)}}var DS=["status","region","fulfillment_status","payment_status","created_at","q","offset","limit"],DP={incomplete:{fulfillment_status:["not_fulfilled","fulfilled"],payment_status:["awaiting"]},complete:{fulfillment_status:["shipped"],payment_status:["captured"]}},DC=function(e){return null===e?e:Object.entries(e).reduce(function(e,t){var r=Dj(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=u_(i):e[n]=i,e},{})},DN=function(e,t){switch(t.type){case"setFilters":var r;return Dx(Dv({},e),{region:t.payload.region,salesChannel:t.payload.salesChannel,fulfillment:t.payload.fulfillment,payment:t.payload.payment,status:t.payload.status,date:t.payload.date,query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return Dx(Dv({},e),{offset:0,query:t.payload});case"setDate":var n=e.date;return Dx(Dv({},e),{date:n});case"setOffset":return Dx(Dv({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},Dk=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0},D_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return DE(e,t)},[e,t]),n=(0,B.useMemo)(function(){var e=localStorage.getItem("orders::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=Dj(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=Dj((0,B.useReducer)(DN,r),2),o=i[0],a=i[1],l=Dj((0,B.useState)(n),2),s=l[0],c=l[1],u=function(){var e=Dv({},o.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=Dj(i.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):"offset"===s||"limit"===s?e[s]=c:c.open&&("date"===s?e[DD[s]]=DC(c.filter):e[DD[s]]=c.filter)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:o,r={},n=!0,i=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=Dj(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:d.open&&(r[DD[u]]=d.filter)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},f=function(){var e=d();return iL().stringify(e,{skipNulls:!0})},p=(0,B.useMemo)(function(){return u()},[o]),m=(0,B.useMemo)(function(){return d()},[o]),y=(0,B.useMemo)(function(){return f()},[o]),h=(0,B.useMemo)(function(){var e=(0,iM.omit)(m,["limit","offset"]),t=iL().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(DP)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=Dj(a.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,y=!1,h=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=Dj(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&Dk(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){y=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(y)throw h}}if(f)return u}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return null},[m,s]),b=(0,B.useMemo)(function(){return[{label:"Complete",value:"complete"},{label:"Incomplete",value:"incomplete"}].concat(DO(s))},[s]);return Dx(Dv({},o),{filters:Dv({},o),removeTab:function(e){var t=localStorage.getItem("orders::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("orders::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(Dv({},t)),n=(0,iM.omit)(r,["limit","offset"]),i=iL().stringify(n,{skipNulls:!0}),o=localStorage.getItem("orders::filters"),l=null;if(o&&(l=JSON.parse(o)),l)l[e]=i,localStorage.setItem("orders::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("orders::filters",JSON.stringify(s))}c(function(t){return DO(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),a({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in DP)t=DP[e];else{var r=s.find(function(t){return t.value===e});r&&(t=iL().parse(r.representationString))}if(t){var n=Dx(Dv({},o),{date:{open:!1,filter:null},payment:{open:!1,filter:null},fulfillment:{open:!1,filter:null},status:{open:!1,filter:null}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=Dj(u.value,2),p=f[0],m=f[1];n[DA[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}a({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:h,representationObject:m,representationString:y,queryObject:p,paginate:function(e){e>0?a({type:"setOffset",payload:o.offset+o.limit}):a({type:"setOffset",payload:Math.max(o.offset-o.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return iL().stringify(e,{skipNulls:!0})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},setDateFilter:function(e){a({type:"setDate",payload:e})},setFulfillmentFilter:function(e){a({type:"setFulfillment",payload:e})},setPaymentFilter:function(e){a({type:"setPayment",payload:e})},setStatusFilter:function(e){a({type:"setStatus",payload:e})},reset:function(){a({type:"setFilters",payload:Dx(Dv({},o),{offset:0,region:{open:!1,filter:null},payment:{open:!1,filter:null},fulfillment:{open:!1,filter:null},status:{open:!1,filter:null},salesChannel:{open:!1,filter:null},date:{open:!1,filter:null},query:null})})}})},DA={status:"status",fulfillment_status:"fulfillment",payment_status:"payment",created_at:"date",region_id:"region",sales_channel_id:"salesChannel"},DD={region:"region_id",salesChannel:"sales_channel_id",status:"status",fulfillment:"fulfillment_status",payment:"payment_status",date:"created_at"},DE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={status:{open:!1,filter:null},fulfillment:{open:!1,filter:null},region:{open:!1,filter:null},salesChannel:{open:!1,filter:null},payment:{open:!1,filter:null},date:{open:!1,filter:null},offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=Dj(l.value,2),u=c[0],d=c[1];if(DS.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d);break;case"status":("string"==typeof d||Array.isArray(d))&&(r.status={open:!0,filter:d});break;case"fulfillment_status":("string"==typeof d||Array.isArray(d))&&(r.fulfillment={open:!0,filter:d});break;case"region_id":("string"==typeof d||Array.isArray(d))&&(r.region={open:!0,filter:d});break;case"sales_channel_id":("string"==typeof d||Array.isArray(d))&&(r.salesChannel={open:!0,filter:d});break;case"payment_status":("string"==typeof d||Array.isArray(d))&&(r.payment={open:!0,filter:d});break;case"created_at":r.date={open:!0,filter:d}}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return r};function DZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function DI(e){if(Array.isArray(e))return e}function DT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DM(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function DR(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function DL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){DT(e,t,r[t])})}return e}function Dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Dq(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dz(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function DF(e,t){return DI(e)||DM(e,t)||DH(e,t)||DR()}function DH(e,t){if(e){if("string"==typeof e)return DZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DZ(e,t)}}var DU=15,DG={expand:"customer,shipping_address",fields:"id,status,display_id,created_at,email,fulfillment_status,payment_status,total,currency_code"},DV=function(e){var t=e.setContextFilters,r=(0,V.useLocation)(),n=(0,o3.ye)().isFeatureEnabled,i=uc().trackNumberOfOrders,o=["sales_channel"];n("sales_channels")&&(DG.expand.includes("sales_channel")||(DG.expand=DG.expand+",sales_channel"),o=[]);var a=D_(r.search,DG),l=a.removeTab,s=a.setTab,c=a.saveTab,u=a.availableTabs,d=a.activeFilterTab,f=a.reset,p=a.paginate,m=a.setFilters,y=a.filters,h=a.setQuery,b=a.queryObject,v=a.representationObject,g=parseInt(null==b?void 0:b.offset)||0,x=parseInt(b.limit)||DU,j=DF((0,B.useState)(null==b?void 0:b.query),2),O=j[0],w=j[1],S=DF((0,B.useState)(0),2),P=S[0],C=S[1],N=(0,en.useAdminOrders)(b,{keepPreviousData:!0,onSuccess:function(e){i({count:e.count})}}),k=N.orders,_=N.isLoading,A=N.count;(0,B.useEffect)(function(){C(Math.ceil(A/b.limit))},[k]),(0,B.useEffect)(function(){t(y)},[y]);var D=DF(Dc(),1)[0],E=(0,rN.useTable)({columns:D,data:k||[],manualPagination:!0,initialState:{pageSize:x,pageIndex:g/x,hiddenColumns:o},pageCount:P,autoResetPage:!1},rN.usePagination),Z=E.getTableProps,I=E.getTableBodyProps,T=E.headerGroups,M=E.rows,R=E.prepareRow,L=E.canPreviousPage,z=E.canNextPage,q=E.pageCount,H=E.gotoPage,U=E.nextPage,G=E.previousPage,W=E.state.pageIndex;(0,B.useEffect)(function(){var e=setTimeout(function(){O?(h(O),H(0)):f()},400);return function(){return clearTimeout(e)}},[O]);var Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=iL().stringify(e);window.history.replaceState("/a/orders","","".concat("?".concat(t)))},Y=function(){(0,iM.isEmpty)(v)?Q({offset:0,limit:DU}):Q(v)};return(0,B.useEffect)(function(){Y()},[v]),(0,F.jsx)("div",{children:(0,F.jsx)(nC,{isLoading:_,hasPagination:!0,numberOfRows:x,pagingState:{count:A,offset:b.offset,pageSize:b.offset+M.length,title:"Orders",currentPage:W+1,pageCount:q,nextPage:function(){z&&(p(1),U())},prevPage:function(){L&&(p(-1),G())},hasNext:z,hasPrev:L},children:(0,F.jsxs)(nf,Dq(DL({filteringOptions:(0,F.jsx)(Dl,{filters:y,submitFilters:m,clearFilters:function(){f(),w("")},tabs:u,onTabClick:s,activeTab:d,onRemoveTab:l,onSaveTab:c}),enableSearch:!0,handleSearch:w,searchValue:O},Z()),{className:(0,ec.Z)(DT({},"relative",_)),children:[(0,F.jsx)(nf.Head,{children:null==T?void 0:T.map(function(e){return(0,F.jsx)(nf.HeadRow,Dq(DL({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,Dq(DL({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,Dq(DL({},I()),{children:M.map(function(e){return R(e),(0,F.jsx)(nf.Row,Dq(DL({color:"inherit",linkTo:e.original.id},e.getRowProps()),{className:"group",children:e.cells.map(function(e){return(0,F.jsx)(nf.Cell,Dq(DL({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))})})};let DB=B.memo(DV);var DW=r(61639);function DQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function DY(e){if(Array.isArray(e))return e}function D$(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function DK(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function DJ(e,t){return DY(e)||D$(e,t)||DX(e,t)||DK()}function DX(e,t){if(e){if("string"==typeof e)return DQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DQ(e,t)}}var D0=void 0,D1=(0,B.createContext)({});function D2(e){var t=e.orderId,r=DJ((0,s1.Z)(!1),3),n=r[0],i=r[1],o=r[2],a=(0,en.useAdminOrderEdits)({order_id:t}),l=a.order_edits;a.count,(0,B.useEffect)(function(){n||(D0=void 0)},[n]);var s={isModalVisible:n,showModal:i,hideModal:o,orderEdits:l,activeOrderEditId:D0,setActiveOrderEdit:function(e){return D0=e}};return(0,F.jsx)(D1.Provider,{value:s,children:e.children})}function D3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){D3(e,t,r[t])})}return e}function D6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function D4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):D6(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function D8(e,t){if(null==e)return{};var r,n,i=D7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function D7(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var D9=function(e){var t=e.size,r=void 0===t?"16":t,n=e.color,i=void 0===n?"currentColor":n,o=D8(e,["size","color"]);return(0,F.jsxs)("svg",D4(D5({width:r,height:r,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M10 6.66602L13.3333 9.99935L10 13.3327",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M2.66797 2.66602V7.33268C2.66797 8.03993 2.94892 8.7182 3.44902 9.2183C3.94911 9.7184 4.62739 9.99935 5.33464 9.99935H13.3346",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ee(e,t,r[t])})}return e}function Er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function En(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Er(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Ei(e,t){if(null==e)return{};var r,n,i=Eo(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Eo(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Ea=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=Ei(e,["size","color"]);return(0,F.jsxs)("svg",En(Et({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M4.8 5H19.2C20.19 5 21 5.7875 21 6.75V17.25C21 18.2125 20.19 19 19.2 19H4.8C3.81 19 3 18.2125 3 17.25V6.75C3 5.7875 3.81 5 4.8 5Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M20 6L12 12L4 6",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function El(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){El(e,t,r[t])})}return e}function Ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Eu(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ec(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Ed(e,t){if(null==e)return{};var r,n,i=Ef(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ef(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Ep=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=Ed(e,["size","color"]);return(0,F.jsxs)("svg",Eu(Es({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M10.2 16H13.8M13.8 16V5H3V16H5M13.8 16V8.66667H18.3L19.947 10.3442C20.2812 10.6849 20.5462 11.0894 20.7269 11.5346C20.9076 11.9797 21.0004 12.4567 21 12.9383V16H19.2",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.5 19C8.88071 19 10 17.8807 10 16.5C10 15.1193 8.88071 14 7.5 14C6.11929 14 5 15.1193 5 16.5C5 17.8807 6.11929 19 7.5 19Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M16.5 19C17.8807 19 19 17.8807 19 16.5C19 15.1193 17.8807 14 16.5 14C15.1193 14 14 15.1193 14 16.5C14 17.8807 15.1193 19 16.5 19Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},Em=function(e){var t=e.form,r=t.control,n=t.path;return(0,F.jsx)("div",{children:(0,F.jsx)(tR.Qr,{name:n("type"),control:r,render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsxs)(pQ.Root,{value:r,onValueChange:n,className:"flex items-center",children:[(0,F.jsx)(pQ.SimpleItem,{label:"Refund",value:"refund",onChange:n}),(0,F.jsx)(pQ.SimpleItem,{label:"Replace",value:"replace",onChange:n})]})}})})};function Ey(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ey(e,t,r[t])})}return e}function Eb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ev(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Eb(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var Eg=[{label:"Missing Item",value:"missing_item"},{label:"Wrong Item",value:"wrong_item"},{label:"Production Failure",value:"production_failure"},{label:"Other",value:"other"}],Ex=function(e){var t=e.reasonDetails,r=e.index,n=e.isClaim,i=void 0!==n&&n,o=e.addReasonDetails,a=(0,en.useAdminReturnReasons)().return_reasons,l=(0,B.useMemo)(function(){return i?Eg:(null==a?void 0:a.map(function(e){return{label:e.label,value:e.id}}))||[]},[a,i]),s=(0,tR.cI)({defaultValues:t}),c=s.control,u=s.register,d=s.handleSubmit,f=s.formState.isDirty,p=(0,pf.N6)().pop,m=d(function(e){o(r,e),p()});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Reason for Return"}),(0,F.jsx)(tR.Qr,{control:c,name:"reason",render:function(e){var t=e.field;return(0,F.jsx)(lS,Ev(Eh({label:"Reason",placeholder:"Choose a return reason"},t),{options:l,isClearable:!0}))}}),(0,F.jsx)(vQ.Z,Eh({label:"Note",placeholder:"Product was damaged during shipping"},u("note")))]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",onClick:p,type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:m,disabled:!f,type:"button",children:"Save and go back"})]})})]})},Ej=function(){var e=(0,pf.N6)(),t=e.pop,r=e.push;return{pushScreen:function(e){r({title:"Select Reason",onBack:function(){return t()},view:(0,F.jsx)(Ex,Eh({},e))})}}},EO=function(e){var t,r=e.row,n=e.form,i=e.isClaim,o=void 0!==i&&i,a=n.control,l=n.path,s=n.setValue,c=n.clearErrors,u=n.formState.errors,d=Ej().pushScreen,f=(0,tR.qo)({control:a,name:l("items.".concat(r.index,".return_reason_details"))}),p=function(e,t){s(l("items.".concat(e,".return_reason_details")),t),t.reason&&c(l("items.".concat(e,".return_reason_details")))};return(0,F.jsxs)("div",{className:"pb-small grid w-full grid-cols-[74px,1fr,1fr]",children:[(0,F.jsx)("span",{}),(0,F.jsx)("div",{className:"flex items-center",children:(0,F.jsx)("p",{className:"inter-small-semibold",children:null==f?void 0:null===(t=f.reason)||void 0===t?void 0:t.label})}),(0,F.jsx)("div",{className:"flex justify-end",children:(0,F.jsxs)("div",{className:"flex flex-col items-end",children:[(0,F.jsx)(tR.Qr,{control:a,name:l("items.".concat(r.index,".return_reason_details")),render:function(e){var t=e.field.ref,n=e.fieldState.error;return(0,F.jsx)(Y.Z,{ref:t,variant:n?"danger":"secondary",size:"small",type:"button",className:"max-w-[120px]",onClick:function(){return d({reasonDetails:f,index:r.index,isClaim:o,addReasonDetails:p})},children:(0,F.jsxs)("span",{children:[(null==f?void 0:f.reason)?"Edit":"Select"," reason"]})})}}),!(null==f?void 0:f.reason)&&(0,F.jsx)(o9.Z,{errors:u,name:l("items.".concat(r.index,".return_reason_details"))})]})})]})},Ew=function(e){var t=e.instance,r=e.form,n=e.isClaim,i=t.getRowModel,o=t.getHeaderGroups;return(0,F.jsxs)(nf,{children:[(0,F.jsx)(nf.Head,{children:o().map(function(e){return(0,F.jsx)(nf.HeadRow,{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,F.jsx)(nf.Body,{children:i().rows.map(function(e){return(0,F.jsxs)(B.Fragment,{children:[(0,F.jsx)(nf.Row,{className:(0,ec.Z)("last-of-type:border-b-0",{"border-b-0":e.getIsExpanded()}),children:e.getVisibleCells().map(function(e){return(0,F.jsx)(nf.Cell,{style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})}),e.getIsExpanded()&&(0,F.jsx)(nf.Row,{className:(0,ec.Z)("border-t-0",{"border-b-0":e.index===i().rows.length-1}),children:(0,F.jsx)(nf.Cell,{colSpan:e.getVisibleCells().length,children:(0,F.jsx)(EO,{row:e,form:r,isClaim:n})})})]},e.id)})})]})};function ES(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function EP(e){if(Array.isArray(e))return e}function EC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EN(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ek(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E_(e,t){return EP(e)||EN(e,t)||EA(e,t)||Ek()}function EA(e,t){if(e){if("string"==typeof e)return ES(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ES(e,t)}}var ED=function(e){var t=e.value,r=e.displayValue,n=e.successDuration,i=e.showValue,o=e.iconSize,a=e.onCopy,l=E_(e6(t,{onCopied:void 0===a?function(){}:a,successDuration:void 0===n?3e3:n}),2),s=l[0],c=l[1],u=(0,td.Z)();return(0,B.useEffect)(function(){s&&u("Success","Copied!","success")},[s,u]),(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50 gap-x-xsmall flex items-center",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",type:"button",className:(0,ec.Z)("text-grey-50 p-0",EC({},"text-violet-60",s)),onClick:c,children:(0,F.jsx)(tn,{size:void 0===o?20:o})}),(void 0===i||i)&&(0,F.jsx)("span",{className:"w-full truncate",children:r||t})]})},EE=function(e){var t=e.control,r=e.name,n=e.isSelectedPath,i=e.isSelectable,o=void 0!==i&&i,a=e.updateQuantity,l=e.index,s=e.maxQuantity,c=(0,tR.qo)({control:t,name:r}),u=(0,tR.qo)({control:t,name:n,disabled:!n||!o}),d=(0,B.useMemo)(function(){return!o||u&&(null!=s?s:0)>1},[o,u,s]);return(0,F.jsx)("div",{className:"flex items-center justify-end",children:d?(0,F.jsxs)("div",{className:"inter-small-regular gap-x-2xsmall text-grey-50 grid grid-cols-3",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",type:"button",onClick:function(){return a(l,-1)},disabled:1===c,className:"h-large w-large rounded-base disabled:text-grey-30","aria-label":"Decrease quantity",children:(0,F.jsx)(rM.Z,{size:16})}),(0,F.jsx)("div",{className:"flex items-center justify-center",children:(0,F.jsx)("p",{"aria-label":"Quantity",children:c})}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",type:"button",onClick:function(){return a(l,1)},disabled:s?c===s:void 0,className:"h-large w-large rounded-base disabled:text-grey-30","aria-label":"Increase quantity",children:(0,F.jsx)(sh.Z,{size:16})})]}):(0,F.jsx)("p",{className:"inter-small-regular text-grey-50",children:c})})},EZ=(0,OJ.createColumnHelper)(),EI=function(e){var t=e.form,r=e.orderCurrency,n=t.control,i=t.setValue,o=t.getValues,a=t.path,l=(0,B.useCallback)(function(e,t){var r=a("items.".concat(e,".quantity")),n=o(r);i(r,n+t),n+t===0&&i(a("items.".concat(e,".return")),!1,{shouldDirty:!0})},[o,a,i]),s=(0,tR.qo)({control:n,name:a("items")}),c=(0,B.useCallback)(function(e){s.forEach(function(t,r){i(a("items.".concat(r,".return")),e.target.checked,{shouldDirty:!0})})},[s,a,i]);return(0,B.useMemo)(function(){return[EZ.display({id:"selection",maxSize:36,header:function(e){var t=e.table;return(0,F.jsx)("div",{className:"pl-base pr-large",children:(0,F.jsx)(rF,{checked:t.getIsAllRowsSelected(),onChange:function(e){t.toggleAllRowsSelected(e.target.checked),t.toggleAllRowsExpanded(e.target.checked),c(e)},indeterminate:t.getIsSomeRowsSelected()})})},cell:function(e){var t=e.row,r=t.index,i=t.getToggleSelectedHandler,o=t.toggleExpanded;return(0,F.jsx)(tR.Qr,{control:n,name:a("items.".concat(r,".return")),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)("div",{className:"pl-base pr-large",children:(0,F.jsx)(rF,{checked:r,onChange:function(e){i()(e),o(e.target.checked),n(e)}})})}})}}),EZ.accessor("variant_title",{header:"Product",cell:function(e){var t=e.getValue,r=e.row.original,n=t();return(0,F.jsxs)("div",{className:"gap-x-base py-xsmall flex items-center",children:[(0,F.jsx)("div",{children:(0,F.jsx)(kR,{src:r.thumbnail})}),(0,F.jsxs)("div",{className:"inter-small-regular",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("p",{children:r.product_title}),n&&(0,F.jsxs)("p",{className:"text-grey-50",children:["(",n,")"]})]}),r.sku&&(0,F.jsx)("span",{children:(0,F.jsx)(ED,{value:r.sku,displayValue:r.sku,iconSize:14})})]})]})}}),EZ.display({id:"quantity",header:function(){return(0,F.jsx)("p",{className:"text-right",children:"Quantity"})},maxSize:50,cell:function(e){var t=e.row,r=t.index,i=t.original.original_quantity;return(0,B.createElement)(EE,{index:r,maxQuantity:i,isSelectable:!0,control:n,path:a,updateQuantity:l,name:a("items.".concat(r,".quantity")),isSelectedPath:a("items.".concat(r,".return")),key:r})}}),EZ.accessor("refundable",{maxSize:80,header:function(){return(0,F.jsx)("p",{className:"text-right",children:"Refundable"})},cell:function(e){var t=e.getValue;return(0,F.jsx)("p",{className:"text-right",children:(0,oy.rX)({amount:t()||0,currency:r})})}}),EZ.display({id:"order_currency",maxSize:20,cell:function(){return(0,F.jsx)("p",{className:"pl-base text-grey-50",children:r.toUpperCase()})}})]},[n,r,a,c,l])},ET=function(e){var t=e.form,r=e.order,n=e.isClaim,i=void 0!==n&&n,o=t.control,a=t.path,l=t.formState.errors,s=(0,tR.Dq)({control:o,name:a("items"),keyName:"fieldId",shouldUnregister:!0}).fields,c=EI({form:t,orderCurrency:r.currency_code}),u=(0,OJ.useReactTable)({data:s,columns:c,getCoreRowModel:(0,OJ.getCoreRowModel)(),getExpandedRowModel:(0,OJ.getExpandedRowModel)()});return(0,F.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,F.jsxs)("h2",{className:"inter-base-semibold",children:["Items to ",i?"claim":"return"]}),(0,F.jsx)(Ew,{form:t,instance:u,isClaim:i}),(0,F.jsx)(o9.Z,{errors:l,name:a("items")})]})},EM=function(e){var t=e.count,r=void 0===t?0:t,n=e.table,i=e.className,o=n.getState,a=n.getPageCount,l=n.getCanNextPage,s=n.getCanPreviousPage,c=n.previousPage,u=n.nextPage,d=o().pagination,f=d.pageIndex,p=d.pageSize,m=(0,B.useMemo)(function(){return{from:f*p+1,to:Math.min(r,(f+1)*p)}},[r,f,p]),y=m.from,h=m.to;return(0,F.jsxs)("div",{className:(0,ec.Z)("inter-small-regular text-grey-50 flex items-center justify-between",i),children:[(0,F.jsx)("div",{children:(0,F.jsx)("p",{children:"".concat(y," – ").concat(h," of ").concat(r," results")})}),(0,F.jsxs)("div",{className:"gap-x-small flex items-center",children:[(0,F.jsx)("p",{children:"".concat(o().pagination.pageIndex+1," of ").concat(a())}),(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"h-xlarge w-xlarge disabled:text-grey-40",type:"button",disabled:!s(),onClick:c,children:(0,F.jsx)(eh,{size:16})}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"h-xlarge w-xlarge disabled:text-grey-40",type:"button",disabled:!l(),onClick:u,children:(0,F.jsx)(nw,{size:16})})]})]})]})};function ER(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ER(e,t,r[t])})}return e}function Ez(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Eq(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ez(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function EF(e,t){if(null==e)return{};var r,n,i=EH(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function EH(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var EU=function(e){var t=e.isLoading,r=e.children,n=e.placeholder,i=EF(e,["isLoading","children","placeholder"]);return(n=n||(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"}),t)?(0,F.jsx)("div",Eq(EL({className:"pt-2xlarge flex min-h-[756px] w-full items-center justify-center"},i),{children:n})):r};function EG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function EV(e){if(Array.isArray(e))return e}function EB(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function EW(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function EQ(e,t){return EV(e)||EB(e,t)||EY(e,t)||EW()}function EY(e,t){if(e){if("string"==typeof e)return EG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EG(e,t)}}var E$=function(e){var t=e.instance,r=e.isLoadingData,n=e.setSearchTerm,i=EQ((0,B.useState)(void 0),2),o=i[0],a=i[1],l=t.getHeaderGroups,s=t.getRowModel;return(0,B.useEffect)(function(){n(o)},[o,n]),(0,F.jsx)(EU,{isLoading:r,children:(0,F.jsxs)(nf,{enableSearch:!0,searchPlaceholder:"Search products",searchValue:o,handleSearch:a,children:[(0,F.jsx)(nf.Head,{children:l().map(function(e){return(0,F.jsx)(nf.HeadRow,{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,F.jsx)(nf.Body,{children:s().rows.map(function(e){return(0,F.jsx)(nf.Row,{className:"last-of-type:border-b-0",children:e.getVisibleCells().map(function(e){return(0,F.jsx)(nf.Cell,{style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})})},EK=(0,OJ.createColumnHelper)(),EJ=function(e){return(0,B.useMemo)(function(){return[EK.display({id:"selection",maxSize:36,header:function(e){var t=e.table;return(0,F.jsx)("div",{className:"pl-base pr-large",children:(0,F.jsx)(rF,{checked:t.getIsAllRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler(),indeterminate:t.getIsSomePageRowsSelected()})})},cell:function(e){var t=e.row,r=t.getIsSelected,n=t.getIsSomeSelected,i=t.getToggleSelectedHandler,o=(0,t.getCanSelect)();return(0,F.jsx)("div",{className:"pl-base pr-large",children:o?(0,F.jsx)(rF,{checked:r(),indeterminate:n(),onChange:i(),disabled:!o}):(0,F.jsx)(a9.Z,{content:"This variant does not have a price for the region/currency of this order, and cannot be selected.",children:(0,F.jsx)(rF,{checked:r(),indeterminate:n(),onChange:i(),disabled:!o})})})}}),EK.accessor("title",{header:function(e){var t=e.header.column,r=t.getToggleSortingHandler,n=t.getIsSorted;return(0,F.jsxs)("div",{className:"flex cursor-pointer items-center",onClick:r(),children:[(0,F.jsx)("p",{className:"select-none",children:"Title"}),(0,F.jsx)("div",{className:"h-large w-large flex items-center justify-center",onClick:r(),children:(0,F.jsx)(r8,{size:16,isSorted:n()})})]})},cell:function(e){var t=e.cell.getValue,r=e.row,n=r.original,i=n.product,o=n.sku,a=(0,r.getCanSelect)();return(0,F.jsxs)("div",{className:(0,ec.Z)("inter-small-regular gap-base py-xsmall flex items-center",{"opacity-50":!a}),children:[(0,F.jsx)(kR,{src:null==i?void 0:i.thumbnail}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("p",{children:[null==i?void 0:i.title," ",(0,F.jsxs)("span",{className:"text-grey-50",children:["(",t(),")"]})]}),o&&(0,F.jsx)("p",{className:"text-grey-50",children:o})]})]})}}),EK.display({maxSize:80,id:"options",header:function(){return(0,F.jsx)("p",{className:"select-none",children:"Options"})},cell:function(e){var t,r=e.row.original;return(0,F.jsx)("p",{children:null===(t=r.options)||void 0===t?void 0:t.map(function(e){return e.value}).join(", ")})}}),EK.accessor("inventory_quantity",{maxSize:20,header:function(){return(0,F.jsx)("p",{className:"select-none text-right",children:"Stock"})},cell:function(e){var t=e.cell.getValue,r=(0,e.row.getCanSelect)();return(0,F.jsx)("p",{className:(0,ec.Z)("text-right",{"opacity-50":!r}),children:t()})}}),EK.accessor("calculated_price_incl_tax",{maxSize:80,header:function(){return(0,F.jsx)("p",{className:"text-right",children:"Price"})},cell:function(t){var r=t.getValue,n=t.row.original.original_price_incl_tax,i=r();return(0,F.jsxs)("div",{className:"text-right",children:[n!==i&&(0,F.jsx)(a9.Z,{content:"The price has been overridden in a price list, that is applicable to this order.",side:"top",children:(0,F.jsx)("p",{className:"text-grey-40 cursor-default line-through",children:(0,oy.rX)({amount:n||0,currency:e.currency_code})})}),(0,F.jsx)("p",{children:(0,oy.rX)({amount:i||0,currency:e.currency_code})})]})}}),EK.display({id:"order_currency",maxSize:24,cell:function(){return(0,F.jsx)("p",{className:"pl-base text-grey-50",children:e.currency_code.toUpperCase()})}})]},[e])};function EX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function E0(e){if(Array.isArray(e))return e}function E1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E2(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function E3(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){E1(e,t,r[t])})}return e}function E6(e,t){return E0(e)||E2(e,t)||E4(e,t)||E3()}function E4(e,t){if(e){if("string"==typeof e)return EX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EX(e,t)}}var E8=12,E7=function(e){var t=e.append,r=e.remove,n=e.selectedIds,i=e.order,o=(0,pf.N6)().pop,a=E6((0,B.useState)({pageIndex:0,pageSize:E8}),2),l=a[0],s=l.pageIndex,c=l.pageSize,u=a[1],d=E6((0,B.useState)([]),2),f=d[0],p=d[1],m=(0,B.useMemo)(function(){return s*c},[s,c]),y=E6((0,B.useState)(void 0),2),h=y[0],b=y[1],v=(0,rk.N)(h,500),g=(0,en.useAdminVariants)({limit:E8,offset:m,q:v,region_id:i.region_id,customer_id:i.customer_id},{keepPreviousData:!0}),x=g.variants,j=g.count,O=g.isLoading,w=(0,B.useMemo)(function(){return j?Math.ceil(j/E8):0},[j]),S=(0,B.useMemo)(function(){return{pageIndex:s,pageSize:c}},[s,c]),P=EJ(i),C=(0,OJ.useReactTable)({columns:P,data:x||[],initialState:{rowSelection:n.reduce(function(e,t){return e[t]=!0,e},{})},state:{pagination:S,sorting:f},enableRowSelection:function(e){var t=i.currency_code,r=i.region_id,n=e.original.prices.some(function(e){return e.region_id===r}),o=e.original.prices.some(function(e){return e.currency_code===t});return!!n||!!o},onPaginationChange:u,manualPagination:!0,getRowId:function(e){return e.id},pageCount:w,onSortingChange:p,getSortedRowModel:(0,OJ.getSortedRowModel)(),getCoreRowModel:(0,OJ.getCoreRowModel)(),getPaginationRowModel:(0,OJ.getPaginationRowModel)()}),N=C.getSelectedRowModel;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(E$,{instance:C,isLoadingData:O,setSearchTerm:b}),(0,F.jsx)(EM,{table:C,count:j,className:"mt-11"})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:o,children:"Go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"button",onClick:function(){var e=N().rows.map(function(e){return e.original}),i=[],a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)!function(){var t=c.value,r=e.findIndex(function(e){return e.id===t});-1!==r&&i.push(r)}()}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}r(i),t(e.map(function(e){return{variant_id:e.id,quantity:1,sku:e.sku,product_title:e.product.title,variant_title:e.title,thumbnail:e.product.thumbnail,in_stock:e.inventory_quantity,price:e.calculated_price_incl_tax,original_price:e.original_price_incl_tax}})),o()},children:"Add products"})]})})]})},E9=function(){var e=(0,pf.N6)(),t=e.push,r=e.pop;return{pushScreen:function(e){t({title:"Add Product Variants",onBack:function(){return r()},view:(0,F.jsx)(E7,E5({},e))})}}},Ze=function(e){var t=e.instance,r=t.getHeaderGroups,n=t.getRowModel;return(0,F.jsx)("div",{children:(0,F.jsxs)(nf,{children:[(0,F.jsx)(nf.Head,{children:r().map(function(e){return(0,F.jsx)(nf.HeadRow,{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,F.jsx)(nf.Body,{children:n().rows.map(function(e){return(0,F.jsx)(nf.Row,{className:"py-small last-of-type:border-b-0",children:e.getVisibleCells().map(function(e){return(0,F.jsx)(nf.Cell,{className:"py-small",style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})})},Zt=(0,OJ.createColumnHelper)(),Zr=function(e){var t=e.form,r=e.orderCurrency,n=e.removeItem,i=t.control,o=t.setValue,a=t.getValues,l=t.path,s=(0,B.useCallback)(function(e,t){var r=l("items.".concat(e,".quantity")),n=a(r);o(r,n+t)},[a,l,o]);return(0,B.useMemo)(function(){return[Zt.display({id:"product_display",header:"Product",cell:function(e){var t=e.row.original,r=t.thumbnail,n=t.product_title,i=t.variant_title,o=t.sku;return(0,F.jsxs)("div",{className:"gap-base flex items-center",children:[(0,F.jsx)(kR,{src:r}),(0,F.jsxs)("div",{className:"inter-small-regular",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("p",{children:n}),i&&(0,F.jsxs)("p",{className:"text-grey-50",children:["(",i,")"]})]}),o&&(0,F.jsx)("span",{children:(0,F.jsx)(ED,{value:o,displayValue:o,iconSize:14})})]})]})}}),Zt.display({id:"quantity",header:function(){return(0,F.jsx)("p",{className:"text-right",children:"Quantity"})},maxSize:50,cell:function(e){var t=e.row,r=t.index,n=t.original.in_stock;return(0,B.createElement)(EE,{index:r,maxQuantity:n,control:i,updateQuantity:s,name:l("items.".concat(r,".quantity")),isSelectable:!1,key:r})}}),Zt.accessor("price",{maxSize:50,header:function(){return(0,F.jsx)("p",{className:"text-right",children:"Price"})},cell:function(e){var t=e.getValue,n=e.row.original.original_price,i=t();return(0,F.jsxs)("div",{className:"text-right",children:[n!==i&&(0,F.jsx)(a9.Z,{content:"The price has been overridden in a price list, that is applicable to this order.",side:"top",children:(0,F.jsx)("p",{className:"text-grey-40 cursor-default line-through",children:(0,oy.rX)({amount:n,currency:r})})}),(0,F.jsx)("p",{children:(0,oy.rX)({amount:i,currency:r})})]})}}),Zt.display({id:"order_currency",maxSize:20,cell:function(){return(0,F.jsx)("p",{className:"pl-base text-grey-50",children:r.toUpperCase()})}}),Zt.display({id:"remove",maxSize:28,cell:function(e){var t=e.row.index;return(0,F.jsx)("div",{className:"flex items-center justify-end",children:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"h-xlarge w-xlarge text-grey-40",type:"button",onClick:function(){return n(t)},children:(0,F.jsx)(eZ,{size:20})})})}})]},[i,r,l,n,s])},Zn=function(e){var t=e.form,r=e.order,n=t.control,i=t.path,o=(0,tR.Dq)({control:n,name:i("items"),keyName:"fieldId"}),a=o.fields,l=o.append,s=o.remove,c=Zr({orderCurrency:r.currency_code,form:t,removeItem:s}),u=(0,OJ.useReactTable)({data:a,columns:c,getCoreRowModel:(0,OJ.getCoreRowModel)()}),d=E9().pushScreen;return(0,F.jsxs)("div",{className:(0,ec.Z)({"gap-y-base flex flex-col":a.length>0,"flex items-center justify-between":!a.length}),children:[(0,F.jsx)("div",{className:"flex w-full items-center",children:(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Items to send"})}),a.length>0&&(0,F.jsx)(Ze,{instance:u}),(0,F.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:function(){return d({append:l,remove:s,selectedIds:a.map(function(e){return e.variant_id}),order:r})},children:"Add products"})})]})};function Zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Zo(e){if(Array.isArray(e))return e}function Za(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Zl(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zs(e,t){return Zo(e)||Za(e,t)||Zc(e,t)||Zl()}function Zc(e,t){if(e){if("string"==typeof e)return Zi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zi(e,t)}}var Zu=function(e){var t=e.label,r=e.errors,n=e.name,i=e.value,o=e.onChange,a=e.onBlur,l=useMemo(function(){var e="$",t=2;if(i.currency){var r=currencies[i.currency.value.toUpperCase()];e=r.symbol_native,t=r.decimal_digits}return{symbol_native:e,decimal_digits:t}},[i]),s=l.symbol_native,c=l.decimal_digits,u=useMemo(function(){return Math.pow(10,-c)},[c]),d=useCallback(function(e){return"".concat(e/Math.pow(10,c))},[c]),f=Zs(useState(void 0!==i.amount&&null!==i.amount?d(i.amount):void 0),2),p=f[0],m=f[1],y=useRef(null);useEffect(function(){var e;null===(e=y.current)||void 0===e||e.dispatchEvent(new Event("blur"))},[c]);var h=function(e,t){var r=0;t&&(r=Math.round(t*Math.pow(10,c))),o({amount:r,currency:i.currency}),m(e)};return _jsxs("div",{className:"flex w-full flex-col",children:[t&&_jsx(InputHeader,{label:t,className:"mb-xsmall"}),_jsx("div",{className:"focus-within:shadow-focus-border rounded-rounded",children:_jsxs("div",{className:"bg-grey-5 rounded-rounded shadow-border focus-within:shadow-cta relative h-10 transition-colors",children:[_jsx(NextSelect,{customStyles:{control:"border-none absolute inset-0 bg-transparent focus-within:shadow-none !shadow-none focus-within:border-none pl-0",inner_control:"!max-w-[92px] border-r border-grey-20 pl-base"},placeholder:"USD",options:Object.values(currencies).map(function(e){return{value:e.code,label:e.code}}),isMulti:!1,onBlur:a,value:i.currency,onChange:function(e){o({amount:i.amount,currency:e})}}),_jsxs("div",{className:"pl-xsmall pr-base inter-base-regular absolute inset-y-0 left-[92px] right-0 flex h-10 items-center",children:[_jsx(AmountField,{ref:y,step:u,value:p,onValueChange:function(e,t,r){return h(e,null==r?void 0:r.float)},allowNegativeValue:!1,placeholder:"-",decimalScale:c,className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-transparent text-right font-normal outline-none outline-0"}),_jsx("div",{className:"ml-2xsmall flex min-w-[16px] items-center",children:_jsx("p",{className:"text-grey-40 w-full text-right",children:s})})]})]})}),_jsx(InputError,{errors:r,name:n})]})};function Zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Zf(e){if(Array.isArray(e))return e}function Zp(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Zm(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zy(e,t){return Zf(e)||Zp(e,t)||Zh(e,t)||Zm()}function Zh(e,t){if(e){if("string"==typeof e)return Zd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zd(e,t)}}var Zb=function(e){var t=e.name,r=e.label,n=e.currencyCode,i=e.errors,o=e.value,a=e.onChange,l=v$.Q[n.toUpperCase()],s=l.symbol_native,c=l.decimal_digits,u=function(e){return"".concat(e/Math.pow(10,c))},d=Zy((0,B.useState)(null!=o?u(o):void 0),2),f=d[0],p=d[1];(0,B.useEffect)(function(){o&&p(u(o))},[o,c]);var m=function(e,t){t?a(Math.round(t*Math.pow(10,c))):a(0),p(e)},y=Math.pow(10,-c);return(0,F.jsxs)("div",{children:[r&&(0,F.jsx)(u0.Z,{label:r,className:"mb-xsmall"}),(0,F.jsxs)("div",{className:(0,ec.Z)("bg-grey-5 border-gray-20 px-base py-xsmall rounded-rounded focus-within:shadow-input focus-within:border-violet-60 inter-base-regular flex h-10 w-full items-center border",{"border-rose-50":i&&t&&i[t]}),children:[(0,F.jsx)("div",{className:"inter-base-regular text-grey-40",children:(0,F.jsx)("p",{children:n.toUpperCase()})}),(0,F.jsxs)("div",{className:"gap-2xsmall flex w-full items-center",children:[(0,F.jsx)(vY.Z,{step:y,value:f,onValueChange:function(e,t,r){return m(e,null==r?void 0:r.float)},allowNegativeValue:!1,placeholder:"-",decimalScale:c,className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-transparent text-right font-normal outline-none outline-0"}),(0,F.jsx)("div",{className:"ml-2xsmall flex min-w-[16px] items-center",children:(0,F.jsx)("p",{className:"text-grey-40 w-full text-right",children:s})})]})]}),(0,F.jsx)(o9.Z,{name:t,errors:i})]})},Zv=function(e){var t=e.form,r=e.initialValue,n=void 0===r?0:r,i=e.order,o=t.control,a=t.path,l=t.setValue,s=t.clearErrors,c=t.formState.errors,u=(0,tR.qo)({control:o,name:a("amount")});return(0,F.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-[40px_1fr] justify-end",children:[(0,F.jsx)("div",{className:"flex flex-shrink justify-end",children:void 0!==u?(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",className:"h-10 w-10","aria-label":"Cancel editing refund amount",onClick:function(){l(a("amount"),void 0),s(a("amount"))},children:(0,F.jsx)(c2.Z,{size:16,className:"text-grey-40"})}):(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",type:"button",onClick:function(){l(a("amount"),n)},"aria-label":"Edit refund amount",className:"h-10 w-10",children:(0,F.jsx)(eC,{size:16,className:"text-grey-40"})})}),(0,F.jsx)("div",{children:void 0!==u?(0,F.jsx)(tR.Qr,{control:o,name:a("amount"),rules:{min:{value:0,message:"Refund amount cannot be negative"},required:!0,validate:function(e){if(void 0===e||!(e>=0))return"The refund amount must be at least 0"}},render:function(e){var t=e.field,r=t.value,n=t.onChange,o=t.name;return(0,F.jsx)(Zb,{currencyCode:i.currency_code,onChange:n,name:o,value:r,errors:c})}}):(0,F.jsx)("div",{className:"flex h-10 items-center",children:(0,F.jsx)("p",{children:(0,oy.rX)({amount:n,currency:i.currency_code})})})})]})},Zg=function(e){var t=e.thumbnail,r=e.productTitle,n=e.variantTitle,i=e.sku,o=e.quantity,a=e.price,l=e.total,s=e.currencyCode,c=e.isFree;return(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,F.jsx)("div",{children:(0,F.jsx)(kR,{src:t})}),(0,F.jsxs)("div",{className:"inter-small-regular",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("p",{children:r}),n&&(0,F.jsxs)("p",{className:"text-grey-50",children:["(",n,")"]})]}),i&&(0,F.jsx)("span",{children:(0,F.jsx)(ED,{value:i,displayValue:i,iconSize:14})})]})]}),(0,F.jsxs)("div",{className:"inter-small-regular gap-x-base flex items-center",children:[(0,F.jsx)("p",{className:"text-grey-40",children:(0,oy.rX)({amount:a,currency:s})}),(0,F.jsxs)("p",{className:"text-grey-40",children:["x ",o]}),(0,F.jsx)("p",{className:(0,ec.Z)({"line-through":void 0!==c&&c}),children:(0,oy.rX)({amount:l,currency:s})})]})]})},Zx=function(e){var t=e.type,r=e.title,n=e.price,i=e.currencyCode;return(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,F.jsx)("div",{className:" rounded-rounded text-grey-50 flex h-10 w-[30px] items-center justify-center",children:(0,F.jsx)(D9,{size:16})}),(0,F.jsxs)("div",{className:"inter-small-regular",children:[(0,F.jsx)("p",{children:"return"===t?"Return shipping":"Replacement shipping"}),(0,F.jsx)("p",{className:"text-grey-50",children:r})]})]}),(0,F.jsx)("p",{className:"inter-small-regular",children:n?(0,oy.rX)({amount:n,currency:i}):"Free"})]})},Zj=function(e){var t=e.form,r=e.order,n=t.control,i=(0,tR.qo)({control:n,name:"return_items.items",defaultValue:[]}),o=(0,B.useMemo)(function(){return i.filter(function(e){return e.return})},[i]),a=(0,tR.qo)({control:n,name:"return_shipping"}),l=(0,tR.qo)({control:n,name:"additional_items.items",defaultValue:[]}),s=(0,tR.qo)({control:n,name:"replacement_shipping"}),c=(0,tR.qo)({control:n,name:"claim_type.type"}),u=(0,B.useMemo)(function(){var e=o.reduce(function(e,t){return e+t.total/t.original_quantity*t.quantity},0);return{total:e<0?(0,oy.rX)({amount:0,currency:r.currency_code}):(0,oy.rX)({amount:e,currency:r.currency_code}),totalAsNumber:e<0?0:e}},[o,r.currency_code]);return(null==o?void 0:o.length)>0||(null==l?void 0:l.length)>0?(0,F.jsxs)("div",{className:"inter-base-regular",children:[(0,F.jsxs)("div",{className:"gap-y-base border-grey-20 py-large flex flex-col border-y",children:[o.length>0&&(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-small",children:"Claimed items"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[o.map(function(e,t){return(0,F.jsx)(Zg,{currencyCode:r.currency_code,productTitle:e.product_title,quantity:e.quantity,sku:e.sku,price:e.total/e.original_quantity,total:e.total/e.original_quantity*e.quantity,variantTitle:e.variant_title,thumbnail:e.thumbnail},t)}),a.option&&(0,F.jsx)(Zx,{currencyCode:r.currency_code,price:a.price,title:a.option.label,type:"return"})]})]}),"refund"!==c&&l.length>0&&(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"mb-small gap-x-2xsmall flex items-center",children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:"Replacement items"}),(0,F.jsx)(rm.Z,{type:"warning",content:"The customer will receive a full refund for the claimed items, as the cost of replacement items and shipping will not be deducted. Alternatively, you can choose to set a custom refund amount when you receive the returned items or create an exchange instead."})]}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[l.map(function(e,t){return(0,F.jsx)(Zg,{currencyCode:r.currency_code,productTitle:e.product_title,quantity:e.quantity,sku:e.sku,price:e.price,total:e.price*e.quantity,variantTitle:e.variant_title,thumbnail:e.thumbnail,isFree:!0},t)}),(null==s?void 0:s.option)&&(0,F.jsx)(Zx,{currencyCode:r.currency_code,price:s.price,title:s.option.label,type:"replacement"})]})]})]}),(0,F.jsx)("div",{className:"pt-large",children:(0,F.jsxs)("div",{className:"inter-large-semibold flex items-center justify-between","data-testid":"refund-amount-container",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:"Refund amount"}),(0,F.jsx)(rm.Z,{type:"info",content:"replace"===c&&a.option?"The customer will be refunded once the returned items are received":"The customer will be refunded immediately"})]}),(0,F.jsx)("div",{className:"flex items-center",children:"refund"===c?(0,F.jsx)(Zv,{form:(0,tL.G)(t,"refund_amount"),order:r,initialValue:u.totalAsNumber}):(0,F.jsx)("p",{children:u.total})})]})})]}):null},ZO=function(e){var t=e.form,r=e.type,n=t.control,i=t.path,o={return:"return",swap:"exchange",claim:"claim"}[r];return(0,F.jsx)(tR.Qr,{control:n,name:i("send_notification"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"mr-xsmall",children:(0,F.jsx)(rF,{checked:r,onChange:n})}),(0,F.jsx)("p",{className:"inter-small-semibold mr-1.5",children:"Send notifications"}),(0,F.jsx)(rm.Z,{type:"info",content:"If unchecked the customer will not receive communication about this ".concat(o,".")})]})}})};function Zw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Zw(e,t,r[t])})}return e}function ZP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZP(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}!function(e){e.SHIPPING="shipping",e.BILLING="billing",e.LOCATION="location"}(O||(O={}));var ZN=function(e){var t=e.form,r=e.countryOptions,n=e.type,i=e.required,o=void 0===i||i,a=e.noTitle,l=t.register,s=t.path,c=t.control,u=t.formState.errors;return(0,F.jsxs)("div",{children:[(n===O.SHIPPING||n===O.BILLING)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"General"}),(0,F.jsxs)("div",{className:"gap-large mt-4 mb-8 grid grid-cols-2",children:[(0,F.jsx)(ry.Z,ZC(ZS({},l(s("first_name"),{required:!!o&&s6.Z.required("First name"),pattern:s6.Z.whiteSpaceRule("First name")})),{placeholder:"First Name",label:"First Name",required:o,errors:u})),(0,F.jsx)(ry.Z,ZC(ZS({},t.register(s("last_name"),{required:!!o&&s6.Z.required("Last name"),pattern:s6.Z.whiteSpaceRule("Last name")})),{placeholder:"Last Name",label:"Last Name",required:o,errors:u})),(0,F.jsx)(ry.Z,ZC(ZS({},t.register(s("company"),{pattern:s6.Z.whiteSpaceRule("Company")})),{placeholder:"Company",label:"Company",errors:u})),(0,F.jsx)(ry.Z,ZC(ZS({},t.register(s("phone"))),{placeholder:"Phone",label:"Phone",errors:u}))]})]}),!(void 0!==a&&a)&&(0,F.jsx)("span",{className:"inter-base-semibold",children:"".concat(n===O.BILLING?"Billing Address":n===O.SHIPPING?"Shipping Address":"Address")}),(0,F.jsxs)("div",{className:"gap-y-large gap-x-large mt-4 grid grid-cols-2",children:[(0,F.jsx)(ry.Z,ZC(ZS({},t.register(s("address_1"),{required:!!o&&s6.Z.required("Address 1"),pattern:s6.Z.whiteSpaceRule("Address 1")})),{placeholder:"Address 1",label:"Address 1",required:o,errors:u})),(0,F.jsx)(ry.Z,ZC(ZS({},t.register(s("address_2"),{pattern:s6.Z.whiteSpaceRule("Address 2")})),{placeholder:"Address 2",label:"Address 2",errors:u})),(0,F.jsx)(ry.Z,ZC(ZS({},t.register(s("postal_code"),{required:!!o&&s6.Z.required("Postal code"),pattern:s6.Z.whiteSpaceRule("Postal code")})),{placeholder:"Postal code",label:"Postal code",required:o,autoComplete:"off",errors:u})),(0,F.jsx)(ry.Z,ZC(ZS({placeholder:"City",label:"City"},t.register(s("city"),{required:!!o&&s6.Z.required("City"),pattern:s6.Z.whiteSpaceRule("City")})),{required:o,errors:u})),(0,F.jsx)(ry.Z,ZC(ZS({},t.register(s("province"),{pattern:s6.Z.whiteSpaceRule("Province")})),{placeholder:"Province",label:"Province",errors:u})),(0,F.jsx)(tR.Qr,{control:c,name:s("country_code"),rules:{required:!!o&&s6.Z.required("Country")},render:function(e){var t=e.field,n=t.value,i=t.onChange;return(0,F.jsx)(lS,{label:"Country",required:o,value:n,options:r,onChange:i,name:s("country_code"),errors:u,isClearable:!o})}})]}),(0,F.jsxs)("div",{className:"mt-xlarge gap-y-base flex flex-col",children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(t,"metadata")})]})]})};function Zk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Zk(e,t,r[t])})}return e}var ZA=function(e){var t=e.form,r=e.order,n=t.resetField,i=t.path,o=t.formState.errors,a=t.control,l=(0,en.useAdminRegion)(r.region_id).region,s=(0,tR.qo)({control:a,name:i()}),c=(0,B.useMemo)(function(){return["first_name","last_name","address_1","city","country_code","postal_code","country_code"].every(function(e){return!!s[e]&&!o[i(e)]})},[s,o,i]),u=(0,B.useMemo)(function(){return(null==l?void 0:l.countries.map(function(e){return{value:e.iso_2,label:e.display_name}}))||[]},[l]),d=(0,pf.N6)().pop;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(ZN,{form:t,type:O.SHIPPING,countryOptions:u,required:!0})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:function(){n(i()),d()},children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",disabled:!c,type:"button",onClick:d,children:"Save and go back"})]})})]})},ZD=function(){var e=(0,pf.N6)(),t=e.pop,r=e.push;return{pushScreen:function(e){r({title:"Shipping Information",onBack:function(){return t()},view:(0,F.jsx)(ZA,Z_({},e))})}}},ZE=function(e){var t=e.form,r=e.order,n=t.control,i=t.path,o=ZD().pushScreen,a=(0,tR.qo)({control:n,name:i()}),l=a.address_1,s=a.address_2,c=a.city,u=a.country_code,d=a.company,f=a.postal_code,p=a.province;return(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Shipping address"}),(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50",children:[(0,F.jsx)("p",{children:"".concat(l).concat(s?", ".concat(s):"")}),(0,F.jsxs)("p",{children:["".concat(d?"".concat(d,", "):""),"".concat(f," ").concat(c)]}),(0,F.jsxs)("p",{children:["".concat(p?"".concat(p,", "):""),null==u?void 0:u.label]})]}),(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:function(){return o({form:t,order:r})},children:"Ship to a different address"})]})]})},ZZ=function(e){var t=e.form,r=e.order,n=e.isReturn,i=void 0!==n&&n,o=e.isClaim,a=void 0!==o&&o,l=e.required,s=t.control,c=t.path,u=t.setValue,d=t.formState.errors,f=(0,en.useAdminShippingOptions)({region_id:r.region_id,is_return:i}).shipping_options,p=(0,B.useMemo)(function(){return(null==f?void 0:f.map(function(e){var t;return{label:e.name,value:{id:e.id,taxRate:(null===(t=e.tax_rates)||void 0===t?void 0:t.reduce(function(e,t){return e+(t.rate||0)/100},0))||0},suffix:(0,F.jsx)("span",{className:(0,ec.Z)({"line-through":a&&0!==e.amount}),children:(0,oy.rX)({amount:e.price_incl_tax||e.amount||0,currency:r.currency_code})})}}))||[]},[a,r.currency_code,f]),m=(0,tR.qo)({control:s,name:c("option")}),y=(0,tR.qo)({control:s,name:c("price")});return(0,F.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsxs)("h2",{className:"inter-base-semibold",children:["Shipping for ",i?"return":"replacement"," items"]}),(0,F.jsx)(ZI,{isClaim:a,isReturn:i})]}),(0,F.jsx)(tR.Qr,{control:s,name:c("option"),rules:{required:!!(void 0!==l&&l)&&"Shipping method is required"},render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.onBlur,o=t.ref,a=t.name;return(0,F.jsx)(lS,{ref:o,placeholder:"Choose shipping method",label:"Shipping method",name:a,options:p,value:r,onChange:n,onBlur:i,isClearable:!0,errors:d})}}),m&&!a&&(0,F.jsx)("div",{className:"flex w-full items-center justify-end",children:void 0!==y?(0,F.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,F.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-[1fr_40px]",children:[(0,F.jsx)(tR.Qr,{control:s,name:c("price"),render:function(e){var t=e.field,n=t.value,i=t.onChange;return(0,F.jsx)(v3,{currencyCode:r.currency_code,onChange:i,amount:n,name:c("price"),errors:d})}}),(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",className:"flex h-10 w-10 items-center justify-center",type:"button",onClick:function(){u(c("price"),void 0)},children:(0,F.jsx)(eZ,{size:20,className:"text-grey-40"})})]})}):(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",className:"h-10",onClick:function(){if(m){var e=null==f?void 0:f.find(function(e){return e.id===m.value.id});u(c("price"),Math.round(((null==e?void 0:e.amount)||0)*(1+m.value.taxRate)))}},children:"Add custom price"})})]})},ZI=function(e){var t=e.isClaim,r=void 0!==t&&t,n=e.isReturn,i=void 0!==n&&n,o=(0,B.useMemo)(function(){return r&&i?"Return shipping for items claimed by the customer is complimentary.":i?void 0:"Shipping for replacement items is complimentary."},[r,i]);return o?(0,F.jsx)("p",{className:"inter-small-regular text-grey-50",children:o}):null};function ZT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ZM(e){if(Array.isArray(e))return ZT(e)}function ZR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZL(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Zz(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ZR(e,t,r[t])})}return e}function ZF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ZH(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZF(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ZU(e){return ZM(e)||ZL(e)||ZG(e)||Zz()}function ZG(e,t){if(e){if("string"==typeof e)return ZT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZT(e,t)}}var ZV=function(e){return e.shipping_address?Object.keys(e.shipping_address).map(function(e){return e}).reduce(function(t,r){if("country_code"===r){var n=e.shipping_address.country_code?wb[e.shipping_address.country_code.toUpperCase()]:"";t[r]={value:e.shipping_address[r],label:n}}else t[r]=e.shipping_address[r]||void 0;return t},{}):{address_1:void 0,address_2:void 0,city:void 0,company:void 0,country_code:void 0,first_name:void 0,last_name:void 0,phone:void 0,postal_code:void 0,province:void 0}},ZB=function(e,t){var r=e.items.reduce(function(e,t){return e.set(t.id,Zq({},t))},new Map),n=[];if(e.claims&&e.claims.length){var i=!0,o=!1,a=void 0;try{for(var l,s=e.claims[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c,u=l.value;u.claim_items=null!==(c=u.claim_items)&&void 0!==c?c:[],n=ZU(n).concat(ZU(u.claim_items)),("not_fulfilled"!==u.fulfillment_status||"na"!==u.payment_status)&&u.additional_items&&u.additional_items.length&&(r=u.additional_items.filter(function(e){return e.shipped_quantity||e.shipped_quantity===e.fulfilled_quantity}).reduce(function(e,t){return e.set(t.id,Zq({},t))},r))}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}if(!t&&e.swaps&&e.swaps.length){var d=!0,f=!1,p=void 0;try{for(var m,y=e.swaps[Symbol.iterator]();!(d=(m=y.next()).done);d=!0)r=m.value.additional_items.reduce(function(e,t){return e.set(t.id,Zq({},t))},r)}catch(e){f=!0,p=e}finally{try{d||null==y.return||y.return()}finally{if(f)throw p}}}var h=!0,b=!1,v=void 0;try{for(var g,x=n[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var j=g.value,O=r.get(j.item_id);O&&(O.quantity=O.quantity-(j.item.returned_quantity||0),0!==O.quantity?r.set(O.id,O):r.delete(O.id))}}catch(e){b=!0,v=e}finally{try{h||null==x.return||x.return()}finally{if(b)throw v}}return ZU(r.values())},ZW=function(){return{send_notification:!0}},ZQ=function(){return{items:[]}},ZY=function(){return{type:"refund"}},Z$=function(){return{option:void 0,price:void 0}},ZK=function(e){var t,r={items:[]};return(null===(t=e.returnable_items)||void 0===t?void 0:t.length)&&e.returnable_items.forEach(function(e){var t=e.quantity-(e.returned_quantity||0);r.items.push({item_id:e.id,thumbnail:e.thumbnail,refundable:e.refundable||0,product_title:e.variant.product.title,sku:e.variant.sku,variant_title:e.variant.title,quantity:t,original_quantity:e.quantity,total:e.total||0,return_reason_details:{note:void 0,reason:void 0},return:!1})}),r},ZJ=function(e,t){var r,n=ZK(e);return{items:null==n?void 0:null===(r=n.items)||void 0===r?void 0:r.reduce(function(e,r){if(!r)return e;var n=t.items.findIndex(function(e){return e.item_id===r.item_id});if(r.item_id&&n>-1){var i=t.items[n],o=i.requested_quantity-i.received_quantity,a=(r.total||0)/r.original_quantity;e.push(ZH(Zq({},r),{price:a,quantity:o,original_quantity:o}))}return e},[])}},ZX=function(e,t){return{receive_items:ZJ(e,t)}},Z0=function(e){return{claim_type:ZY(),additional_items:ZQ(),notification:ZW(),return_items:ZK(e),shipping_address:ZV(e),return_shipping:Z$(),replacement_shipping:Z$()}};function Z1(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Z2(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Z1(o,n,i,a,l,"next",e)}function l(e){Z1(o,n,i,a,l,"throw",e)}a(void 0)})}}function Z3(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Z5=function(e){var t,r=e.order,n=e.onClose,i=(0,pf.N6)(),o=(0,en.useAdminCreateClaim)(r.id),a=o.mutate,l=o.isLoading,s=(0,o3.ye)().isFeatureEnabled,c=s("inventoryService")&&s("stockLocationService"),u=(0,en.useAdminStockLocations)({},{enabled:c}),d=u.stock_locations,f=u.refetch,p=u.isLoading;(0,B.useEffect)(function(){c&&f()},[c,f]);var m=(0,tR.cI)({defaultValues:Z0(r)}),y=m.handleSubmit,h=m.reset,b=m.formState.isDirty,v=m.setError,g=m.control,x=(0,td.Z)(),j=o2();(0,B.useEffect)(function(){h(Z0(r))},[r,h]);var O=function(){i.reset(),n()},w=(t=Z2(function(){var e;return Z3(this,function(t){switch(t.label){case 0:if(e=!0,!b)return[3,2];return[4,j({heading:"Are you sure you want to close?",text:"You have unsaved changes, are you sure you want to close?"})];case 1:e=t.sent(),t.label=2;case 2:return e&&O(),[2]}})}),function(){return t.apply(this,arguments)}),S=y(function(e){var t,n,i=e.claim_type.type,o=e.return_shipping,l=null===(t=e.refund_amount)||void 0===t?void 0:t.amount,s=null===(n=e.selected_location)||void 0===n?void 0:n.value,c="replace"===i&&e.replacement_shipping.option?{option_id:e.replacement_shipping.option.value.id,price:0}:void 0,u=e.return_items.items.filter(function(e){return e.return}).map(function(e){var t;return{item_id:e.item_id,quantity:e.quantity,note:e.return_reason_details.note||void 0,reason:null===(t=e.return_reason_details.reason)||void 0===t?void 0:t.value}}),d=u.filter(function(e){return!e.reason});if(d.length>0){d.forEach(function(e){var t=u.findIndex(function(t){return t.item_id===e.item_id});v("return_items.items.".concat(t,".return_reason_details"),{type:"manual",message:"Please select a reason"},{shouldFocus:!0})});return}if("replace"===i&&!e.replacement_shipping.option){v("replacement_shipping.option",{type:"manual",message:"A shipping method for replacement items is required"},{shouldFocus:!0});return}a({claim_items:u,type:i,return_shipping:o.option?{option_id:o.option.value.id,price:0}:void 0,additional_items:"replace"===i?e.additional_items.items.map(function(e){return{quantity:e.quantity,variant_id:e.variant_id}}):void 0,no_notification:!e.notification.send_notification,refund_amount:"refund"===i&&void 0!==l?l:void 0,shipping_address:"replace"===i?{address_1:e.shipping_address.address_1,address_2:e.shipping_address.address_2||void 0,city:e.shipping_address.city,country_code:e.shipping_address.country_code.value,company:e.shipping_address.company||void 0,first_name:e.shipping_address.first_name,last_name:e.shipping_address.last_name,phone:e.shipping_address.phone||void 0,postal_code:e.shipping_address.postal_code,province:e.shipping_address.province||void 0}:void 0,return_location_id:s,shipping_methods:c?[c]:void 0},{onSuccess:function(){x("Successfully created claim","A claim for order #".concat(r.display_id," was successfully created"),"success"),O()},onError:function(e){x("Error creating claim",(0,tf.e)(e),"error")}})}),P=(0,tR.qo)({control:m.control,name:"claim_type.type"}),C=(0,tR.qo)({control:m.control,name:"return_items.items"});return(0,F.jsx)(pf.ZP,{open:!0,handleClose:w,context:i,isLargeModal:!0,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:w,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Create Claim"})}),(0,F.jsxs)("form",{onSubmit:S,"data-testid":"register-claim-form",children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsx)(ET,{form:(0,tL.G)(m,"return_items"),order:r,isClaim:!0}),(0,F.jsx)(ZZ,{form:(0,tL.G)(m,"return_shipping"),order:r,isReturn:!0,isClaim:!0}),c&&(0,F.jsxs)("div",{className:"mb-8",children:[(0,F.jsx)("h3",{className:"inter-base-semibold ",children:"Location"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Choose which location you want to return the items to."}),p?(0,F.jsx)(ei.Z,{}):(0,F.jsx)(tR.Qr,{control:g,name:"selected_location",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(lS,{className:"mt-2",placeholder:"Select Location to Return to",value:r,isMulti:!1,onChange:n,options:(null==d?void 0:d.map(function(e){return{label:e.name,value:e.id}}))||[]})}})]}),(0,F.jsx)(Em,{form:(0,tL.G)(m,"claim_type")}),"replace"===P&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Zn,{form:(0,tL.G)(m,"additional_items"),order:r}),(0,F.jsx)(ZE,{form:(0,tL.G)(m,"shipping_address"),order:r}),(0,F.jsx)(ZZ,{form:(0,tL.G)(m,"replacement_shipping"),isClaim:!0,order:r})]}),(0,F.jsx)(Zj,{form:m,order:r})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,F.jsx)(ZO,{form:(0,tL.G)(m,"notification"),type:"claim"}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:w,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",disabled:!b||l||(null==C?void 0:C.length)<1,children:"Submit and close"})]})]})})]})]})})};function Z6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Z4(e){if(Array.isArray(e))return e}function Z8(e){if(Array.isArray(e))return Z6(e)}function Z7(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Z9(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ie(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function It(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ir(e,t){return Z4(e)||Z9(e,t)||Ii(e,t)||Ie()}function In(e){return Z8(e)||Z7(e)||Ii(e)||It()}function Ii(e,t){if(e){if("string"==typeof e)return Z6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z6(e,t)}}var Io=function(e){var t=e.onSubmit,r=e.reason,n=e.existingNote,i=e.customReturnOptions,o=e.addImage,a=e.images,l=(0,B.useContext)(pf.ej).pop,s=(0,en.useAdminReturnReasons)().return_reasons,c=Ir((0,B.useState)(n||""),2),u=c[0],d=c[1],f=Ir((0,B.useState)([]),2),p=f[0],m=f[1],y=Ir((0,B.useState)(r?{value:r,label:r.label}:null),2),h=y[0],b=y[1],v=function(e){var t=In(p);t.splice(t.indexOf(e),1),m(t)},g=function(e){n8.uploads.delete(e)},x=function(e){d(e.target.value)};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"h-full",children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-4",children:"Reason for Return"}),(0,F.jsx)(jT,{label:"Reason",value:h,onChange:b,options:(void 0===i?void 0:i)||(null==s?void 0:s.map(function(e){return{value:e,label:e.label}}))||[]}),(0,F.jsx)(ry.Z,{label:"Note",value:u,className:"my-4",onChange:function(e){return x(e)}}),o&&(0,F.jsxs)("div",{children:[a&&a.map(function(e){return(0,F.jsx)(Ia,{url:e,name:e.split("//").pop(),size:void 0,onDelete:function(){return g(e)}})}),p.map(function(e){return(0,F.jsx)(Ia,{url:window.URL.createObjectURL(e),name:e.name,size:(e.size/1e3).toFixed(2),onDelete:function(){return v(e)}})}),(0,F.jsx)("div",{className:"h-20",children:(0,F.jsx)(PP,{onFileChosen:function(e){m(function(t){return In(t).concat(In(e))})},filetypes:["image/png","image/jpeg"]})})]})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return l()},children:"Back"}),(0,F.jsx)(Y.Z,{variant:"primary",className:"w-[112px]",size:"small",disabled:void 0===h,onClick:function(){t(h,u,p),l()},children:"Add"})]})})]})},Ia=function(e){var t=e.url,r=e.onDelete,n=e.name,i=e.size;return(0,F.jsxs)("div",{className:"my-8 flex w-full items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"bg-voilet-60 h-20 w-20",children:(0,F.jsx)("img",{className:"rounded-rounded h-full w-full object-cover",src:t})}),(0,F.jsxs)("div",{className:"inter-small-regular ml-8 flex flex-col",children:[n,i&&(0,F.jsxs)("span",{className:"text-grey-50",children:[i," KB"]})]})]}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"text-grey-40 h-8 w-8",onClick:r,children:(0,F.jsx)(eZ,{size:20})})]})},Il=function(e,t){var r=e.swap_id,n=e.claim_order_id,i=function(e,t){return e.filter(function(e){return e.id==t&&e.canceled_at}).length>0};return r?i(t.swaps,r):!!n&&i(t.claims,n)},Is=function(e){var t=e.shipped_quantity,r=e.returned_quantity;return!!r&&(!!t&&r===t||void 0)},Ic=function(e,t){return Il(e,t)||Is(e)};function Iu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Id(e){if(Array.isArray(e))return Iu(e)}function If(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Ip(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){If(o,n,i,a,l,"next",e)}function l(e){If(o,n,i,a,l,"throw",e)}a(void 0)})}}function Im(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iy(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ih(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ib(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Im(e,t,r[t])})}return e}function Iv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ig(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Iv(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Ix(e){return Id(e)||Iy(e)||Ij(e)||Ih()}function Ij(e,t){if(e){if("string"==typeof e)return Iu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iu(e,t)}}function IO(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Iw=function(e){var t,r=e.order,n=e.allItems,i=e.toReturn,o=e.customReturnOptions,a=void 0===o?void 0:o,l=e.imagesOnReturns,s=void 0!==l&&l,c=e.setToReturn,u=e.isSwapOrClaim,d=void 0!==u&&u,f=(0,B.useContext)(pf.ej),p=f.push,m=f.pop,y=function(e,t){var r;t.quantity-t.returned_quantity===i[t.id].quantity&&e>0||1===i[t.id].quantity&&e<0||c(Ig(Ib({},i),Im({},t.id,Ig(Ib({},i[t.id]),{quantity:((null===(r=i[t.id])||void 0===r?void 0:r.quantity)||0)+e}))))},h=function(e){var t=e.id,r=Ib({},i);t in i?delete r[t]:r[t]={images:s?[]:null,reason:null,note:"",quantity:e.quantity-e.returned_quantity},c(r)},b=(t=Ip(function(e){return IO(this,function(t){return[2,n8.uploads.create(e).then(function(e){return e.data.uploads.map(function(e){return e.url})})]})}),function(e){return t.apply(this,arguments)}),v=function(e,t,r,n){s&&(null==r?void 0:r.length)?b(r).then(function(r){c(Ig(Ib({},i),Im({},n,Ig(Ib({},i[n]),{reason:e,note:t,images:Ix(i[n].images||[]).concat(Ix(r))}))))}):c(Ig(Ib({},i),Im({},n,Ig(Ib({},i[n]),{reason:e,note:t}))))};return(0,F.jsxs)(nf,{children:[(0,F.jsx)(nf.Head,{className:"border-none",children:(0,F.jsxs)(nf.HeadRow,{className:"text-grey-50 inter-small-semibold",children:[(0,F.jsx)(nf.HeadCell,{colSpan:2,children:"Product Details"}),(0,F.jsx)(nf.HeadCell,{className:"pr-8 text-right",children:"Quantity"}),(0,F.jsx)(nf.HeadCell,{className:"text-right",children:"Refundable"}),(0,F.jsx)(nf.HeadCell,{})]})}),(0,F.jsx)(nf.Body,{children:n.map(function(e){if(!(e.returned_quantity===e.quantity||Il(e,r))){var t,n,o,l,c,u,f,b,g,x,j,O=e.id in i;return(0,F.jsxs)(B.Fragment,{children:[(0,F.jsxs)(nf.Row,{className:(0,ec.Z)("border-b-grey-0 hover:bg-grey-0"),children:[(0,F.jsx)(nf.Cell,{children:(0,F.jsxs)("div",{className:"ml-1 flex h-full items-center",children:[(0,F.jsx)("div",{onClick:function(){return h(e)},className:"text-grey-0 border-grey-30 rounded-base mr-4 flex h-5 w-5 cursor-pointer justify-center border ".concat(O&&"bg-violet-60"),children:(0,F.jsx)("span",{className:"self-center",children:O&&(0,F.jsx)(rT,{size:16})})}),(0,F.jsx)("input",{className:"hidden",checked:O,tabIndex:-1,onChange:function(){return h(e)},type:"checkbox"})]})}),(0,F.jsx)(nf.Cell,{children:(0,F.jsxs)("div",{className:"flex min-w-[240px] py-2",children:[(0,F.jsx)("div",{className:"h-[40px] w-[30px] ",children:(0,F.jsx)("img",{className:"h-full w-full rounded object-cover",src:e.thumbnail})}),(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50 ml-4 flex flex-col",children:[(0,F.jsx)("span",{children:(0,F.jsx)("span",{className:"text-grey-90",children:e.title})}),(0,F.jsxs)("div",{className:"flex gap-4",children:[(null==e?void 0:null===(t=e.variant)||void 0===t?void 0:t.title)&&(0,F.jsx)("span",{children:e.variant.title}),(null==e?void 0:null===(n=e.variant)||void 0===n?void 0:n.sku)&&(0,F.jsx)(ED,{value:e.variant.sku,iconSize:14})]})]})]})}),(0,F.jsx)(nf.Cell,{className:"w-32 pr-8 text-right",children:e.id in i?(0,F.jsxs)("div",{className:"text-grey-50 flex w-full justify-end text-right ",children:[(0,F.jsx)("span",{onClick:function(){return y(-1,e)},className:"hover:bg-grey-20 mr-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded",children:(0,F.jsx)(rM.Z,{size:16})}),(0,F.jsx)("span",{children:i[e.id].quantity||""}),(0,F.jsx)("span",{onClick:function(){return y(1,e)},className:(0,ec.Z)("hover:bg-grey-20 ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded"),children:(0,F.jsx)(sh.Z,{size:16})})]}):(0,F.jsx)("span",{className:"text-grey-40",children:e.quantity-e.returned_quantity})}),(0,F.jsx)(nf.Cell,{className:"text-right",children:(0,oy.rX)({currency:r.currency_code,amount:e.refundable||0})}),(0,F.jsx)(nf.Cell,{className:"text-grey-40 pr-1 text-right",children:r.currency_code.toUpperCase()})]}),O&&!d&&(0,F.jsxs)(nf.Row,{className:"hover:bg-grey-0 last:border-b-0",children:[(0,F.jsx)(nf.Cell,{}),(0,F.jsx)(nf.Cell,{colSpan:2,children:(0,F.jsx)("div",{className:"max-w-[470px] truncate",children:(null===(o=i[e.id])||void 0===o?void 0:o.reason)&&(0,F.jsxs)("span",{className:"inter-small-regular text-grey-40",children:[(0,F.jsx)("span",{className:"text-grey-80 mr-1",children:(0,F.jsx)("span",{className:"inter-small-semibold mr-1",children:null===(l=i[e.id])||void 0===l?void 0:l.reason.label})}),(null===(c=i[e.id])||void 0===c?void 0:c.note)||"",(0,F.jsx)("span",{className:"ml-2",children:(null===(f=i[e.id])||void 0===f?void 0:null===(u=f.images)||void 0===u?void 0:u.length)>0&&(0,F.jsxs)(F.Fragment,{children:["(",null===(g=i[e.id])||void 0===g?void 0:null===(b=g.images)||void 0===b?void 0:b.length," image"," ",(null===(j=i[e.id])||void 0===j?void 0:null===(x=j.images)||void 0===x?void 0:x.length)>1?"s":"",")"]})})]})})}),(0,F.jsx)(nf.Cell,{colSpan:2,children:(0,F.jsx)("div",{className:"mb-small flex w-full justify-end",children:(0,F.jsx)(Y.Z,{onClick:function(){var t,r;return p(IS(m,null===(t=i[e.id])||void 0===t?void 0:t.reason,null===(r=i[e.id])||void 0===r?void 0:r.note,a,s,function(t,r,n){return v(t,r,n,e.id)}))},variant:"ghost",size:"small",className:"border-grey-20 border",children:"Select Reason"})})})]})]},e.id)}})})]})},IS=function(e,t,r,n,i,o){return{title:"Return Reasons",onBack:function(){return e()},view:(0,F.jsx)(Io,{reason:t,existingNote:r,customReturnOptions:n,addImage:i,onSubmit:o})}},IP=function(e){var t=e.useCustomShippingPrice,r=e.inclTax,n=e.shippingPrice,i=e.currencyCode,o=e.updateShippingPrice,a=e.setUseCustomShippingPrice;return t?(0,F.jsxs)("div",{className:"gap-x-base mt-4 flex w-full items-end",children:[(0,F.jsx)(Zb,{label:"Shipping price (".concat(r?"incl. tax":"excl. tax",")"),currencyCode:i,onChange:function(e){return o(null!=e?e:0)},value:n}),(0,F.jsx)(Y.Z,{onClick:function(){return a(!1)},className:"text-grey-40 h-10 w-10",variant:"ghost",size:"small",children:(0,F.jsx)(eZ,{size:20})})]}):(0,F.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,F.jsx)(Y.Z,{onClick:function(){return a(!0)},variant:"ghost",className:"border-grey-20 border",size:"small",children:"Add custom price"})})};function IC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function IN(e){if(Array.isArray(e))return IC(e)}function Ik(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I_(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function IA(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ID(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ik(e,t,r[t])})}return e}function IE(e){return IN(e)||I_(e)||IZ(e)||IA()}function IZ(e,t){if(e){if("string"==typeof e)return IC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IC(e,t)}}var II=function(e,t){var r=e.items.reduce(function(e,t){return e.set(t.id,ID({},t))},new Map),n=[];if(e.claims&&e.claims.length){var i=!0,o=!1,a=void 0;try{for(var l,s=e.claims[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c,u,d=l.value;(null===(c=d.return_order)||void 0===c?void 0:c.status)!=="canceled"&&(d.claim_items=null!==(u=d.claim_items)&&void 0!==u?u:[],n=IE(n).concat(IE(d.claim_items))),("not_fulfilled"!==d.fulfillment_status||"na"!==d.payment_status)&&d.additional_items&&d.additional_items.length&&(r=d.additional_items.filter(function(e){return e.shipped_quantity||e.shipped_quantity===e.fulfilled_quantity}).reduce(function(e,t){return e.set(t.id,ID({},t))},r))}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}if(!t&&e.swaps&&e.swaps.length){var f=!0,p=!1,m=void 0;try{for(var y,h=e.swaps[Symbol.iterator]();!(f=(y=h.next()).done);f=!0){var b=y.value;"not_fulfilled"!==b.fulfillment_status&&(r=b.additional_items.reduce(function(e,t){return e.set(t.id,ID({},t))},r))}}catch(e){p=!0,m=e}finally{try{f||null==h.return||h.return()}finally{if(p)throw m}}}var v=!0,g=!1,x=void 0;try{for(var j,O=n[Symbol.iterator]();!(v=(j=O.next()).done);v=!0){var w=j.value,S=r.get(w.item_id);S&&(S.quantity=S.quantity-w.quantity,0!==S.quantity?r.set(S.id,S):r.delete(S.id))}}catch(e){g=!0,x=e}finally{try{v||null==O.return||O.return()}finally{if(g)throw x}}return IE(r.values())};function IT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function IM(e){if(Array.isArray(e))return e}function IR(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function IL(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){IR(o,n,i,a,l,"next",e)}function l(e){IR(o,n,i,a,l,"throw",e)}a(void 0)})}}function Iz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iq(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function IF(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function IH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Iz(e,t,r[t])})}return e}function IU(e,t){return IM(e)||Iq(e,t)||IG(e,t)||IF()}function IG(e,t){if(e){if("string"==typeof e)return IT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IT(e,t)}}function IV(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var IB=function(e){var t,r=e.order,n=e.onDismiss,i=(0,en.useMedusa)().client,o=(0,B.useContext)(pf.ej),a=(0,o3.ye)().isFeatureEnabled,l=a("inventoryService")&&a("stockLocationService"),s=IU((0,B.useState)(!1),2),c=s[0],u=s[1],d=IU((0,B.useState)(!1),2),f=d[0],p=d[1],m=IU((0,B.useState)(0),2),y=m[0],h=m[1],b=IU((0,B.useState)(0),2),v=b[0],g=b[1],x=IU((0,B.useState)(null),2),j=x[0],O=x[1],w=IU((0,B.useState)({}),2),S=w[0],P=w[1],C=IU((0,B.useState)(!1),2),N=C[0],k=C[1],_=IU((0,B.useState)(r.no_notification),2),A=_[0],D=_[1],E=IU((0,B.useState)(),2),Z=E[0],I=E[1],T=IU((0,B.useState)(null),2),M=T[0],R=T[1],L=IU((0,B.useState)([]),2),z=L[0],q=L[1],H=(0,td.Z)(),U=(0,en.useAdminStockLocations)({},{enabled:l}),G=U.stock_locations,V=U.refetch;B.useEffect(function(){l&&V()},[l,V]);var W=(0,en.useAdminRequestReturn)(r.id);(0,B.useEffect)(function(){r&&q(II(r,!1))},[r]);var Q=B.useMemo(function(){return new Map(r.items.map(function(e){return[e.id,e]}))},[r.items]),$=IU((0,B.useState)(new Map),2),J=$[0],X=$[1];B.useEffect(function(){var e;(e=IL(function(){var e;return IV(this,function(t){switch(t.label){case 0:var r;if(!z.length||!l)return[2,new Map];return[4,Promise.all(z.map((r=IL(function(e){return IV(this,function(t){switch(t.label){case 0:if(!e.variant_id)return[2,void 0];return[4,i.admin.variants.getInventory(e.variant_id)];case 1:return[2,t.sent()]}})}),function(e){return r.apply(this,arguments)})))];case 1:return e=t.sent(),[2,new Map(e.filter(function(e){return!!e}).map(function(e){var t=e.variant;return[t.id,t.inventory[0].location_levels]}))]}})}),function(){return e.apply(this,arguments)})().then(function(e){X(e)})},[z,i.admin.variants,l]);var ee=B.useMemo(function(){return Object.entries(S).map(function(e){var t,r=IU(e,1)[0],n=Q.get(r);return null==n||!n.variant_id||!!(null===(t=J.get(n.variant_id))||void 0===t?void 0:t.find(function(e){return e.location_id===(null==j?void 0:j.value)}))||null==j||!j.value}).every(Boolean)},[S,Q,null==j?void 0:j.value,J]),et=(0,en.useAdminShippingOptions)({region_id:r.region_id,is_return:!0}),er=et.isLoading,eo=et.shipping_options;(0,B.useEffect)(function(){var e=Object.keys(S).map(function(e){return z.find(function(t){return t.id===e})}).filter(function(e){return void 0!==e}).reduce(function(e,t){return e+(t.refundable||0)/(t.quantity-t.returned_quantity)*S[t.id].quantity},0)-(Z||0);h(e),g(e)},[S,Z]);var ea=(t=IL(function(){var e,t;return IV(this,function(i){return e={items:Object.entries(S).map(function(e){var t,r=IU(e,2),n=r[0],i=r[1],o=IH({reason_id:null===(t=i.reason)||void 0===t?void 0:t.value.id},i);return delete o.reason,IH({item_id:n},fk(o))}),refund:Math.round(v),no_notification:A!==r.no_notification?A:void 0},j&&l&&(e.location_id=j.value),M&&(t=M.tax_rates.reduce(function(e,t){return e+t.rate/100},0),e.return_shipping={option_id:M.value,price:Z?Math.round(Z/(1+t)):0}),u(!0),[2,W.mutateAsync(e).then(function(){return n()}).then(function(){return H("Success","Successfully returned order","success")}).catch(function(e){return H("Error",(0,tf.e)(e),"error")}).finally(function(){return u(!1)})]})}),function(){return t.apply(this,arguments)});return(0,B.useEffect)(function(){if(!N&&M){var e=null==eo?void 0:eo.find(function(e){return M.value===e.id});e&&I(e.price_incl_tax)}},[N,M]),(0,F.jsx)(pf.ZP,{context:o,handleClose:n,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"Request Return"})}),(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"mb-7",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Items to return"}),(0,F.jsx)(Iw,{order:r,allItems:z,toReturn:S,setToReturn:function(e){return P(e)}})]}),l&&(0,F.jsxs)("div",{className:"mb-8",children:[(0,F.jsx)("h3",{className:"inter-base-semibold ",children:"Location"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Choose which location you want to return the items to."}),(0,F.jsx)(lS,{className:"mt-2",placeholder:"Select Location to Return to",value:j,isMulti:!1,onChange:O,options:(null==G?void 0:G.map(function(e){return{label:e.name,value:e.id}}))||[]}),!ee&&(0,F.jsxs)("div",{className:"bg-orange-10 border-orange-20 rounded-rounded text-yellow-60 gap-x-base mt-4 flex border p-4",children:[(0,F.jsx)("div",{className:"text-orange-40",children:(0,F.jsx)(K.Z,{size:20,fillType:"solid"})}),(0,F.jsx)("div",{children:"The selected location does not have inventory levels for the selected items. The return can be requested but can't be received until an inventory level is created for the selected location."})]})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold ",children:"Shipping"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Choose which shipping method you want to use for this return."}),er?(0,F.jsx)("div",{className:"flex justify-center",children:(0,F.jsx)(ei.Z,{size:"medium",variant:"secondary"})}):(0,F.jsx)(lS,{className:"mt-2",placeholder:"Add a shipping method",value:M,onChange:function(e){R(e);var t=null==eo?void 0:eo.find(function(t){return e.value===t.id});t&&I(t.price_incl_tax)},options:(null==eo?void 0:eo.map(function(e){return{label:e.name,value:e.id,tax_rates:e.tax_rates}}))||[]}),M&&(0,F.jsx)(IP,{inclTax:!0,useCustomShippingPrice:N,shippingPrice:Z,currencyCode:r.currency_code,updateShippingPrice:function(e){e>=0&&I(e)},setUseCustomShippingPrice:k})]}),y>=0&&(0,F.jsxs)("div",{className:"mt-10",children:[!N&&M&&(0,F.jsxs)("div",{className:"inter-small-regular mb-4 flex justify-between",children:[(0,F.jsx)("span",{children:"Shipping"}),(0,F.jsxs)("div",{children:[(0,oy.RS)(r.currency_code,Z||0)," ",(0,F.jsx)("span",{className:"text-grey-40 ml-3",children:r.currency_code.toUpperCase()})]})]}),(0,F.jsxs)("div",{className:"inter-base-semibold flex w-full justify-between",children:[(0,F.jsx)("span",{children:"Total Refund"}),(0,F.jsx)("div",{className:"flex items-center",children:!f&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("span",{className:"text-grey-40 mr-2 cursor-pointer",onClick:function(){return p(!0)},children:[(0,F.jsx)(eC,{size:20})," "]}),"".concat((0,oy.RS)(r.currency_code,v)," ").concat(r.currency_code.toUpperCase())]})})]}),f&&(0,F.jsx)(jX.Root,{className:"mt-2",size:"small",currentCurrency:r.currency_code,readOnly:!0,children:(0,F.jsx)(jX.Amount,{label:"Amount",amount:v,onChange:function(e){e<r.refundable_amount&&e>=0&&g(e)}})})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-between",children:[(0,F.jsxs)("div",{className:"flex h-full cursor-pointer items-center",onClick:function(){return D(!A)},children:[(0,F.jsx)("div",{className:"rounded-base border-grey-30 text-grey-0 flex h-5 w-5 justify-center border ".concat(!A&&"bg-violet-60"),children:(0,F.jsx)("span",{className:"self-center",children:!A&&(0,F.jsx)(rT,{size:16})})}),(0,F.jsx)("input",{id:"noNotification",className:"hidden",name:"noNotification",checked:!A,onChange:function(){return D(!A)},type:"checkbox"}),(0,F.jsxs)("span",{className:"gap-x-xsmall text-grey-90 ml-3 flex items-center",children:["Send notifications",(0,F.jsx)(rm.Z,{content:"Notify customer of created return"})]})]}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex",children:[(0,F.jsx)(Y.Z,{onClick:function(){return n()},className:"w-[112px]",type:"submit",size:"small",variant:"ghost",children:"Back"}),(0,F.jsx)(Y.Z,{onClick:ea,loading:c,className:"w-[112px]",type:"submit",size:"small",variant:"primary",disabled:0===Object.keys(S).length,children:"Submit"})]})]})})]})})},IW=function(e,t){var r=e.find(function(e){return e.region_id===t.region_id});return(r||(r=e.find(function(e){return e.currency_code===t.currency_code})),r)?(0,oy.rX)({currency:t.currency_code,amount:r.amount*(1+t.tax_rate/100)}):0},IQ=function(e){var t=e.isAdditionalItems,r=e.order,n=e.itemsToAdd,i=e.handleRemoveItem,o=e.handleToAddQuantity;return(0,F.jsxs)(nf,{children:[(0,F.jsxs)(nf.HeadRow,{className:"text-grey-50 inter-small-semibold",children:[(0,F.jsx)(nf.HeadCell,{children:"Product Details"}),(0,F.jsx)(nf.HeadCell,{className:"pr-8 text-right",children:"Quantity"}),(0,F.jsx)(nf.HeadCell,{className:"text-right",children:t?"Unit Price":"Refundable"}),(0,F.jsx)(nf.HeadCell,{}),(0,F.jsx)(nf.HeadCell,{})]}),(0,F.jsx)(nf.Body,{children:n.map(function(e,t){return(0,F.jsxs)(nf.Row,{className:(0,ec.Z)("border-b-grey-0 hover:bg-grey-0"),children:[(0,F.jsx)(nf.Cell,{children:(0,F.jsxs)("div",{className:"flex min-w-[240px] py-2",children:[(0,F.jsx)("div",{className:"h-[40px] w-[30px] ",children:(0,F.jsx)("img",{className:"h-full w-full rounded object-cover",src:e.product.thumbnail})}),(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50 ml-4 flex flex-col",children:[(0,F.jsxs)("span",{children:[(0,F.jsx)("span",{className:"text-grey-90",children:e.product.title})," "]}),(0,F.jsx)("span",{children:e.title})]})]})}),(0,F.jsx)(nf.Cell,{className:"w-32 pr-8 text-right",children:(0,F.jsxs)("div",{className:"text-grey-50 flex w-full justify-end text-right ",children:[(0,F.jsx)("span",{onClick:function(){return o(-1,t)},className:"hover:bg-grey-20 mr-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded",children:(0,F.jsx)(rM.Z,{size:16})}),(0,F.jsx)("span",{children:e.quantity||""}),(0,F.jsx)("span",{onClick:function(){return o(1,t)},className:(0,ec.Z)("hover:bg-grey-20 ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded"),children:(0,F.jsx)(sh.Z,{size:16})})]})}),(0,F.jsx)(nf.Cell,{className:"text-right",children:IW(e.prices,r)}),(0,F.jsx)(nf.Cell,{className:"text-grey-40 pr-1 text-right",children:r.currency_code.toUpperCase()}),(0,F.jsx)(nf.Cell,{children:(0,F.jsx)(Y.Z,{onClick:function(){return i(t)},variant:"ghost",size:"small",className:"text-grey-40 h-8 w-8",children:(0,F.jsx)(eZ,{size:20})})})]})})})]})};function IY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function I$(e){if(Array.isArray(e))return e}function IK(e){if(Array.isArray(e))return IY(e)}function IJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IX(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function I0(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function I1(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I2(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){IJ(e,t,r[t])})}return e}function I5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I6(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I5(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function I4(e,t){return I$(e)||I0(e,t)||I7(e,t)||I1()}function I8(e){return IK(e)||IX(e)||I7(e)||I2()}function I7(e,t){if(e){if("string"==typeof e)return IY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IY(e,t)}}var I9=function(e){switch(e){case"proposed":return"warning";case"published":return"success";case"rejected":return"danger";default:return"default"}},Te=function(e){var t=e.onSubmit,r=e.selectedItems,n=(0,B.useContext)(pf.ej).pop,i=I4((0,B.useState)(""),2),o=i[0],a=i[1],l=I4((0,B.useState)(0),2),s=l[0],c=l[1],u=I4((0,B.useState)(0),2),d=u[0],f=u[1],p=I4((0,B.useState)(0),2),m=p[0],y=p[1],h=I4((0,B.useState)([]),2),b=h[0],v=h[1],g=(0,rk.N)(o,500),x=(0,en.useAdminVariants)({q:g,limit:12,offset:s}),j=x.isLoading,O=x.count,w=x.variants;(0,B.useEffect)(function(){void 0!==O&&f(Math.ceil(O/12))},[O]);var S=(0,B.useMemo)(function(){return[{Header:"Name",accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.product.thumbnail?(0,F.jsx)("img",{src:t.product.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{children:t.product.title}),t.title]})]})}},{Header:"Status",accessor:"status",Cell:function(e){var t=e.row.original;return(0,F.jsx)(nN.Z,{title:"".concat(t.product.status.charAt(0).toUpperCase()).concat(t.product.status.slice(1)),variant:I9(t.product.status)})}},{Header:(0,F.jsx)("div",{className:"text-right",children:"In Stock"}),accessor:"inventory_quantity",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"text-right",children:t.inventory_quantity})}}]},[]),P=(0,rN.useTable)({columns:S,data:w||[],manualPagination:!0,initialState:{pageIndex:m,pageSize:12,selectedRowIds:r.reduce(function(e,t){return e[t.id]=!0,e},{})},pageCount:d,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},rN.usePagination,rN.useRowSelect,function(e){e.visibleColumns.push(function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,F.jsx)("div",{children:(0,F.jsx)(rF,I3({},t()))})},Cell:function(e){var t=e.row;return(0,F.jsx)("div",{children:(0,F.jsx)(rF,I3({},t.getToggleRowSelectedProps()))})}}].concat(I8(e))})}),C=P.getTableProps,N=P.getTableBodyProps,k=P.rows,_=P.prepareRow,A=P.canPreviousPage,D=P.canNextPage,E=P.pageCount,Z=P.nextPage,I=P.previousPage,T=P.state,M=T.pageIndex,R=T.pageSize,L=T.selectedRowIds;return(0,B.useEffect)(function(){v(function(e){return I8(e.filter(function(e){return Object.keys(L).findIndex(function(t){return t===e.id})>-1})).concat(I8((null==w?void 0:w.filter(function(t){return 0>e.findIndex(function(e){return e.id===t.id})&&Object.keys(L).findIndex(function(e){return e===t.id})>-1}))||[]))})},[L]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(nC,{isLoading:j,numberOfRows:12,hasPagination:!0,pagingState:{count:O,offset:s,pageSize:s+k.length,title:"Products",currentPage:M+1,pageCount:E,nextPage:function(){D&&(c(function(e){return e+R}),y(function(e){return e+1}),Z())},prevPage:function(){A&&(c(function(e){return Math.max(e-R,0)}),y(function(e){return e-1}),I())},hasNext:D,hasPrev:A},children:(0,F.jsx)(nf,I6(I3({immediateSearchFocus:!0,enableSearch:!0,searchPlaceholder:"Search Products..",searchValue:o,handleSearch:function(e){c(0),y(0),a(e)}},C()),{children:(0,F.jsx)(nf.Body,I6(I3({},N()),{children:j?(0,F.jsx)(nf.Row,{children:(0,F.jsx)(nf.Cell,{colSpan:S.length,className:"flex items-center justify-center",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})})}):k.map(function(e,t){return _(e),(0,F.jsx)(nf.Row,I6(I3({},e.getRowProps()),{children:e.cells.map(function(e){return(0,F.jsx)(nf.Cell,I6(I3({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))}))})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return n()},children:"Back"}),(0,F.jsx)(Y.Z,{variant:"primary",className:"w-[112px]",size:"small",onClick:function(){t(b),n()},children:"Add"})]})})]})};function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Tr(e){if(Array.isArray(e))return e}function Tn(e){if(Array.isArray(e))return Tt(e)}function Ti(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function To(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ta(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Tl(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ts(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ti(e,t,r[t])})}return e}function Tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Td(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tu(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Tf(e,t){return Tr(e)||Ta(e,t)||Tm(e,t)||Tl()}function Tp(e){return Tn(e)||To(e)||Tm(e)||Ts()}function Tm(e,t){if(e){if("string"==typeof e)return Tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tt(e,t)}}var Ty=function(e){var t,r,n=e.order,i=e.onDismiss,o=(0,en.useAdminOrder)(n.id).refetch,a=(0,en.useAdminCreateSwap)(n.id),l=a.mutate,s=a.isLoading,c=(0,B.useContext)(pf.ej),u=Tf((0,B.useState)({}),2),d=u[0],f=u[1],p=Tf((0,B.useState)(!1),2),m=p[0],y=p[1],h=Tf((0,B.useState)([]),2),b=h[0],v=h[1],g=Tf((0,B.useState)(null),2),x=g[0],j=g[1],O=Tf((0,B.useState)(void 0),2),w=O[0],S=O[1],P=Tf((0,B.useState)(n.no_notification),2),C=P[0],N=P[1],k=Tf(B.useState(null),2),_=k[0],A=k[1],D=(0,o3.ye)().isFeatureEnabled,E=D("inventoryService")&&D("stockLocationService"),Z=(0,en.useAdminStockLocations)({},{enabled:E}),I=Z.stock_locations,T=Z.refetch,M=Z.isLoading;B.useEffect(function(){E&&T()},[E,T]);var R=(0,td.Z)(),L=(0,B.useMemo)(function(){return n?II(n,!1):[]},[n]),z=(0,en.useAdminShippingOptions)({is_return:!0,region_id:n.region_id}),q=z.shipping_options,H=z.isLoading,U=(0,B.useMemo)(function(){return Object.keys(d).map(function(e){return L.find(function(t){return t.id===e})}).reduce(function(e,t){return t?e+(t.refundable||0)/(t.quantity-t.returned_quantity)*d[t.id].quantity:e},0)-(w||0)},[d,w]),G=(0,B.useMemo)(function(){return b.reduce(function(e,t){var r,i,o=null===(r=t.prices.find(function(e){return e.region_id===n.region_id}))||void 0===r?void 0:r.amount;return o||(o=null===(i=t.prices.find(function(e){return e.currency_code===n.currency_code}))||void 0===i?void 0:i.amount),o||(o=0),e+o*t.quantity},0)},[b]);(0,B.useEffect)(function(){if(!m&&x&&q){var e=q.find(function(e){return x.value===e.id});S(null==e?void 0:e.amount)}},[m,x]);var V=function(e){var t=b.map(function(e){return e.id});v(function(r){return Tp(r).concat(Tp(e.filter(function(e){return!t.includes(e.id)}).map(function(e){return Td(Tc({},e),{quantity:1})})))})};return(0,F.jsx)(pf.ZP,{context:c,handleClose:i,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:i,children:(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"Register Exchange"})}),(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"mb-7",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Items to return"}),(0,F.jsx)(Iw,{order:n,allItems:L,toReturn:d,setToReturn:function(e){return f(e)}})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold ",children:"Shipping"}),H?(0,F.jsx)("div",{className:"flex justify-center",children:(0,F.jsx)(ei.Z,{size:"medium",variant:"secondary"})}):(0,F.jsx)(jT,{label:"Shipping Method",className:"mt-2",placeholder:"Add a shipping method",value:x,onChange:function(e){if(q){j(e);var t=null==q?void 0:q.find(function(t){return e.value===t.id});S(null==t?void 0:t.amount)}},options:(null==q?void 0:q.map(function(e){return{label:e.name,value:e.id}}))||[]}),x&&(0,F.jsx)(IP,{inclTax:!1,useCustomShippingPrice:m,shippingPrice:w,currencyCode:n.currency_code,updateShippingPrice:function(e){void 0!==e&&e>=0?S(e):S(0)},setUseCustomShippingPrice:y})]}),E&&(0,F.jsxs)("div",{className:"my-8",children:[(0,F.jsx)("h3",{className:"inter-base-semibold ",children:"Location"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Choose which location you want to return the items to."}),M?(0,F.jsx)(ei.Z,{}):(0,F.jsx)(jT,{className:"mt-2",placeholder:"Select Location to Return to",value:_,isMulti:!1,onChange:A,options:(null==I?void 0:I.map(function(e){return{label:e.name,value:e.id}}))||[]})]}),(0,F.jsxs)("div",{className:"mt-8 flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-base-semibold ",children:"Items to send"}),0===b.length?(0,F.jsx)(Y.Z,{variant:"ghost",className:"border-grey-20 border",size:"small",onClick:function(){c.push(Th(c.pop,b,V))},children:"Add Product"}):(0,F.jsx)(F.Fragment,{})]}),b.length>0&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(IQ,{isAdditionalItems:!0,order:n,itemsToAdd:b,handleRemoveItem:function(e){var t=Tp(b);t.splice(e,1),v(t)},handleToAddQuantity:function(e,t){var r=Tp(b),n=r[t];r[t]=Td(Tc({},n),{quantity:n.quantity+e}),v(r)}}),(0,F.jsx)("div",{className:"flex w-full justify-end",children:(0,F.jsx)(Y.Z,{variant:"ghost",className:"border-grey-20 border",size:"small",onClick:function(){c.push(Th(c.pop,b,V))},children:"Add Product"})})]}),(0,F.jsxs)("div",{className:"text-grey-90 inter-small-regular mt-8 flex items-center justify-between",children:[(0,F.jsx)("span",{children:"Return Total"}),(0,F.jsx)("span",{children:(0,oy.rX)({currency:n.currency_code,amount:U})})]}),(0,F.jsxs)("div",{className:"text-grey-90 inter-small-regular mt-2 flex items-center justify-between",children:[(0,F.jsx)("span",{children:"Additional Total"}),(0,F.jsx)("span",{children:(0,oy.rX)({currency:n.currency_code,amount:G,digits:2,tax:null!==(t=n.tax_rate)&&void 0!==t?t:void 0})})]}),(0,F.jsxs)("div",{className:"text-grey-90 inter-small-regular mt-2 flex items-center justify-between",children:[(0,F.jsx)("span",{children:"Outbond Shipping"}),(0,F.jsx)("span",{children:"Calculated at checkout"})]}),(0,F.jsxs)("div",{className:"inter-base-semibold mt-4 flex items-center justify-between",children:[(0,F.jsx)("span",{children:"Estimated difference"}),(0,F.jsx)("span",{className:"inter-large-semibold",children:(0,oy.rX)({currency:n.currency_code,amount:G-U,digits:2,tax:null!==(r=n.tax_rate)&&void 0!==r?r:void 0})})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-between",children:[(0,F.jsxs)("div",{className:"flex h-full cursor-pointer items-center",onClick:function(){return N(!C)},children:[(0,F.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(!C&&"bg-violet-60"),children:(0,F.jsx)("span",{className:"self-center",children:!C&&(0,F.jsx)(rT,{size:16})})}),(0,F.jsx)("input",{id:"noNotification",className:"hidden",name:"noNotification",checked:!C,type:"checkbox"}),(0,F.jsxs)("span",{className:"text-grey-90 gap-x-xsmall ml-3 flex items-center",children:["Send notifications",(0,F.jsx)(rm.Z,{content:"If unchecked the customer will not receive communication about this exchange"})]})]}),(0,F.jsx)(Y.Z,{onClick:function(){var e={return_items:Object.entries(d).map(function(e){var t,r,n,i=Tf(e,2),o=i[0],a=i[1];return{item_id:o,note:null!==(r=a.note)&&void 0!==r?r:void 0,quantity:a.quantity,reason_id:null!==(n=null===(t=a.reason)||void 0===t?void 0:t.value.id)&&void 0!==n?n:void 0}}),additional_items:b.map(function(e){return{variant_id:e.id,quantity:e.quantity}}),no_notification:C!==n.no_notification?C:void 0};return E&&_&&(e.return_location_id=_.value),x&&(e.return_shipping={option_id:x.value,price:Math.round(w||0)}),l(e,{onSuccess:function(){o(),R("Success","Successfully created exchange","success"),i()},onError:function(e){R("Error",(0,tf.e)(e),"error")}})},disabled:0===Object.keys(d).length||0===b.length,loading:s,type:"submit",variant:"primary",children:"Complete"})]})})]})})},Th=function(e,t,r){return{title:"Add Products",onBack:function(){return e()},view:(0,F.jsx)(Te,{selectedItems:t||[],onSubmit:r})}},Tb=["customer","billing_address","shipping_address","discounts","discounts.rule","shipping_methods","shipping_methods.shipping_option","payments","items","fulfillments","fulfillments.tracking_links","returns","returns.shipping_method","returns.shipping_method.shipping_option","returns.shipping_method.tax_lines","refunds","claims.claim_items.item","claims.fulfillments","claims.return_order","claims.additional_items.variant.product.profiles","swaps.return_order","swaps.additional_items.variant.product.profiles","swaps.fulfillments","returnable_items"],Tv=function(){return(0,(0,o3.ye)().isFeatureEnabled)("order_editing")&&-1===Tb.indexOf("edits")&&Tb.push("edits"),{orderRelations:Tb.join(",")}};function Tg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Tx(e){if(Array.isArray(e))return Tg(e)}function Tj(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function TO(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tw(e){return Tx(e)||Tj(e)||TS(e)||TO()}function TS(e,t){if(e){if("string"==typeof e)return Tg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tg(e,t)}}!function(e){e.REQUESTED="requested",e.RECEIVED="received",e.REQUIRES_ACTION="requires_action",e.CANCELED="canceled"}(w||(w={}));var TP=function(e){var t=Tv().orderRelations,r=(0,en.useAdminOrder)(e,{expand:t}),n=r.order,i=r.refetch,o=r.isLoading,a=(0,en.useAdminOrderEdits)({order_id:e}),l=a.order_edits,s=a.isLoading,c=(0,o3.ye)().isFeatureEnabled,u=(0,en.useAdminNotes)({resource_id:e,limit:100,offset:0}),d=u.notes,f=u.isLoading,p=(0,en.useAdminNotifications)({resource_id:e}).notifications,m=o5().getLocationNameById;return{events:(0,B.useMemo)(function(){if(n&&!o&&!f&&!s){var e=Tw(n.items);if(n.swaps&&n.swaps.length){var t=!0,r=!1,i=void 0;try{for(var a,u=n.swaps[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var y=a.value;e=Tw(e).concat(Tw(y.additional_items))}}catch(e){r=!0,i=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}}if(n.claims&&n.claims.length){var h=!0,b=!1,v=void 0;try{for(var g,x=n.claims[Symbol.iterator]();!(h=(g=x.next()).done);h=!0){var j=g.value;e=Tw(e).concat(Tw(j.additional_items))}}catch(e){b=!0,v=e}finally{try{h||null==x.return||x.return()}finally{if(b)throw v}}}var O=[];if(O.push({id:"refund-event",time:new Date,orderId:n.id,type:"refund-required",currency_code:n.currency_code}),O.push({id:"payment-required",time:new Date,orderId:n.id,type:"payment-required",currency_code:n.currency_code}),c("order_editing")){var w=!0,S=!1,P=void 0;try{for(var C,N=(l||[])[Symbol.iterator]();!(w=(C=N.next()).done);w=!0){var k=C.value;O.push({id:k.id,time:k.created_at,orderId:n.id,type:"edit-created",edit:k}),k.requested_at&&O.push({id:k.id,time:k.requested_at,orderId:n.id,type:"edit-requested",email:n.email,edit:k}),k.declined_at&&O.push({id:k.id,time:k.declined_at,orderId:n.id,type:"edit-declined",edit:k}),k.canceled_at&&O.push({id:k.id,time:k.canceled_at,orderId:n.id,type:"edit-canceled",edit:k}),k.confirmed_at&&O.push({id:k.id,time:k.confirmed_at,orderId:n.id,type:"edit-confirmed",edit:k})}}catch(e){S=!0,P=e}finally{try{w||null==N.return||N.return()}finally{if(S)throw P}}}if(O.push({id:"".concat(n.id,"-placed"),time:n.created_at,amount:n.total,currency_code:n.currency_code,tax:n.tax_rate,type:"placed",orderId:n.id}),"canceled"===n.status&&O.push({id:"".concat(n.id,"-canceled"),time:n.updated_at,type:"canceled",orderId:n.id}),d){var _=!0,A=!1,D=void 0;try{for(var E,Z=d[Symbol.iterator]();!(_=(E=Z.next()).done);_=!0){var I=E.value;O.push({id:I.id,time:I.created_at,type:"note",authorId:I.author_id,value:I.value,orderId:n.id})}}catch(e){A=!0,D=e}finally{try{_||null==Z.return||Z.return()}finally{if(A)throw D}}}var T=!0,M=!1,R=void 0;try{for(var L,z=n.refunds[Symbol.iterator]();!(T=(L=z.next()).done);T=!0){var q=L.value;O.push({amount:q.amount,currencyCode:n.currency_code,id:q.id,note:q.note,reason:q.reason,time:q.created_at,type:"refund",refund:q})}}catch(e){M=!0,R=e}finally{try{T||null==z.return||z.return()}finally{if(M)throw R}}var F=!0,H=!1,U=void 0;try{for(var G,V=n.fulfillments[Symbol.iterator]();!(F=(G=V.next()).done);F=!0){var B=G.value;O.push({id:B.id,time:B.created_at,type:"fulfilled",items:B.items.map(function(t){return TD(e,l,t)}),noNotification:B.no_notification,orderId:n.id,locationName:m(B.location_id)}),B.shipped_at&&O.push({id:B.id,time:B.shipped_at,type:"shipped",items:B.items.map(function(t){return TD(e,l,t)}),noNotification:B.no_notification,orderId:n.id,locationName:m(B.location_id)})}}catch(e){H=!0,U=e}finally{try{F||null==V.return||V.return()}finally{if(H)throw U}}var W=!0,Q=!1,Y=void 0;try{for(var $,K=n.returns[Symbol.iterator]();!(W=($=K.next()).done);W=!0){var J=$.value;O.push({id:J.id,items:J.items.map(function(t){return TN(e,l,t)}).filter(function(e){return!!e}),status:J.status,currentStatus:J.status,time:J.updated_at,type:"return",noNotification:J.no_notification,orderId:n.id,order:n,raw:J,refunded:TA(J.claim_order_id,n)}),"requested"!==J.status&&O.push({id:J.id,items:J.items.map(function(t){return TN(e,l,t)}).filter(function(e){return!!e}),status:"requested",time:J.created_at,type:"return",raw:J,currentStatus:J.status,noNotification:J.no_notification,order:n,orderId:n.id})}}catch(e){Q=!0,Y=e}finally{try{W||null==K.return||K.return()}finally{if(Q)throw Y}}var X=!0,ee=!1,et=void 0;try{for(var er,en=n.swaps[Symbol.iterator]();!(X=(er=en.next()).done);X=!0){var ei=er.value;O.push({id:ei.id,time:ei.canceled_at?ei.canceled_at:ei.created_at,noNotification:!0===ei.no_notification,fulfillmentStatus:ei.fulfillment_status,returnId:ei.return_order.id,paymentStatus:ei.payment_status,returnStatus:ei.return_order.status,type:"exchange",newItems:ei.additional_items.map(function(e){return T_(e)}),returnItems:ei.return_order.items.map(function(t){return TN(e,l,t)}),exchangeCartId:"captured"!==ei.payment_status?ei.cart_id:void 0,canceledAt:ei.canceled_at,orderId:ei.order_id,raw:ei}),("fulfilled"===ei.fulfillment_status||"shipped"===ei.fulfillment_status)&&(O.push({id:ei.id,time:ei.fulfillments[0].created_at,type:"fulfilled",items:ei.additional_items.map(function(e){return T_(e)}),noNotification:ei.no_notification,orderId:n.id,sourceType:"exchange"}),ei.fulfillments[0].shipped_at&&O.push({id:ei.id,time:ei.fulfillments[0].shipped_at,type:"shipped",items:ei.additional_items.map(function(e){return T_(e)}),noNotification:ei.no_notification,orderId:n.id,sourceType:"exchange"}))}}catch(e){ee=!0,et=e}finally{try{X||null==en.return||en.return()}finally{if(ee)throw et}}if(n.claims){var eo=!0,ea=!1,el=void 0;try{for(var es,ec=n.claims[Symbol.iterator]();!(eo=(es=ec.next()).done);eo=!0){var eu,ed=es.value;O.push({id:ed.id,type:"claim",newItems:ed.additional_items.map(function(e){var t;return{quantity:e.quantity,title:e.title,thumbnail:e.thumbnail,variant:{title:null===(t=e.variant)||void 0===t?void 0:t.title}}}),fulfillmentStatus:ed.fulfillment_status,returnStatus:null===(eu=ed.return_order)||void 0===eu?void 0:eu.status,refundStatus:ed.payment_status,refundAmount:ed.refund_amount,currencyCode:n.currency_code,claimItems:ed.claim_items.map(function(e){return Tk(e)}),time:ed.canceled_at?ed.canceled_at:ed.created_at,noNotification:ed.no_notification,claimType:ed.type,canceledAt:ed.canceled_at,orderId:n.id,claim:ed,order:n}),("fulfilled"===ed.fulfillment_status||"shipped"===ed.fulfillment_status)&&(O.push({id:ed.id,time:ed.fulfillments[0].created_at,type:"fulfilled",items:ed.additional_items.map(function(e){return T_(e)}),noNotification:ed.no_notification,orderId:n.id,sourceType:"claim"}),ed.fulfillments[0].shipped_at&&O.push({id:ed.id,time:ed.fulfillments[0].shipped_at,type:"shipped",items:ed.additional_items.map(function(e){return T_(e)}),noNotification:ed.no_notification,orderId:n.id,sourceType:"claim"})),ed.canceled_at&&O.push({id:"".concat(ed.id,"-created"),type:"claim",newItems:ed.additional_items.map(function(e){var t;return{quantity:e.quantity,title:e.title,thumbnail:e.thumbnail,variant:{title:null===(t=e.variant)||void 0===t?void 0:t.title}}}),fulfillmentStatus:ed.fulfillment_status,refundStatus:ed.payment_status,refundAmount:ed.refund_amount,currencyCode:n.currency_code,claimItems:ed.claim_items.map(function(e){return Tk(e)}),time:ed.created_at,noNotification:ed.no_notification,claimType:ed.type,isCanceled:!0,orderId:n.id})}}catch(e){ea=!0,el=e}finally{try{eo||null==ec.return||ec.return()}finally{if(ea)throw el}}}if(p){var ef=!0,ep=!1,em=void 0;try{for(var ey,eh=p[Symbol.iterator]();!(ef=(ey=eh.next()).done);ef=!0){var eb=ey.value;O.push({id:eb.id,time:eb.created_at,to:eb.to,type:"notification",title:eb.event_name,orderId:n.id})}}catch(e){ep=!0,em=e}finally{try{ef||null==eh.return||eh.return()}finally{if(ep)throw em}}}return O.sort(function(e,t){return e.time>t.time?-1:e.time<t.time?1:0}),O[O.length-1].first=!0,O}},[n,l,d,p,c,o,f,s]),refetch:i}};function TC(e,t){var r=t;e=e.filter(function(e){return!!e.confirmed_at}).sort(function(e,t){return new Date(e.confirmed_at)-new Date(t.confirmed_at)});var n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value.items.find(function(e){return e.original_item_id===r});if(s)r=s.id;else break}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}function TN(e,t,r){var n,i=r.item_id;t&&(i=TC(t,i));var o=e.find(function(e){return e.id===i});if(o)return{title:o.title,quantity:r.quantity,requestedQuantity:r.requested_quantity,receivedQuantity:r.received_quantity,variant:{title:(null==o?void 0:null===(n=o.variant)||void 0===n?void 0:n.title)||"-"},thumbnail:o.thumbnail}}function Tk(e){var t;return{title:e.item.title,quantity:e.quantity,thumbnail:e.item.thumbnail,variant:{title:null===(t=e.item.variant)||void 0===t?void 0:t.title}}}function T_(e){var t;return{title:e.title,quantity:e.quantity,thumbnail:e.thumbnail,variant:{title:null===(t=e.variant)||void 0===t?void 0:t.title}}}function TA(e,t){var r=t.claims.find(function(t){return t.id===e});return!!r&&"refund"===r.type}function TD(e,t,r){var n,i=r.item_id;t&&(i=TC(t,i));var o=e.find(function(e){return e.id===i});if(o)return{title:o.title,quantity:r.quantity,thumbnail:o.thumbnail,variant:{title:(null==o?void 0:null===(n=o.variant)||void 0===n?void 0:n.title)||"-"}}}var TE=r(93668);function TZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){TZ(e,t,r[t])})}return e}function TT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TM(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TT(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function TR(e,t){if(null==e)return{};var r,n,i=TL(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function TL(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Tz=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=TR(e,["size","color"]);return(0,F.jsxs)("svg",TM(TI({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M3.33301 2.91669V7.91669H8.33301",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M3.41396 11.6784C3.57168 13.1642 4.14444 13.9943 5.18922 15.0653C6.23401 16.1363 7.6093 16.8262 9.0944 17.0244C10.5795 17.2226 12.0883 16.9175 13.3787 16.1581C14.6691 15.3988 15.6663 14.2291 16.2103 12.8369C16.7542 11.4446 16.8134 9.91052 16.3783 8.48073C15.9432 7.05094 15.039 5.80836 13.8109 4.95238C12.5828 4.0964 11.1019 3.67666 9.60596 3.76051C8.10998 3.84436 6.68561 4.42693 5.56142 5.41475L3.33301 7.41474",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function Tq(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Tq(e,t,r[t])})}return e}function TH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TH(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function TG(e,t){if(null==e)return{};var r,n,i=TV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function TV(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var TB=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=TG(e,["size","color"]);return(0,F.jsxs)("svg",TU(TF({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M18.0893 3.08926C18.4147 2.76382 18.4147 2.23618 18.0893 1.91074C17.7638 1.58531 17.2362 1.58531 16.9107 1.91074L18.0893 3.08926ZM9.41074 9.41074L8.82149 10L10 11.1785L10.5893 10.5893L9.41074 9.41074ZM16.9107 1.91074L9.41074 9.41074L10.5893 10.5893L18.0893 3.08926L16.9107 1.91074Z",fill:i}),(0,F.jsx)("path",{d:"M17.5 2.5L12.25 17.5L9.25 10.75L2.5 7.75L17.5 2.5Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}))},TW=r(57976);function TQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function TY(e){if(Array.isArray(e))return e}function T$(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function TK(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function TJ(e,t){return TY(e)||T$(e,t)||TX(e,t)||TK()}function TX(e,t){if(e){if("string"==typeof e)return TQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TQ(e,t)}}var T0=function(e){var t=e.onSubmit,r=TJ((0,B.useState)(void 0),2),n=r[0],i=r[1],o=(0,B.useRef)(null),a=function(){t&&n&&(t(n),i(""))},l=(0,B.useCallback)(function(e){var t,r;switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),a(),null===(t=o.current)||void 0===t||t.blur();break;case"Esc":case"Escape":null===(r=o.current)||void 0===r||r.blur()}},[n,i,t]);return(0,F.jsx)("form",{children:(0,F.jsxs)("div",{className:"py-xsmall px-small bg-grey-5 border-grey-20 rounded-rounded flex items-center border",onClick:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.focus()},children:[(0,F.jsxs)("div",{className:"gap-x-small flex flex-grow items-center",children:[(0,F.jsx)(TW.Z,{onEmojiClick:function(e){i("".concat(n||"").concat(e))}}),(0,F.jsx)("input",{type:"text",placeholder:"Write a note...",value:n,onChange:function(e){return i(e.target.value)},className:"inter-base-regular placeholder:text-grey-40 flex-grow bg-transparent focus:outline-none",ref:o,id:"note-input",autoComplete:"off",onKeyDown:l})]}),(0,F.jsx)("button",{className:"text-grey-30 hover:text-violet-60",type:"button",onClick:a,children:(0,F.jsx)(TB,{size:20})})]})})};function T1(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function T2(e){if(Array.isArray(e))return e}function T3(e){if(Array.isArray(e))return T1(e)}function T5(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function T6(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function T4(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T8(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T7(e,t){return T2(e)||T6(e,t)||Me(e,t)||T4()}function T9(e){return T3(e)||T5(e)||Me(e)||T8()}function Me(e,t){if(e){if("string"==typeof e)return T1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T1(e,t)}}var Mt=function(e){var t=e.metadata,r=e.setMetadata,n=e.heading,i=T7((0,B.useState)([]),2),o=i[0],a=i[1];return(0,B.useEffect)(function(){a(t)},[t]),(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:void 0===n?"Metadata":n}),(0,F.jsxs)("div",{className:"mt-base gap-y-base flex flex-col",children:[o.map(function(e,n){return(0,F.jsx)(Mn,{onDelete:function(){r(t.filter(function(e,t){return t!==n}))},children:(0,F.jsx)(Mr,{field:e,updateKey:function(e){t[n]={key:e,value:t[n].value},r(t)},updateValue:function(e){t[n]={key:t[n].key,value:e},r(t)}})},n)}),(0,F.jsx)("div",{children:(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",type:"button",className:"w-full",onClick:function(){r(T9(t).concat([{key:"",value:""}]))},children:[(0,F.jsx)(sh.Z,{size:20}),"Add Metadata"]})})]})]})},Mr=function(e){var t=e.field,r=e.updateKey,n=e.updateValue;return(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center",children:[(0,F.jsx)("div",{className:"maw-w-[200px]",children:(0,F.jsx)(ry.Z,{label:"Key",placeholder:"Some key",defaultValue:t.key,onChange:function(e){r(e.currentTarget.value)}})}),(0,F.jsx)("div",{className:"flex-grow",children:(0,F.jsx)(ry.Z,{label:"Value",placeholder:"Some value",defaultValue:t.value,onChange:function(e){n(e.currentTarget.value)}})})]})},Mn=function(e){var t=e.onDelete,r=e.children;return(0,F.jsxs)("div",{className:"gap-x-xlarge flex items-end",children:[(0,F.jsx)("div",{className:"flex-grow",children:r}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"text-grey-40 h-10 w-10",type:"button",onClick:t,children:(0,F.jsx)(eZ,{size:20})})]})};function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Mo(e){if(Array.isArray(e))return e}function Ma(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ml(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ms(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ma(e,t,r[t])})}return e}function Mu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Md(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mu(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Mf(e,t){return Mo(e)||Ml(e,t)||Mp(e,t)||Ms()}function Mp(e,t){if(e){if("string"==typeof e)return Mi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mi(e,t)}}var Mm=function(e){var t=e.handleCancel,r=e.orderToFulfill,n=e.orderId,i=e.onComplete,o=(0,o3.ye)().isFeatureEnabled,a=o("inventoryService")&&o("stockLocationService"),l=Mf((0,B.useState)("items"in r?r.items.reduce(function(e,t){return Md(Mc({},e),Ma({},t.id,kH(t)))},{}):{}),2),s=l[0],c=l[1],u=Mf((0,B.useState)(!1),2),d=u[0],f=u[1],p=Mf((0,B.useState)({}),2),m=p[0],y=p[1],h=Mf((0,B.useState)({}),2),b=h[0],v=h[1],g=Mf((0,B.useState)([{key:"",value:""}]),2),x=g[0],j=g[1],O=(0,en.useAdminStockLocations)({},{enabled:a}),w=O.stock_locations,S=O.refetch;B.useEffect(function(){a&&S()},[a,S]);var P=B.useMemo(function(){return w?w.map(function(e){return{value:e.id,label:e.name}}):[]},[w]),C="items"in r?r.items:r.additional_items,N=(0,en.useAdminCreateFulfillment)(n),k=(0,en.useAdminFulfillSwap)(n),_=(0,en.useAdminFulfillClaim)(n),A=N.isLoading||k.isLoading||_.isLoading,D=(0,td.Z)();return(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",type:"button",onClick:t,children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-small flex",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",loading:A,onClick:function(){if(a&&!b.value){D("Error","Please select a location to fulfill from","error");return}if(Object.keys(m).length>0){D("Can't allow this action","Trying to fulfill more than in stock","error");return}var e,n=Mf(r.id.split("_"),1)[0],o=N,l="Successfully fulfilled order",c=x.reduce(function(e,t){return t.key?Md(Mc({},e),Ma({},t.key,t.value)):e},{});switch(n){case"swap":o=k,l="Successfully fulfilled swap",e={swap_id:r.id,metadata:c,no_notification:d};break;case"claim":o=_,l="Successfully fulfilled claim",e={claim_id:r.id,metadata:c,no_notification:d};break;default:(e={metadata:c,no_notification:d}).items=Object.entries(s).filter(function(e){return!!Mf(e,2)[1]}).map(function(e){var t=Mf(e,2);return{item_id:t[0],quantity:t[1]}})}a&&(e.location_id=b.value),o.mutate(e,{onSuccess:function(){D("Success",l,"success"),t(),i&&i()},onError:function(e){return D("Error",(0,tf.e)(e),"error")}})},disabled:!Object.values(s).some(function(e){return e>0}),children:"Create fulfillment"})]})]})}),(0,F.jsx)(c3.Main,{className:"medium:w-6/12",children:(0,F.jsxs)("div",{className:"pt-16",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Create Fulfillment"}),(0,F.jsxs)("div",{className:"grid-col-1 grid gap-y-8 divide-y [&>*]:pt-8",children:[(0,F.jsx)(wI,{featureFlag:"inventoryService",children:(0,F.jsxs)("div",{className:"grid grid-cols-2",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Locations"}),(0,F.jsx)("span",{className:"text-grey-50",children:"Choose where you wish to fulfill from."})]}),(0,F.jsx)(lS,{isMulti:!1,options:P,value:b,onChange:function(e){v({value:null==e?void 0:e.value,label:null==e?void 0:e.label})}})]})}),(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-base-semibold ",children:"Items to fulfill"}),(0,F.jsx)("span",{className:"text-grey-50 mb-6",children:"Select the number of items that you wish to fulfill."}),(0,F.jsx)(kU,{items:C,quantities:s,setQuantities:c,locationId:b.value,setErrors:y})]}),(0,F.jsx)("div",{className:"mt-4",children:(0,F.jsx)(Mt,{metadata:x,setMetadata:j})}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"mb-2xsmall flex items-center justify-between",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Send notifications"}),(0,F.jsx)(vw.Z,{checked:!d,onCheckedChange:function(e){return f(!e)}})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When toggled, notification emails will be sent."})]})]})]})})]})},My=function(e){var t=e.instance,r=t.getRowModel,n=t.getHeaderGroups;return(0,F.jsxs)(nf,{children:[(0,F.jsx)(nf.Head,{children:n().map(function(e){return(0,F.jsx)(nf.HeadRow,{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,{className:"inter-small-semibold text-grey-50",style:{width:e.getSize(),maxWidth:e.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.header,e.getContext())},e.id)})},e.id)})}),(0,F.jsx)(nf.Body,{children:r().rows.map(function(e){return(0,F.jsx)(nf.Row,{className:"last-of-type:border-b-0",children:e.getVisibleCells().map(function(e){return(0,F.jsx)(nf.Cell,{style:{width:e.column.getSize(),maxWidth:e.column.getSize()},children:(0,OJ.flexRender)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)})})]})},Mh=(0,OJ.createColumnHelper)(),Mb=function(e){var t=e.form,r=e.orderCurrency,n=t.control,i=t.setValue,o=t.getValues,a=t.path,l=(0,B.useCallback)(function(e,t){var r=a("items.".concat(e,".quantity")),n=o(r);i(r,n+t)},[o,a,i]),s=(0,tR.qo)({control:n,name:a("items")}),c=(0,B.useCallback)(function(e){s.forEach(function(t,r){i(a("items.".concat(r,".receive")),e.target.checked,{shouldDirty:!0})})},[s,a,i]);return(0,B.useMemo)(function(){return[Mh.display({id:"selection",maxSize:36,header:function(e){var t=e.table;return(0,F.jsx)("div",{className:"pl-base pr-large",children:(0,F.jsx)(rF,{checked:t.getIsAllRowsSelected(),onChange:function(e){t.toggleAllRowsSelected(e.target.checked),c(e)},indeterminate:t.getIsSomeRowsSelected()})})},cell:function(e){var t=e.row,r=t.index,i=t.getToggleSelectedHandler;return(0,F.jsx)(tR.Qr,{control:n,name:a("items.".concat(r,".receive")),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)("div",{className:"pl-base pr-large",children:(0,F.jsx)(rF,{checked:r,onChange:function(e){i()(e),n(e)}})})}})}}),Mh.accessor("variant_title",{header:"Product",cell:function(e){var t=e.getValue,r=e.row.original,n=t();return(0,F.jsxs)("div",{className:"gap-x-base py-xsmall flex items-center",children:[(0,F.jsx)("div",{children:(0,F.jsx)(kR,{src:r.thumbnail})}),(0,F.jsxs)("div",{className:"inter-small-regular",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("p",{children:r.product_title}),n&&(0,F.jsxs)("p",{className:"text-grey-50",children:["(",n,")"]})]}),r.sku&&(0,F.jsx)("span",{children:(0,F.jsx)(ED,{value:r.sku,displayValue:r.sku,iconSize:14})})]})]})}}),Mh.display({id:"quantity",header:function(){return(0,F.jsx)("p",{className:"text-right",children:"Quantity"})},maxSize:50,cell:function(e){var t=e.row,r=t.index,i=t.original.original_quantity;return(0,B.createElement)(EE,{index:r,maxQuantity:i,control:n,path:a,updateQuantity:l,isSelectable:!0,isSelectedPath:a("items.".concat(r,".receive")),name:a("items.".concat(r,".quantity")),key:r})}}),Mh.accessor("refundable",{maxSize:80,header:function(){return(0,F.jsx)("p",{className:"text-right",children:"Refundable"})},cell:function(e){var t=e.getValue;return(0,F.jsx)("p",{className:"text-right",children:(0,oy.rX)({amount:t()||0,currency:r})})}}),Mh.display({id:"order_currency",maxSize:20,cell:function(){return(0,F.jsx)("p",{className:"pl-base text-grey-50",children:r.toUpperCase()})}})]},[n,r,a,c,l])},Mv=function(e){var t=e.form,r=e.order,n=t.control,i=t.path,o=t.formState.errors,a=(0,tR.Dq)({control:n,name:i("items"),keyName:"fieldId"}).fields,l=Mb({form:t,orderCurrency:r.currency_code}),s=(0,OJ.useReactTable)({data:a,columns:l,getCoreRowModel:(0,OJ.getCoreRowModel)()});return(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Items to receive"}),(0,F.jsx)(My,{instance:s}),(0,F.jsx)(o9.Z,{errors:o,name:i("items")})]})},Mg=function(e){var t=e.form,r=e.order,n=e.returnRequest,i=t.control,o=(0,tR.qo)({control:i,name:"receive_items.items"}),a=(0,B.useMemo)(function(){return o.filter(function(e){return e.receive})},[o]),l=(0,B.useMemo)(function(){return o.filter(function(e){return e.receive}).reduce(function(e,t){return e+t.price*t.quantity},0)},[o]),s=(0,B.useMemo)(function(){if(!n.shipping_method||n.claim_order_id)return null;var e=n.shipping_method.tax_lines.reduce(function(e,t){return e+t.rate/100},0);return{priceInclTax:Math.round(n.shipping_method.price*(1+e)),title:n.shipping_method.shipping_option.name}},[n]);return 0===a.length?null:(0,F.jsxs)("div",{className:"inter-base-regular",children:[(0,F.jsx)("div",{className:"gap-y-base border-grey-20 py-large flex flex-col border-y",children:a.length>0&&(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-small",children:"Receiving"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[a.map(function(e,t){return(0,F.jsx)(Zg,{currencyCode:r.currency_code,productTitle:e.product_title,quantity:e.quantity,price:e.price,total:e.price*e.quantity,variantTitle:e.variant_title,thumbnail:e.thumbnail},t)}),s&&(0,F.jsx)(Zx,{currencyCode:r.currency_code,title:s.title,price:s.priceInclTax,type:"return"})]})]})}),(0,F.jsx)("div",{className:"gap-y-xsmall pt-large flex flex-col",children:(0,F.jsxs)("div",{className:"inter-large-semibold flex items-center justify-between","data-testid":"refund-amount-container",children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:"Refund amount"}),(0,F.jsx)(Zv,{form:(0,tL.G)(t,"refund_amount"),order:r,initialValue:l-((null==s?void 0:s.priceInclTax)||0)})]})})]})};function Mx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Mj(e){if(Array.isArray(e))return e}function MO(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Mw(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){MO(o,n,i,a,l,"next",e)}function l(e){MO(o,n,i,a,l,"throw",e)}a(void 0)})}}function MS(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function MP(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MC(e,t){return Mj(e)||MS(e,t)||MN(e,t)||MP()}function MN(e,t){if(e){if("string"==typeof e)return Mx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mx(e,t)}}function Mk(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var M_=function(e){var t=e.order,r=e.returnRequest,n=e.onClose,i=(0,en.useMedusa)().client,o=(0,o3.ye)().isFeatureEnabled,a=o("inventoryService")&&o("stockLocationService"),l=(0,en.useAdminReceiveReturn)(r.id),s=l.mutate,c=l.isLoading,u=Tv().orderRelations,d=(0,en.useAdminOrder)(t.id,{expand:u}).refetch,f=(0,tR.cI)({defaultValues:ZX(t,r),reValidateMode:"onBlur"}),p=f.handleSubmit,m=f.reset,y=f.setError,h=f.formState.isDirty,b=(0,en.useAdminStockLocations)({},{enabled:a}),v=b.stock_locations,g=b.refetch,x=b.isLoading;B.useEffect(function(){a&&g()},[a,g]);var j=MC(B.useState(null),2),O=j[0],w=j[1],S=B.useMemo(function(){return new Map(t.items.map(function(e){return[e.id,e]}))},[t.items]),P=MC((0,B.useState)(new Map),2),C=P[0],N=P[1];B.useEffect(function(){var e;(e=Mw(function(){var e,t;return Mk(this,function(n){switch(n.label){case 0:var o;if(!(null===(e=r.items)||void 0===e?void 0:e.length)||!a)return[2,new Map];return[4,Promise.all(r.items.map((o=Mw(function(e){var t,r;return Mk(this,function(n){switch(n.label){case 0:if(!(null===(t=r=S.get(e.item_id))||void 0===t?void 0:t.variant_id))return[2,void 0];return[4,i.admin.variants.getInventory(r.variant_id)];case 1:return[2,n.sent()]}})}),function(e){return o.apply(this,arguments)})))];case 1:return t=n.sent(),[2,new Map(t.filter(function(e){return!!e}).map(function(e){var t=e.variant;return[t.id,t.inventory[0].location_levels]}))]}})}),function(){return e.apply(this,arguments)})().then(function(e){N(e)})},[i.admin.variants,a,S,r.items]);var k=(0,tR.qo)({control:f.control,name:"receive_items"}).items,_=k.filter(function(e){return e.receive}).length,A=B.useMemo(function(){return!_||k.map(function(e){var t,r=S.get(e.item_id);return null==r||!r.variant_id||!e.receive||!!(null===(t=C.get(r.variant_id))||void 0===t?void 0:t.find(function(e){return e.location_id===(null==O?void 0:O.value)}))||null==O||!O.value}).every(Boolean)},[k,S,_,C,O]);(0,B.useEffect)(function(){if(a&&(null==v?void 0:v.length)){var e=v.find(function(e){return e.id===r.location_id});e&&w({value:e.id,label:e.name})}},[a,v,r.location_id]);var D=(0,B.useMemo)(function(){if(r.claim_order_id){var e=t.claims.find(function(e){return e.id===r.claim_order_id});return!!e&&"refunded"===e.payment_status}return!1},[t.claims,r.claim_order_id]),E=(0,B.useMemo)(function(){return D||!!r.swap_id},[D,r.swap_id]),Z=(0,td.Z)();(0,B.useEffect)(function(){m(ZX(t,r))},[t,r,m]);var I=p(function(e){if(0===e.receive_items.items.filter(function(e){return e.receive}).length){y("receive_items.items",{type:"manual",message:"Please select at least one item to receive"});return}var r,i=void 0;(null===(r=e.refund_amount)||void 0===r?void 0:r.amount)===void 0||E||(i=e.refund_amount.amount),D&&(i=0);var o={items:e.receive_items.items.map(function(e){return{item_id:e.item_id,quantity:e.quantity}}),refund:i};O&&a&&(o.location_id=O.value),s(o,{onSuccess:function(){Z("Successfully received return","Received return for order #".concat(t.display_id),"success"),d(),n()},onError:function(e){Z("Failed to receive return",(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{handleClose:n,open:!0,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Receive Return"})}),(0,F.jsxs)("form",{onSubmit:I,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsx)(Mv,{order:t,form:(0,tL.G)(f,"receive_items")}),a&&(0,F.jsxs)("div",{className:"mb-8",children:[(0,F.jsx)("h3",{className:"inter-base-semibold ",children:"Location"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Choose which location you want to return the items to."}),x?(0,F.jsx)(ei.Z,{}):(0,F.jsx)(lS,{className:"mt-2",placeholder:"Select Location to Return to",value:O,isMulti:!1,name:"location_id",errors:A?{}:{location_id:{message:"No inventory levels exist for the items at the selected location"}},onChange:w,options:(null==v?void 0:v.map(function(e){return{label:e.name,value:e.id}}))||[]})]}),!E&&(0,F.jsx)(Mg,{form:f,order:t,returnRequest:r})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",disabled:!h||c||!A,loading:c,children:"Save and close"})]})})]})]})})},MA=function(e){switch(e.paymentStatus){case"captured":return(0,F.jsx)(nN.Z,{title:"Paid",variant:"success"});case"awaiting":return(0,F.jsx)(nN.Z,{title:"Awaiting",variant:"default"});case"not_paid":return(0,F.jsx)(nN.Z,{title:"Not paid",variant:"default"});case"canceled":return(0,F.jsx)(nN.Z,{title:"Canceled",variant:"danger"});case"requires_action":return(0,F.jsx)(nN.Z,{title:"Requires Action",variant:"danger"});default:return null}},MD=function(e){switch(e.orderStatus){case"completed":return _jsx(StatusIndicator,{title:"Completed",variant:"success"});case"pending":return _jsx(StatusIndicator,{title:"Processing",variant:"default"});case"canceled":return _jsx(StatusIndicator,{title:"Canceled",variant:"danger"});case"requires_action":return _jsx(StatusIndicator,{title:"Rejected",variant:"danger"});default:return null}},ME=function(e){switch(e.fulfillmentStatus){case"shipped":return(0,F.jsx)(nN.Z,{title:"Shipped",variant:"success"});case"fulfilled":return(0,F.jsx)(nN.Z,{title:"Fulfilled",variant:"warning"});case"canceled":return(0,F.jsx)(nN.Z,{title:"Canceled",variant:"danger"});case"partially_fulfilled":return(0,F.jsx)(nN.Z,{title:"Partially fulfilled",variant:"warning"});case"not_fulfilled":return(0,F.jsx)(nN.Z,{title:"Not fulfilled",variant:"default"});case"requires_action":return(0,F.jsx)(nN.Z,{title:"Requires Action",variant:"danger"});default:return null}},MZ=function(e){switch(e.returnStatus){case"received":return(0,F.jsx)(nN.Z,{title:"Received",variant:"success"});case"requested":return(0,F.jsx)(nN.Z,{title:"Requested",variant:"default"});case"canceled":return(0,F.jsx)(nN.Z,{title:"Canceled",variant:"danger"});case"requires_action":return(0,F.jsx)(nN.Z,{title:"Requires Action",variant:"danger"});default:return null}},MI=function(e){switch(e.refundStatus){case"na":return(0,F.jsx)(nN.Z,{title:"N/A",variant:"default"});case"not_refunded":return(0,F.jsx)(nN.Z,{title:"Refunded",variant:"default"});case"refunded":return(0,F.jsx)(nN.Z,{title:"Refunded",variant:"success"});case"canceled":return(0,F.jsx)(nN.Z,{title:"Canceled",variant:"danger"});default:return null}},MT=function(e){var t=e.actions,r=(0,F.jsx)("button",{className:"btn-ghost px-2xsmall rounded-base focus:ring-violet-40 flex items-center justify-center py-0 focus:outline-none focus:ring-2",children:(0,F.jsx)(eF,{size:20})});return(0,F.jsx)(eQ,{customTrigger:r,forceDropdown:!0,actions:t})};function MM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){MM(e,t,r[t])})}return e}function ML(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Mz(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ML(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Mq(e,t){if(null==e)return{};var r,n,i=MF(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function MF(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var MH=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=Mq(e,["size","color"]);return(0,F.jsxs)("svg",Mz(MR({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M11.2971 16.7566C11.1653 16.9839 10.976 17.1726 10.7483 17.3037C10.5206 17.4349 10.2624 17.5039 9.99964 17.5039C9.73686 17.5039 9.47869 17.4349 9.25097 17.3037C9.02326 17.1726 8.83401 16.9839 8.70215 16.7566",stroke:i,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14.9723 10.7567C14.6386 9.53526 14.4795 8.27274 14.4998 7.00671",stroke:i,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M5.69498 5.7016C5.56468 6.1243 5.49894 6.56426 5.49998 7.00659C5.49998 12.2566 3.25 13.7565 3.25 13.7565H13.7499",stroke:i,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14.4994 7.00665C14.5006 6.19145 14.2804 5.39124 13.8622 4.69148C13.444 3.99173 12.8435 3.41871 12.125 3.03365C11.4065 2.64859 10.5969 2.46595 9.78261 2.50523C8.96836 2.54451 8.18007 2.80424 7.50195 3.25667",stroke:i,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M2.5 2.50665L17.4999 17.5065",stroke:i,strokeWidth:"1.49999",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function MU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function MG(e){if(Array.isArray(e))return e}function MV(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function MB(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function MW(e,t){return MG(e)||MV(e,t)||MQ(e,t)||MB()}function MQ(e,t){if(e){if("string"==typeof e)return MU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MU(e,t)}}!function(e){e.GREEN="text-emerald-40",e.RED="text-rose-50",e.ORANGE="text-orange-40",e.VIOLET="text-violet-60",e.DEFAULT="text-grey-50"}(S||(S={}));var MY=function(e){var t=e.icon,r=e.iconColor,n=void 0===r?S.DEFAULT:r,i=e.title,o=e.topNode,a=e.midNode,l=e.time,s=e.noNotification,c=e.isFirst,u=e.expandable,d=void 0!==u&&u,f=e.children,p=e.detail,m=MW((0,B.useState)(!d),2),y=m[0],h=m[1];return(0,F.jsxs)("div",{className:"mb-base",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("div",{className:(0,ec.Z)("h-5 w-5",n),children:t}),(0,F.jsx)("div",{className:"inter-small-semibold",children:i}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-50"})]}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[void 0!==s&&s&&(0,F.jsx)(a9.Z,{content:"Notifications related to this event are disabled",children:(0,F.jsx)(MH,{size:20,className:"text-grey-40"})}),o,d&&(0,F.jsx)("button",{onClick:function(){h(function(e){return!e})},children:y?(0,F.jsx)(uZ.Z,{size:16}):(0,F.jsx)(e4.Z,{size:16})})]})]}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex",children:[(0,F.jsx)("div",{className:"pt-base flex w-5 justify-center",children:!(void 0!==c&&c)&&(0,F.jsx)("div",{className:"min-h-[24px] w-px"})}),(0,F.jsxs)("div",{className:"inter-small-regular mt-2xsmall w-full",children:[(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)(a9.Z,{content:new Date(l).toUTCString(),children:(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:iW()(l).fromNow()})}),a&&(0,F.jsx)("span",{className:"mx-2xsmall ",children:(0,F.jsx)(M$,{})}),a]}),f&&y&&(0,F.jsx)("div",{className:"mt-small pb-base w-full",children:f}),(0,F.jsx)("div",{className:"text-grey-50",children:p})]})]})]})},M$=function(e){e.size;var t=e.bg;return(0,F.jsx)("div",{className:"aspect-square h-[2px] w-[2px] ".concat(void 0===t?"bg-grey-50":t," rounded-full")})},MK=function(e){var t=e.item,r=e.detail;return t?(0,F.jsxs)("div",{className:"mb-base flex flex-col last:mb-0 ",children:[(0,F.jsxs)("div",{className:"gap-x-small flex items-center",children:[t.thumbnail&&(0,F.jsx)("div",{className:"rounded-base h-10 w-[30px] overflow-hidden",children:(0,F.jsx)("img",{src:t.thumbnail,alt:"Thumbnail for ".concat(t.title),className:"h-full w-full object-cover"})}),(0,F.jsxs)("div",{className:"inter-small-regular flex w-full flex-col",children:[(0,F.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,F.jsx)("p",{children:t.title}),(0,F.jsx)("span",{className:"inter-small-semibold text-violet-60",children:"x".concat(t.quantity)})]}),(0,F.jsx)("p",{className:"text-grey-50",children:t.variant.title})]})]}),r&&(0,F.jsx)("div",{className:"text-grey-50",children:r})]}):null};function MJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){MJ(e,t,r[t])})}return e}var M0=function(e){var t,r,n,i,o,a,l,s,c,u,d,f,p=e.event,m=(0,s1.Z)(),y=m.state,h=m.open,b=m.close,v=(0,s1.Z)(),g=v.state,x=v.open,j=v.close,O=Tv().orderRelations,w=(0,en.useAdminOrder)(p.orderId,{expand:O}).refetch,P=(0,td.Z)(),C=!p.canceledAt&&((null===(t=p.claim)||void 0===t?void 0:t.return_order)||(null===(n=p.claim)||void 0===n?void 0:null===(r=n.additional_items)||void 0===r?void 0:r.length)>0),N=(0,en.useAdminCancelReturn)(null===(o=p.claim)||void 0===o?void 0:null===(i=o.return_order)||void 0===i?void 0:i.id).mutate,k=(0,en.useAdminCancelClaim)(null===(a=p.order)||void 0===a?void 0:a.id).mutate,_=M5(p,function(){k(p.claim.id,{onSuccess:function(){P("Claim canceled","The claim has been canceled","success")},onError:function(e){P("Failed to cancel claim",(0,tf.e)(e),"error")}})},function(){N(void 0,{onSuccess:function(){P("Return canceled","The return has been canceled","success"),w()},onError:function(e){P("Failed to cancel return",(0,tf.e)(e),"error")}})}),A={icon:p.canceledAt?(0,F.jsx)(oq,{size:20}):(0,F.jsx)(TE.Z,{size:20}),iconColor:p.canceledAt?S.DEFAULT:S.ORANGE,title:p.canceledAt?"Claim Canceled":"Claim Created",time:p.canceledAt?p.canceledAt:p.time,topNode:_,children:[(0,F.jsxs)(B.Fragment,{children:[(0,F.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,F.jsx)(M1,{event:p}),M2(p),(null===(s=p.claim)||void 0===s?void 0:null===(l=s.additional_items)||void 0===l?void 0:l.length)>0&&M3(p),C&&(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(null===(c=p.claim.return_order)||void 0===c?void 0:c.status)==="requested"&&(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:h,children:"Receive Return"}),(null===(d=p.claim)||void 0===d?void 0:null===(u=d.additional_items)||void 0===u?void 0:u.length)>0&&(null===(f=p.claim)||void 0===f?void 0:f.fulfillment_status)==="not_fulfilled"&&(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:x,children:"Fulfill Replacement"})]})]}),y&&(0,F.jsx)(M_,{onClose:b,order:p.order,returnRequest:p.claim.return_order}),g&&(0,F.jsx)(Mm,{handleCancel:j,orderToFulfill:p.claim,orderId:p.claim.order_id})]},p.id)]};return(0,F.jsx)(MY,MX({},A))},M1=function(e){var t,r,n,i,o,a,l,s,c,u,d=e.event,f=(0,F.jsx)("div",{className:"bg-grey-20 h-11 w-px"}),p=!!(null===(t=d.claim)||void 0===t?void 0:t.fulfillment_status)&&(null===(n=d.claim)||void 0===n?void 0:null===(r=n.additional_items)||void 0===r?void 0:r.length)>0,m=!!(null===(i=d.claim)||void 0===i?void 0:i.return_order),y=null===(o=d.claim)||void 0===o?void 0:o.payment_status;return(null===(a=d.claim)||void 0===a?void 0:a.type)==="replace"&&(y=(null===(c=d.claim)||void 0===c?void 0:null===(s=c.return_order)||void 0===s?void 0:s.status)==="received"?"refunded":null===(u=d.claim)||void 0===u?void 0:u.payment_status),null!==d.canceledAt&&(y="canceled"),(0,F.jsxs)("div",{className:"inter-small-regular gap-x-base flex items-center",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Refund:"}),(0,F.jsx)(MI,{refundStatus:y})]}),m&&(0,F.jsxs)(F.Fragment,{children:[f,(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Return:"}),(0,F.jsx)(MZ,{returnStatus:d.returnStatus})]})]}),p&&(0,F.jsxs)(F.Fragment,{children:[f,(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Fulfillment:"}),(0,F.jsx)(ME,{fulfillmentStatus:null===(l=d.claim)||void 0===l?void 0:l.fulfillment_status})]})]})]})},M2=function(e){return(0,F.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Claim Items"}),(0,F.jsx)("div",{children:e.claimItems.map(function(e,t){return(0,F.jsx)(MK,{item:e},t)})})]})},M3=function(e){return(0,F.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Replacement Items"}),(0,F.jsx)("div",{children:e.newItems.map(function(e,t){return(0,F.jsx)(MK,{item:e},t)})})]})},M5=function(e,t,r){var n,i=[];return e.canceledAt||e.isCanceled||(e.claim.return_order&&(null===(n=e.claim.return_order)||void 0===n?void 0:n.status)==="requested"&&i.push({icon:(0,F.jsx)(eZ,{size:20}),label:"Cancel return",variant:"danger",onClick:r}),"refunded"===e.refundStatus||e.isCanceled||i.push({icon:(0,F.jsx)(eZ,{size:20}),label:"Cancel claim",variant:"danger",onClick:t})),i.length?(0,F.jsx)(MT,{actions:i}):null};function M6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function M4(e){if(Array.isArray(e))return e}function M8(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function M7(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){M8(o,n,i,a,l,"next",e)}function l(e){M8(o,n,i,a,l,"throw",e)}a(void 0)})}}function M9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Re(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Rt(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){M9(e,t,r[t])})}return e}function Rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ri(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Rn(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Ro(e,t){return M4(e)||Re(e,t)||Ra(e,t)||Rt()}function Ra(e,t){if(e){if("string"==typeof e)return M6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M6(e,t)}}function Rl(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Rs=function(e){var t=e.event,r=(0,F.jsx)("div",{className:"bg-grey-20 h-11 w-px"});return(0,F.jsxs)("div",{className:"inter-small-regular gap-x-base flex items-center",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Payment:"}),(0,F.jsx)(MA,{paymentStatus:t.paymentStatus})]}),r,(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Return:"}),(0,F.jsx)(MZ,{returnStatus:t.returnStatus})]}),r,(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Fulfillment:"}),(0,F.jsx)(ME,{fulfillmentStatus:t.fulfillmentStatus})]})]})},Rc=function(e){var t,r,n=e.event,i=e.refetch,o=Ro((0,B.useState)(!1),2),a=o[0],l=o[1],s=Ro((0,B.useState)(!1),2),c=s[0],u=s[1],d=Ro((0,B.useState)(!1),2),f=d[0],p=d[1],m=Ro((0,B.useState)(!1),2),y=m[0],h=m[1],b=(0,en.useAdminCancelSwap)(n.orderId),v=(0,en.useAdminCancelReturn)(n.returnId),g=Ro((0,B.useState)(void 0),2),x=g[0],j=g[1],O=Ro((0,B.useState)(void 0),2),w=O[0],P=O[1],C=Ro((0,B.useState)(!0),2),N=C[0],k=C[1],_=(0,en.useAdminStore)().store,A=Tv().orderRelations,D=(0,en.useAdminOrder)(n.orderId,{expand:A}).order,E=(0,td.Z)();(0,B.useEffect)(function(){var e,t;if(_){if("not_paid"!==n.paymentStatus){k(!1);return}(null===(e=_.swap_link_template)||void 0===e?void 0:e.indexOf("{cart_id}"))===-1&&P("Store payment link does not have the default format, as it does not contain '{cart_id}'. Either update the payment link to include '{cart_id}' or update this method to reflect the format of your payment link."),_.swap_link_template||P("No payment link has been set for this store. Please update store settings."),n.exchangeCartId&&j(null===(t=_.swap_link_template)||void 0===t?void 0:t.replace(/\{cart_id\}/,n.exchangeCartId))}},[null==_?void 0:_.swap_link_template,n.exchangeCartId,n.paymentStatus,_]);var Z=Rd(N,x,w,n.exchangeCartId),I=(t=M7(function(){return Rl(this,function(e){switch(e.label){case 0:return[4,b.mutateAsync(n.id)];case 1:return e.sent(),i(),[2]}})}),function(){return t.apply(this,arguments)}),T=(r=M7(function(){return Rl(this,function(e){switch(e.label){case 0:return[4,v.mutateAsync()];case 1:return e.sent(),i(),[2]}})}),function(){return r.apply(this,arguments)}),M=Rf(n),R=Ru(n),L=[];"awaiting"===n.paymentStatus&&L.push({label:"Capture payment",icon:(0,F.jsx)(Ov,{size:20}),onClick:function(){n8.orders.processSwapPayment(n.orderId,n.id).then(function(e){E("Success","Payment processed successfully","success"),i()}).catch(function(e){E("Error",(0,tf.e)(e),"error")})}}),"requested"===n.returnStatus&&L.push({label:"Cancel return",icon:(0,F.jsx)(Ep,{size:20}),onClick:function(){return u(!c)}}),n.isCanceled||n.canceledAt||"fulfilled"===n.fulfillmentStatus||"shipped"===n.fulfillmentStatus||L.push({label:"Cancel exchange",icon:(0,F.jsx)(oq,{size:20}),onClick:function(){return l(!a)},variant:"danger"});var z={title:n.canceledAt?"Exchange Cancelled":"Exchange Requested",icon:n.canceledAt?(0,F.jsx)(oq,{size:20}):(0,F.jsx)($.Z,{size:20}),expandable:!!n.canceledAt,iconColor:n.canceledAt?S.DEFAULT:S.ORANGE,time:n.time,noNotification:n.noNotification,topNode:Rp(n,L),children:[(0,F.jsxs)("div",{className:"gap-y-base flex flex-col",children:[n.canceledAt&&(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"inter-small-semibold mr-2",children:"Requested on:"}),(0,F.jsx)("span",{className:"text-grey-50",children:new Date(n.time).toUTCString()})]}),!n.canceledAt&&(0,F.jsx)(Rs,{event:n}),!n.canceledAt&&Z,M,R,(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:["requested"===n.returnStatus&&(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return p(!0)},children:"Receive Return"}),"not_fulfilled"===n.fulfillmentStatus&&(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return h(!0)},children:"Fulfill Exchange"})]})]},n.id)]};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(MY,Rr({},z)),a&&(0,F.jsx)(tx,{handleClose:function(){return l(!a)},onDelete:I,confirmText:"Yes, cancel",heading:"Cancel exchange",text:"Are you sure you want to cancel this exchange?",successText:"Exchange cancelled"}),c&&(0,F.jsx)(tx,{handleClose:function(){return u(!c)},onDelete:T,confirmText:"Yes, cancel",heading:"Cancel return",text:"Are you sure you want to cancel this return?",successText:"Return cancelled"}),f&&D&&(0,F.jsx)(M_,{order:D,returnRequest:n.raw.return_order,onClose:function(){return p(!1)}}),y&&(0,F.jsx)(Mm,{orderId:n.orderId,orderToFulfill:n.raw,handleCancel:function(){return h(!1)}})]})};function Ru(e){return(0,F.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"New Items"}),(0,F.jsx)("div",{children:e.newItems.map(function(e,t){return(0,F.jsx)(MK,{item:e},t)})})]})}function Rd(e,t,r,n){return e?(0,F.jsxs)("div",{className:"inter-small-regular gap-y-xsmall text-grey-50 flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[r&&(0,F.jsx)(rm.Z,{content:r}),(0,F.jsx)("span",{children:"Payment link:"})]}),t&&(0,F.jsx)(ED,{value:t,displayValue:n})]}):null}function Rf(e){return(0,F.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Return Items"}),(0,F.jsx)("div",{children:e.returnItems.filter(function(e){return!!e}).map(function(e){return(0,F.jsx)(MK,{item:Ri(Rr({},e),{quantity:e.requestedQuantity})},e.id)})})]})}function Rp(e,t){return 0===t.length?null:(0,F.jsx)(MT,{actions:t})}function Rm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ry(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Rm(e,t,r[t])})}return e}var Rh=function(e){var t=e.event,r="claim"===t.sourceType?"Replacement Items Fulfilled":"exchange"===t.sourceType?"Exchange Items Fulfilled":"Items Fulfilled",n=t.locationName?"Shipping from ".concat(t.locationName):void 0,i={icon:(0,F.jsx)(oW,{size:20}),time:t.time,title:r,children:t.items.map(function(e,t){return(0,F.jsx)(MK,{item:e},t)}),noNotification:t.noNotification,isFirst:t.first,detail:n};return(0,F.jsx)(MY,Ry({},i))};function Rb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Rb(e,t,r[t])})}return e}var Rg=function(e){var t=e.event,r="claim"===t.sourceType?"Replacement Items Shipped":"exchange"===t.sourceType?"Exchange Items Shipped":"Items Shipped",n=t.locationName?"Shipped from ".concat(t.locationName):void 0,i={icon:(0,F.jsx)(Ep,{size:20}),time:t.time,title:r,children:t.items.map(function(e,t){return(0,F.jsx)(MK,{item:e},t)}),noNotification:t.noNotification,isFirst:t.first,detail:n};return(0,F.jsx)(MY,Rv({},i))},Rx=function(e){var t=(0,en.useAdminGetSession)().user;return(0,B.useMemo)(function(){return(null==t?void 0:t.id)===e},[t,e])};function Rj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function RO(e){if(Array.isArray(e))return e}function Rw(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function RS(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Rw(o,n,i,a,l,"next",e)}function l(e){Rw(o,n,i,a,l,"throw",e)}a(void 0)})}}function RP(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function RC(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function RN(e,t){return RO(e)||RP(e,t)||Rk(e,t)||RC()}function Rk(e,t){if(e){if("string"==typeof e)return Rj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rj(e,t)}}function R_(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var RA=function(e){var t=e.event,r=RN((0,B.useState)(!1),2),n=r[0],i=r[1],o=(0,en.useAdminUser)(t.authorId),a=o.user,l=o.isLoading,s=(0,en.useAdminDeleteNote)(t.id),c=Rx(null==a?void 0:a.id);if(l||!a)return null;var u=a.first_name&&a.last_name?"".concat(a.first_name," ").concat(a.last_name):a.email;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(MY,{title:u,icon:(0,F.jsx)(iY.Z,{user:a}),time:t.time,topNode:(0,F.jsx)(MT,{actions:[{label:"Delete",icon:(0,F.jsx)(eZ,{size:20}),onClick:function(){return i(!n)},variant:"danger"}]}),isFirst:t.first,children:(0,F.jsx)("div",{className:(0,ec.Z)("px-base py-base rounded-2xl",{"bg-grey-5":!c,"bg-violet-5 text-violet-90":c}),children:t.value})}),n&&(0,F.jsx)(tx,{handleClose:function(){return i(!n)},onDelete:RS(function(){return R_(this,function(e){return[2,s.mutate(void 0)]})}),confirmText:"Yes, delete",heading:"Delete note",successText:"Deleted note"})]})};function RD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){RD(e,t,r[t])})}return e}var RZ=function(e){var t=e.notificationId,r=e.email,n=e.handleCancel,i=(0,en.useAdminResendNotification)(t),o=i.mutate,a=i.isLoading,l=(0,tR.cI)({defaultValues:{to:r}}),s=l.register,c=l.handleSubmit,u=(0,td.Z)();return(0,F.jsx)(tp.Z,{handleClose:n,children:(0,F.jsx)("form",{onSubmit:c(function(e){o({to:e.to.trim()},{onSuccess:function(){u("Success","Notification re-send to ".concat(e.to),"success"),n()},onError:function(e){return u("Error",(0,tf.e)(e),"error")}})}),children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Resend notification"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)("div",{className:"flex flex-col",children:(0,F.jsx)("div",{className:"flex flex-col space-y-2",children:(0,F.jsx)(ry.Z,RE({label:"Email",type:"text",placeholder:"Email"},s("to",{required:"Must be filled"})))})})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)("div",{className:"flex h-8 w-full justify-end",children:(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",onClick:n,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"large",className:"text-small w-32 justify-center",variant:"primary",type:"submit",disabled:a,loading:a,children:"Send"})]})})})]})})})};function RI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function RT(e){if(Array.isArray(e))return e}function RM(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function RR(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function RL(e,t){return RT(e)||RM(e,t)||Rz(e,t)||RR()}function Rz(e,t){if(e){if("string"==typeof e)return RI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RI(e,t)}}var Rq={"order.items_returned":"Return Received Notice Sent","order.return_requested":"Return Request Confirmation Sent","order.placed":"Order Confirmation Sent","order.shipment_created":"Shipment Confirmation Sent"},RF=function(e){var t=e.event,r=RL((0,B.useState)(!1),2),n=r[0],i=r[1],o=(0,F.jsx)(MT,{actions:[{label:"Re-Send Mail",icon:(0,F.jsx)(TB,{size:20}),onClick:function(){return i(!0)}}]});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(MY,{icon:(0,F.jsx)(Ea,{size:20}),title:Rq[t.title]||t.title,time:t.time,topNode:o,midNode:(0,F.jsx)(RH,{email:t.to})}),n&&(0,F.jsx)(RZ,{handleCancel:function(){return i(!1)},notificationId:t.id,email:t.to})]})},RH=function(e){var t=e.email;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"text-grey-40 mr-2xsmall",children:(0,F.jsx)(nw,{size:16})}),(0,F.jsx)("span",{children:t})]})};function RU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){RU(e,t,r[t])})}return e}var RV=function(e){var t=e.event,r={icon:(0,F.jsx)(oq,{size:20}),iconColor:S.RED,time:t.time,title:"Order Canceled"};return(0,F.jsx)(MY,RG({},r))},RB=function(e){var t=e.user;if(!t)return null;var r=t.first_name,n=t.last_name,i=t.email,o=r||n?"".concat(r||""," ").concat(n||""):i;return(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50 flex items-center",children:["By",(0,F.jsx)("span",{className:"w-base h-base mx-xsmall",children:(0,F.jsx)(iY.Z,{user:t,font:"inter-xsmall-semibold"})}),o]})},RW=function(e){var t=e.event,r=(0,en.useAdminUser)(t.edit.canceled_by).user;return(0,F.jsx)(MY,{title:"Order Edit canceled",icon:(0,F.jsx)(t1.Z,{size:20}),time:t.time,isFirst:t.first,midNode:(0,F.jsx)(RB,{user:r})})};function RQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){RQ(e,t,r[t])})}return e}function R$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RK(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):R$(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function RJ(e,t){if(null==e)return{};var r,n,i=RX(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function RX(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var R0=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=RJ(e,["size","color"]);return(0,F.jsxs)("svg",RK(RY({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M3.02901 6.12695H2.25439",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M3.80363 3.8031H2.25439",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M13.8734 16.1969H3.02881",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14.0861 3.8031L13.3224 6.34927C13.224 6.67693 12.9219 6.90157 12.5803 6.90157H10.1697C9.65067 6.90157 9.27886 6.40117 9.42758 5.90464L10.0581 3.8031",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M6.90088 10.7745H8.55081",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14.2125 13.0985H6.01087C4.76529 13.0985 3.87216 11.8978 4.23003 10.7049L5.9032 5.1277C6.13946 4.34146 6.86295 3.8031 7.68405 3.8031H15.8865C17.1321 3.8031 18.0252 5.00376 17.6673 6.19667L15.9941 11.7739C15.7579 12.5601 15.0336 13.0985 14.2125 13.0985Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},R1="usr";function R2(e){var t;return!!(null===(t=e.declined_by)||void 0===t?void 0:t.startsWith(R1))}function R3(e){var t;return!!(null===(t=e.confirmed_by)||void 0===t?void 0:t.startsWith(R1))}var R5=function(e){var t=e.event,r=R3(t.edit),n=(0,en.useAdminUser)(t.edit.confirmed_by,{enabled:r&&!!t.edit.confirmed_by}).user,i=(0,en.useAdminCustomer)(t.edit.confirmed_by,{enabled:!r&&!!t.edit.confirmed_by}).customer;return(0,F.jsx)(MY,{title:"Order Edit ".concat(r?"force confirmed":"confirmation accepted"),time:t.time,isFirst:t.first,icon:(0,F.jsx)(R0,{size:20}),midNode:(0,F.jsx)(RB,{user:n||i})})};function R6(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function R4(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){R6(o,n,i,a,l,"next",e)}function l(e){R6(o,n,i,a,l,"throw",e)}a(void 0)})}}function R8(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}!function(e){e.ITEM_ADD="item_add",e.ITEM_REMOVE="item_remove",e.ITEM_UPDATE="item_update"}(P||(P={}));var R7=function(e){return e.requested_at&&e.requested_by?{type:"requested",user_id:e.requested_by}:{type:"created",user_id:e.created_by}},R9=function(e){var t,r=e.event,n=(0,B.useContext)(D1),i=n.isModalVisible,o=n.showModal,a=n.setActiveOrderEdit,l=r.edit,s=R7(l),c=s.type,u=s.user_id,d=(0,td.Z)(),f=(0,en.useAdminUser)(u).user,p=o2(),m=(0,en.useAdminDeleteOrderEdit)(l.id),y=(0,en.useAdminCancelOrderEdit)(l.id),h=(0,en.useAdminConfirmOrderEdit)(l.id),b=(t=R4(function(){return R8(this,function(e){switch(e.label){case 0:return[4,p({heading:"Delete Confirm",text:"By force confirming you allow the order edit to be fulfilled. You will still have to reconcile payments manually after confirming.",confirmText:"Yes, Force Confirm",cancelText:"No, Cancel"})];case 1:return e.sent()&&h.mutate(void 0,{onSuccess:function(){d("Success","Successfully confirmed Order Edit","success")},onError:function(e){d("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)});return i&&(null==l?void 0:l.status)==="created"?null:(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)(MY,{title:"Order Edit ".concat(c),icon:(0,F.jsx)(eC,{size:20}),time:r.time,isFirst:r.first,midNode:(0,F.jsx)(RB,{user:f}),children:[l.internal_note&&(0,F.jsx)("div",{className:"px-base py-small mt-base mb-large rounded-large bg-grey-10 inter-base-regular text-grey-90",children:l.internal_note}),(0,F.jsx)("div",{children:(0,F.jsx)(Le,{orderEdit:l})}),("created"===l.status||"requested"===l.status)&&(0,F.jsx)("div",{className:"space-y-xsmall mt-large",children:"created"===c?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Y.Z,{className:"border-grey-20 w-full border",size:"small",variant:"ghost",onClick:function(){a(l.id),o()},children:"Continue order edit"}),(0,F.jsx)(PU,{onDelete:function(){m.mutate(void 0,{onSuccess:function(){d("Success","Successfully deleted Order Edit","success")},onError:function(e){d("Error",(0,tf.e)(e),"error")}})},className:"border-grey-20 w-full border",children:"Delete the order edit"})]}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Y.Z,{className:"border-grey-20 w-full border",size:"small",variant:"ghost",onClick:function(){console.log("TODO")},children:"Copy Confirmation-Request Link"}),(0,F.jsx)(Y.Z,{className:"border-grey-20 w-full border",size:"small",variant:"ghost",onClick:b,children:"Force Confirm"}),(0,F.jsx)(PU,{onDelete:function(){y.mutate(void 0,{onSuccess:function(){d("Success","Successfully canceled Order Edit","success")},onError:function(e){d("Error",(0,tf.e)(e),"error")}})},className:"border-grey-20 w-full border",children:"Cancel Order Edit"})]})})]})})},Le=function(e){var t=e.orderEdit;if(!t)return(0,F.jsx)(F.Fragment,{});var r=t.changes.filter(function(e){return e.type===P.ITEM_ADD||e.type===P.ITEM_UPDATE&&e.line_item&&e.original_line_item&&e.original_line_item.quantity<e.line_item.quantity}),n=t.changes.filter(function(e){return e.type===P.ITEM_REMOVE||e.type===P.ITEM_UPDATE&&e.line_item&&e.original_line_item&&e.original_line_item.quantity>e.line_item.quantity});return(0,F.jsxs)("div",{className:"gap-y-base flex flex-col",children:[r.length>0&&(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Added"}),r.map(function(e){return(0,F.jsx)(Lt,{change:e},e.id)})]}),n.length>0&&(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Removed"}),n.map(function(e){return(0,F.jsx)(Lt,{change:e},e.id)})]})]})},Lt=function(e){var t,r,n,i,o,a,l,s=e.change,c=s.type===P.ITEM_ADD;o=Math.abs(o=c?s.line_item.quantity:(null===(a=s.original_line_item)||void 0===a?void 0:a.quantity)-(null===(l=s.line_item)||void 0===l?void 0:l.quantity));var u=c?s.line_item:s.original_line_item;return(0,F.jsxs)("div",{className:"gap-x-base mt-xsmall flex",children:[(0,F.jsx)("div",{children:(0,F.jsx)("div",{className:"rounded-rounded flex h-[40px] w-[30px] overflow-hidden",children:(null==u?void 0:u.thumbnail)?(0,F.jsx)("img",{src:u.thumbnail,className:"object-cover"}):(0,F.jsx)(lY,{})})}),(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsxs)("span",{className:"inter-small-semibold text-grey-90",children:[o>1&&(0,F.jsxs)(F.Fragment,{children:[o,"x"]})," ",null==u?void 0:u.title," \xa0",(null==u?void 0:null===(t=u.variant)||void 0===t?void 0:t.sku)&&(0,F.jsx)(ED,{value:null==u?void 0:null===(r=u.variant)||void 0===r?void 0:r.sku,iconSize:14})]}),(0,F.jsx)("span",{className:"inter-small-regular text-grey-50 flex",children:null==u?void 0:null===(i=u.variant)||void 0===i?void 0:null===(n=i.options)||void 0===n?void 0:n.map(function(e){return e.value})})]})]})},Lr=function(e){var t=e.event,r=(0,en.useAdminOrderEdit)(t.edit.id).order_edit,n=R2(t.edit),i=(0,en.useAdminUser)(t.edit.declined_by,{enabled:n&&!!t.edit.declined_by}).user,o=(0,en.useAdminCustomer)(t.edit.declined_by,{enabled:!n&&!!t.edit.declined_by}).customer,a=null==r?void 0:r.declined_reason;return(0,F.jsx)(MY,{title:"Order Edit declined",icon:(0,F.jsx)(t1.Z,{size:20}),time:t.time,isFirst:t.first,midNode:(0,F.jsx)(RB,{user:o||i}),children:a&&(0,F.jsx)("div",{className:"px-base py-small mt-base rounded-large bg-grey-10 inter-base-regular text-grey-90",children:a})})},Ln=function(e){var t,r=e.event,n=(0,en.useAdminOrderEdits)({order_id:r.orderId}).order_edits,i=(0,en.useAdminOrder)(r.orderId).order,o=(null==n?void 0:null===(t=n.find(function(e){return"requested"===e.status}))||void 0===t?void 0:t.difference_due)||0;if(!i||!n)return null;var a=o?i.total-i.paid_total+o:i.refunded_total-i.paid_total;return a<=0?null:(0,F.jsxs)(MY,{title:"Customer payment required",icon:(0,F.jsx)(TE.Z,{size:20}),iconColor:S.VIOLET,time:r.time,isFirst:r.first,midNode:(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:(0,oy.rX)({amount:a,currency:r.currency_code})}),children:[(0,F.jsx)(Y.Z,{size:"small",className:"border-grey-20 mb-xsmall w-full border",variant:"ghost",onClick:function(){console.log("TODO")},children:"Copy Payment Link"}),(0,F.jsx)(Y.Z,{size:"small",className:"border-grey-20 w-full border",variant:"ghost",onClick:function(){console.log("TODO")},children:"Mark as Paid"})]})};function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Lo(e){if(Array.isArray(e))return e}function La(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ll(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ls(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){La(e,t,r[t])})}return e}function Lu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ld(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Lu(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Lf(e,t){return Lo(e)||Ll(e,t)||Lp(e,t)||Ls()}function Lp(e,t){if(e){if("string"==typeof e)return Li(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Li(e,t)}}var Lm=[{label:"Discount",value:"discount"},{label:"Other",value:"other"}],Ly=function(e){var t=e.order,r=e.onDismiss,n=e.initialAmount,i=e.initialReason,o=(0,tR.cI)({defaultValues:{amount:n,reason:Lm["other"===i?1:0]}}),a=o.register,l=o.handleSubmit,s=o.control,c=Lf((0,B.useState)(t.no_notification),2),u=c[0],d=c[1],f=(0,td.Z)(),p=(0,en.useAdminRefundPayment)(t.id),m=p.mutate,y=p.isLoading,h=(0,B.useMemo)(function(){return t.paid_total-t.refunded_total},[t]),b=function(e){return e<=h},v=t.payments.some(function(e){return"system"===e.provider_id});return(0,F.jsx)(tp.Z,{handleClose:r,children:(0,F.jsx)("form",{onSubmit:l(function(e){m({amount:e.amount,reason:e.reason.value,no_notification:u,note:e.note},{onSuccess:function(){f("Success","Successfully refunded order","success"),r()},onError:function(e){f("Error",(0,tf.e)(e),"error")}})}),children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:r,children:(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"Create a refund"})}),(0,F.jsxs)(tp.Z.Content,{children:[v&&(0,F.jsxs)("div",{className:"inter-small-regular bg-orange-5 rounded-rounded mb-6 flex p-4 text-orange-50",children:[(0,F.jsx)("div",{className:"mr-3 h-full",children:(0,F.jsx)(TE.Z,{size:20})}),(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-small-semibold",children:"Attention!"}),"One or more of your payments is a system payment. Be aware, that captures and refunds are not handled by Medusa for such payments."]})]}),(0,F.jsx)("span",{className:"inter-base-semibold",children:"Details"}),(0,F.jsxs)("div",{className:"gap-y-base mt-4 grid",children:[(0,F.jsx)(jX.Root,{size:"small",currentCurrency:t.currency_code,readOnly:!0,children:(0,F.jsx)(tR.Qr,{name:"amount",control:s,rules:{required:s6.Z.required("Amount"),min:s6.Z.min("Amount",1),max:s6.Z.maxInteger("Amount",t.currency_code)},render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.onBlur;return(0,F.jsx)(jX.Amount,{label:"Refund Amount",amount:r,onBlur:i,invalidMessage:"Cannot refund more than the order's net total.",onValidate:b,onChange:n})}})}),(0,F.jsx)(tR.Qr,{name:"reason",control:s,defaultValue:{label:"Discount",value:"discount"},rules:{required:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(jT,{label:"Reason",options:Lm,value:r,onChange:n})}}),(0,F.jsx)(vQ.Z,Ld(Lc({},a("note")),{label:"Note",placeholder:"Discount for loyal customer"}))]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full  justify-between",children:[(0,F.jsxs)("div",{className:"flex h-full cursor-pointer items-center",onClick:function(){return d(!u)},children:[(0,F.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(!u&&"bg-violet-60"),children:(0,F.jsx)("span",{className:"self-center",children:!u&&(0,F.jsx)(rT,{size:16})})}),(0,F.jsx)("input",{id:"noNotification",className:"hidden",name:"noNotification",checked:!u,onChange:function(){return d(!u)},type:"checkbox"}),(0,F.jsxs)("span",{className:"text-grey-90 gap-x-xsmall ml-3 flex items-center",children:["Send notifications",(0,F.jsx)(rm.Z,{content:"Notify customer of created return"})]})]}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex",children:[(0,F.jsx)(Y.Z,{onClick:r,size:"small",className:"w-[112px]",variant:"ghost",children:"Cancel"}),(0,F.jsx)(Y.Z,{type:"submit",size:"small",className:"w-[112px]",variant:"primary",loading:y,disabled:y,children:"Complete"})]})]})})]})})})};function Lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Lb(e){if(Array.isArray(e))return e}function Lv(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Lg(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lx(e,t){return Lb(e)||Lv(e,t)||Lj(e,t)||Lg()}function Lj(e,t){if(e){if("string"==typeof e)return Lh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lh(e,t)}}var LO=function(e){var t,r=e.event,n=(0,en.useAdminOrder)(r.orderId).order,i=(0,en.useAdminOrderEdits)({order_id:r.orderId}).order_edits,o=(null==i?void 0:null===(t=i.find(function(e){return"requested"===e.status}))||void 0===t?void 0:t.difference_due)||0,a=Lx((0,B.useState)(!1),2),l=a[0],s=a[1];if(!n||!i)return null;var c=n.paid_total-n.refunded_total-n.total-o;return c<=0?null:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(MY,{title:"Refund required",icon:(0,F.jsx)(TE.Z,{size:20}),iconColor:S.RED,time:r.time,isFirst:r.first,children:(0,F.jsxs)(Y.Z,{onClick:function(){return s(!0)},variant:"ghost",size:"small",className:"border-grey-20 mb-xsmall w-full border text-rose-50",children:["Refund",(0,oy.rX)({amount:c,currency:r.currency_code})]})}),l&&(0,F.jsx)(Ly,{order:n,initialAmount:c,initialReason:"other",onDismiss:function(){return s(!1)}})]})};function Lw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function LS(e){if(Array.isArray(e))return e}function LP(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function LC(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function LN(e,t){return LS(e)||LP(e,t)||Lk(e,t)||LC()}function Lk(e,t){if(e){if("string"==typeof e)return Lw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lw(e,t)}}var L_=function(e){var t,r=e.event,n=LN((0,B.useState)(!1),2),i=n[0],o=n[1],a=(0,en.useAdminNotifications)({resource_id:null===(t=r.edit)||void 0===t?void 0:t.id}).notifications,l=null==a?void 0:a.find(function(e){return"order-edit.requested"===e.event_name});return l?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(MY,{title:"Order Edit confirmation-request sent",icon:(0,F.jsx)(Ea,{size:20}),time:r.time,isFirst:r.first,midNode:(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:r.email}),children:(0,F.jsx)(Y.Z,{className:"border-grey-20 mb-5 w-full border",size:"small",variant:"ghost",onClick:function(){return o(!0)},children:"Resend Confirmation-Request"})}),i&&(0,F.jsx)(RZ,{handleCancel:function(){return o(!1)},notificationId:l.id,email:l.to})]}):null},LA=r(39032);function LD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){LD(e,t,r[t])})}return e}var LZ=function(e){var t=e.event,r={icon:(0,F.jsx)(LA.Z,{size:20}),time:t.time,title:"Order Placed",midNode:(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:(0,oy.rX)({amount:t.amount,currency:t.currency_code})}),isFirst:t.first};return(0,F.jsx)(MY,LE({},r))};function LI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){LI(e,t,r[t])})}return e}function LM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function LR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):LM(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function LL(e,t){if(null==e)return{};var r,n,i=Lz(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Lz(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Lq=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=void 0===n?"currentColor":n,o=LL(e,["size","color"]);return(0,F.jsxs)("svg",LR(LT({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M2.5 5.83398H17.5",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.97565 9.16602H5.83398",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.5 14.1667H5C3.61917 14.1667 2.5 13.0475 2.5 11.6667V5C2.5 3.61917 3.61917 2.5 5 2.5H15C16.3808 2.5 17.5 3.61917 17.5 5V8.33333",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M13.3249 14.166L11.6582 15.8327L13.3249 17.4993",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M14.9993 12.5H15.8327C16.7535 12.5 17.4993 13.2458 17.4993 14.1667C17.4993 15.0875 16.7535 15.8333 15.8327 15.8333H11.666",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function LF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){LF(e,t,r[t])})}return e}var LU=function(e){var t=e.event,r={icon:(0,F.jsx)(Lq,{size:20}),title:"Refund",time:t.time,midNode:(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:(0,oy.rX)({amount:t.amount,currency:t.currencyCode})}),children:(0,F.jsxs)("div",{className:"gap-y-xsmall flex w-full flex-col",children:[t.reason&&(0,F.jsx)("span",{className:"text-grey-50",children:"".concat(t.reason.slice(0,1).toUpperCase()).concat(t.reason.slice(1))}),t.note&&(0,F.jsxs)("div",{className:"bg-grey-5 px-base py-base rounded-2xl",children:["Note: ",t.note]})]})};return(0,F.jsx)(MY,LH({},r))};function LG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function LV(e){if(Array.isArray(e))return e}function LB(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function LW(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){LB(o,n,i,a,l,"next",e)}function l(e){LB(o,n,i,a,l,"throw",e)}a(void 0)})}}function LQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LY(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function L$(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function LK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){LQ(e,t,r[t])})}return e}function LJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function LX(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):LJ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function L0(e,t){return LV(e)||LY(e,t)||L1(e,t)||L$()}function L1(e,t){if(e){if("string"==typeof e)return LG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LG(e,t)}}function L2(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var L3=function(e){var t,r=e.event,n=e.refetch,i=L0((0,B.useState)(!1),2),o=i[0],a=i[1],l=(0,en.useAdminCancelReturn)(r.id),s=(0,s1.Z)(),c=s.state,u=s.close,d=s.open,f=function(){l.mutate(void 0,{onSuccess:function(){n()}})},p=L5(r,f,d);return(null===(t=r.raw)||void 0===t?void 0:t.claim_order_id)?null:(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(MY,LK({},p)),o&&(0,F.jsx)(tx,{handleClose:function(){return a(!1)},onDelete:LW(function(){return L2(this,function(e){return[2,f()]})}),heading:"Cancel return",confirmText:"Yes, cancel",successText:"Canceled return",text:"Are you sure you want to cancel this return?"}),c&&(0,F.jsx)(M_,{onClose:u,order:r.order,returnRequest:r.raw})]})};function L5(e,t,r){var n,i,o,a="Return",l=[];switch(e.status){case"requested":a="Return Requested",n=(0,F.jsx)(TE.Z,{size:20,className:"text-orange-40"}),"requested"===e.currentStatus&&(i=e.currentStatus&&"requested"===e.currentStatus&&(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",className:(0,ec.Z)("mt-large"),onClick:r,children:"Receive Return"}),l.push({icon:(0,F.jsx)(eZ,{size:20}),label:"Cancel return",variant:"danger",onClick:t}));break;case"received":a="Return Received",n=(0,F.jsx)(LA.Z,{size:20,className:"text-emerald-40"});break;case"canceled":a="Return Canceled",n=(0,F.jsx)(oq,{size:20,className:"text-grey-50"});break;case"requires_action":a="Return Requires Action",n=(0,F.jsx)(TE.Z,{size:20,className:"text-rose-50"})}return{title:a,icon:n,time:e.time,topNode:l.length>0&&(0,F.jsx)(MT,{actions:l}),noNotification:e.noNotification,children:"requested"===e.status?[e.items.map(function(e,t){return(0,F.jsx)(MK,{item:e},t)}),B.createElement(B.Fragment,{key:"button"},i)]:"received"===e.status?[e.items.map(function(e,t){return(0,F.jsx)(MK,{item:LX(LK({},e),{quantity:null!==(o=e.receivedQuantity)&&void 0!==o?o:e.quantity})},t)})]:null}}function L6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function L4(e){if(Array.isArray(e))return e}function L8(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function L7(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L9(e,t){return L4(e)||L8(e,t)||ze(e,t)||L7()}function ze(e,t){if(e){if("string"==typeof e)return L6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L6(e,t)}}var zt=function(e){var t=e.orderId,r=Tv().orderRelations,n=TP(t),i=n.events,o=n.refetch,a=(0,td.Z)(),l=(0,en.useAdminCreateNote)(),s=(0,en.useAdminOrder)(t,{expand:r}).order,c=L9((0,B.useState)(!1),2),u=c[0],d=c[1],f=L9((0,B.useState)(!1),2),p=f[0],m=f[1],y=(0,s1.Z)(),h=y.state,b=y.close,v=y.open,g=[{icon:(0,F.jsx)(Tz,{size:20}),label:"Request Return",onClick:function(){return d(!0)}},{icon:(0,F.jsx)($.Z,{size:20}),label:"Register Exchange",onClick:function(){return m(!0)}},{icon:(0,F.jsx)(TE.Z,{size:20}),label:"Register Claim",onClick:v}];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"rounded-rounded border-grey-20 bg-grey-0 h-full w-5/12 border",children:[(0,F.jsxs)("div",{className:"border-grey-20 py-large px-xlarge border-b",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-xlarge-semibold",children:"Timeline"}),(0,F.jsx)("div",{className:(0,ec.Z)({"pointer-events-none opacity-50":!i}),children:(0,F.jsx)(eQ,{actions:g})})]}),(0,F.jsx)("div",{className:(0,ec.Z)("mt-base",{"pointer-events-none opacity-50":!i}),children:(0,F.jsx)(T0,{onSubmit:function(e){e&&l.mutate({resource_id:t,resource_type:"order",value:e},{onSuccess:function(){return a("Success","Added note","success")},onError:function(e){return a("Error",(0,tf.e)(e),"error")}})}})})]}),(0,F.jsx)("div",{className:"py-large px-xlarge",children:i?(0,F.jsx)("div",{className:"flex flex-col",children:i.map(function(e,t){return(0,F.jsx)("div",{children:zr(e,o)},t)})}):(0,F.jsx)("div",{className:"flex h-96 w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary",size:"large"})})})]}),u&&s&&(0,F.jsx)(IB,{order:s,onDismiss:function(){return d(!1)}}),p&&s&&(0,F.jsx)(Ty,{order:s,onDismiss:function(){return m(!1)}}),h&&s&&(0,F.jsx)(Z5,{order:s,onClose:b})]})};function zr(e,t){switch(e.type){case"placed":return(0,F.jsx)(LZ,{event:e});case"fulfilled":return(0,F.jsx)(Rh,{event:e});case"note":return(0,F.jsx)(RA,{event:e});case"shipped":return(0,F.jsx)(Rg,{event:e});case"canceled":return(0,F.jsx)(RV,{event:e});case"return":return(0,F.jsx)(L3,{event:e,refetch:t});case"exchange":return(0,F.jsx)(Rc,{event:e,refetch:t},e.id);case"claim":return(0,F.jsx)(M0,{event:e});case"notification":return(0,F.jsx)(RF,{event:e});case"refund":return(0,F.jsx)(LU,{event:e});case"edit-created":return(0,F.jsx)(R9,{event:e});case"edit-canceled":return(0,F.jsx)(RW,{event:e});case"edit-declined":return(0,F.jsx)(Lr,{event:e});case"edit-confirmed":return(0,F.jsx)(R5,{event:e});case"edit-requested":return(0,F.jsx)(L_,{event:e});case"refund-required":return(0,F.jsx)(LO,{event:e});case"payment-required":return(0,F.jsx)(Ln,{event:e});default:return null}}var zn=function(e){if(!e)return"N/A";if(e.customer){var t=e.customer.first_name,r=e.customer.last_name;if(t&&r)return"".concat(t," ").concat(r);if(t)return t;if(r)return r}if(e.shipping_address){var n=e.shipping_address.first_name,i=e.shipping_address.last_name;if(n&&i)return"".concat(n," ").concat(i);if(n)return n;if(i)return i}if(e.billing_address){var o=e.billing_address.first_name,a=e.billing_address.last_name;if(o&&a)return"".concat(o," ").concat(a);if(o)return o;if(a)return a}return e.email?e.email:"N/A"};function zi(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function zo(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){zi(o,n,i,a,l,"next",e)}function l(e){zi(o,n,i,a,l,"throw",e)}a(void 0)})}}function za(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var zl=!1,zs=function(e){var t,r,n,i,o,a,l,s,c=e.item,u=e.currencyCode,d=e.change,f=e.customerId,p=e.regionId,m=(0,td.Z)(),y=B.useContext(pf.ej),h=y.pop,b=y.push,v=(null==d?void 0:d.type)==="item_add",g=(null==d?void 0:d.type)==="item_update",x=!!c.fulfilled_quantity,j=(0,en.useAdminOrderEditAddLineItem)(c.order_edit_id).mutateAsync,O=(0,en.useAdminOrderEditDeleteLineItem)(c.order_edit_id,c.id).mutateAsync,w=(0,en.useAdminOrderEditUpdateLineItem)(c.order_edit_id,c.id).mutateAsync,S=(0,en.useAdminDeleteOrderEditItemChange)(c.order_edit_id,null==d?void 0:d.id).mutateAsync,P=(t=zo(function(e){return za(this,function(t){switch(t.label){case 0:if(zl)return[2];zl=!0,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,w({quantity:e})];case 2:return t.sent(),[3,4];case 3:return zl=!1,[7];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),C=(r=zo(function(){return za(this,function(e){switch(e.label){case 0:if(!c.variant)return m("Warning","Cannot duplicate an item without a variant","warning"),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,j({variant_id:c.variant_id,quantity:c.quantity})];case 2:return e.sent(),[3,4];case 3:return e.sent(),m("Error","Failed to duplicate item","error"),[3,4];case 4:return[2]}})}),function(){return r.apply(this,arguments)}),N=(n=zo(function(){return za(this,function(e){switch(e.label){case 0:if(e.trys.push([0,9,,10]),!d)return[3,6];if("item_add"!==d.type)return[3,2];return[4,S()];case 1:e.sent(),e.label=2;case 2:if("item_update"!==d.type)return[3,5];return[4,S()];case 3:return e.sent(),[4,O()];case 4:e.sent(),e.label=5;case 5:return[3,8];case 6:return[4,O()];case 7:e.sent(),e.label=8;case 8:return m("Success","Item removed","success"),[3,10];case 9:return e.sent(),m("Error","Failed to remove item","error"),[3,10];case 10:return[2]}})}),function(){return n.apply(this,arguments)}),k=(i=zo(function(e){var t;return za(this,function(r){switch(r.label){case 0:t=e[0].id,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,N()];case 2:return r.sent(),[4,j({variant_id:t,quantity:c.quantity})];case 3:return r.sent(),m("Success","Item added","success"),[3,5];case 4:return r.sent(),m("Error","Failed to replace the item","error"),[3,5];case 5:return[2]}})}),function(e){return i.apply(this,arguments)}),_={title:"Replace Product Variants",onBack:h,view:(0,F.jsx)(zR,{onSubmit:k,customerId:f,regionId:p,currencyCode:u,isReplace:!0})},A=[!x&&{label:"Replace with other item",onClick:function(){return b(_)},icon:(0,F.jsx)($.Z,{size:"20"})},{label:"Duplicate item",onClick:C,icon:(0,F.jsx)(tW,{size:"20"})},!x&&{label:"Remove item",onClick:N,variant:"danger",icon:(0,F.jsx)(eZ,{size:"20"})}].filter(Boolean);return(0,F.jsx)(a9.Z,{side:"top",open:!!x&&void 0,content:"This line item is part of a fulfillment and cannot be edited. Cancel the fulfillment to edit the line item.",children:(0,F.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mx-[-5px] mb-1 flex h-[64px] justify-between py-2 px-[5px]",children:[(0,F.jsxs)("div",{className:"flex-grow-1 flex justify-center space-x-4",children:[(0,F.jsx)("div",{className:"rounded-rounded flex h-[48px] w-[36px] overflow-hidden",children:c.thumbnail?(0,F.jsx)("img",{src:c.thumbnail,className:"object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,F.jsxs)("div",{className:"flex max-w-[310px] items-center gap-2",children:[(0,F.jsx)("span",{className:(0,ec.Z)("text-grey-900 flex-shrink-0 flex-grow font-semibold",{"text-gray-400":x}),children:c.title}),(null==c?void 0:null===(o=c.variant)||void 0===o?void 0:o.options)&&(0,F.jsxs)("span",{className:(0,ec.Z)("flex-shrink-1 flex gap-3 truncate text-gray-400",{"text-gray-400":x}),children:["(",c.variant.options.map(function(e){return e.value}).join(" • "),")"]})]}),(0,F.jsxs)("div",{className:"flex items-center",children:[v&&(0,F.jsx)("div",{className:"text-small bg-blue-10 rounded-rounded mr-2 flex h-[24px] w-[42px] flex-shrink-0 items-center justify-center text-blue-500",children:"New"}),g&&(0,F.jsx)("div",{className:"text-small bg-orange-10 rounded-rounded mr-2 flex h-[24px] w-[68px] flex-shrink-0 items-center justify-center text-orange-500",children:"Modified"}),(0,F.jsx)("div",{className:"min-h-[20px]",children:(null===(a=c.variant)||void 0===a?void 0:a.sku)&&(0,F.jsx)(ED,{value:null===(l=c.variant)||void 0===l?void 0:l.sku,displayValue:(0,F.jsx)("span",{className:(0,ec.Z)("flex gap-3 text-gray-500",{"text-gray-400":x}),children:null===(s=c.variant)||void 0===s?void 0:s.sku}),successDuration:1e3})})]})]})]}),(0,F.jsxs)("div",{className:"flex min-w-[312px] items-center justify-between",children:[(0,F.jsxs)("div",{className:(0,ec.Z)("flex flex-grow-0 items-center text-gray-400",{"pointer-events-none":x}),children:[(0,F.jsx)(rM.Z,{className:(0,ec.Z)("cursor-pointer text-gray-400",{"pointer-events-none":zl}),onClick:function(){return c.quantity>1&&!x&&P(c.quantity-1)}}),(0,F.jsx)("span",{className:(0,ec.Z)("min-w-[74px] px-8 text-center text-gray-900",{"!text-gray-400":x}),children:c.quantity}),(0,F.jsx)(sh.Z,{className:(0,ec.Z)("cursor-pointer text-gray-400",{"pointer-events-none":zl}),onClick:function(){return P(c.quantity+1)}})]}),(0,F.jsxs)("div",{className:"flex h-full items-center gap-6",children:[(0,F.jsx)("div",{className:(0,ec.Z)("small:space-x-2 medium:space-x-4 large:space-x-6 flex",{"pointer-events-none !text-gray-400":x}),children:(0,F.jsxs)("div",{className:(0,ec.Z)("min-w-[60px] text-right text-gray-900",{"pointer-events-none !text-gray-400":x}),children:[(0,oy.rX)({amount:c.unit_price*c.quantity,currency:u,tax:c.includes_tax?0:c.tax_lines,digits:2}),(0,F.jsx)("span",{className:"ml-2 text-gray-400",children:u.toUpperCase()})]})}),(0,F.jsx)(eQ,{forceDropdown:!0,actions:A})]})]})]})})},zc=r(29369),zu=r.n(zc);function zd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function zf(e){if(Array.isArray(e))return e}function zp(e){if(Array.isArray(e))return zd(e)}function zm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zy(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function zh(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function zb(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zv(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){zm(e,t,r[t])})}return e}function zx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zj(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zx(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function zO(e,t){return zf(e)||zh(e,t)||zS(e,t)||zb()}function zw(e){return zp(e)||zy(e)||zS(e)||zv()}function zS(e,t){if(e){if("string"==typeof e)return zd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zd(e,t)}}var zP=12,zC=function(e){var t=e.isReplace,r=e.regionId,n=e.currencyCode,i=e.customerId,o=e.setSelectedVariants,a=zO((0,B.useState)(""),2),l=a[0],s=a[1],c=zO((0,B.useState)(0),2),u=c[0],d=c[1],f=zO((0,B.useState)(0),2),p=f[0],m=f[1],y=zO((0,B.useState)(0),2),h=y[0],b=y[1],v=(0,rk.N)(l,500),g=(0,en.useAdminVariants)({q:v,limit:zP,offset:u,region_id:r,customer_id:i}),x=g.isLoading,j=g.count,O=g.variants;(0,B.useEffect)(function(){void 0!==j&&m(Math.ceil(j/zP))},[j]);var w=function(e){var t,r=e.row.original,n=o5().getLocationNameById,i=(0,en.useAdminVariantsInventory)(r.id),o=i.variant,a=i.isLoading;if(a)return(0,F.jsx)("div",{className:"flex justify-end",children:(0,F.jsx)(nh,{isLoading:!0,children:(0,F.jsx)("div",{className:"h-[20px] w-[50px]"})})});if(!a&&!(null==o?void 0:null===(t=o.inventory)||void 0===t?void 0:t.length))return(0,F.jsx)("div",{className:"text-right",children:r.inventory_quantity});var l=o.inventory,s=l[0].location_levels.reduce(function(e,t){return e+t.stocked_quantity},0),c=(0,F.jsx)(F.Fragment,{children:l[0].location_levels.map(function(e){return(0,F.jsxs)("div",{className:"font-normal",children:[(0,F.jsx)("span",{className:"font-semibold",children:e.stocked_quantity})," in ",n(e.location_id)]},e.id)})});return(0,F.jsx)(a9.Z,{content:c,side:"top",className:"translate-x-1/4",children:(0,F.jsxs)("div",{className:"text-right",children:[s," in ",l[0].location_levels.length," ",zu()("location",l[0].location_levels.length)]})})},S=function(e){var t,r=e.row.original;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:r.product.thumbnail?(0,F.jsx)("img",{src:r.product.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"flex max-w-[200px] flex-col",children:[(0,F.jsx)(a9.Z,{content:(0,F.jsx)("span",{className:"font-normal",children:r.product.title}),maxWidth:400,children:(0,F.jsx)("div",{className:"truncate",children:null!==(t=r.sku)&&void 0!==t?t:r.product.title})}),(0,F.jsx)("span",{className:"text-grey-50",children:r.title})]})]})},P=(0,B.useMemo)(function(){return[{Header:(0,F.jsx)("div",{className:"text-small font-semibold text-gray-500",children:"Product"}),accessor:"sku",Cell:S},{Header:(0,F.jsx)("div",{className:"text-small text-right font-semibold text-gray-500",children:"In Stock"}),accessor:"inventory_quantity",Cell:w},{Header:(0,F.jsx)("div",{className:"text-small text-right font-semibold text-gray-500",children:"Price"}),accessor:"amount",Cell:function(e){var t=e.row.original;if(!t.original_price_incl_tax)return null;var r="default"!==t.calculated_price_type;return(0,F.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,F.jsxs)("div",{className:"flex flex-col items-end",children:[r&&(0,F.jsx)("span",{className:"text-gray-400 line-through",children:(0,oy.rX)({amount:t.original_price_incl_tax,currency:n})}),(0,F.jsx)("span",{children:(0,oy.rX)({amount:t.calculated_price_incl_tax,currency:n})})]}),(0,F.jsxs)("span",{className:"text-gray-400",children:[" ",n.toUpperCase()]})]})}}]},[]),C=(0,rN.useTable)({columns:P,data:O||[],manualPagination:!0,initialState:{pageIndex:h,pageSize:zP,selectedRowIds:{}},pageCount:p,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},rN.usePagination,rN.useRowSelect,function(e){e.visibleColumns.push(function(e){return[{id:"selection",Header:function(e){var r=e.getToggleAllRowsSelectedProps;return t?null:(0,F.jsx)("div",{children:(0,F.jsx)(rF,zj(zg({},r()),{type:t?"radio":"checkbox"}))})},Cell:function(e){var r=e.row,n=e.toggleAllRowsSelected,i=e.toggleRowSelected,o=r.getToggleRowSelectedProps(),a=r.getToggleRowSelectedProps();return(0,F.jsx)("div",{className:(0,ec.Z)({"mr-2":t}),children:(0,F.jsx)(rF,zj(zg({},a),{type:t?"radio":"checkbox",onChange:t?function(){n(!1),i(r.id,!o.checked)}:a.onChange}))})}}].concat(zw(e))})});return(0,B.useEffect)(function(){O&&o(O.filter(function(e){return C.state.selectedRowIds[e.id]}))},[C.state.selectedRowIds,O]),(0,F.jsx)(nC,{hasPagination:!0,isLoading:x,numberOfRows:zP,pagingState:{count:j,offset:u,pageSize:u+C.rows.length,title:"Products",currentPage:C.state.pageIndex+1,pageCount:C.pageCount,nextPage:function(){C.canNextPage&&(d(function(e){return e+C.state.pageSize}),b(function(e){return e+1}),C.nextPage())},prevPage:function(){C.canPreviousPage&&(d(function(e){return Math.max(e-C.state.pageSize,0)}),b(function(e){return e-1}),C.previousPage())},hasNext:C.canNextPage,hasPrev:C.canPreviousPage},children:(0,F.jsxs)(nf,zj(zg({immediateSearchFocus:!0,enableSearch:!0,searchPlaceholder:"Search Product Variants...",searchValue:l,handleSearch:function(e){d(0),b(0),s(e)}},C.getTableProps()),{children:[C.headerGroups.map(function(e){return(0,F.jsx)(nf.HeadRow,zj(zg({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,zj(zg({},e.getHeaderProps()),{children:e.render("Header")}))})}))}),(0,F.jsx)(nf.Body,zj(zg({},C.getTableBodyProps()),{children:C.rows.map(function(e){return C.prepareRow(e),(0,F.jsx)(nf.Row,zj(zg({},e.getRowProps()),{children:e.cells.map(function(e){return(0,F.jsx)(nf.Cell,zj(zg({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))})};function zN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function zk(e){if(Array.isArray(e))return e}function z_(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function zA(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){z_(o,n,i,a,l,"next",e)}function l(e){z_(o,n,i,a,l,"throw",e)}a(void 0)})}}function zD(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function zE(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zZ(e,t){return zk(e)||zD(e,t)||zI(e,t)||zE()}function zI(e,t){if(e){if("string"==typeof e)return zN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zN(e,t)}}function zT(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function zM(e){var t=e.currencyCode,r=e.amountPaid,n=e.newTotal,i=e.differenceDue;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"bg-grey-20 mb-6 h-px w-full"}),(0,F.jsxs)("div",{className:"mb-2 flex h-[40px] justify-between",children:[(0,F.jsx)("span",{className:"text-gray-500",children:"Amount Paid"}),(0,F.jsxs)("span",{className:"text-gray-900",children:[(0,oy.rX)({amount:r,currency:t}),(0,F.jsxs)("span",{className:"text-gray-400",children:[" ",t.toUpperCase()]})]})]}),(0,F.jsxs)("div",{className:"mb-2 flex h-[40px] justify-between",children:[(0,F.jsx)("span",{className:"font-semibold text-gray-900",children:"New Total"}),(0,F.jsx)("span",{className:"text-2xl font-semibold",children:(0,oy.rX)({amount:n,currency:t})})]}),(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("span",{className:"text-gray-500",children:"Difference Due"}),(0,F.jsxs)("span",{className:(0,ec.Z)("text-gray-900",{"text-rose-500":i<0,"text-emerald-500":i>=0}),children:[(0,oy.rX)({amount:i,currency:t}),(0,F.jsxs)("span",{className:"text-gray-400",children:[" ",t.toUpperCase()]})]})]}),(0,F.jsx)("div",{className:"bg-grey-20 mt-8 mb-6 h-px w-full"})]})}function zR(e){var t,r=B.useContext(pf.ej).pop,n=zZ((0,B.useState)([]),2),i=n[0],o=n[1],a=(t=zA(function(){return zT(this,function(t){switch(t.label){case 0:return[4,e.onSubmit(i)];case 1:return t.sent(),r(),[2]}})}),function(){return t.apply(this,arguments)});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)("div",{className:"flex min-h-[680px] flex-col justify-between",children:(0,F.jsx)(zC,{regionId:e.regionId,customerId:e.customerId,currencyCode:e.currencyCode,isReplace:!!e.isReplace,setSelectedVariants:o})})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"space-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:function(){o([]),r()},children:"Back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:a,children:"Save and go back"})]})})]})}function zL(e){var t,r,n,i=e.close,o=e.currentSubtotal,a=e.orderEdit,l=e.currencyCode,s=e.regionId,c=e.customerId,u=e.paidTotal,d=e.refundedTotal,f=(0,B.useRef)(),p=(0,td.Z)(),m=zZ((0,B.useState)(),2),y=m[0],h=m[1],b=zZ((0,B.useState)(!1),2),v=b[0],g=b[1],x=zZ((0,B.useState)(""),2),j=x[0],O=x[1],w=o!==a.subtotal,S=!!a.changes.length,P=(0,en.useAdminRequestOrderEditConfirmation)(a.id),C=P.mutateAsync,N=P.isLoading,k=(0,en.useAdminUpdateOrderEdit)(a.id),_=k.mutateAsync,A=k.isLoading,D=(0,en.useAdminDeleteOrderEdit)(a.id).mutateAsync,E=(0,en.useAdminOrderEditAddLineItem)(a.id).mutateAsync,Z=(0,B.useContext)(pf.ej),I=(t=zA(function(){return zT(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,C()];case 1:if(e.sent(),!y)return[3,3];return[4,_({internal_note:y})];case 2:e.sent(),e.label=3;case 3:return p("Success","Order edit set as requested","success"),[3,5];case 4:return e.sent(),p("Error","Failed to request confirmation","error"),[3,5];case 5:return i(),[2]}})}),function(){return t.apply(this,arguments)}),T=(r=zA(function(){return zT(this,function(e){switch(e.label){case 0:return[4,D()];case 1:return e.sent(),i(),[2]}})}),function(){return r.apply(this,arguments)});(0,B.useEffect)(function(){v&&f.current.focus()},[v]);var M=(n=zA(function(e){return zT(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Promise.all(e.map(function(e){return E({variant_id:e.id,quantity:1})}))];case 1:return t.sent(),p("Success","Added successfully","success"),[3,3];case 2:return t.sent(),p("Error","Error occurred","error"),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)}),R=a.items.sort(function(e,t){return new Date(e.created_at)-new Date(t.created_at)});j&&(R=R.filter(function(e){var t;return e.title.toLowerCase().includes(j)||(null===(t=e.variant)||void 0===t?void 0:t.sku.toLowerCase().includes(j))}));var L={title:"Add Product Variants",onBack:Z.pop,view:(0,F.jsx)(zR,{onSubmit:M,customerId:c,regionId:s,currencyCode:l})};return(0,F.jsx)(pf.ZP,{open:!0,isLargeModal:!0,handleClose:T,context:Z,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:T,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit Order"})}),(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,F.jsx)("span",{className:"text-large font-semibold text-gray-900",children:"Items"}),(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",className:"border-grey-20 mr-2 h-[32px] flex-shrink-0 border text-gray-900",onClick:function(){return Z.push(L)},children:"Add items"}),!v&&(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",className:(0,ec.Z)("h–[32px] h-full w-[32px] flex-shrink-0",{"focus:bg-grey-20":v}),onClick:function(){return g(!0)},children:(0,F.jsx)(r7.Z,{size:16,className:"text-gray-500"})}),v&&(0,F.jsx)(ry.Z,{small:!0,deletable:!0,ref:f,value:j,onDelete:function(){v&&O(""),g(function(e){return!e})},placeholder:"Filter items...",onChange:function(e){return O(e.target.value)},prefix:(0,F.jsx)(r7.Z,{size:14,className:"text-gray-400"})})]})]}),R.map(function(e){return(0,F.jsx)(zs,{item:e,customerId:c,regionId:s,currencyCode:l,change:a.changes.find(function(t){return t.line_item_id===e.id||t.original_line_item_id===e.id})},e.id)}),(0,F.jsx)("div",{className:"mt-8"}),w&&(0,F.jsx)(zM,{currencyCode:l,amountPaid:u-d,newTotal:a.total,differenceDue:a.total-u}),S&&(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("span",{className:"text-gray-500",children:"Note"}),(0,F.jsx)(ry.Z,{className:"max-w-[455px]",placeholder:"Add a note...",onChange:function(e){return h(e.target.value)},value:y})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full items-center justify-end gap-2",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:T,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"button",disabled:A||N||!S,loading:A||N,onClick:I,children:"Save and close"})]})})]})})}var zz=!1;function zq(e){var t=e.order,r=(0,td.Z)(),n=(0,B.useContext)(D1),i=n.hideModal,o=n.orderEdits,a=n.activeOrderEditId,l=n.setActiveOrderEdit,s=(0,en.useAdminCreateOrderEdit)().mutateAsync,c=null==o?void 0:o.find(function(e){return e.id===a});return((0,B.useEffect)(function(){a||zz||(zz=!0,s({order_id:t.id}).then(function(e){return l(e.order_edit.id)}).catch(function(){r("Error","There is already an active order edit on this order","error"),i()}).finally(function(){return zz=!1}))},[a]),c)?(0,F.jsx)(zL,{close:function(){i()},orderEdit:c,currentSubtotal:t.subtotal,regionId:t.region_id,customerId:t.customer_id,currencyCode:t.currency_code,paidTotal:t.paid_total,refundedTotal:t.refunded_total}):null}function zF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){zF(e,t,r[t])})}return e}function zU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zU(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var zV=function(e){var t=e.form,r=e.requireFields,n=t.path,i=t.register,o=t.formState.errors;return(0,F.jsx)("div",{children:(0,F.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,zG(zH({},i(n("first_name"),{required:null!=r&&!!r.first_name&&s6.Z.required("First name"),pattern:s6.Z.whiteSpaceRule("First name")})),{placeholder:"First Name",label:"First Name",required:null==r?void 0:r.first_name,errors:o})),(0,F.jsx)(ry.Z,zG(zH({},t.register(n("last_name"),{required:null!=r&&!!r.last_name&&s6.Z.required("Last name"),pattern:s6.Z.whiteSpaceRule("Last name")})),{placeholder:"Last Name",label:"Last Name",required:null==r?void 0:r.last_name,errors:o})),(0,F.jsx)(ry.Z,zG(zH({},t.register(n("company"),{pattern:s6.Z.whiteSpaceRule("Company"),required:null!=r&&!!r.company&&s6.Z.required("Company")})),{placeholder:"Company",required:null==r?void 0:r.company,label:"Company",errors:o})),(0,F.jsx)(ry.Z,zG(zH({},t.register(n("phone"),{pattern:s6.Z.whiteSpaceRule("Phone"),required:null!=r&&!!r.phone&&s6.Z.required("Phone")})),{required:null==r?void 0:r.phone,placeholder:"Phone",label:"Phone",errors:o}))]})})};function zB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){zB(e,t,r[t])})}return e}function zQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zQ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var z$=function(e){var t=e.form,r=e.countryOptions,n=e.requireFields,i=t.register,o=t.path,a=t.formState.errors,l=t.control;return(0,F.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,zY(zW({},i(o("address_1"),{required:null!=n&&!!n.address_1&&s6.Z.required("Address 1"),pattern:s6.Z.whiteSpaceRule("Address 1")})),{placeholder:"Address 1",label:"Address 1",required:null==n?void 0:n.address_1,errors:a})),(0,F.jsx)(ry.Z,zY(zW({},i(o("address_2"),{pattern:s6.Z.whiteSpaceRule("Address 2"),required:null!=n&&!!n.address_2&&s6.Z.required("Address 2")})),{placeholder:"Address 2",required:null==n?void 0:n.address_2,label:"Address 2",errors:a})),(0,F.jsx)(ry.Z,zY(zW({},i(o("postal_code"),{required:null!=n&&!!n.postal_code&&s6.Z.required("Postal code"),pattern:s6.Z.whiteSpaceRule("Postal code")})),{placeholder:"Postal code",label:"Postal code",required:null==n?void 0:n.postal_code,autoComplete:"off",errors:a})),(0,F.jsx)(ry.Z,zY(zW({placeholder:"City",label:"City"},i(o("city"),{required:null!=n&&!!n.city&&s6.Z.required("City"),pattern:s6.Z.whiteSpaceRule("City")})),{required:null==n?void 0:n.city,errors:a})),(0,F.jsx)(ry.Z,zY(zW({},i(o("province"),{pattern:s6.Z.whiteSpaceRule("Province"),required:null!=n&&!!n.province&&s6.Z.required("Province")})),{placeholder:"Province",label:"Province",required:null==n?void 0:n.province,errors:a})),(0,F.jsx)(tR.Qr,{control:l,name:o("country_code"),rules:{required:null!=n&&!!n.country_code&&s6.Z.required("Country")},render:function(e){var t=e.field,i=t.value,l=t.onChange;return(0,F.jsx)(lS,{label:"Country",required:null==n?void 0:n.country_code,value:i,options:r,onChange:l,name:o("country_code"),errors:a,isClearable:!(null==n?void 0:n.country_code)})}})]})};function zK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){zK(e,t,r[t])})}return e}function zX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z0(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zX(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var z1=function(e){var t=e.address,r=e.allowedCountries,n=e.onClose,i=e.onSave,o=e.open,a=e.type,l=e.submitting,s=void 0!==l&&l,c=(0,tR.cI)({defaultValues:z2(t)}),u=c.reset,d=c.formState.isDirty,f=c.handleSubmit,p=(0,td.Z)();(0,B.useEffect)(function(){o&&u(z2(t))},[t,o,u]);var m=(void 0===r?[]:r).map(function(e){return{label:e.display_name,value:e.iso_2}}).filter(Boolean),y=f(function(e){var t={},r=e.contact,o=e.location,l=e.metadata,s=o.country_code.value,c=rd(l);return"shipping"===a?t.shipping_address=z0(zJ({},r,o),{country_code:s,metadata:c}):t.billing_address=z0(zJ({},r,o),{country_code:s,metadata:c}),i(t,{onSuccess:function(){p("Success","Successfully updated address","success"),n()},onError:function(e){return p("Error",(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{open:o,handleClose:n,children:(0,F.jsx)("form",{onSubmit:y,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsxs)("span",{className:"inter-xlarge-semibold",children:[a===O.BILLING?"Billing":"Shipping"," Address"]})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Contact"}),(0,F.jsx)(zV,{form:(0,tL.G)(c,"contact")})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Location"}),(0,F.jsx)(z$,{form:(0,tL.G)(c,"location"),countryOptions:m})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(c,"metadata")})]})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:n,type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",loading:s,disabled:s||!d,children:"Save and close"})]})})]})})})},z2=function(e){var t=(null==e?void 0:e.country_code)?wb[e.country_code.toUpperCase()]:"";return{contact:{first_name:(null==e?void 0:e.first_name)||"",last_name:(null==e?void 0:e.last_name)||"",phone:(null==e?void 0:e.phone)||"",company:(null==e?void 0:e.company)||null},location:{address_1:(null==e?void 0:e.address_1)||"",address_2:(null==e?void 0:e.address_2)||null,city:(null==e?void 0:e.city)||"",province:(null==e?void 0:e.province)||null,country_code:(null==e?void 0:e.country_code)?{label:t,value:e.country_code}:{label:"",value:""},postal_code:(null==e?void 0:e.postal_code)||""},metadata:rf(null==e?void 0:e.metadata)}};function z3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){z3(e,t,r[t])})}return e}function z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z6(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function z8(e,t){if(null==e)return{};var r,n,i=z7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function z7(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var z9=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=z8(e,["size","color"]);return(0,F.jsxs)("svg",z4(z5({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("circle",{cx:"10",cy:"10",r:"7.25",stroke:i,strokeWidth:"1.5"}),(0,F.jsx)("path",{d:"M15 10C15 7.23858 12.7614 5 10 5V10H15Z",fill:i})]}))};function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qt(e){if(Array.isArray(e))return e}function qr(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function qn(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qi(e,t){return qt(e)||qr(e,t)||qo(e,t)||qn()}function qo(e,t){if(e){if("string"==typeof e)return qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qe(e,t)}}var qa=function(e){var t=e.reservations,r=e.lineItem,n=(0,en.useAdminVariantsInventory)(r.variant_id,{enabled:!!(null==r?void 0:r.variant_id)}),i=n.variant,o=n.isLoading,a=n.isFetching,l=(0,en.useAdminStockLocations)({id:(null==t?void 0:t.map(function(e){return e.location_id}))||[]}).stock_locations,s=qi(B.useState(null),2),c=s[0],u=s[1],d=new Map((null==l?void 0:l.map(function(e){return[e.id,e.name]}))||[]),f=(0,iM.sum)((null==t?void 0:t.map(function(e){return e.quantity}))||[]),p=r.quantity-((null==r?void 0:r.fulfilled_quantity)||0)-f;return!o&&!a&&r.variant_id&&(null==i?void 0:i.inventory.length)?(0,F.jsxs)("div",{className:p?"text-rose-50":"text-grey-40",children:[(0,F.jsx)(a9.Z,{content:(0,F.jsx)("div",{className:"inter-small-regular flex flex-col items-center px-1 pt-1 pb-2",children:f||p?(0,F.jsxs)("div",{className:"gap-y-base grid grid-cols-1 divide-y",children:[!!p&&(0,F.jsxs)("span",{className:"flex w-full items-center",children:[p," items not reserved"]}),null==t?void 0:t.map(function(e){return(0,F.jsx)(ql,{locationName:d.get(e.location_id),totalReservedQuantity:f,reservation:e,lineItem:r,onClick:function(){return u(e)}},e.id)})]}):(0,F.jsx)("span",{className:"flex w-full items-center",children:"This item has been fulfilled."})}),side:"bottom",children:p?f?(0,F.jsx)(z9,{size:20}):(0,F.jsx)(K.Z,{fillType:"solid",size:20}):(0,F.jsx)(PC.Z,{size:20})}),c&&(0,F.jsx)(kY,{totalReservedQuantity:f,close:function(){return u(null)},reservation:c,item:r})]}):(0,F.jsx)("div",{className:"w-[20px]"})},ql=function(e){var t=e.reservation,r=e.locationName,n=e.onClick;return(0,F.jsxs)("div",{className:"pt-base first:pt-0",children:["".concat(t.quantity," item: ").concat(r),(0,F.jsx)(Y.Z,{onClick:n,variant:"ghost",size:"small",className:"mt-2 w-full border",children:"Edit reservation"})]})},qs=function(e){var t,r,n=e.item,i=e.currencyCode,o=e.reservations,a=e.isAllocatable,l=(0,o3.ye)().isFeatureEnabled;return(0,F.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mx-[-5px] mb-1 flex h-[64px] justify-between py-2 px-[5px]",children:[(0,F.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,F.jsx)("div",{className:"rounded-rounded flex h-[48px] w-[36px] overflow-hidden",children:n.thumbnail?(0,F.jsx)("img",{src:n.thumbnail,className:"object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"flex max-w-[185px] flex-col justify-center",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-90 truncate",children:n.title}),(null==n?void 0:n.variant)&&(0,F.jsx)("span",{className:"inter-small-regular text-grey-50 truncate",children:"".concat(n.variant.title).concat(n.variant.sku?" (".concat(n.variant.sku,")"):"")})]})]}),(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsxs)("div",{className:"small:space-x-2 medium:space-x-4 large:space-x-6 mr-3 flex",children:[(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:(0,oy.rX)({amount:(null!==(t=null==n?void 0:n.total)&&void 0!==t?t:0)/n.quantity,currency:i,digits:2,tax:[]})}),(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50",children:["x ",n.quantity]}),l("inventoryService")&&(void 0===a||a)&&(0,F.jsx)(qa,{reservations:o,lineItem:n}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-90 min-w-[55px] text-right",children:(0,oy.rX)({amount:null!==(r=n.total)&&void 0!==r?r:0,currency:i,digits:2,tax:[]})})]}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:i.toUpperCase()})]})]})};function qc(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function qu(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){qc(o,n,i,a,l,"next",e)}function l(e){qc(o,n,i,a,l,"throw",e)}a(void 0)})}}function qd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){qd(e,t,r[t])})}return e}function qp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qm(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qp(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function qy(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var qh=function(e){var t,r=e.items,n=e.close,i=e.reservationItemsMap,o=(0,en.useAdminCreateReservation)().mutateAsync,a=(0,en.useMedusa)().client,l=(0,td.Z)(),s=(0,tR.cI)({defaultValues:{items:[]}}),c=s.handleSubmit,u=s.control,d=(0,tR.qo)({control:u,name:"location"}),f=(0,en.useAdminStockLocations)(),p=f.stock_locations,m=f.isLoading,y=(0,B.useMemo)(function(){return p?p.map(function(e){return{value:e.id,label:e.name}}):[]},[p]),h=(t=qu(function(e){var t,r;return qy(this,function(i){var s,c;switch(i.label){case 0:if(!(null===(t=e.location)||void 0===t?void 0:t.value))return[2];return[4,Promise.all(e.items.map((s=qu(function(t){return qy(this,function(r){switch(r.label){case 0:if(!t.quantity)return[2,{}];return[4,o({quantity:t.quantity,line_item_id:t.line_item_id,inventory_item_id:t.inventory_item_id,location_id:e.location.value}).then(function(e){return{result:e}}).catch(function(e){return{error:e}})];case 1:return[2,r.sent()]}})}),function(e){return s.apply(this,arguments)})))];case 1:if(!(r=i.sent()).some(function(e){return e.error}))return[3,3];return[4,Promise.all(r.map((c=qu(function(e){var t;return qy(this,function(r){switch(r.label){case 0:if(!(t=e.result))return[3,2];return[4,a.admin.reservations.delete(t.id)];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e){return c.apply(this,arguments)})))];case 2:return i.sent(),l("Couldn't allocate items",r.filter(function(e){return!!e.error}).map(function(e){var t=e.error;return(0,tf.e)(t)}).join(", "),"error"),[3,4];case 3:l("Items allocated","Items have been allocated successfully","success"),n(),i.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,F.jsx)("form",{onSubmit:c(h),children:(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",type:"button",onClick:n,children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-small flex",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",onClick:n,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"submit",children:"Save reservation"})]})]})}),(0,F.jsx)(c3.Main,{className:"medium:w-6/12",children:m||!p?(0,F.jsx)("div",{children:"Loading..."}):(0,F.jsxs)("div",{className:"mt-16 flex flex-col",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Allocate order items"}),(0,F.jsxs)("div",{className:"mt-6 flex w-full items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:"Location"}),(0,F.jsx)("p",{className:"inter-base-regular",children:"Choose where you wish to allocate from"})]}),(0,F.jsx)("div",{className:"w-1/2",children:(0,F.jsx)(tR.Qr,{name:"location",control:u,rules:{required:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(lS,{value:r,onChange:n,options:y})}})})]}),(0,F.jsx)("div",{className:(0,ec.Z)("border-grey-20 mt-8 flex w-full flex-col border-t",{"pointer-events-none opacity-50":!(null==d?void 0:d.value)}),children:(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mt-8",children:"Items to allocate"}),(0,F.jsx)("p",{className:"inter-base-regular",children:"Select the number of items that you wish to allocate."}),null==r?void 0:r.map(function(e,t){var r;return(0,F.jsx)(qb,{form:(0,tL.G)(s,"items.".concat(t)),item:e,locationId:null==d?void 0:d.value,reservedQuantity:(0,iM.sum)((null===(r=i[e.id])||void 0===r?void 0:r.map(function(e){return e.quantity}))||[])},t)})]})})]})})]})})},qb=function(e){var t,r,n=e.form,i=e.item,o=e.locationId,a=e.reservedQuantity,l=e.compact,s=(0,en.useAdminVariantsInventory)(i.variant_id),c=s.variant,u=s.isLoading,d=n.register,f=n.path;n.setValue(f("line_item_id"),i.id),(0,B.useEffect)(function(){var e;(null==c?void 0:null===(e=c.inventory)||void 0===e?void 0:e.length)&&n.setValue(f("inventory_item_id"),c.inventory[0].id)},[c,n,f]);var p=(0,B.useMemo)(function(){if(u||!o||!c)return{};var e,t,r=c.inventory,n=null==r?void 0:null===(t=r[0])||void 0===t?void 0:null===(e=t.location_levels)||void 0===e?void 0:e.find(function(e){return e.location_id===o});return n?{availableQuantity:n.available_quantity,inStockQuantity:n.stocked_quantity}:{}},[c,o,u]),m=p.availableQuantity,y=p.inStockQuantity;if(!(null===(t=c.inventory)||void 0===t?void 0:t.length))return null;var h=kH(i)-(a||0),b=Math.min(h,"number"==typeof m?m:0);return(0,F.jsxs)("div",{className:"mt-8 flex w-full items-start justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-base flex w-7/12",children:[(0,F.jsx)("div",{className:"min-w-9",children:(0,F.jsx)(kR,{size:"medium",src:i.thumbnail})}),(0,F.jsxs)("div",{className:"text-grey-50 truncate",children:[(0,F.jsxs)("p",{className:"gap-x-2xsmall nowrap flex grow ",children:[(0,F.jsx)("p",{className:"inter-base-semibold text-grey-90 truncate",children:i.title}),"(".concat(i.variant.sku,")")]}),(0,F.jsx)("p",{className:"inter-base-regular ",children:(null===(r=i.variant.options)||void 0===r?void 0:r.map(function(e){return e.value}))||i.variant.title||"-"})]})]}),(0,F.jsxs)("div",{className:(0,ec.Z)("gap-x-large flex items-center",{"gap-y-xsmall flex-col-reverse":l}),children:[(0,F.jsxs)("div",{className:(0,ec.Z)("inter-base-regular text-grey-50 gap-x-xsmall flex items-end whitespace-nowrap",{"flex-col":!l}),children:[(0,F.jsxs)("p",{children:[m||0," available"]}),(0,F.jsxs)("p",{children:["(",y||0," in stock)"]})]}),(0,F.jsx)(ry.Z,qm(qf({},d(f("quantity"),{valueAsNumber:!0})),{type:"number",className:"min-w-[120px]",defaultValue:0,disabled:h<0,min:0,max:b>0?b:0,suffix:(0,F.jsxs)("span",{className:"flex",children:["/"," ",(0,F.jsx)("span",{className:"ml-1",children:b>0?b:0})]})}))]})]})};function qv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qg(e){if(Array.isArray(e))return e}function qx(e){if(Array.isArray(e))return qv(e)}function qj(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function qO(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){qj(o,n,i,a,l,"next",e)}function l(e){qj(o,n,i,a,l,"throw",e)}a(void 0)})}}function qw(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function qS(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function qP(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qC(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qN(e,t){return qg(e)||qS(e,t)||q_(e,t)||qP()}function qk(e){return qx(e)||qw(e)||q_(e)||qC()}function q_(e,t){if(e){if("string"==typeof e)return qv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qv(e,t)}}function qA(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var qD=function(e){var t,r,n,i=e.order,o=e.reservations,a=(0,s1.Z)(),l=a.state,s=a.open,c=a.close,u=(0,B.useContext)(D1).showModal,d=(0,en.useMedusa)().client,f=(0,o3.ye)().isFeatureEnabled,p=f("inventoryService"),m=qN(B.useState(new Map),2),y=m[0],h=m[1];B.useEffect(function(){var e;p&&(e=qO(function(){var e;return qA(this,function(t){switch(t.label){case 0:var r;return[4,Promise.all(i.items.map((r=qO(function(e){return qA(this,function(t){switch(t.label){case 0:if(!e.variant_id)return[2];return[4,d.admin.variants.getInventory(e.variant_id)];case 1:return[2,t.sent()]}})}),function(e){return r.apply(this,arguments)})))];case 1:return e=t.sent(),h(new Map(e.filter(function(e){return!!e}).map(function(e){return[e.variant.id,e.variant]}))),[2]}})}),function(){return e.apply(this,arguments)})()},[i.items,p,d.admin.variants]);var b=(0,B.useMemo)(function(){return(null==o?void 0:o.length)&&p?o.reduce(function(e,t){return t.line_item_id&&(e[t.line_item_id]=e[t.line_item_id]?qk(e[t.line_item_id]).concat([t]):[t]),e},{}):{}},[o,p]),v=(0,B.useMemo)(function(){return i.items.every(function(e){if(!e.variant_id||!(null===(t=y.get(e.variant_id))||void 0===t?void 0:t.inventory.length))return!0;var t,r=b[e.id];return e.quantity===e.fulfilled_quantity||r&&(0,iM.sum)(r.map(function(e){return e.quantity}))===e.quantity-(e.fulfilled_quantity||0)})},[i.items,y,b]),g=(0,B.useMemo)(function(){var e,t=0,r=0,n=0,o=(0,iM.sum)((null==i?void 0:i.swaps.map(function(e){return e.difference_due}))||[0]);return(null==i?void 0:null===(e=i.refunds)||void 0===e?void 0:e.length)&&i.refunds.forEach(function(e){("other"===e.reason||"discount"===e.reason)&&(t+=e.amount),"return"===e.reason&&(n+=e.amount),"swap"===e.reason&&(r+=e.amount)}),{hasMovements:o+t+r+n!==0,swapAmount:o,manualRefund:t,swapRefund:r,returnRefund:n}},[i]),x=g.hasMovements,j=g.swapAmount,O=g.manualRefund,w=g.swapRefund,S=g.returnRefund,P=(0,B.useMemo)(function(){var e=[];return f("order_editing")&&e.push({label:"Edit Order",onClick:u}),f("inventoryService")&&!v&&e.push({label:"Allocate",onClick:s}),e},[u,f,s,v]),C=!["canceled","archived"].includes(i.status);return(0,F.jsxs)(tI,{className:"h-auto min-h-0 w-full",title:"Summary",status:f("inventoryService")&&Array.isArray(o)&&(0,F.jsx)(nN.Z,{onClick:v||!C?void 0:s,variant:v||!C?"success":"danger",title:v||!C?"Allocated":"Not fully allocated",className:"rounded-rounded border px-3 py-1.5"}),actionables:P,children:[(0,F.jsxs)("div",{className:"mt-6",children:[null===(t=i.items)||void 0===t?void 0:t.map(function(e,t){return(0,F.jsx)(qs,{item:e,currencyCode:i.currency_code,reservations:b[e.id],isAllocatable:C},t)}),(0,F.jsx)(oh,{currency:i.currency_code,totalAmount:i.subtotal,totalTitle:"Subtotal"}),null==i?void 0:null===(r=i.discounts)||void 0===r?void 0:r.map(function(e,t){return(0,F.jsx)(oh,{currency:i.currency_code,totalAmount:-1*i.discount_total,totalTitle:(0,F.jsxs)("div",{className:"inter-small-regular text-grey-90 flex items-center",children:["Discount:"," ",(0,F.jsx)(oP.Z,{className:"ml-3",variant:"default",children:e.code})]})},t)}),null==i?void 0:null===(n=i.gift_cards)||void 0===n?void 0:n.map(function(e,t){return(0,F.jsx)(oh,{currency:i.currency_code,totalAmount:-1*i.gift_card_total,totalTitle:(0,F.jsxs)("div",{className:"inter-small-regular text-grey-90 flex items-center",children:["Gift card:",(0,F.jsx)(oP.Z,{className:"ml-3",variant:"default",children:e.code}),(0,F.jsx)("div",{className:"ml-2",children:(0,F.jsx)(ED,{value:e.code,showValue:!1,iconSize:16})})]})},t)}),(0,F.jsx)(oh,{currency:i.currency_code,totalAmount:i.shipping_total,totalTitle:"Shipping"}),(0,F.jsx)(oh,{currency:i.currency_code,totalAmount:i.tax_total,totalTitle:"Tax"}),(0,F.jsx)(oh,{variant:"large",currency:i.currency_code,totalAmount:i.total,totalTitle:x?"Original Total":"Total"}),(0,F.jsx)(ov,{manualRefund:O,swapAmount:j,swapRefund:w,returnRefund:S,paidTotal:i.paid_total,refundedTotal:i.refunded_total,currency:i.currency_code})]}),l&&(0,F.jsx)(qh,{reservationItemsMap:b,items:i.items,close:c})]})};function qE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){qE(e,t,r[t])})}return e}function qI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qT(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qI(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var qM=function(e){var t=e.orderId,r=e.email,n=e.handleClose,i=(0,en.useAdminUpdateOrder)(t),o=i.mutate,a=i.isLoading,l=(0,tR.cI)({defaultValues:{email:r}}),s=l.register,c=l.handleSubmit,u=(0,td.Z)();return(0,F.jsx)(tp.Z,{handleClose:n,isLargeModal:!0,children:(0,F.jsx)("form",{onSubmit:c(function(e){return o({email:e.email},{onSuccess:function(){u("Success","Successfully updated the email address","success"),n()},onError:function(e){return u("Error",(0,tf.e)(e),"error")}})}),children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Email Address"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)("div",{className:"space-y-4",children:(0,F.jsx)("div",{className:"mt-4 flex space-x-4",children:(0,F.jsx)(ry.Z,qT(qZ({label:"Email"},s("email")),{placeholder:"Email"}))})})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",type:"button",onClick:n,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"large",className:"text-small w-32 justify-center",variant:"primary",loading:a,disabled:a,type:"submit",children:"Save"})]})})]})})})};function qR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qL(e){if(Array.isArray(e))return e}function qz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qq(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function qF(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){qz(e,t,r[t])})}return e}function qU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qU(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function qV(e,t){return qL(e)||qq(e,t)||qB(e,t)||qF()}function qB(e,t){if(e){if("string"==typeof e)return qR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qR(e,t)}}var qW=function(e){var t=e.orderId,r=e.fulfillment,n=e.handleCancel,i=(0,tR.cI)({defaultValues:{tracking_numbers:[{value:""}]},shouldUnregister:!0}),o=i.control,a=i.watch,l=i.handleSubmit,s=qV((0,B.useState)(!1),2),c=s[0],u=s[1],d=(0,tR.Dq)({control:o,name:"tracking_numbers"}),f=d.fields,p=d.append,m=d.remove,y=a("tracking_numbers"),h=f.map(function(e,t){return qH({},e,y[t])}),b=(0,en.useAdminCreateShipment)(t),v=(0,en.useAdminCreateSwapShipment)(t),g=(0,en.useAdminCreateClaimShipment)(t),x=b.isLoading||v.isLoading||g.isLoading,j=(0,td.Z)();return(0,F.jsx)(tp.Z,{handleClose:n,isLargeModal:!0,children:(0,F.jsx)("form",{onSubmit:l(function(e){var t,i=r.claim_order_id||r.swap_id||r.order_id,o=qV(i.split("_"),1)[0],a=e.tracking_numbers.map(function(e){return e.value}),l=b,s="Successfully marked order as shipped";switch(o){case"swap":l=v,t={fulfillment_id:r.id,swap_id:i,tracking_numbers:a,no_notification:c},s="Successfully marked swap as shipped";break;case"claim":l=g,t={fulfillment_id:r.id,claim_id:i,tracking_numbers:a},s="Successfully marked claim as shipped";break;default:t={fulfillment_id:r.id,tracking_numbers:a,no_notification:c}}l.mutate(t,{onSuccess:function(){j("Success",s,"success"),n()},onError:function(e){return j("Error",(0,tf.e)(e),"error")}})},function(e){console.log(e)}),children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Mark Fulfillment Shipped"})}),(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-base-semibold mb-2",children:"Tracking"}),(0,F.jsx)("div",{className:"flex flex-col space-y-2",children:h.map(function(e,t){return(0,F.jsx)(tR.Qr,{name:"tracking_numbers.".concat(t,".value"),control:o,rules:{shouldUnregister:!0},render:function(e){var r=e.field;return(0,F.jsx)(ry.Z,qG(qH({deletable:0!==t,label:0===t?"Tracking number":"",type:"text",placeholder:"Tracking number..."},r),{onDelete:function(){return m(t)}}))}},e.id)})})]}),(0,F.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,F.jsx)(Y.Z,{size:"small",onClick:function(){return p({value:void 0})},variant:"secondary",disabled:h.some(function(e){return!e.value}),children:"+ Add Additional Tracking Number"})})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex h-8 w-full justify-between",children:[(0,F.jsxs)("div",{className:"flex h-full cursor-pointer items-center",onClick:function(){return u(!c)},children:[(0,F.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(!c&&"bg-violet-60"),children:(0,F.jsx)("span",{className:"self-center",children:!c&&(0,F.jsx)(rT,{size:16})})}),(0,F.jsx)("input",{id:"noNotification",className:"hidden",name:"noNotification",checked:!c,type:"checkbox"}),(0,F.jsxs)("span",{className:"text-grey-90 gap-x-xsmall ml-3 flex items-center",children:["Send notifications",(0,F.jsx)(rm.Z,{content:""})]})]}),(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",onClick:n,type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"large",className:"text-small w-32 justify-center",variant:"primary",type:"submit",loading:x,disabled:x,children:"Complete"})]})]})})]})})})};function qQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qY(e){if(Array.isArray(e))return e}function q$(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function qK(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){q$(o,n,i,a,l,"next",e)}function l(e){q$(o,n,i,a,l,"throw",e)}a(void 0)})}}function qJ(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function qX(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q0(e,t){return qY(e)||qJ(e,t)||q1(e,t)||qX()}function q1(e,t){if(e){if("string"==typeof e)return qQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qQ(e,t)}}function q2(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var q3=function(e){if(!e)return[];var t,r,n=[];return e.fulfillments.forEach(function(e,t){n.push({title:"Fulfillment #".concat(t+1),type:"default",fulfillment:e})}),(null===(t=e.claims)||void 0===t?void 0:t.length)&&e.claims.forEach(function(e){"not_fulfilled"!==e.fulfillment_status&&e.fulfillments.forEach(function(t,r){n.push({title:"Claim fulfillment #".concat(r+1),type:"claim",fulfillment:t,claim:e})})}),(null===(r=e.swaps)||void 0===r?void 0:r.length)&&e.swaps.forEach(function(e){"not_fulfilled"!==e.fulfillment_status&&e.fulfillments.forEach(function(t,r){n.push({title:"Swap fulfillment #".concat(r+1),type:"swap",fulfillment:t,swap:e})})}),n},q5=function(){var e,t,r,n,i,o,a=(0,V.useParams)().id,l=o2(),s=q0((0,B.useState)(null),2),c=s[0],u=s[1],d=q0((0,B.useState)(null),2),f=d[0],p=d[1],m=(0,s1.Z)(),y=m.state,h=m.toggle,b=q0((0,B.useState)(!1),2),v=b[0],g=b[1],x=q0((0,B.useState)(!1),2),j=x[0],w=x[1],S=q0((0,B.useState)(null),2),P=S[0],C=S[1],N=(0,en.useAdminOrder)(a),k=N.order,_=N.isLoading,A=(0,en.useAdminCapturePayment)(a),D=(0,en.useAdminCancelOrder)(a),E=(0,s1.Z)(),Z=E.state,I=E.close,T=E.open,M=(0,en.useAdminUpdateOrder)(a).mutate,R=(0,en.useAdminRegion)(null==k?void 0:k.region_id,{enabled:!!(null==k?void 0:k.region_id)}).region,L=(0,o3.ye)().isFeatureEnabled,z=(0,B.useMemo)(function(){return L("inventoryService")},[L]),q=(0,en.useAdminReservations)({line_item_id:null==k?void 0:k.items.map(function(e){return e.id})},{enabled:z}),H=q.reservations,U=q.refetch;(0,B.useEffect)(function(){z&&U()},[z,U]);var W=(0,V.useNavigate)(),Q=(0,td.Z)(),K=q0(e6("".concat(null==k?void 0:k.display_id),{successDuration:5500,onCopied:function(){return Q("Success","Order ID copied","success")}}),2)[1],J=q0(e6(null==k?void 0:k.email,{successDuration:5500,onCopied:function(){return Q("Success","Email copied","success")}}),2)[1];(0,G.y1)("esc",function(){return W("/a/orders")}),(0,G.y1)("command+i",K);var X=(0,ig.e)().getWidgets,ee=(e=qK(function(){var e;return q2(this,function(t){switch(t.label){case 0:return[4,l({heading:"Cancel order",text:"Are you sure you want to cancel the order?",extraConfirmation:!0,entityName:"order #".concat(null===(e=k)||void 0===e?void 0:e.display_id)})];case 1:if(!t.sent())return[2];return[2,D.mutate(void 0,{onSuccess:function(){return Q("Success","Successfully canceled order","success")},onError:function(e){return Q("Error",(0,tf.e)(e),"error")}})]}})}),function(){return e.apply(this,arguments)}),et=q3(k),er=[{label:"Go to Customer",icon:(0,F.jsx)(iV,{size:"20"}),onClick:function(){return W("/a/customers/".concat(null==k?void 0:k.customer.id))}},{label:"Transfer ownership",icon:(0,F.jsx)($.Z,{size:"20"}),onClick:function(){return h()}}];if(er.push({label:"Edit Shipping Address",icon:(0,F.jsx)(Ep,{size:"20"}),onClick:function(){u({address:null==k?void 0:k.shipping_address,type:O.SHIPPING}),T()}}),er.push({label:"Edit Billing Address",icon:(0,F.jsx)(Ov,{size:"20"}),onClick:function(){u({address:null==k?void 0:k.billing_address,type:O.BILLING}),T()}}),(null==k?void 0:k.email)&&er.push({label:"Edit Email Address",icon:(0,F.jsx)(Ea,{size:"20"}),onClick:function(){p({email:null==k?void 0:k.email})}}),!k&&_)return(0,F.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{size:"small",variant:"secondary"})});k||_||W("/404");var eo=k.items.some(function(e){return e.quantity>(null!==(o=e.fulfilled_quantity)&&void 0!==o?o:0)});return(0,F.jsx)("div",{children:(0,F.jsxs)(D2,{orderId:a,children:[(0,F.jsx)(eb,{path:"/a/orders",label:"Back to Orders",className:"mb-xsmall"}),_||!k?(0,F.jsx)(tI,{className:"pt-2xlarge flex w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{children:X("order.details.before").map(function(e,t){return(0,F.jsx)(eg.Z,{injectionZone:"order.details.before",widget:e,entity:k},t)})}),(0,F.jsxs)("div",{className:"flex space-x-4",children:[(0,F.jsxs)("div",{className:"gap-y-base flex h-full w-7/12 flex-col",children:[(0,F.jsx)(tI,{className:"min-h-[200px] w-full",customHeader:(0,F.jsx)(a9.Z,{side:"top",content:"Copy ID",children:(0,F.jsxs)("button",{className:"inter-xlarge-semibold text-grey-90 active:text-violet-90 flex cursor-pointer items-center gap-x-2",onClick:K,children:["#",k.display_id," ",(0,F.jsx)(tn,{size:16})]})}),subtitle:iW()(k.created_at).format("D MMMM YYYY hh:mm a"),status:(0,F.jsx)(ox,{status:k.status}),forceDropdown:!0,actionables:[{label:"Cancel Order",icon:(0,F.jsx)(oq,{size:"20"}),variant:"danger",onClick:function(){return ee()}}],children:(0,F.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Email"}),(0,F.jsxs)("button",{className:"text-grey-90 active:text-violet-90 flex cursor-pointer items-center gap-x-1",onClick:J,children:[k.email,(0,F.jsx)(tn,{size:12})]})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Phone"}),(0,F.jsx)("div",{children:(null===(t=k.shipping_address)||void 0===t?void 0:t.phone)||"N/A"})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Payment"}),(0,F.jsx)("div",{children:null===(r=k.payments)||void 0===r?void 0:r.map(function(e){return(0,iM.capitalize)(e.provider_id)}).join(", ")})]})]})}),(0,F.jsx)(qD,{order:k,reservations:H||[]}),(0,F.jsx)(tI,{className:"h-auto min-h-0 w-full",title:"Payment",status:(0,F.jsx)(oj,{status:k.payment_status}),customActionable:(0,F.jsx)(oS,{order:k,capturePayment:A,showRefundMenu:function(){return w(!0)}}),children:(0,F.jsxs)("div",{className:"mt-6",children:[k.payments.map(function(e){return(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)(oh,{currency:k.currency_code,totalAmount:e.amount,totalTitle:e.id,subtitle:"".concat(iW()(e.created_at).format("DD MMM YYYY hh:mm"))}),!!e.amount_refunded&&(0,F.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsx)("div",{className:"text-grey-40 mr-2",children:(0,F.jsx)(D9,{})}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-90",children:"Refunded"})]}),(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsxs)("div",{className:"inter-small-regular text-grey-90 mr-3",children:["-",(0,oy.rX)({amount:e.amount_refunded,currency:k.currency_code})]}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:k.currency_code.toUpperCase()})]})]})]},e.id)}),(0,F.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,F.jsx)("div",{className:"inter-small-semibold text-grey-90",children:"Total Paid"}),(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsx)("div",{className:"inter-small-semibold text-grey-90 mr-3",children:(0,oy.rX)({amount:k.paid_total-k.refunded_total,currency:k.currency_code})}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:k.currency_code.toUpperCase()})]})]})]})}),(0,F.jsx)(tI,{className:"h-auto min-h-0 w-full",title:"Fulfillment",status:(0,F.jsx)(oO,{status:k.fulfillment_status}),customActionable:"canceled"!==k.status&&eo&&(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return g(!0)},children:"Create Fulfillment"}),children:(0,F.jsxs)("div",{className:"mt-6",children:[k.shipping_methods.map(function(e){var t;return(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Shipping Method"}),(0,F.jsx)("span",{className:"inter-small-regular text-grey-90 mt-2",children:(null==e?void 0:null===(t=e.shipping_option)||void 0===t?void 0:t.name)||""}),(0,F.jsx)("div",{className:"mt-4 flex w-full flex-grow items-center",children:(0,F.jsx)(tu,{data:null==e?void 0:e.data})})]},e.id)}),(0,F.jsx)("div",{className:"inter-small-regular mt-6 ",children:et.map(function(e,t){return(0,F.jsx)(o7,{order:k,fulfillmentObj:e,setFullfilmentToShip:C},t)})})]})}),(0,F.jsx)(tI,{className:"h-auto min-h-0 w-full",title:"Customer",actionables:er,children:(0,F.jsxs)("div",{className:"mt-6",children:[(0,F.jsxs)("div",{className:"flex w-full items-center space-x-4",children:[(0,F.jsx)("div",{className:"flex h-[40px] w-[40px] ",children:(0,F.jsx)(iY.Z,{user:k.customer,font:"inter-large-semibold",color:"bg-fuschia-40"})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h1",{className:"inter-large-semibold text-grey-90",children:zn(k)}),k.shipping_address&&(0,F.jsxs)("span",{className:"inter-small-regular text-grey-50",children:[k.shipping_address.city,","," ",wb[null===(n=k.shipping_address.country_code)||void 0===n?void 0:n.toUpperCase()]]})]})]}),(0,F.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{className:"inter-small-regular text-grey-50 mb-1",children:"Contact"}),(0,F.jsxs)("div",{className:"inter-small-regular flex flex-col",children:[(0,F.jsx)("span",{children:k.email}),(0,F.jsx)("span",{children:(null===(i=k.shipping_address)||void 0===i?void 0:i.phone)||""})]})]}),(0,F.jsx)(og,{title:"Shipping",addr:k.shipping_address}),(0,F.jsx)(og,{title:"Billing",addr:k.billing_address})]})]})}),(0,F.jsx)("div",{children:X("order.details.after").map(function(e,t){return(0,F.jsx)(eg.Z,{injectionZone:"order.details.after",widget:e,entity:k},t)})}),(0,F.jsx)(tT,{data:k,title:"Raw order"}),(0,F.jsx)(ev,{})]}),(0,F.jsx)(zt,{orderId:k.id})]}),(0,F.jsx)(z1,{onClose:I,open:Z,onSave:M,address:(null==c?void 0:c.address)||void 0,type:null==c?void 0:c.type,allowedCountries:null==R?void 0:R.countries}),f&&(0,F.jsx)(qM,{handleClose:function(){return p(null)},email:f.email,orderId:k.id}),v&&(0,F.jsx)(Mm,{orderToFulfill:k,handleCancel:function(){return g(!1)},orderId:k.id,onComplete:z?U:function(){}}),j&&(0,F.jsx)(Ly,{order:k,onDismiss:function(){return w(!1)}}),y&&(0,F.jsx)(lI,{order:k,onDismiss:h}),P&&(0,F.jsx)(qW,{handleCancel:function(){return C(null)},fulfillment:P,orderId:k.id}),(0,F.jsx)(D1.Consumer,{children:function(e){return e.isModalVisible&&(0,F.jsx)(zq,{order:k})}})]})]})})};function q6(e){var t,r={filterable_fields:{fulfillment_status:e.fulfillment.filter,payment_status:e.payment.filter,region_id:e.region.filter,status:e.status.filter,created_at:Object.keys(e.date.filter||{}).reduce(function(t,r){return t[r]=new Date(1e3*Number(e.date.filter[r])).toISOString(),t},{})}};for(var n in r.filterable_fields)(null===r.filterable_fields[n]||(null===(t=r.filterable_fields[n])||void 0===t?void 0:t.length)===0)&&delete r.filterable_fields[n];return r}function q4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function q8(e){if(Array.isArray(e))return e}function q7(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function q9(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fe(e,t){return q8(e)||q7(e,t)||Ft(e,t)||q9()}function Ft(e,t){if(e){if("string"==typeof e)return q4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q4(e,t)}}var Fr=["orders","drafts"],Fn=function(){var e="orders",t=(0,DW.W)().resetInterval,r=(0,V.useNavigate)(),n=(0,en.useAdminCreateBatchJob)(),i=(0,td.Z)(),o=Fe((0,B.useState)(),2),a=o[0],l=o[1],s=(0,s1.Z)(!1),c=s.open,u=s.close,d=s.state,f=(0,ig.e)().getWidgets,p=(0,B.useMemo)(function(){return[(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return c()},children:[(0,F.jsx)(AX,{size:20}),"Export Orders"]},"export")]},[e]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"gap-y-xsmall flex h-full grow flex-col",children:[f("order.list.before").map(function(e,t){return(0,F.jsx)(eg.Z,{injectionZone:"order.list.before",widget:e,entity:void 0},t)}),(0,F.jsx)("div",{className:"flex w-full grow flex-col",children:(0,F.jsx)(tI,{customHeader:(0,F.jsx)(s3,{views:Fr,setActiveView:function(e){"drafts"===e&&r("/a/draft-orders")},activeView:e}),className:"h-fit",customActionable:p,children:(0,F.jsx)(DB,{setContextFilters:l})})}),f("order.list.after").map(function(e,t){return(0,F.jsx)(eg.Z,{injectionZone:"order.list.after",widget:e,entity:void 0},t)}),(0,F.jsx)(ev,{})]}),d&&(0,F.jsx)(A0,{title:"Export Orders",handleClose:function(){return u()},onSubmit:function(){var e={dry_run:!1,type:"order-export",context:a?q6(a):{}};n.mutate(e,{onSuccess:function(){t(),i("Success","Successfully initiated export","success")},onError:function(e){i("Error",(0,tf.e)(e),"error")}}),u()},loading:n.isLoading})]})},Fi=function(){var e=(0,(0,W.V)().getNestedRoutes)("/products");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(Fn,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(q5,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/orders"})},t)})]})};function Fo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Fo(e,t,r[t])})}return e}function Fl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fs(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fl(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var Fc=function(){return[(0,B.useMemo)(function(){return[{Header:"Draft",accessor:"display_id",Cell:function(e){var t=e.cell,r=t.value,n=t.getCellProps;return(0,F.jsx)(nf.Cell,Fs(Fa({},n()),{className:"pl-2",children:"#".concat(r)}))}},{Header:"Order",accessor:"order",Cell:function(e){var t=e.cell,r=t.value,n=t.getCellProps;return(0,F.jsx)(nf.Cell,Fs(Fa({},n()),{children:(null==r?void 0:r.display_id)?"#".concat(null==r?void 0:r.display_id):"-"}))}},{Header:"Date added",accessor:"created_at",Cell:function(e){var t=e.cell,r=t.value,n=t.getCellProps;return(0,F.jsx)(nf.Cell,Fs(Fa({},n()),{children:iW()(r).format("DD MMM YYYY")}))}},{Header:"Customer",accessor:"cart",Cell:function(e){var t=e.row,r=e.cell,n=r.value,i=r.getCellProps;return(0,F.jsx)(nf.Cell,Fs(Fa({},i()),{children:(0,F.jsx)(i$,{customer:{first_name:(null==n?void 0:n.first_name)||"",last_name:(null==n?void 0:n.last_name)||"",email:n.email},color:iQ(t.index)})}))}},{Header:"Status",accessor:"status",Cell:function(e){var t=e.cell,r=t.value,n=t.getCellProps;return(0,F.jsx)(nf.Cell,Fs(Fa({},n()),{className:"pr-2",children:"completed"===r?(0,F.jsx)(nN.Z,{variant:"success",title:"Completed"}):(0,F.jsx)(nN.Z,{variant:"primary",title:"Open"})}))}}]},[])]};function Fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Fd(e){if(Array.isArray(e))return e}function Ff(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fp(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Fm(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ff(e,t,r[t])})}return e}function Fh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fb(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fh(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Fv(e,t){return Fd(e)||Fp(e,t)||Fg(e,t)||Fm()}function Fg(e,t){if(e){if("string"==typeof e)return Fu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fu(e,t)}}var Fx=["q","offset","limit"],Fj=function(e,t){switch(t.type){case"setFilters":var r;return Fb(Fy({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return Fb(Fy({},e),{offset:0,query:t.payload});case"setOffset":return Fb(Fy({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},FO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return Fw(e,t)},[e,t]),n=Fv((0,B.useReducer)(Fj,r),2),i=n[0],o=n[1],a=function(){var e=Fy({},i.additionalFilters),t=!0,r=!1,n=void 0;try{for(var o,a=Object.entries(i)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=Fv(o.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):("offset"===s||"limit"===s)&&(e[s]=c)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},l=function(e){var t=null!=e?e:i,r={},n=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=Fv(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):("offset"===u||"limit"===u)&&(r[u]=d)}}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r},s=function(){var e=l();return iL().stringify(e,{skipNulls:!0})},c=(0,B.useMemo)(function(){return a()},[i]),u=(0,B.useMemo)(function(){return l()},[i]),d=(0,B.useMemo)(function(){return s()},[i]);return Fb(Fy({},i),{filters:Fy({},i),representationObject:u,representationString:d,queryObject:c,paginate:function(e){e>0?o({type:"setOffset",payload:i.offset+i.limit}):o({type:"setOffset",payload:Math.max(i.offset-i.limit,0)})},getQueryObject:a,getQueryString:function(){var e=a();return iL().stringify(e,{skipNulls:!0})},setQuery:function(e){o({type:"setQuery",payload:e})},setFilters:function(e){o({type:"setFilters",payload:e})},setDefaultFilters:function(e){o({type:"setDefaults",payload:e})},reset:function(){o({type:"setFilters",payload:Fb(Fy({},i),{offset:0,query:null})})}})},Fw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=Fv(l.value,2),u=c[0],d=c[1];if(Fx.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d)}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return r};function FS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function FP(e){if(Array.isArray(e))return e}function FC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FN(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Fk(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FC(e,t,r[t])})}return e}function FA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function FD(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FA(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function FE(e,t){return FP(e)||FN(e,t)||FZ(e,t)||Fk()}function FZ(e,t){if(e){if("string"==typeof e)return FS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FS(e,t)}}var FI=15,FT=function(){var e=FO((0,V.useLocation)().search,{}),t=e.reset,r=e.paginate,n=e.setQuery,i=e.queryObject,o=parseInt(null==i?void 0:i.offset)||0,a=parseInt(null==i?void 0:i.limit)||FI,l=FE((0,B.useState)(null==i?void 0:i.query),2),s=l[0],c=l[1],u=FE((0,B.useState)(0),2),d=u[0],f=u[1],p=(0,en.useAdminDraftOrders)(i,{keepPreviousData:!0}),m=p.draft_orders,y=p.isLoading,h=p.isRefetching,b=p.count;(0,B.useEffect)(function(){f(Math.ceil(b/i.limit))},[b,i]);var v=FE(Fc(),1)[0],g=(0,rN.useTable)({columns:v,data:m||[],manualPagination:!0,initialState:{pageSize:a,pageIndex:o/a},pageCount:d,autoResetPage:!1},rN.usePagination),x=g.getTableProps,j=g.getTableBodyProps,O=g.headerGroups,w=g.rows,S=g.prepareRow,P=g.canPreviousPage,C=g.canNextPage,N=g.pageCount,k=g.gotoPage,_=g.nextPage,A=g.previousPage,D=g.state.pageIndex;return(0,B.useEffect)(function(){var e=setTimeout(function(){s?(n(s),k(0)):t()},400);return function(){return clearTimeout(e)}},[s]),(0,F.jsx)(nC,{hasPagination:!0,numberOfRows:FI,pagingState:{count:b,offset:i.offset,pageSize:i.offset+w.length,title:"Draft Orders",currentPage:D+1,pageCount:N,nextPage:function(){C&&(r(1),_())},prevPage:function(){P&&(r(-1),A())},hasNext:C,hasPrev:P},isLoading:y||h,children:(0,F.jsxs)(nf,FD(F_({filteringOptions:[],enableSearch:!0,handleSearch:c,searchValue:s},x()),{children:[(0,F.jsx)(nf.Head,{children:null==O?void 0:O.map(function(e){return(0,F.jsx)(nf.HeadRow,FD(F_({},e.getHeaderGroupProps()),{children:e.headers.map(function(e,t){return(0,F.jsx)(nf.HeadCell,FD(F_({className:"w-[100px]"},e.getHeaderProps()),{children:e.render("Header",{customIndex:t})}))})}))})}),(0,F.jsx)(nf.Body,FD(F_({},j()),{children:w.map(function(e){return S(e),(0,F.jsx)(nf.Row,FD(F_({color:"inherit",linkTo:"/a/draft-orders/".concat(e.original.id)},e.getRowProps()),{children:e.cells.map(function(e,t){return(0,F.jsx)(B.Fragment,{children:e.render("Cell")},t)})}))})}))]}))})};function FM(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function FR(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){FM(o,n,i,a,l,"next",e)}function l(e){FM(o,n,i,a,l,"throw",e)}a(void 0)})}}function FL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FL(e,t,r[t])})}return e}function Fq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function FF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fq(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function FH(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var FU=(0,B.createContext)(null),FG=function(e){var t=e.children,r=(0,tR.cI)({defaultValues:{items:[],billing_address:void 0,shipping_address:void 0}}),n=(0,tR.Dq)({control:r.control,name:"items"}),i=(0,tR.qo)({control:r.control,name:"region"}),o=(0,en.useAdminRegion)(null==i?void 0:i.value,{enabled:!!i}).region,a=(0,tR.qo)({control:r.control,name:"shipping_option"}),l=(0,en.useAdminShippingOption)(null==a?void 0:a.value,{enabled:!!(null==a?void 0:a.value)}).shipping_option;(0,B.useEffect)(function(){a&&(r.resetField("shipping_option"),r.resetField("custom_shipping_price"))},[i]);var s=(0,B.useMemo)(function(){return o?o.countries.map(function(e){return{label:e.display_name,value:e.iso_2}}):[]},[o]),c=(0,en.useMedusa)().client;(0,B.useEffect)(function(){var e;(e=FR(function(){var e,t,r,i;return FH(this,function(a){switch(a.label){case 0:if(!n.fields.length)return[3,2];return t=n.fields.reduce(function(e,t){return t.variant_id&&(e[t.variant_id]=t),e},{}),r=n.fields.map(function(e){return e.variant_id}).filter(Boolean),[4,c.admin.variants.list({id:r,region_id:null===(e=o)||void 0===e?void 0:e.id})];case 1:i=a.sent().variants,n.replace(i.map(function(e){var r,n;return{quantity:t[e.id].quantity,variant_id:e.id,title:e.title,unit_price:(0,oy.HJ)(e,o,!1),product_title:null===(r=e.product)||void 0===r?void 0:r.title,thumbnail:null===(n=e.product)||void 0===n?void 0:n.thumbnail}})),a.label=2;case 2:return[2]}})}),function(){return e.apply(this,arguments)})()},[o]);var u=(0,en.useAdminShippingOptions)({region_id:null==o?void 0:o.id,is_return:!1},{enabled:!!o}).shipping_options,d=(0,B.useMemo)(function(){if(!u)return[];var e=n.fields.reduce(function(e,t){return e+t.quantity*t.unit_price},0);return u.reduce(function(t,r){if(r.requirements){var n=r.requirements.find(function(e){return"min_subtotal"===e.type}),i=r.requirements.find(function(e){return"max_subtotal"===e.type});if(n&&e<=n.amount||i&&e>=i.amount)return t}return t.push(r),t},[])},[u,n]);return(0,F.jsx)(FU.Provider,{value:{validCountries:s,region:o,selectedShippingOption:l,items:n,shippingOptions:d},children:(0,F.jsx)(tR.RV,FF(Fz({},r),{children:t}))})},FV=function(){var e=(0,B.useContext)(FU),t=(0,tR.Gc)();if(!e)throw Error("useNewOrderForm must be used within NewOrderFormProvider");return{context:e,form:t}},FB=r(94335),FW=function(e){return!e||Object.values(e).every(function(e){return null==e||""===e})};function FQ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){FQ(e,t,r[t])})}return e}function F$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function FK(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F$(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var FJ=function(){var e=FV(),t=e.context.validCountries,r=e.form,n=(0,tR.qo)({control:r.control,name:"shipping_address"}),i=(0,tR.qo)({control:r.control,name:"shipping_address_id"}),o=(0,tR.qo)({control:r.control,name:"same_as_shipping"});return(0,F.jsxs)("div",{className:"min-h-[705px]",children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"Billing Address"}),!FW(n)||i?(0,F.jsxs)("div",{className:"mt-4 mb-6 flex cursor-pointer items-center",onClick:function(){o?(r.resetField("billing_address"),r.resetField("billing_address_id")):(r.setValue("billing_address",n),r.setValue("billing_address_id",i)),r.setValue("same_as_shipping",!o)},children:[(0,F.jsx)("div",{className:"text-grey-0 border-grey-30 rounded-base flex h-5 w-5 justify-center border ".concat(o&&"bg-violet-60"),children:(0,F.jsx)("span",{className:"self-center",children:o&&(0,F.jsx)(rT,{size:16})})}),(0,F.jsx)("input",FK(FY({className:"hidden",type:"checkbox"},r.register("same_as_shipping")),{tabIndex:-1})),(0,F.jsx)("span",{className:"text-grey-90 ml-3",children:"Use same as shipping"})]}):null,(0,F.jsx)("div",{className:(0,ec.Z)({"pointer-events-none opacity-50":o}),tabIndex:o?-1:void 0,children:(0,F.jsx)(ZN,{countryOptions:t,form:(0,tL.G)(r,"billing_address"),type:O.BILLING})})]})};function FX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function F0(e){if(Array.isArray(e))return e}function F1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F2(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function F3(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){F1(e,t,r[t])})}return e}function F6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F6(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function F8(e,t){return F0(e)||F2(e,t)||F7(e,t)||F3()}function F7(e,t){if(e){if("string"==typeof e)return FX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FX(e,t)}}var F9=function(e){var t=e.onSubmit,r=e.region,n=F8((0,B.useState)(0),2),i=n[0],o=n[1],a=(0,B.useContext)(pf.ej).pop,l=(0,tR.cI)(),s=l.register,c=l.handleSubmit;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-xsmall min-h-[705px]",children:[(0,F.jsx)(ry.Z,F4(F5({placeholder:"E.g. Gift wrapping",label:"Title"},s("title",{required:!0})),{className:"my-4",required:!0})),(0,F.jsx)(jX.Root,{currentCurrency:r.currency_code,size:"small",readOnly:!0,children:(0,F.jsx)(jX.Amount,{required:!0,label:"Price",amount:i,onChange:function(e){return o(e||0)}})}),(0,F.jsx)(ry.Z,F4(F5({className:"my-4",label:"Quantity"},s("quantity",{required:!0})),{type:"number",required:!0}))]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return a()},children:"Back"}),(0,F.jsx)(Y.Z,{variant:"primary",className:"w-[112px]",size:"small",onClick:c(function(e){t(e.title,e.quantity,i),a()}),children:"Add"})]})})]})};function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ht(e){if(Array.isArray(e))return e}function Hr(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Hn(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Hr(o,n,i,a,l,"next",e)}function l(e){Hr(o,n,i,a,l,"throw",e)}a(void 0)})}}function Hi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ho(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ha(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Hi(e,t,r[t])})}return e}function Hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Hc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Hs(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Hu(e,t){return Ht(e)||Ho(e,t)||Hd(e,t)||Ha()}function Hd(e,t){if(e){if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return He(e,t)}}function Hf(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Hp=function(){var e,t=B.useContext(FB.N0),r=t.enableNextPage,n=t.disableNextPage,i=t.nextStepEnabled,o=FV(),a=o.context,l=a.region,s=a.items,c=o.form,u=c.control,d=c.register,f=c.setValue,p=(0,en.useMedusa)().client,m=s.fields,y=s.append,h=s.remove,b=s.update,v=Hu((0,B.useState)(-1),2),g=v[0],x=v[1],j=Hu((0,B.useState)(-1),2),O=j[0],w=j[1],S=(0,B.useContext)(pf.ej),P=(e=Hn(function(e){var t,n,o;return Hf(this,function(a){switch(a.label){case 0:return n=m.map(function(e){return e.variant_id}),o=e.filter(function(e){return!n.includes(e.id)}).map(function(e){return e.id}),[4,p.admin.variants.list({id:o,region_id:null===(t=l)||void 0===t?void 0:t.id})];case 1:return y(a.sent().variants.map(function(e){var t,r;return{quantity:1,variant_id:e.id,title:e.title,unit_price:(0,oy.HJ)(e,l,!1),product_title:null===(t=e.product)||void 0===t?void 0:t.title,thumbnail:null===(r=e.product)||void 0===r?void 0:r.thumbnail}})),i||r(),[2]}})}),function(t){return e.apply(this,arguments)}),C=function(e,t){var r=m[e];r.quantity=r.quantity+t,r.quantity>0&&b(e,r)},N=function(e,t,r){var n=(0,oy.xl)(r,t);f("items.".concat(e,".unit_price"),n)},k=function(e,t,n){y({title:e,unit_price:n,quantity:t}),i||r()},_=function(e){h(e),i&&s.fields.length<1&&n()};return(0,B.useEffect)(function(){s.fields.length?r():n()},[]),(0,F.jsxs)("div",{className:"flex min-h-[705px] flex-col pt-4",children:[(0,F.jsx)("span",{className:"inter-base-semibold mb-4",children:"Items for the order"}),m.length>0&&l&&(0,F.jsxs)(nf,{children:[(0,F.jsx)(nf.Head,{children:(0,F.jsxs)(nf.HeadRow,{className:"text-grey-50 inter-small-semibold border-t",children:[(0,F.jsx)(nf.HeadCell,{children:"Details"}),(0,F.jsx)(nf.HeadCell,{className:"pr-8 text-right",children:"Quantity"}),(0,F.jsx)(nf.HeadCell,{className:"text-right",children:"Price (excl. Taxes)"}),(0,F.jsx)(nf.HeadCell,{})]})}),(0,F.jsx)(nf.Body,{children:m.map(function(e,t){return(0,F.jsxs)(nf.Row,{className:(0,ec.Z)("border-b-grey-0 hover:bg-grey-0"),children:[(0,F.jsx)(nf.Cell,{children:(0,F.jsxs)("div",{className:"flex min-w-[240px] items-center py-2",children:[(0,F.jsx)("div",{className:"h-[40px] w-[30px] ",children:e.thumbnail?(0,F.jsx)("img",{className:"h-full w-full rounded object-cover",src:e.thumbnail}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50 ml-4 flex flex-col",children:[e.product_title&&(0,F.jsx)("span",{className:"text-grey-90",children:e.product_title}),(0,F.jsx)("span",{children:e.title})]})]})}),(0,F.jsx)(nf.Cell,{className:"w-32 pr-8 text-right",children:g===t?(0,F.jsx)(ry.Z,Hc(Hl({type:"number"},d("items.".concat(t,".quantity"),{valueAsNumber:!0})),{onBlur:function(){return x(-1)}})):(0,F.jsxs)("div",{className:"text-grey-50 flex w-full justify-end text-right ",children:[(0,F.jsx)("span",{onClick:function(){return C(t,-1)},className:"hover:bg-grey-20 mr-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded",children:(0,F.jsx)(rM.Z,{size:16})}),(0,F.jsx)("button",{type:"button",className:"hover:bg-grey-20 cursor-pointer rounded px-1",onClick:function(){return x(t)},children:(0,F.jsx)("input",Hc(Hl({type:"number"},d("items.".concat(t,".quantity"),{valueAsNumber:!0})),{className:"text-grey-90 w-full bg-transparent text-center",disabled:!0}))}),(0,F.jsx)("span",{onClick:function(){return C(t,1)},className:(0,ec.Z)("hover:bg-grey-20 ml-2 flex h-5 w-5 cursor-pointer items-center justify-center rounded"),children:(0,F.jsx)(sh.Z,{size:16})})]})}),(0,F.jsx)(nf.Cell,{className:"text-right",children:O===t?(0,F.jsx)(tR.Qr,{control:u,name:"items.".concat(t,".unit_price"),render:function(e){var r=e.field.value;return(0,F.jsx)(ry.Z,{type:"number",value:(0,oy.RS)(l.currency_code,r),onBlur:function(){w(-1)},prefix:(0,oy.NE)(l.currency_code),onChange:function(e){N(t,+e.target.value,l.currency_code)}})}}):(0,F.jsx)(tR.Qr,{name:"items.".concat(t,".unit_price"),control:u,render:function(e){var r=e.field.value;return(0,F.jsx)("span",{className:"cursor-pointer",onClick:function(){w(t)},children:(0,oy.RS)(l.currency_code,r)})}})}),(0,F.jsx)(nf.Cell,{className:"text-grey-40 pr-1 text-right",children:l.currency_code.toUpperCase()}),(0,F.jsx)(nf.Cell,{children:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:function(){return _(t)},children:(0,F.jsx)(eZ,{size:20,className:"text-grey-50"})})})]},e.id)})})]}),(0,F.jsxs)("div",{className:"gap-x-xsmall mt-3 flex w-full justify-end",children:[(0,F.jsxs)(Y.Z,{variant:"ghost",size:"small",className:"border-grey-20 border",onClick:function(){S.push(Hy(S.pop,k,l))},children:[(0,F.jsx)(sh.Z,{size:20}),"Add Custom"]}),(0,F.jsxs)(Y.Z,{variant:"ghost",size:"small",className:"border-grey-20 border",onClick:function(){S.push(Hm(S.pop,s.fields.map(function(e){return{id:e.variant_id}}),P))},children:[(0,F.jsx)(sh.Z,{size:20}),"Add Existing"]})]})]})},Hm=function(e,t,r){return{title:"Add Products",onBack:function(){return e()},view:(0,F.jsx)(Te,{selectedItems:t||[],onSubmit:r})}},Hy=function(e,t,r){return{title:"Add Custom Item",onBack:function(){return e()},view:(0,F.jsx)(F9,{onSubmit:t,region:r})}},Hh=function(){var e=B.useContext(FB.N0),t=e.enableNextPage,r=e.disableNextPage,n=FV().form.control,i=(0,tR.qo)({control:n,name:"region"}),o=(0,en.useAdminRegions)().regions,a=(0,B.useMemo)(function(){return o?o.map(function(e){return{label:e.name,value:e.id}}):[]},[o]);return(0,B.useEffect)(function(){i?t():r()},[i]),(0,F.jsxs)("div",{className:"flex min-h-[705px] flex-col",children:[(0,F.jsx)("span",{className:"inter-base-semibold mb-4",children:"Choose region"}),(0,F.jsx)(tR.Qr,{control:n,name:"region",render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,F.jsx)(lS,{label:"Region",onChange:r,value:n,options:a})}})]})};function Hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Hv(e){if(Array.isArray(e))return e}function Hg(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Hx(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Hj(e,t){return Hv(e)||Hg(e,t)||HO(e,t)||Hx()}function HO(e,t){if(e){if("string"==typeof e)return Hb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hb(e,t)}}var Hw=function(){var e=(0,B.useContext)(FB.N0),t=e.disableNextPage,r=e.enableNextPage,n=Hj((0,B.useState)(!1),2),i=n[0],o=n[1],a=FV(),l=a.context,s=l.region,c=l.shippingOptions,u=a.form,d=u.control,f=u.setValue,p=(0,tR.qo)({control:d,name:"custom_shipping_price"});(0,B.useEffect)(function(){!i&&p&&o(!0)},[p]);var m=(0,tR.qo)({control:d,name:"shipping_option"});return(0,B.useEffect)(function(){m||t(),m&&r()},[m]),(0,F.jsxs)("div",{className:"min-h-[705px]",children:[(0,F.jsxs)("span",{className:"inter-base-semibold",children:["Shipping method"," ",(0,F.jsxs)("span",{className:"inter-base-regular text-grey-50",children:["(To ",s.name,")"]})]}),s?(null==c?void 0:c.length)?(0,F.jsxs)("div",{className:"mt-4",children:[(0,F.jsx)(tR.Qr,{control:d,name:"shipping_option",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(jT,{label:"Choose a shipping method",onChange:n,value:r,options:(null==c?void 0:c.map(function(e){return{value:e.id,label:"".concat(e.name," - ").concat((0,oy.zq)(e.amount,s))}}))||[]})}}),(0,F.jsxs)("div",{className:"mt-4",children:[!i&&(0,F.jsx)("div",{className:"flex w-full justify-end",children:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"border-grey-20 w-[125px] border",disabled:!m,onClick:function(){return o(!0)},children:"Set custom price"})}),i&&(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"w-full",children:(0,F.jsx)(tR.Qr,{control:d,name:"custom_shipping_price",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(jX.Root,{readOnly:!0,size:"small",currentCurrency:s.currency_code,children:(0,F.jsx)(jX.Amount,{label:"Custom Price",amount:r,onChange:n})})}})}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:function(){o(!1),f("custom_shipping_price",void 0)},className:"text-grey-40 ml-8 h-8 w-8",children:(0,F.jsx)(eZ,{size:20})})]})]})]}):(0,F.jsxs)("div",{className:"inter-small-regular bg-orange-5 rounded-rounded mt-6 flex p-4 text-orange-50",children:[(0,F.jsx)("div",{className:"mr-3 h-full",children:(0,F.jsx)(TE.Z,{size:20})}),(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-small-semibold",children:"Attention!"}),'You don\'t have any options for orders without shipping. Please add one (e.g. "In-store fulfillment") with "Show on website" unchecked in region settings and continue.']})]}):(0,F.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,F.jsx)(ei.Z,{})})]})},HS=r(355),HP=function(e){var t;return{first_name:e.first_name||"",last_name:e.last_name||"",company:e.company,address_1:e.address_1||"",address_2:e.address_2,city:e.city||"",province:e.province,postal_code:e.postal_code||"",country_code:{label:wb[null===(t=e.country_code)||void 0===t?void 0:t.toUpperCase()]||"",value:e.country_code||""},phone:e.phone}},HC=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function HN(e){return null==e?void 0:e.match(HC)}function Hk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H_(e){if(Array.isArray(e))return e}function HA(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function HD(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){HA(o,n,i,a,l,"next",e)}function l(e){HA(o,n,i,a,l,"throw",e)}a(void 0)})}}function HE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HZ(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function HI(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function HT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){HE(e,t,r[t])})}return e}function HM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HR(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):HM(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function HL(e,t){return H_(e)||HZ(e,t)||Hz(e,t)||HI()}function Hz(e,t){if(e){if("string"==typeof e)return Hk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hk(e,t)}}function Hq(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var HF=function(){var e,t=HL((0,B.useState)(!1),2),r=t[0],n=t[1],i=(0,B.useContext)(FB.N0),o=i.disableNextPage,a=i.enableNextPage,l=FV(),s=l.context.validCountries,c=l.form,u=(e=HD(function(e){var t;return Hq(this,function(r){switch(r.label){case 0:return t=HS.Z.stringify({q:e,offset:0,limit:10},{skipNull:!0,skipEmptyString:!0}),[4,n8.customers.list("?".concat(t)).then(function(e){return e.data.customers.map(function(e){var t=e.id,r=e.first_name,n=e.last_name,i=e.email;return{label:"".concat(r||""," ").concat(n||""," (").concat(i,")"),value:t}})}).catch(function(){return[]})];case 1:return[2,r.sent()]}})}),function(t){return e.apply(this,arguments)}),d=(0,tR.qo)({control:c.control,name:"customer_id"}),f=(0,en.useAdminCustomer)(null==d?void 0:d.value,{enabled:!!(null==d?void 0:d.value)}).customer,p=(0,B.useMemo)(function(){if(!f)return[];var e=s.map(function(e){return e.value});return f.shipping_addresses.filter(function(t){var r=t.country_code;return!r||e.includes(r)})},[f,s]),m=function(e){var t=/\(([^()]*)\)$/.exec(null==e?void 0:e.label);t?c.setValue("email",t[1]):c.setValue("email","")},y=function(e){if(f){var t,r=null===(t=f.shipping_addresses)||void 0===t?void 0:t.find(function(t){return t.id===e});r&&c.setValue("shipping_address",HP(r))}},h=(0,tR.qo)({control:c.control,name:"email"}),b=(0,tR.qo)({control:c.control,name:"shipping_address"});return(0,B.useEffect)(function(){if(!h||!HN(h)){o();return}b&&!FW(b)&&(b.first_name&&b.last_name&&b.address_1&&b.city&&b.country_code&&b.postal_code?a():o())},[b,h]),(0,B.useEffect)(function(){c.setValue("shipping_address.first_name",""),c.setValue("shipping_address.last_name",""),c.setValue("shipping_address.phone",""),c.setValue("shipping_address.address_1",""),c.setValue("shipping_address.address_2",""),c.setValue("shipping_address.city",""),c.setValue("shipping_address.country_code",null),c.setValue("shipping_address.province",""),c.setValue("shipping_address.postal_code","")},[null==d?void 0:d.value,r]),(0,B.useEffect)(function(){n(!1)},[null==d?void 0:d.value]),(0,F.jsxs)("div",{className:"flex min-h-[705px] flex-col gap-y-8",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"Customer and shipping details"}),(0,F.jsx)(tR.Qr,{control:c.control,name:"customer_id",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(jT,{className:"mt-4",label:"Find existing customer",options:[],enableSearch:!0,value:r||null,onChange:function(e){m(e),n(e)},filterOptions:u,clearSelected:!0})}})]}),(0,F.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"Email"}),(0,F.jsx)(ry.Z,HR(HT({},c.register("email")),{label:"Email",placeholder:"lebron@james.com",disabled:!!d,required:!0,prefix:d?(0,F.jsx)(st.Z,{size:16,className:"text-grey-40"}):void 0,tabIndex:d?-1:0}))]}),p.length&&!r?(0,F.jsxs)("div",{children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:"Choose existing addresses"}),(0,F.jsx)(tR.Qr,{control:c.control,name:"shipping_address_id",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(pQ.Root,{className:"mt-4",value:r,onValueChange:function(e){n(e),y(e)},children:p.map(function(e,t){var n;return(0,F.jsx)(pQ.Item,{label:"".concat(e.first_name," ").concat(e.last_name),checked:!!r&&e.id===r,description:"".concat(e.address_1,", ").concat(e.address_2," ").concat(e.postal_code," ").concat(e.city," ").concat(null===(n=e.country_code)||void 0===n?void 0:n.toUpperCase()),value:e.id},t)})})}}),(0,F.jsx)("div",{className:"mt-4 flex w-full justify-end",children:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"border-grey-20 w-[112px] border",onClick:function(){c.setValue("shipping_address_id",void 0),n(!0)},children:"Create new"})})]}):(0,F.jsx)("div",{children:(0,F.jsx)(ZN,{form:(0,tL.G)(c,"shipping_address"),countryOptions:s,type:O.SHIPPING})})]})};function HH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function HU(e){if(Array.isArray(e))return e}function HG(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function HV(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){HG(o,n,i,a,l,"next",e)}function l(e){HG(o,n,i,a,l,"throw",e)}a(void 0)})}}function HB(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function HW(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function HQ(e,t){return HU(e)||HB(e,t)||HY(e,t)||HW()}function HY(e,t){if(e){if("string"==typeof e)return HH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HH(e,t)}}function H$(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var HK=function(){var e,t,r=HQ((0,B.useState)(!1),2),n=r[0],i=r[1],o=HQ((0,B.useState)(void 0),2),a=o[0],l=o[1],s=HQ((0,B.useState)(void 0),2),c=s[0],u=s[1],d=FV(),f=d.form,p=d.context,m=p.items,y=p.region,h=p.selectedShippingOption,b=(0,tR.qo)({defaultValue:void 0,control:f.control,name:"shipping_address"}),v=(0,tR.qo)({defaultValue:void 0,control:f.control,name:"billing_address"}),g=(0,tR.qo)({control:f.control,name:"email"}),x=(0,tR.qo)({control:f.control,name:"region"}),j=(0,tR.qo)({control:f.control,name:"discount_code"}),O=(0,tR.qo)({control:f.control,name:"shipping_option"}),w=(0,tR.qo)({control:f.control,name:"custom_shipping_price"}),S=(0,en.useAdminGetDiscountByCode)(j,{enabled:!!j}),P=S.discount,C=S.status,N=S.isFetching,k=(0,en.useAdminShippingOptions)({region_id:null==x?void 0:x.value},{enabled:!!x&&!!O}).shipping_options,_=(0,B.useMemo)(function(){if(!O||!k)return 0;var e=k.find(function(e){return e.id===O.value});return e&&e.amount||0},[k,O]),A=(e=HV(function(){return H$(this,function(e){return f.setValue("discount_code",c),[2]})}),function(){return e.apply(this,arguments)});(0,B.useEffect)(function(){P&&y&&(P.regions.find(function(e){return e.id===y.id})||(l("The discount is not applicable to the selected region"),u(void 0),f.setValue("discount_code",void 0),i(!0)))},[P]),(0,B.useEffect)(function(){"error"===C&&(l("The discount code is invalid"),u(void 0),f.setValue("discount_code",void 0),i(!0))},[C]);var D=function(){f.setValue("discount_code",void 0),i(!1),u("")};return(0,F.jsxs)("div",{className:"min-h-[705px]",children:[(0,F.jsxs)(HJ,{title:"Items",editIndex:1,children:[(0,F.jsxs)(nf,{children:[(0,F.jsx)(nf.Head,{children:(0,F.jsxs)(nf.HeadRow,{className:"inter-small-semibold text-grey-50 border-t",children:[(0,F.jsx)(nf.HeadCell,{children:"Details"}),(0,F.jsx)(nf.HeadCell,{className:"text-right",children:"Quantity"}),(0,F.jsx)(nf.HeadCell,{className:"text-right",children:"Price (excl. Taxes)"}),(0,F.jsx)(nf.HeadCell,{})]})}),(0,F.jsx)(nf.Body,{children:y&&m&&m.fields.map(function(e){return(0,F.jsxs)(nf.Row,{className:(0,ec.Z)("border-b-grey-0 hover:bg-grey-0"),children:[(0,F.jsx)(nf.Cell,{children:(0,F.jsxs)("div",{className:"flex min-w-[240px] py-2",children:[(0,F.jsx)("div",{className:"h-[40px] w-[30px] ",children:e.thumbnail?(0,F.jsx)("img",{className:"h-full w-full rounded object-cover",src:e.thumbnail}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50 ml-4 flex flex-col",children:[(0,F.jsx)("span",{children:(0,F.jsx)("span",{className:"text-grey-90",children:e.product_title})}),(0,F.jsx)("span",{children:e.title})]})]})}),(0,F.jsx)(nf.Cell,{className:"text-right",children:e.quantity}),(0,F.jsx)(nf.Cell,{className:"text-right",children:(0,oy.RS)(null==y?void 0:y.currency_code,e.unit_price)})]},e.id)})})]}),!n&&!(null==P?void 0:P.rule)&&(0,F.jsx)("div",{className:"flex w-full justify-end",children:(0,F.jsxs)(Y.Z,{variant:"ghost",size:"small",className:"inter-small-semibold border-grey-20 border",onClick:function(){return i(!0)},children:[(0,F.jsx)(sh.Z,{size:20}),"Add Discount"]})}),n&&!(null==P?void 0:P.rule)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{children:(0,F.jsxs)("div",{className:"gap-x-base flex w-full items-center",children:[(0,F.jsx)(ry.Z,{type:"text",placeholder:"SUMMER10",onFocus:function(){return l(void 0)},value:c,onChange:function(e){return u(e.target.value)}}),(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-grey-40 h-8 w-8",size:"small",type:"button",onClick:function(){return i(!1)},children:(0,F.jsx)(c2.Z,{size:20})})]})}),(0,F.jsxs)("div",{className:"space-between mt-4 flex w-full justify-between ",children:[(0,F.jsx)("div",{className:"pt-2",children:a&&(0,F.jsx)("span",{className:"text-rose-50",children:a})}),(0,F.jsxs)(Y.Z,{className:"border-grey-20 h-full border",variant:"ghost",size:"small",loading:N,onClick:function(){return A()},children:[(0,F.jsx)(sh.Z,{size:20}),"Add Discount"]})]})]}),P&&y&&(0,F.jsxs)("div",{className:"inter-small-regular border-grey-20 mt-4 flex w-full flex-col border-b border-t pt-4 last:border-b-0 ",children:[(0,F.jsxs)("div",{className:"inter-base-semibold mb-4 flex w-full justify-between",children:[(0,F.jsxs)("span",{children:["Discount",(0,F.jsxs)("span",{className:"inter-base-regular text-grey-50 ml-0.5",children:["(Code: ",P.code,")"]})]}),(0,F.jsx)("span",{onClick:function(){return D()},className:"inter-small-semibold text-violet-60 cursor-pointer",children:(0,F.jsx)(c2.Z,{size:20})})]}),(0,F.jsxs)("div",{className:"flex w-full",children:[(0,F.jsxs)("div",{className:(0,ec.Z)("border-grey-20 flex flex-col pr-6",{"border-r":"free_shipping"!==P.rule.type}),children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Type"}),(0,F.jsx)("span",{children:"free_shipping"!==P.rule.type?"".concat(P.rule.type.charAt(0).toUpperCase()).concat(P.rule.type.slice(1)):"Free Shipping"})]}),"free_shipping"!==P.rule.type&&(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Value"}),(0,F.jsx)("span",{children:"fixed"===P.rule.type?"".concat((0,oy.RS)(y.currency_code,P.rule.value)," ").concat(y.currency_code.toUpperCase()):"".concat(P.rule.value," %")})]})]})]})]}),(0,F.jsx)(HJ,{title:"Customer",editIndex:3,children:(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"mr-3 h-5 w-5",children:(0,F.jsx)(iY.Z,{color:"bg-grey-80",user:{email:g,first_name:null==b?void 0:b.first_name,last_name:null==b?void 0:b.last_name},font:"inter-small-regular"})}),g]})}),h&&(0,F.jsx)(HJ,{title:"Shipping details",editIndex:2,children:(0,F.jsxs)("div",{className:"grid w-full grid-cols-2 gap-x-6",children:[!FW(b)&&b&&(0,F.jsxs)("div",{className:"border-grey-20 flex flex-col border-r pr-6",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Address"}),(0,F.jsxs)("span",{children:[b.address_1,", ",b.address_2]}),(0,F.jsx)("span",{children:"".concat(b.postal_code," ").concat(b.city,",\n                ").concat(null===(t=b.country_code)||void 0===t?void 0:t.label)})]}),y&&(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Shipping method"}),(0,F.jsxs)("span",{children:[h.name," -"," ",w&&y?(0,F.jsxs)("p",{children:[(0,F.jsx)("span",{className:"text-grey-40 mr-2 line-through",children:(0,oy.zq)(_,y)}),(0,oy.RS)(y.currency_code,w),y.currency_code.toUpperCase()]}):(0,oy.zq)(h.amount,y)]})]})]})}),!FW(v)&&v&&(0,F.jsxs)(HJ,{title:"Billing details",editIndex:3,children:[(0,F.jsx)("span",{className:"text-grey-50",children:"Address"}),(0,F.jsxs)("span",{children:[v.address_1,", ",v.address_2]}),(0,F.jsx)("span",{children:"".concat(v.postal_code," ").concat(v.city,",\n                ").concat(v.country_code.label)})]})]})},HJ=function(e){var t=e.title,r=e.editIndex,n=e.children,i=(0,B.useContext)(FB.N0).setPage;return(0,F.jsxs)("div",{className:"inter-small-regular border-grey-20 mt-4 flex w-full flex-col border-b pb-8 last:border-b-0 ",children:[(0,F.jsxs)("div",{className:"inter-base-semibold mb-4 flex w-full justify-between",children:[t,(0,F.jsx)("span",{onClick:function(){return i(r)},className:"inter-small-semibold text-violet-60 cursor-pointer",children:"Edit"})]}),n]})},HX=function(e){var t=e.onDismiss,r=B.useContext(FB.N0),n=B.useContext(pf.ej),i=(0,V.useNavigate)(),o=(0,td.Z)(),a=(0,en.useAdminCreateDraftOrder)().mutate,l=FV(),s=l.form,c=s.handleSubmit,u=s.reset;l.context.region;var d=c(function(e){var n,l,s,c,d,f,p,m,y,h,b,v,g,x,j,O,w,S,P,C,N,k,_;a({email:e.email,items:e.items.map(function(e){return e.variant_id?{quantity:e.quantity,variant_id:e.variant_id}:{quantity:e.quantity,title:e.title,unit_price:e.unit_price}}),region_id:e.region.value,shipping_methods:[{option_id:e.shipping_option.value,price:"number"==typeof e.custom_shipping_price?e.custom_shipping_price:void 0}],shipping_address:e.shipping_address_id?e.shipping_address_id:FW(e.shipping_address)?void 0:{address_1:null===(n=e.shipping_address)||void 0===n?void 0:n.address_1,address_2:(null===(l=e.shipping_address)||void 0===l?void 0:l.address_2)||void 0,city:null===(s=e.shipping_address)||void 0===s?void 0:s.city,country_code:null===(d=e.shipping_address)||void 0===d?void 0:null===(c=d.country_code)||void 0===c?void 0:c.value,company:(null===(f=e.shipping_address)||void 0===f?void 0:f.company)||void 0,first_name:null===(p=e.shipping_address)||void 0===p?void 0:p.first_name,last_name:null===(m=e.shipping_address)||void 0===m?void 0:m.last_name,phone:(null===(y=e.shipping_address)||void 0===y?void 0:y.phone)||void 0,postal_code:null===(h=e.shipping_address)||void 0===h?void 0:h.postal_code,province:(null===(b=e.shipping_address)||void 0===b?void 0:b.province)||void 0},billing_address:e.billing_address_id?e.billing_address_id:e.billing_address?{address_1:null===(v=e.billing_address)||void 0===v?void 0:v.address_1,address_2:(null===(g=e.billing_address)||void 0===g?void 0:g.address_2)||void 0,city:null===(x=e.billing_address)||void 0===x?void 0:x.city,country_code:null===(O=e.billing_address)||void 0===O?void 0:null===(j=O.country_code)||void 0===j?void 0:j.value,company:(null===(w=e.billing_address)||void 0===w?void 0:w.company)||void 0,first_name:null===(S=e.billing_address)||void 0===S?void 0:S.first_name,last_name:null===(P=e.billing_address)||void 0===P?void 0:P.last_name,phone:(null===(C=e.billing_address)||void 0===C?void 0:C.phone)||void 0,postal_code:null===(N=e.billing_address)||void 0===N?void 0:N.postal_code,province:(null===(k=e.billing_address)||void 0===k?void 0:k.province)||void 0}:void 0,customer_id:null===(_=e.customer_id)||void 0===_?void 0:_.value,discounts:e.discount_code?[{code:e.discount_code}]:void 0},{onSuccess:function(e){var n=e.draft_order;o("Success","Order created","success"),u(),t(),r.reset(),i("/a/draft-orders/".concat(n.id))},onError:function(e){o("Error",e.message,"error")}})});return(0,F.jsx)(FB.ZP,{layeredContext:n,context:r,onSubmit:d,steps:[(0,F.jsx)(Hh,{}),(0,F.jsx)(Hp,{}),(0,F.jsx)(Hw,{}),(0,F.jsx)(HF,{}),(0,F.jsx)(FJ,{}),(0,F.jsx)(HK,{})],lastScreenIsSummary:!0,title:"Create Draft Order",handleClose:t})};function H0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H1(e){if(Array.isArray(e))return e}function H2(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function H3(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function H5(e,t){return H1(e)||H2(e,t)||H6(e,t)||H3()}function H6(e,t){if(e){if("string"==typeof e)return H0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H0(e,t)}}var H4=function(e){var t=e.heading,r=e.text,n=e.cancelText,i=e.confirmText,o=e.handleClose,a=e.onConfirm,l=H5((0,B.useState)(!1),2),s=l[0],c=l[1];return(0,F.jsx)(tp.Z,{isLargeModal:!1,handleClose:o,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-large-semibold",children:t}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 mt-1",children:r})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small mr-2 w-24 justify-center",size:"small",onClick:o,children:n}),(0,F.jsx)(Y.Z,{loading:s,size:"small",className:"text-small w-24 justify-center",variant:"primary",onClick:function(e){e.preventDefault(),c(!0),a().finally(function(){c(!1),o()})},disabled:s,children:i})]})})]})})};function H8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function H7(e){if(Array.isArray(e))return e}function H9(e){if(Array.isArray(e))return H8(e)}function Ue(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Ut(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Ue(o,n,i,a,l,"next",e)}function l(e){Ue(o,n,i,a,l,"throw",e)}a(void 0)})}}function Ur(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Un(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ui(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Uo(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ua(e,t){return H7(e)||Un(e,t)||Us(e,t)||Ui()}function Ul(e){return H9(e)||Ur(e)||Us(e)||Uo()}function Us(e,t){if(e){if("string"==typeof e)return H8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H8(e,t)}}function Uc(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Uu=function(e){var t,r,n,i,o,a,l,s=e.order,c=(0,en.useMedusa)().client,u=(0,o3.ye)().isFeatureEnabled,d=(0,B.useMemo)(function(){return u("inventoryService")},[u]),f=s.cart,p=f.region,m=Ua(B.useState(new Map),2),y=m[0],h=m[1];B.useEffect(function(){var e;d&&(e=Ut(function(){var e;return Uc(this,function(t){switch(t.label){case 0:var r;return[4,Promise.all(f.items.map((r=Ut(function(e){return Uc(this,function(t){switch(t.label){case 0:if(!e.variant_id)return[2];return[4,c.admin.variants.getInventory(e.variant_id)];case 1:return[2,t.sent()]}})}),function(e){return r.apply(this,arguments)})))];case 1:return e=t.sent(),h(new Map(e.filter(function(e){return!!e}).map(function(e){return[e.variant.id,e.variant]}))),[2]}})}),function(){return e.apply(this,arguments)})()},[f.items,d,c.admin.variants]);var b=(0,en.useAdminReservations)({line_item_id:null==f?void 0:f.items.map(function(e){return e.id})},{enabled:d}).reservations,v=(0,B.useMemo)(function(){return(null==b?void 0:b.length)&&d?b.reduce(function(e,t){return t.line_item_id&&(e[t.line_item_id]=e[t.line_item_id]?Ul(e[t.line_item_id]).concat([t]):[t]),e},{}):{}},[b,d]),g=(0,s1.Z)(),x=g.state,j=g.open,O=g.close,w=(0,B.useMemo)(function(){return f.items.every(function(e){if(!e.variant_id||!(null===(t=y.get(e.variant_id))||void 0===t?void 0:t.inventory.length))return!0;var t,r=v[e.id];return e.quantity===e.fulfilled_quantity||r&&(0,iM.sum)(r.map(function(e){return e.quantity}))===e.quantity-(e.fulfilled_quantity||0)})},[f.items,y,v]),S=(0,B.useMemo)(function(){var e=[];return d&&!w&&e.push({label:"Allocate",onClick:j}),e},[d,j,w]);return(0,F.jsxs)(tI,{className:"mb-4 h-auto min-h-0 w-full",title:"Summary",status:u("inventoryService")&&Array.isArray(b)&&(0,F.jsx)(nN.Z,{onClick:w?void 0:j,variant:w?"success":"danger",title:w?"Allocated":"Not fully allocated",className:"rounded-rounded border px-3 py-1.5"}),actionables:S,children:[(0,F.jsxs)("div",{className:"mt-6",children:[null==f?void 0:null===(t=f.items)||void 0===t?void 0:t.map(function(e,t){return(0,F.jsxs)("div",{className:"hover:bg-grey-5 rounded-rounded mx-[-5px] mb-1 flex h-[64px] justify-between py-2 px-[5px]",children:[(0,F.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,F.jsx)("div",{className:"rounded-rounded flex h-[48px] w-[36px] items-center justify-center",children:(null==e?void 0:e.thumbnail)?(0,F.jsx)("img",{src:e.thumbnail,className:"rounded-rounded object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-90 max-w-[225px] truncate",children:e.title}),(null==e?void 0:e.variant)&&(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:e.variant.sku})]})]}),(0,F.jsxs)("div",{className:"flex  items-center",children:[(0,F.jsxs)("div",{className:"small:space-x-2 medium:space-x-4 large:space-x-6 mr-3 flex",children:[(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:(0,oy.rX)({amount:(null!==(i=null==e?void 0:e.total)&&void 0!==i?i:0)/e.quantity,currency:null!==(o=null==p?void 0:p.currency_code)&&void 0!==o?o:"",digits:2,tax:[]})}),(0,F.jsxs)("div",{className:"inter-small-regular text-grey-50",children:["x ",e.quantity]}),d&&(0,F.jsx)(qa,{reservations:v[e.id],lineItem:e}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-90",children:(0,oy.rX)({amount:null!==(a=e.total)&&void 0!==a?a:0,currency:null!==(l=null==p?void 0:p.currency_code)&&void 0!==l?l:"",digits:2,tax:[]})})]}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:null==p?void 0:p.currency_code.toUpperCase()})]})]},t)}),(0,F.jsx)(oh,{currency:null==p?void 0:p.currency_code,totalAmount:null==s?void 0:null===(r=s.cart)||void 0===r?void 0:r.subtotal,totalTitle:"Subtotal"}),null==f?void 0:null===(n=f.discounts)||void 0===n?void 0:n.map(function(e,t){return(0,F.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"inter-small-regular text-grey-90 flex items-center",children:["Discount:"," ",(0,F.jsx)(oP.Z,{className:"ml-3",variant:"default",children:e.code})]}),(0,F.jsxs)("div",{className:"inter-small-regular text-grey-90",children:["-",(0,oy.rX)({amount:null==f?void 0:f.discount_total,currency:(null==p?void 0:p.currency_code)||"",digits:2,tax:null==p?void 0:p.tax_rate})]})]},t)}),(0,F.jsx)(oh,{currency:null==p?void 0:p.currency_code,totalAmount:null==f?void 0:f.shipping_total,totalTitle:"Shipping"}),(0,F.jsx)(oh,{currency:null==p?void 0:p.currency_code,totalAmount:null==f?void 0:f.tax_total,totalTitle:"Tax"}),(0,F.jsx)(oh,{currency:null==p?void 0:p.currency_code,variant:"large",totalAmount:null==f?void 0:f.total,totalTitle:"Total"})]}),x&&(0,F.jsx)(qh,{reservationItemsMap:v,items:f.items,close:O})]})};function Ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Uf(e){if(Array.isArray(e))return e}function Up(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Um(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Up(o,n,i,a,l,"next",e)}function l(e){Up(o,n,i,a,l,"throw",e)}a(void 0)})}}function Uy(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Uh(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ub(e,t){return Uf(e)||Uy(e,t)||Uv(e,t)||Uh()}function Uv(e,t){if(e){if("string"==typeof e)return Ud(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ud(e,t)}}function Ug(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Ux=function(){var e,t,r,n,i,o=(0,V.useParams)().id,a={resource:"",onDelete:function(){return Promise.resolve(console.log("Delete resource"))},show:!1},l=Ub((0,B.useState)(a),2),s=l[0],c=l[1],u=Ub((0,B.useState)(null),2),d=u[0],f=u[1],p=Ub((0,B.useState)(!1),2),m=p[0],y=p[1],h=(0,en.useAdminDraftOrder)(o),b=h.draft_order,v=h.isLoading,g=(0,en.useAdminStore)(),x=g.store,j=g.isLoading,w=Ub((0,B.useState)(""),2),S=w[0],P=w[1];(0,B.useEffect)(function(){x&&b&&x.payment_link_template&&P(x.payment_link_template.replace(/\{cart_id\}/,b.cart_id))},[v,j]);var C=(0,en.useAdminDraftOrderRegisterPayment)(o),N=(0,en.useAdminDeleteDraftOrder)(o),k=(0,en.useAdminUpdateDraftOrder)(o),_=(0,V.useNavigate)(),A=(0,td.Z)(),D=(e=Um(function(){var e;return Ug(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,3,4]),[4,C.mutateAsync()];case 1:return t.sent(),A("Success","Successfully mark as paid","success"),[3,4];case 2:return e=t.sent(),A("Error",(0,tf.e)(e),"error"),[3,4];case 3:return y(!1),[7];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),E=(t=Um(function(){return Ug(this,function(e){return[2,N.mutate(void 0,{onSuccess:function(){return A("Success","Successfully canceled order","success")},onError:function(e){return A("Error",(0,tf.e)(e),"error")}})]})}),function(){return t.apply(this,arguments)}),Z=(0,ig.e)().getWidgets,I=Z("draft_order.details.after"),T=Z("draft_order.details.before"),M=(b||{}).cart,R=(M||{}).region;return(0,F.jsxs)("div",{children:[(0,F.jsx)(eb,{path:"/a/draft-orders",label:"Back to Draft Orders",className:"mb-xsmall"}),v||!b?(0,F.jsx)(tI,{className:"pt-2xlarge flex w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})}):(0,F.jsx)("div",{className:"flex space-x-4",children:(0,F.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(null==T?void 0:T.length)>0&&(0,F.jsx)("div",{className:"mb-4 flex w-full flex-col gap-y-4",children:T.map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,injectionZone:"draft_order.details.before",entity:b},t)})}),(0,F.jsx)(tI,{className:"mb-4 min-h-[200px] w-full",title:"Order #".concat(b.display_id),subtitle:iW()(b.created_at).format("D MMMM YYYY hh:mm a"),status:(0,F.jsx)(function(){switch(null==b?void 0:b.status){case"completed":return(0,F.jsx)(nN.Z,{title:"Completed",variant:"success"});case"open":return(0,F.jsx)(nN.Z,{title:"Open",variant:"default"});default:return null}},{}),customActionable:(null==b?void 0:b.status)==="completed"&&(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return _("/a/orders/".concat(b.order_id))},children:"Go to Order"}),forceDropdown:(null==b?void 0:b.status)!=="completed",actionables:(null==b?void 0:b.status)==="completed"?[{label:"Go to Order",icon:null,onClick:function(){return console.log("Should not be here")}}]:[{label:"Cancel Draft Order",icon:null,variant:"danger",onClick:function(){return c({resource:"Draft Order",onDelete:function(){return E()},show:!0})}}],children:(0,F.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Email"}),(0,F.jsx)("div",{children:null==M?void 0:M.email})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsx)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:"Phone"}),(0,F.jsx)("div",{children:(null==M?void 0:null===(r=M.shipping_address)||void 0===r?void 0:r.phone)||"N/A"})]}),(0,F.jsxs)("div",{className:"flex flex-col pl-6",children:[(0,F.jsxs)("div",{className:"inter-smaller-regular text-grey-50 mb-1",children:["Amount (",null==R?void 0:R.currency_code.toUpperCase(),")"]}),(0,F.jsx)("div",{children:(null==M?void 0:M.total)&&(null==R?void 0:R.currency_code)?(0,oy.rX)({amount:null==M?void 0:M.total,currency:null==R?void 0:R.currency_code}):"N/A"})]})]})}),(0,F.jsx)(Uu,{order:b}),(0,F.jsx)(tI,{className:"mb-4 h-auto min-h-0 w-full",title:"Payment",customActionable:(null==b?void 0:b.status)!=="completed"&&(0,F.jsx)(function(){return(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return y(!0)},children:"Mark as paid"})},{}),children:(0,F.jsxs)("div",{className:"mt-6",children:[(0,F.jsx)(oh,{currency:null==R?void 0:R.currency_code,totalAmount:null==M?void 0:M.subtotal,totalTitle:"Subtotal"}),(0,F.jsx)(oh,{currency:null==R?void 0:R.currency_code,totalAmount:null==M?void 0:M.shipping_total,totalTitle:"Shipping"}),(0,F.jsx)(oh,{currency:null==R?void 0:R.currency_code,totalAmount:null==M?void 0:M.tax_total,totalTitle:"Tax"}),(0,F.jsx)(oh,{variant:"bold",currency:null==R?void 0:R.currency_code,totalAmount:null==M?void 0:M.total,totalTitle:"Total to pay"}),(null==b?void 0:b.status)!=="completed"&&(0,F.jsxs)("div",{className:"text-grey-50 inter-small-regular mt-5 flex w-full items-center",children:[(0,F.jsx)("span",{className:"mr-2.5",children:"Payment link:"}),(null==x?void 0:x.payment_link_template)?(0,F.jsx)(ED,{value:S,displayValue:b.cart_id,successDuration:1e3}):"Configure payment link in store settings"]})]})}),(0,F.jsx)(tI,{className:"mb-4 h-auto min-h-0 w-full",title:"Shipping",children:(0,F.jsx)("div",{className:"mt-6",children:null==M?void 0:M.shipping_methods.map(function(e){return(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-small-regular text-grey-50",children:"Shipping Method"}),(0,F.jsx)("span",{className:"inter-small-regular text-grey-90 mt-2",children:(null==e?void 0:e.shipping_option.name)||""}),(0,F.jsxs)("div",{className:"bg-grey-5 mt-8 flex h-full min-h-[100px] flex-col px-3 py-2",children:[(0,F.jsxs)("span",{className:"inter-base-semibold",children:["Data"," ",(0,F.jsx)("span",{className:"text-grey-50 inter-base-regular",children:"(1 item)"})]}),(0,F.jsx)("div",{className:"mt-4 flex flex-grow items-center",children:(0,F.jsx)(tu,{data:null==e?void 0:e.data})})]})]},e.id)})})}),(0,F.jsx)(tI,{className:"mb-4 h-auto min-h-0 w-full",title:"Customer",actionables:[{label:"Edit Shipping Address",icon:(0,F.jsx)(Ep,{size:"20"}),onClick:function(){return f({address:null==M?void 0:M.shipping_address,type:O.SHIPPING})}},{label:"Edit Billing Address",icon:(0,F.jsx)(Ov,{size:"20"}),onClick:function(){(null==M?void 0:M.billing_address)&&f({address:null==M?void 0:M.billing_address,type:O.BILLING})}},{label:"Go to Customer",icon:(0,F.jsx)(iV,{size:"20"}),onClick:function(){return _("/a/customers/".concat(null==M?void 0:M.customer.id))}}],children:(0,F.jsxs)("div",{className:"mt-6",children:[(0,F.jsxs)("div",{className:"flex w-full items-center space-x-4",children:[(0,F.jsx)("div",{className:"flex h-[40px] w-[40px] ",children:(0,F.jsx)(iY.Z,{user:null==M?void 0:M.customer,font:"inter-large-semibold",color:"bg-grey-80"})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h1",{className:"inter-large-semibold text-grey-90",children:zn(M)}),(null==M?void 0:M.shipping_address)&&(0,F.jsxs)("span",{className:"inter-small-regular text-grey-50",children:[M.shipping_address.city,","," ",wb[null===(n=M.shipping_address.country_code)||void 0===n?void 0:n.toUpperCase()]]})]})]}),(0,F.jsxs)("div",{className:"mt-6 flex space-x-6 divide-x",children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{className:"inter-small-regular text-grey-50 mb-1",children:"Contact"}),(0,F.jsxs)("div",{className:"inter-small-regular flex flex-col",children:[(0,F.jsx)("span",{children:null==M?void 0:M.email}),(0,F.jsx)("span",{children:(null==M?void 0:null===(i=M.shipping_address)||void 0===i?void 0:i.phone)||""})]})]}),(0,F.jsx)(og,{title:"Shipping",addr:(null==M?void 0:M.shipping_address)||void 0}),(0,F.jsx)(og,{title:"Billing",addr:(null==M?void 0:M.billing_address)||void 0})]})]})}),(null==I?void 0:I.length)>0&&(0,F.jsx)("div",{className:"mb-4 flex w-full flex-col gap-y-4",children:I.map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,injectionZone:"draft_order.details.after",entity:b},t)})}),(0,F.jsx)(tI,{className:"mb-4 h-auto min-h-0 w-full pt-[15px]",title:"Raw Draft Order",children:(0,F.jsx)(tu,{data:b})})]})}),d&&(0,F.jsx)(z1,{onClose:function(){return f(null)},onSave:k.mutate,address:d.address,type:d.type,allowedCountries:null==R?void 0:R.countries}),s.show&&(0,F.jsx)(tx,{text:"Are you sure?",heading:"Remove ".concat(null==s?void 0:s.resource),successText:"".concat((null==s?void 0:s.resource)||"Resource"," has been removed"),onDelete:function(){return s.onDelete()},handleClose:function(){return c(a)}}),m&&(0,F.jsx)(H4,{heading:"Mark as paid",text:"This will create an order. Mark this as paid if you received the payment.",confirmText:"Mark paid",cancelText:"Cancel",handleClose:function(){return y(!1)},onConfirm:D})]})};function Uj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function UO(e){if(Array.isArray(e))return e}function Uw(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function US(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function UP(e,t){return UO(e)||Uw(e,t)||UC(e,t)||US()}function UC(e,t){if(e){if("string"==typeof e)return Uj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Uj(e,t)}}var UN=["orders","drafts"],Uk=function(){var e=(0,V.useNavigate)(),t="drafts",r=UP((0,B.useState)(!1),2),n=r[0],i=r[1],o=(0,ig.e)().getWidgets,a=(0,B.useMemo)(function(){return[{label:"Create draft order",onClick:function(){return i(!0)},icon:(0,F.jsx)(sh.Z,{size:20})}]},[t]);return(0,F.jsxs)("div",{className:"gap-y-xsmall flex h-full grow flex-col",children:[o("draft_order.list.before").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:null,injectionZone:"draft_order.list.before",widget:e},t)}),(0,F.jsx)("div",{className:"flex w-full grow flex-col",children:(0,F.jsx)(tI,{customHeader:(0,F.jsx)(s3,{views:UN,setActiveView:function(t){"orders"===t&&e("/a/orders")},activeView:t}),actionables:a,className:"h-fit",children:(0,F.jsx)(FT,{})})}),o("draft_order.list.after").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:null,injectionZone:"draft_order.list.after",widget:e},t)}),(0,F.jsx)(ev,{}),n&&(0,F.jsx)(FG,{children:(0,F.jsx)(HX,{onDismiss:function(){return i(!1)}})})]})},U_=function(){return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(Uk,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(Ux,{})})]})};function UA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UD=function(e,t,r){return e[t]?UA({},t,e[t]):UA({},r,e[r])};function UE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function UZ(e){if(Array.isArray(e))return e}function UI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UT(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function UM(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function UR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){UI(e,t,r[t])})}return e}function UL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Uz(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):UL(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Uq(e,t){return UZ(e)||UT(e,t)||UF(e,t)||UM()}function UF(e,t){if(e){if("string"==typeof e)return UE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UE(e,t)}}!function(e){e.ACTIVE="active",e.DRAFT="draft"}(C||(C={})),function(e){e.SALE="sale",e.OVERRIDE="override"}(N||(N={})),function(e){e.CREATE="create",e.EDIT_DETAILS="edit_details",e.EDIT_PRICES="edit_prices"}(k||(k={}));var UH=function(e){return{description:e.description,type:e.type,name:e.name,ends_at:e.ends_at?new Date(e.ends_at):null,starts_at:e.starts_at?new Date(e.starts_at):null,prices:e.prices.map(function(e){return{amount:e.amount,max_quantity:e.max_quantity,min_quantity:e.min_quantity,variant_id:e.variant_id,currency_code:e.currency_code,region_id:e.region_id}}),customer_groups:e.customer_groups.map(function(e){return{label:e.name,value:e.id}}),includes_tax:e.includes_tax}},UU=function(e,t){var r;return e.prices&&(r=Object.entries(e.prices).map(function(e){var t=Uq(e,2),r=t[0];return t[1].map(function(e){return Uz(UR({variant_id:r,amount:e.amount},UD(e,"currency_code","region_id")),{min_quantity:e.min_quantity,max_quantity:e.max_quantity})})}).flat(1)),{description:e.description,name:e.name,type:N.SALE,status:t,customer_groups:e.customer_groups?e.customer_groups.map(function(e){return{id:e.value}}):void 0,ends_at:e.ends_at||void 0,starts_at:e.starts_at||void 0,prices:r}},UG=function(e){return{name:e.name||void 0,description:e.description||void 0,customer_groups:e.customer_groups?e.customer_groups.map(function(e){return{id:e.value}}):[],ends_at:e.ends_at,starts_at:e.starts_at,type:e.type||void 0}},UV=function(e){if(e.prices)return{prices:Object.entries(e.prices).map(function(e){var t=Uq(e,2),r=t[0];return t[1].map(function(e){return Uz(UR({variant_id:r,amount:e.amount},UD(e,"currency_code","region_id")),{min_quantity:e.min_quantity,max_quantity:e.max_quantity})})}).flat(1)}},UB=function(){var e=new Date;return new Date(e.getTime()+6048e5)};function UW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function UQ(e){if(Array.isArray(e))return e}function UY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U$(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function UK(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function UJ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){UY(e,t,r[t])})}return e}function UX(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function U0(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):UX(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function U1(e,t){return UQ(e)||U$(e,t)||U2(e,t)||UK()}function U2(e,t){if(e){if("string"==typeof e)return UW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UW(e,t)}}var U3={customer_groups:[],name:null,description:null,ends_at:null,starts_at:null,prices:null,type:N.SALE,includes_tax:null},U5=B.createContext(null),U6=function(e){var t=e.priceList,r=void 0===t?U3:t,n=e.children,i=U1((0,B.useState)({customer_groups:r.customer_groups,ends_at:r.ends_at,starts_at:r.starts_at}),2),o=i[0],a=i[1],l=(0,tR.cI)({defaultValues:r}),s=U1((0,B.useState)(null),2),c=s[0],u=s[1],d=(0,tR.qo)({name:"starts_at",control:l.control}),f=(0,tR.qo)({name:"ends_at",control:l.control}),p=(0,tR.qo)({name:"customer_groups",control:l.control}),m=function(e){var t=null;switch(e){case"customer_groups":t=p;break;case"starts_at":t=d;break;case"ends_at":t=f}a(U0(UJ({},o),UY({},e,t))),setTimeout(function(){return l.setValue(e,null)},300)},y=function(e){if(o[e])l.setValue(e,o[e]);else switch(e){case"starts_at":l.setValue("starts_at",new Date);break;case"ends_at":l.setValue("ends_at",UB());break;case"customer_groups":l.setValue("customer_groups",[])}};return(0,F.jsx)(tR.RV,U0(UJ({},l),{children:(0,F.jsx)(U5.Provider,{value:{configFields:o,handleConfigurationSwitch:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=Object.keys(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value;e.includes(l)?y(l):m(l)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}},prices:c,handleSubmit:function(e){return l.handleSubmit(function(t){e(U0(UJ({},t),{prices:c}))})},setPrices:u},children:n})}))},U4=function(){var e=B.useContext(U5),t=(0,tR.Gc)();if(null===e)throw Error("usePriceListForm must be used within a PriceListFormProvider");return UJ({},t,e)},U8=function(e){var t=new Date;return e&&new Date(e)>t},U7=function(e){var t=new Date;return e&&new Date(e)<t},U9=function(e){return"draft"!==e.status?(0,F.jsx)(nN.Z,{title:"Active",variant:"success"}):U8(null==e?void 0:e.starts_at)?(0,F.jsx)(nN.Z,{title:"Scheduled",variant:"warning"}):U7(null==e?void 0:e.ends_at)?(0,F.jsx)(nN.Z,{title:"Expired",variant:"danger"}):(0,F.jsx)(nN.Z,{title:"Draft",variant:"default"})},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(null==e?void 0:e.length)?[e[0],e.length-1||""]:""},Gt=function(e){return(null==e?void 0:e.status)==="draft"},Gr=function(e){return(null==e?void 0:e.status)==="active"},Gn=function(e){var t,r,n=U4().handleSubmit,i=(0,V.useNavigate)(),o=(0,td.Z)(),a=function(){e.viewType!==k.CREATE&&e.onClose?e.onClose():i(-1)},l=(0,en.useAdminCreatePriceList)(),s=(0,en.useAdminUpdatePriceList)(e.id),c=(0,o3.ye)().isFeatureEnabled;switch(e.viewType){case k.CREATE:t={label:"Publish price list",onClick:n(function(e){var t=UU(e,C.ACTIVE);c("tax_inclusive_pricing")&&(t.includes_tax=!!e.includes_tax),l.mutate(t,{onSuccess:function(e){var t=e.price_list;i("/a/pricing/".concat(t.id))},onError:function(e){o("Error",(0,tf.e)(e),"error")}})})},r={label:"Save as draft",onClick:n(function(e){var t=UU(e,C.DRAFT);c("tax_inclusive_pricing")&&(t.includes_tax=e.includes_tax),l.mutate(t,{onSuccess:function(e){var t=e.price_list;i("/a/pricing/".concat(t.id))},onError:function(e){o("Error",(0,tf.e)(e),"error")}})})};break;case k.EDIT_DETAILS:t={label:"Save changes",onClick:n(function(e){var t=UG(e);c("tax_inclusive_pricing")&&(t.includes_tax=e.includes_tax),s.mutate(t,{onSuccess:function(e){e.price_list,o("Success","Successfully updated price list","success"),a()},onError:function(e){o("Error",(0,tf.e)(e),"error")}})})},r={label:"Cancel",onClick:a};break;case k.EDIT_PRICES:t={label:"Save changes",onClick:n(function(t){s.mutate(UV(t),{onSuccess:function(t){t.price_list,e.onClose&&e.onClose()},onError:function(e){o("Error",(0,tf.e)(e),"error")}})})},r={label:"Cancel",onClick:a}}return(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:a,className:"rounded-rounded h-8 w-8 border",children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-small flex",children:[(0,F.jsx)(Y.Z,{onClick:r.onClick,size:"small",variant:"ghost",className:"rounded-rounded border",children:r.label}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:t.onClick,className:"rounded-rounded",children:t.label})]})]})};function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Go(e){if(Array.isArray(e))return e}function Ga(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Gl(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Gs(e,t){return Go(e)||Ga(e,t)||Gc(e,t)||Gl()}function Gc(e,t){if(e){if("string"==typeof e)return Gi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gi(e,t)}}var Gu=function(e){var t=[];return e.customer_groups&&e.customer_groups.length>0&&t.push("customer_groups"),e.starts_at&&t.push("starts_at"),e.ends_at&&t.push("ends_at"),t},Gd=function(){var e=(0,en.useAdminCustomerGroups)(),t=e.customer_groups,r=e.isLoading,n=U4(),i=n.control,o=n.handleConfigurationSwitch,a=n.configFields,l=Gs((0,B.useState)(Gu(a)),2),s=l[0],c=l[1];return(0,F.jsx)(gj.Item,{forceMountContent:!0,title:"Configuration",tooltip:"Optional configuration for the price list",value:"configuration",description:"The price overrides apply from the time you hit the publish button and forever if left untouched.",children:(0,F.jsx)(gj,{type:"multiple",value:s,onValueChange:function(e){o(e),c(e)},children:(0,F.jsxs)("div",{className:"mt-5",children:[(0,F.jsx)(gj.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:"Price overrides has a start date?",subtitle:"Schedule the price overrides to activate in the future.",value:"starts_at",customTrigger:(0,F.jsx)(vw.Z,{checked:s.indexOf("starts_at")>-1}),children:(0,F.jsx)("div",{className:(0,ec.Z)("gap-xsmall accordion-margin-transition flex items-center",{"mt-4":s.indexOf("starts_at")>-1}),children:(0,F.jsx)(tR.Qr,{name:"starts_at",control:i,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=r||new Date;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(di,{date:i,label:"Start date",onSubmitDate:n}),(0,F.jsx)(vm,{date:i,label:"Start date",onSubmitDate:n})]})}})})}),(0,F.jsx)(gj.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:"Price overrides has an expiry date?",subtitle:"Schedule the price overrides to deactivate in the future.",value:"ends_at",customTrigger:(0,F.jsx)(vw.Z,{checked:s.indexOf("ends_at")>-1}),children:(0,F.jsx)("div",{className:(0,ec.Z)("gap-xsmall accordion-margin-transition flex items-center",{"mt-4":s.indexOf("ends_at")>-1}),children:(0,F.jsx)(tR.Qr,{name:"ends_at",control:i,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=r||UB();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(di,{date:i,label:"End date",onSubmitDate:n}),(0,F.jsx)(vm,{date:i,label:"End date",onSubmitDate:n})]})}})})}),(0,F.jsx)(gj.Item,{headingSize:"medium",forceMountContent:!0,className:"border-b-0",title:"Customer availabilty",subtitle:"Specifiy which customer groups the price overrides should apply for.",value:"customer_groups",customTrigger:(0,F.jsx)(vw.Z,{checked:s.indexOf("customer_groups")>-1}),children:(0,F.jsx)(tR.Qr,{name:"customer_groups",control:i,render:function(e){var n=e.field,i=n.value,o=n.onChange,a=n.ref;return(0,F.jsx)("div",{className:(0,ec.Z)("gap-xsmall accordion-margin-transition flex w-full items-center",{"mt-4":s.indexOf("customer_groups")>-1}),children:(0,F.jsx)(lS,{options:(null==t?void 0:t.map(function(e){return{label:e.name,value:e.id}}))||[],label:"Customer Groups",onChange:o,isMulti:!0,selectAll:!0,isSearchable:!0,value:i,ref:a,isLoading:r})})}})})]})})})};function Gf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Gf(e,t,r[t])})}return e}var Gm=function(){var e=U4(),t=e.control,r=e.register;return(0,F.jsx)(gj.Item,{forceMountContent:!0,required:!0,title:"General",tooltip:"General information for the price list.",value:"general",children:(0,F.jsxs)("div",{className:"gap-y-small group-radix-state-open:mt-5 accordion-margin-transition flex flex-col",children:[(0,F.jsx)(ry.Z,Gp({label:"Name",required:!0,placeholder:"B2B, Black Friday..."},r("name",{required:"Name is required"}))),(0,F.jsx)(ry.Z,Gp({label:"Description",required:!0,placeholder:"For our business partners..."},r("description",{required:"Description is required"}))),(0,F.jsx)(wI,{featureFlag:"tax_inclusive_pricing",children:(0,F.jsxs)("div",{className:"mt-3",children:[(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Tax inclusive prices"}),(0,F.jsx)(tR.Qr,{control:t,name:"includes_tax",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:!!r,onCheckedChange:n})}})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Choose to make all prices in this list inclusive of tax."})]})})]})})};function Gy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Gy(e,t,r[t])})}return e}var Gb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Gv(e,"id"),n=Gv(t,"id"),i=Object.values(r);return Object.values(n).forEach(function(e){r[e.id]||i.push(e)}),i},Gv=function(e,t){return e.reduce(function(e,r){return e[r[t]]=Gh({},r),e},{})};function Gg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Gx(e){if(Array.isArray(e))return e}function Gj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GO(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Gw(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function GS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Gj(e,t,r[t])})}return e}function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function GC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):GP(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function GN(e,t){if(null==e)return{};var r,n,i=Gk(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Gk(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function G_(e,t){return Gx(e)||GO(e,t)||GA(e,t)||Gw()}function GA(e,t){if(e){if("string"==typeof e)return Gg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gg(e,t)}}var GD=B.createContext(null),GE=function(e){var t=e.children,r=G_(B.useState(!1),2),n=r[0],i=r[1];return(0,F.jsx)(GD.Provider,{value:{open:n,handleOpen:function(){return i(!0)},handleClose:function(){return i(!1)},toggle:function(){return i(function(e){return!e})}},children:t})};GD.displayName="CollapsibleTreeContext";var GZ=function(){var e=B.useContext(GD);if(!e)throw Error("useCollapsibleTree must be a child of CollapsibleTree");return e},GI=function(e){var t=e.children,r=e.className,n=GN(e,["children","className"]),i=GZ().open;return(0,F.jsx)("div",GC(GS({className:(0,ec.Z)("mt-xsmall pl-5",{hidden:!i,"animate-fade-in-top":i},r)},n),{children:t}))};GE.Content=GI;var GT=function(e){var t=e.actions,r=e.className,n=e.children,i=GZ(),o=i.open,a=i.toggle;return(0,F.jsx)("div",{children:(0,F.jsx)(GR,{className:r,children:(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("div",{className:"gap-x-small flex items-center",children:n}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[t&&(0,F.jsx)(eQ,{customTrigger:GL(),actions:t}),(0,F.jsx)("div",{className:"rounded-circle bg-grey-20 h-5 w-px"}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"text-grey-50 p-[6px]",onClick:a,children:o?(0,F.jsx)(rM.Z,{size:20}):(0,F.jsx)(sh.Z,{size:20})})]})]})})})};GE.Parent=GT;var GM=function(e){var t=e.className,r=e.children,n=e.actions;return(0,F.jsxs)("div",{className:(0,ec.Z)("col-tree pb-xsmall relative flex items-center last:pb-0",t),children:[(0,F.jsxs)("div",{className:"absolute top-0 left-0 bottom-0",children:[(0,F.jsx)("div",{className:"border-grey-20 h-1/2 w-px border-l border-dashed"}),(0,F.jsx)("div",{className:"border-grey-20 bottom-half-dash h-1/2 w-px border-l border-dashed"})]}),(0,F.jsx)("div",{className:"border-grey-20 mr-xsmall h-px w-[13px] border-t border-dashed"}),(0,F.jsxs)(GR,{className:"inter-small-regular flex w-full items-center justify-between",children:[r,n&&(0,F.jsx)(eQ,{forceDropdown:!0,customTrigger:GL(),actions:n})]})]})};GE.Leaf=GM;var GR=function(e){var t=e.children,r=e.className;return(0,F.jsx)("div",{className:(0,ec.Z)("rounded-rounded border-grey-20 py-2xsmall px-small border",r),children:t})},GL=function(){return(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"text-grey-50 p-[6px]",children:(0,F.jsx)(eF,{size:20})})};function Gz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Gz(e,t,r[t])})}return e}var GF=function(e){var t=e.product,r=e.getProductActions,n=e.getVariantActions;return(0,F.jsxs)(GE,{children:[(0,F.jsxs)(GE.Parent,{actions:r&&r(t),children:[(0,F.jsx)("div",{children:(0,F.jsx)("img",{src:t.thumbnail||void 0,className:"rounded-base h-5 w-4"})}),(0,F.jsx)("span",{className:"inter-small-semibold",children:t.title})]}),(0,F.jsx)(GE.Content,{children:t.variants.map(function(e){return(0,F.jsx)(GE.Leaf,{actions:n&&n(e),children:(0,F.jsx)(GH,Gq({},e))},e.id)})})]})},GH=function(e){var t=e.sku,r=e.title,n=e.prices,i=(void 0===n?[]:n).filter(function(e){return e.price_list_id});return(0,F.jsxs)("div",{className:"flex flex-1",children:[(0,F.jsxs)("div",{className:"truncate",children:[(0,F.jsx)("span",{children:r}),t&&(0,F.jsxs)("span",{className:"text-grey-50 ml-xsmall",children:["(SKU: ",t,")"]})]}),(0,F.jsx)("div",{className:"text-grey-50 flex flex-1 items-center justify-end",children:(0,F.jsx)("div",{className:"text-grey-50 mr-xsmall",children:i.length?(0,F.jsx)("span",{children:"".concat(i.length," price").concat(i.length>1?"s":"")}):(0,F.jsx)("span",{className:"inter-small-semibold text-orange-40",children:"Add prices"})})})]})};function GU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){GU(e,t,r[t])})}return e}function GV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function GB(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):GV(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var GW=[{Header:(0,F.jsx)("div",{className:"pl-4",children:"Product Details"}),accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsxs)("div",{className:"flex w-[400px] items-center pl-4",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.thumbnail?(0,F.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsx)("div",{className:"flex flex-col",children:(0,F.jsxs)("span",{children:[t.title," ",t.subtitle&&(0,F.jsxs)("span",{className:"text-grey-50",children:["(",t.subtitle,")"]})]})})]})}},{Header:(0,F.jsx)("div",{children:"Status"}),accessor:"status",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{className:"pr-base w-[10%]",children:(0,F.jsx)("div",{className:"flex items-center",children:nk(t)})})}},{Header:(0,F.jsx)("div",{className:"flex items-center justify-end pr-4",children:"Variants"}),accessor:"variants",Cell:function(e){var t=e.row.original;return(0,F.jsx)(nf.Cell,{className:"flex items-center justify-end pr-4",children:t.variants.length})}}],GQ=function(e){var t=e.row,r=t.isSelected;return(0,F.jsx)(nf.Row,GB(GG({},t.getRowProps()),{className:(0,ec.Z)({"bg-grey-5":r}),children:t.cells.map(function(e){return(0,F.jsx)(nf.Cell,GB(GG({},e.getCellProps()),{children:e.render("Cell")}))})}))},GY=function(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,GB(GG({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,GB(GG({},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},G$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=e.map(function(e){return null==e?void 0:e.id});if(e.length<t.length){var i=(0,iM.difference)(t,n).map(function(e){return r.find(function(t){return t.id===e})});return e.concat(i)}if(e.length>t.length){var o=(0,iM.difference)(n,t),a=e.slice();return o.forEach(function(e){var t=a.findIndex(function(t){return(null==t?void 0:t.id)===e});a.splice(t,1)}),a}return e};function GK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function GJ(e){if(Array.isArray(e))return e}function GX(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G0(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function G1(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){GX(e,t,r[t])})}return e}function G3(e,t){return GJ(e)||G0(e,t)||G5(e,t)||G1()}function G5(e,t){if(e){if("string"==typeof e)return GK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GK(e,t)}}var G6={limit:12,offset:0},G4=function(e){var t=e.close,r=e.initialSelection,n=e.onSave,i=sM(G6),o=(0,en.useAdminProducts)(i.queryObject,{keepPreviousData:!0}),a=o.products,l=o.isLoading,s=o.count,c=G3(B.useState(r.map(function(e){return e.id})),2),u=c[0],d=c[1],f=G3(B.useState(r),2),p=f[0],m=f[1];return B.useEffect(function(){m(G$(p,u,a))},[u,a]),(0,F.jsx)(tp.Z,{open:!0,handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"Add Products"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)("div",{className:"flex h-full min-h-[300px] w-full flex-col justify-between ",children:(0,F.jsx)(pN,G2({columns:GW,data:a||[],renderRow:GQ,renderHeaderGroup:GY,onChange:function(e){return d(e)},selectedIds:u,isLoading:l,resourceName:"products",totalCount:void 0===s?0:s,options:{enableSearch:!0,searchPlaceholder:"Search by name or description..."}},i))})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end gap-2",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"rounded-rounded h-8 w-[128px]",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",className:"rounded-rounded h-8 w-[128px]",onClick:function(){n(p),t()},children:"Save"})]})})]})})},G8=r(2072),G7=r(67950);function G9(e){var t=e.amount,r=e.currency,n=e.onAmountChange,i=r.code,o=r.symbol_native,a=r.decimal_digits,l=Math.pow(10,-a),s=24+4*o.length,c="0.".concat("0".repeat(a));return(0,F.jsxs)("div",{className:"relative w-[314px]",children:[(0,F.jsx)("div",{className:"absolute top-0 left-3 flex h-full items-center",children:(0,F.jsx)("span",{className:"text-small text-grey-40 mt-[1px]",children:i})}),(0,F.jsx)(vY.Z,{step:l,value:t,onValueChange:function(e,t,r){return n(e,null==r?void 0:r.float)},allowNegativeValue:!1,placeholder:c,decimalScale:a,style:{paddingRight:s},className:"focus:border-violet-6 border-grey-20 bg-grey-5 text-gray-90 text-small h-[40px] w-full rounded-lg border border-solid py-[10px] pl-12 text-right focus:bg-white"}),(0,F.jsx)("div",{className:"absolute top-0 right-3 flex h-full items-center",children:(0,F.jsx)("span",{className:"text-small text-grey-40 mt-[1px]",children:o})})]})}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Vt(e){if(Array.isArray(e))return e}function Vr(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Vn(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vi(e,t){return Vt(e)||Vr(e,t)||Vo(e,t)||Vn()}function Vo(e,t){if(e){if("string"==typeof e)return Ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ve(e,t)}}function Va(e){var t=Vi(B.useState("".concat(e.amount||0)),2),r=t[0],n=t[1],i=e.amount,o=e.currency,a=e.onChange,l=o.decimal_digits;return B.useEffect(function(){var e=i/Math.pow(10,l);n("".concat(e))},[i,l]),(0,F.jsx)(G9,{amount:r,onAmountChange:function(e,t){"number"==typeof t?a(Math.round(t*Math.pow(10,l))):a(null),n(e)},currency:o})}var Vl=function(e){var t,r,n,i=e.value,o=e.onChange,a=(0,s1.Z)(),l=a.state,s=a.toggle,c=null===(t=v$.Q[null===(r=i.currency_code)||void 0===r?void 0:r.toUpperCase()])||void 0===t?void 0:t.name;return(0,F.jsx)("div",{className:"border-grey-20 flex flex-col gap-3 border-b border-solid py-3 first:border-t last:border-b-0",children:(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsxs)("div",{className:"inter-base-semibold",children:[(0,F.jsx)("span",{className:"mr-2 uppercase",children:i.currency_code}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 capitalize",children:c})]}),(null===(n=i.region)||void 0===n?void 0:n.countries)?(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",className:"rounded-rounded h-[32px]",onClick:s,children:(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[l?(0,F.jsx)(G7.Z,{size:20}):(0,F.jsx)(G8.Z,{size:20}),(0,F.jsx)("span",{children:"Show regions"})]})}):null]}),(0,F.jsx)("div",{className:"basis-[220px]",children:(0,F.jsx)(Va,{amount:i.amount,onChange:o,currency:v$.Q[i.currency_code.toUpperCase()]})})]})})};function Vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Vc(e){if(Array.isArray(e))return e}function Vu(e){if(Array.isArray(e))return Vs(e)}function Vd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vf(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Vp(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Vm(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vy(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Vd(e,t,r[t])})}return e}function Vb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vb(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Vg(e,t){if(null==e)return{};var r,n,i=Vx(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Vx(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function Vj(e,t){return Vc(e)||Vp(e,t)||Vw(e,t)||Vm()}function VO(e){return Vu(e)||Vf(e)||Vw(e)||Vy()}function Vw(e,t){if(e){if("string"==typeof e)return Vs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vs(e,t)}}var VS={APPLY_ALL:"all",SELECTED_ONLY:"selected"},VP=function(e){var t=e.onClose,r=e.prices,n=e.variants,i=e.onSubmit,o=e.defaultVariant,a=e.isEdit,l=void 0!==a&&a,s=Vj(B.useState(VS.SELECTED_ONLY),2),c=s[0],u=s[1],d=(0,tR.cI)({defaultValues:{variants:[],prices:r}}),f=d.handleSubmit,p=d.control,m=d.reset,y=d.formState.isSubmitting,h=f(function(e){var t;c===VS.APPLY_ALL?i(Vv(Vh({},e),{variants:null==n?void 0:n.map(function(e){return e.id})})):i(Vv(Vh({},e),{variants:null===(t=e.variants)||void 0===t?void 0:t.filter(Boolean)}))});return B.useEffect(function(){if(r.length>0&&(null==n?void 0:n.length)>0){var e,t=o?o.id:null===(e=r[0])||void 0===e?void 0:e.variant_id,i=n.findIndex(function(e){return e.id===t}),a=Array(n.length).fill(null);a[i]=t,m({prices:r,variants:a})}},[n,r,o]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tp.Z.Content,{children:[!l&&(0,F.jsxs)(pQ.Root,{value:c,onValueChange:function(e){return u(e)},className:"flex items-center pt-2",children:[(0,F.jsx)(pQ.SimpleItem,{value:VS.SELECTED_ONLY,label:"Apply overrides on selected variants"}),(0,F.jsx)(pQ.SimpleItem,{value:VS.APPLY_ALL,label:"Apply on all variants"})]}),c===VS.SELECTED_ONLY&&!l&&(0,F.jsx)("div",{className:"flex flex-col gap-2 pt-6",children:n.map(function(e,t){return(0,F.jsx)("div",{id:e.id,className:"border-grey-20 rounded-rounded border py-2.5 px-3",children:(0,F.jsx)(VC,{control:p,name:"variants",label:"".concat(e.title," (SKU: ").concat(e.sku,")"),id:e.id,index:t,value:e.id})})})}),(0,F.jsxs)("div",{className:"pt-8",children:[(0,F.jsx)("h6",{className:"inter-base-semibold",children:"Prices"}),(0,F.jsx)("div",{className:"pt-4",children:r.map(function(e,t){return(0,F.jsx)(tR.Qr,{control:p,name:"prices.".concat(t),render:function(t){var r=t.field;return(0,F.jsx)(Vl,{value:r.value,onChange:function(e){r.onChange(Vv(Vh({},r.value),{amount:e}))}},e.id)}},e.id)})})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small rounded-rounded mr-2 w-32 justify-center",size:"large",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"large",className:"text-small rounded-rounded justify-center",variant:"primary",onClick:h,loading:y,children:"Save and close"})]})})]})},VC=function(e){var t=e.control,r=e.name,n=e.id,i=e.index,o=e.value,a=Vg(e,["control","name","id","index","value"]),l=(0,tR.qo)({control:t,name:r});return(0,F.jsx)(tR.Qr,{control:t,name:r,render:function(e){var t=e.field;return(0,F.jsx)(ja,Vv(Vh({className:"inter-small-regular shrink-0"},a,t),{checked:null==l?void 0:l.some(function(e){return e===o}),onChange:function(e){var r=VO(l||[]);r[i]=e.target.checked?n:null,t.onChange(r)}}))}})},VN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.map(function(t){return e.find(function(e){return(null==e?void 0:e.currency_code)===t.currency_code})||t})};function Vk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function V_(e){if(Array.isArray(e))return e}function VA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VD(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function VE(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function VZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){VA(e,t,r[t])})}return e}function VI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function VT(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):VI(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function VM(e,t){return V_(e)||VD(e,t)||VR(e,t)||VE()}function VR(e,t){if(e){if("string"==typeof e)return Vk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vk(e,t)}}var VL=function(e){var t=e.products,r=e.setProducts,n=e.isLoading,i=e.onSearch;e.onFileChosen;var o=VM(B.useState(!1),2),a=o[0],l=o[1],s=VM(B.useState(null),2),c=s[0],u=s[1],d=function(){return u(null)},f=U4(),p=f.prices,m=f.setPrices,y=(0,en.useAdminStore)().store,h=null==y?void 0:y.currencies.map(function(e){return{currency_code:e.code,amount:0}}),b=function(e){return[{label:"Edit prices",icon:(0,F.jsx)(eC,{}),onClick:function(){u(e)}},{label:"Remove from list",icon:(0,F.jsx)(eZ,{size:20}),onClick:function(){},variant:"danger"}]},v=Vz(t,c);return(0,F.jsxs)("div",{className:"mt-6",children:[(0,F.jsxs)("div",{children:[i&&(0,F.jsx)("div",{className:"mb-2",children:(0,F.jsx)(ry.Z,{placeholder:"Search by name or SKU...",prefix:(0,F.jsx)(r7.Z,{}),onChange:function(e){var t=e.target.value;i&&i(t)}})}),(0,F.jsx)("div",{children:(0,F.jsx)(EU,{isLoading:void 0!==n&&n,children:t.map(function(e){return(0,F.jsx)("div",{className:"mt-2",children:(0,F.jsx)(GF,{product:e,getVariantActions:b},e.id)})})})})]}),(0,F.jsx)("div",{className:"mt-6",children:(0,F.jsxs)(Y.Z,{variant:"secondary",size:"medium",className:"rounded-rounded w-full",onClick:function(){return l(!0)},children:[(0,F.jsx)(sh.Z,{}),"Add Products Manually"]})}),a&&(0,F.jsx)(G4,{onSave:r,initialSelection:t,close:function(){return l(!1)}}),c&&(0,F.jsx)(tp.Z,{open:!0,handleClose:d,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:d,children:(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"Edit Prices"})}),(0,F.jsx)(VP,{onClose:d,variants:v.variants,prices:p?VN(p[c.id],h):h,defaultVariant:c,onSubmit:function(e){e.variants.forEach(function(t){var r=e.prices.filter(function(e){return e.amount>0}).map(function(e){return{amount:e.amount,currency_code:e.currency_code}});m(function(e){return VT(VZ({},e),VA({},t,r))}),d()})}})]})})]})},Vz=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.variants.find(function(e){return e.id===(null==t?void 0:t.id)})})};function Vq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function VF(e){if(Array.isArray(e))return e}function VH(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function VU(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function VG(e,t){return VF(e)||VH(e,t)||VV(e,t)||VU()}function VV(e,t){if(e){if("string"==typeof e)return Vq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vq(e,t)}}var VB={limit:50,offset:0},VW=function(e){var t=e.isEdit,r=void 0!==t&&t,n=e.id,i=(0,en.useAdminPriceListProducts)(n,VB,{enabled:r}),o=i.products,a=i.isInitialLoading,l=i.isLoading,s=VG(B.useState([]),2),c=s[0],u=s[1],d=Gb(void 0===o?[]:o,c);return(0,F.jsx)(gj.Item,{forceMountContent:!0,required:!0,value:"prices",title:"Prices",description:"You will be able to override the prices for the products you add here",tooltip:"Define the price overrides for the price list",children:(0,F.jsx)(VL,{products:d,isLoading:r?l:a,setProducts:u,onFileChosen:console.log})})},VQ=function(){var e=U4().control;return(0,F.jsx)(gj.Item,{forceMountContent:!0,required:!0,value:"type",title:"Price list type",description:"Select the type of the price list",tooltip:"Unlike with sale prices a price override will not communicate to the customer that the price is part of a sale.",children:(0,F.jsx)(tR.Qr,{name:"type",control:e,rules:{required:!0},render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,F.jsxs)(pQ.Root,{value:null!=n?n:void 0,onValueChange:r,className:"gap-base group-radix-state-open:mt-5 accordion-margin-transition flex items-center",children:[(0,F.jsx)(pQ.Item,{value:N.SALE,className:"flex-1",label:"Sale",description:"Use this if you are creating prices for a sale."}),(0,F.jsx)(pQ.Item,{value:N.OVERRIDE,className:"flex-1",label:"Override",description:"Use this to override prices."})]})}})})};function VY(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){VY(e,t,r[t])})}return e}var VK=function(e){return(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsx)(Gn,V$({},e))}),(0,F.jsx)(c3.Main,{children:(0,F.jsx)("div",{className:"mb-[25%] flex justify-center",children:(0,F.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 w-full pt-16",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold mb-[28px]",children:e.viewType===k.CREATE?"Create new price list":"Edit price list"}),(0,F.jsxs)(gj,{type:"multiple",defaultValue:["type"],children:[(0,F.jsx)(VQ,{}),(0,F.jsx)(Gm,{}),(0,F.jsx)(Gd,{}),e.viewType!==k.EDIT_DETAILS&&(0,F.jsx)(VW,{isEdit:e.viewType!==k.CREATE,id:e.id})]})]})})})]})};function VJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function VX(e){if(Array.isArray(e))return e}function V0(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function V1(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){V0(o,n,i,a,l,"next",e)}function l(e){V0(o,n,i,a,l,"throw",e)}a(void 0)})}}function V2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V3(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function V5(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function V6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){V2(e,t,r[t])})}return e}function V4(e,t){if(null==e)return{};var r,n,i=V8(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function V8(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function V7(e,t){return VX(e)||V3(e,t)||V9(e,t)||V5()}function V9(e,t){if(e){if("string"==typeof e)return VJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VJ(e,t)}}function Be(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Bt=function(e){var t,r=e.priceList,n=V7(B.useState(!1),2),i=n[0],o=n[1];return(0,F.jsxs)(Bn,{priceList:r,setIsOpen:o,children:[(0,F.jsxs)("div",{className:"flex gap-12",children:[r.customer_groups.length?(0,F.jsxs)("div",{className:"border-grey-20 border-l pl-6",children:[(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:"Customer groups"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-90",children:(0,F.jsx)(Br,{groups:r.customer_groups})})]}):null,(0,F.jsxs)("div",{className:"border-grey-20 border-l pl-6",children:[(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:"Last edited"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-90",children:iW()(r.updated_at).format("ddd, D MMM YYYY")})]}),(0,F.jsxs)("div",{className:"border-grey-20 border-l pl-6",children:[(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:"Price overrides"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-90",children:null===(t=r.prices)||void 0===t?void 0:t.length})]})]}),i&&(0,F.jsx)(cX,{isVisible:i,isFullScreen:!0,children:(0,F.jsx)(VK,{id:r.id,onClose:function(){return o(!1)},viewType:k.EDIT_DETAILS})})]})},Br=function(e){var t=V7(Ge(e.groups.map(function(e){return e.name})),2),r=t[0],n=t[1];return(0,F.jsxs)(F.Fragment,{children:[r,n&&(0,F.jsxs)("span",{className:"text-grey-40",children:[" + ",n," more"]})]})},Bn=function(e){var t,r=e.priceList,n=e.setIsOpen,i=V4(e,["priceList","setIsOpen"]),o=o2(),a=(0,V.useNavigate)(),l=(0,td.Z)(),s=(0,en.useAdminDeletePriceList)(null==r?void 0:r.id),c=(t=V1(function(){return Be(this,function(e){switch(e.label){case 0:return[4,o({heading:"Delete Price list",text:"Are you sure you want to delete this price list?"})];case 1:return e.sent()&&s.mutate(void 0,{onSuccess:function(){l("Success","Price list deleted successfully","success"),a("/a/pricing/")},onError:function(e){l("Ooops",(0,tf.e)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)}),u=[{label:"Edit price list details",onClick:function(){return n(!0)},icon:(0,F.jsx)(eC,{size:20})},{label:"Delete price list",onClick:c,variant:"danger",icon:(0,F.jsx)(eZ,{size:20})}];return(0,F.jsx)(tI,V6({actionables:u,forceDropdown:!0,className:"min-h-[200px]",status:(0,F.jsx)("div",{className:"gap-x-2xsmall flex items-center",children:U9(r)}),title:r.name,subtitle:r.description},i))};function Bi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Bi(e,t,r[t])})}return e}function Ba(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Bl(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ba(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Bs(e,t){if(null==e)return{};var r,n,i=Bc(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Bc(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Bu=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=void 0===n?"currentColor":n,o=Bs(e,["size","color"]);return(0,F.jsxs)("svg",Bl(Bo({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M16.0893 13.1868C16.6838 12.7754 17.1321 12.1858 17.3697 11.503C17.6072 10.8202 17.6216 10.0796 17.4107 9.38816C17.1999 8.69667 16.7748 8.09007 16.1968 7.65594C15.6187 7.2218 14.9177 6.9826 14.1948 6.97285H12.8308C12.6017 6.20011 12.1996 5.48973 11.6549 4.89565C11.1102 4.30157 10.4374 3.83943 9.68735 3.54431C8.93734 3.24918 8.12995 3.12885 7.32648 3.19244C6.52301 3.25603 5.7446 3.50187 5.05036 3.9113C4.35612 4.32072 3.7643 4.88297 3.31985 5.55533C2.8754 6.22769 2.59001 6.99248 2.48535 7.79164C2.38068 8.59079 2.4595 9.40329 2.71582 10.1674C2.97214 10.9316 3.39921 11.6272 3.96461 12.2016",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10.0273 10.0039V16.8241",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M13.0585 13.0351L10.0273 10.0039L6.99609 13.0351",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},Bd=r(57182);function Bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Bp(e){if(Array.isArray(e))return e}function Bm(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function By(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bh(e,t){return Bp(e)||Bm(e,t)||Bb(e,t)||By()}function Bb(e,t){if(e){if("string"==typeof e)return Bf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bf(e,t)}}var Bv={limit:50,offset:0},Bg=function(e){var t=e.close,r=e.id,n=sM(Bv),i=Bh(B.useState([]),2),o=i[0],a=i[1],l=(0,en.useAdminPriceListProducts)(r,n.queryObject),s=l.products,c=l.isLoading,u=function(e){n.setQuery(e)};B.useEffect(function(){a(function(e){return Gb(s,e)})},[s,Gb]);var d=B.useMemo(function(){return(0,iM.debounce)(u,300)},[]);return(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsx)(Gn,{id:r,viewType:k.EDIT_PRICES,onClose:t})}),(0,F.jsx)(c3.Main,{children:(0,F.jsx)("div",{className:"mb-[25%] flex justify-center",children:(0,F.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 w-full pt-16",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit prices"}),(0,F.jsxs)("div",{className:"mt-7",children:[(0,F.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,F.jsx)("h6",{className:"inter-large-semibold",children:"Prices"}),(0,F.jsx)(a9.Z,{content:"info tooltip",children:(0,F.jsx)(Bd.Z,{size:16,className:"text-grey-40"})})]}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:"You will be able to override the prices for the products you add here"})]}),(0,F.jsx)(VL,{products:o,setProducts:a,isLoading:c,onSearch:d,onFileChosen:t,getVariantActions:Bx})]})})})]})},Bx=function(e){return[{label:"Edit prices",icon:(0,F.jsx)(eC,{size:20}),onClick:function(){}},{label:"Remove from list",icon:(0,F.jsx)(eZ,{size:20}),onClick:function(){},variant:"danger"}]};function Bj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Bj(e,t,r[t])})}return e}function Bw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function BS(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bw(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var BP=function(e,t){return e.prices.map(function(e){return BS(BO({id:e.id},UD(e,"currency_code","region_id")),{amount:e.amount,min_quantity:e.min_quantity,max_quantity:e.max_quantity,variant_id:t})}).filter(function(e){return e.amount>0})},BC=function(e){var t=e.variant,r=e.prices,n=e.onClick,i=t.title,o=t.sku,a=r.length>0;return(0,F.jsxs)("div",{className:"flex flex-1 items-center",children:[(0,F.jsxs)("div",{className:"truncate",children:[(0,F.jsx)("span",{children:i}),o&&(0,F.jsxs)("span",{className:"text-grey-50 ml-xsmall",children:["(SKU: ",o,")"]})]}),(0,F.jsxs)("div",{className:"text-grey-50 flex flex-1 items-center justify-end",children:[(0,F.jsx)("div",{className:"text-grey-50 mr-xsmall",children:a?(0,F.jsx)("span",{children:"".concat(r.length," price").concat(r.length>1?"s":"")}):(0,F.jsx)("span",{className:"inter-small-semibold text-orange-40",children:"Add prices"})}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"h-[32px] w-[32px]",onClick:n,children:(0,F.jsx)(pd,{className:"text-grey-40"})})]})]})},BN=function(e){var t=e.close,r=e.product,n=(0,pf.N6)(),i=(0,V.useParams)().id,o=(0,en.useAdminUpdatePriceList)(i||""),a=(0,en.useAdminStore)().store,l=null==a?void 0:a.currencies.map(function(e){return{currency_code:e.code,amount:0}}),s=(0,td.Z)();return(0,F.jsx)(pf.ZP,{isLargeModal:!0,context:n,handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{className:"flex h-[calc(100vh-134px)] flex-col",children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsxs)("h1",{className:"inter-xlarge-semibold",children:["Price overrides"," ",(0,F.jsxs)("span",{className:"text-grey-50 inter-xlarge-regular truncate",children:["(",r.title,")"]})]})}),(0,F.jsx)(tp.Z.Content,{className:"flex-1",children:(0,F.jsxs)(GE,{children:[(0,F.jsxs)(GE.Parent,{children:[(0,F.jsx)("div",{children:(0,F.jsx)("img",{src:r.thumbnail||void 0,className:"rounded-base h-5 w-4"})}),(0,F.jsx)("span",{className:"inter-small-semibold",children:r.title})]}),(0,F.jsx)(GE.Content,{children:r.variants.map(function(e){return(0,F.jsx)(GE.Leaf,{children:(0,F.jsx)(BC,{onClick:function(){return n.push({title:"Edit price overrides",onBack:function(){return n.pop()},view:(0,F.jsx)(VP,{prices:VN(e.prices.filter(function(e){return e.price_list_id}),l),isEdit:!0,defaultVariant:e,variants:r.variants,onClose:t,onSubmit:function(r){var i=BP(r,e.id);o.mutate({prices:i},{onSuccess:function(){n.pop(),t(),s("Success","Price overrides updated","success")}})}})})},variant:e,prices:e.prices.filter(function(e){return e.price_list_id})},e.id)})})})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small rounded-rounded mr-2 w-32 justify-center",size:"large",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{disabled:!0,size:"large",className:"text-small rounded-rounded w-32 justify-center",variant:"primary",children:"Save"})]})})]})})};function Bk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Bk(e,t,r[t])})}return e}function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function BD(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):BA(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function BE(e,t){if(null==e)return{};var r,n,i=BZ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function BZ(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var BI=function(e){var t=e.fill,r=e.size,n=BE(e,["fill","size"]),i=t||"#111827";return(0,F.jsxs)("svg",BD(B_({width:r||20,height:r||20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),{children:[(0,F.jsx)("path",{d:"M17.5 12.5V15.8333C17.5 16.2754 17.3244 16.6993 17.0118 17.0118C16.6993 17.3244 16.2754 17.5 15.8333 17.5H4.16667C3.72464 17.5 3.30072 17.3244 2.98816 17.0118C2.67559 16.6993 2.5 16.2754 2.5 15.8333V12.5",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M5.83203 8.33301L9.9987 12.4997L14.1654 8.33301",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M10 12.5V2.5",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},BT=r(24368);function BM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function BR(e){if(Array.isArray(e))return e}function BL(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Bz(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){BL(o,n,i,a,l,"next",e)}function l(e){BL(o,n,i,a,l,"throw",e)}a(void 0)})}}function Bq(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function BF(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function BH(e,t){return BR(e)||Bq(e,t)||BU(e,t)||BF()}function BU(e,t){if(e){if("string"==typeof e)return BM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BM(e,t)}}function BG(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function BV(e){var t=e.action,r=e.name,n=e.progress,i=e.size,o=e.status,a=e.hasError,l=e.errorMessage,s=i/1024<10?"".concat((i/1024).toFixed(2)," KiB"):"".concat((i/1048576).toFixed(2)," MiB");return(0,F.jsx)("div",{className:"relative",children:(0,F.jsxs)(a9.Z,{side:"top",maxWidth:320,open:!!a&&void 0,content:a&&l?(0,F.jsx)("span",{className:"font-normal text-rose-500",children:l}):null,children:[(0,F.jsx)("div",{style:{width:"".concat(n,"%")},className:"bg-grey-5 transition-width absolute h-full duration-150 ease-in-out"}),(0,F.jsxs)("div",{className:"border-1 relative mt-6 flex items-center rounded-xl border",children:[(0,F.jsx)("div",{className:"m-4",children:(0,F.jsx)(BT.Z,{size:30,fill:n?"#9CA3AF":"#2DD4BF"})}),(0,F.jsxs)("div",{className:"my-6 flex-1",children:[(0,F.jsx)("div",{className:"text-small text-grey-90 leading-5",children:r}),(0,F.jsx)("div",{className:(0,ec.Z)("text-xsmall text-grey-50 leading-4",{"text-rose-500":a}),children:o||s})]}),(0,F.jsx)("div",{className:"m-6",children:t})]})]})})}function BB(e){var t=e.creations,r=e.updates,n=e.type;return(0,F.jsxs)("div",{className:"flex gap-6",children:[(0,F.jsxs)("div",{className:"text-small text-grey-90 flex items-center",children:[(0,F.jsx)(LA.Z,{color:"#9CA3AF",className:"mr-2"}),(0,F.jsxs)("span",{className:"font-semibold",children:[" ",t||0,"\xa0"]})," new"," ",n]}),(0,F.jsxs)("div",{className:"text-small text-grey-90 flex items-center",children:[(0,F.jsx)(K.Z,{fill:"#9CA3AF",className:"mr-2"}),(0,F.jsxs)("span",{className:"font-semibold",children:[r||0,"\xa0"]})," updates"]})]})}function BW(e){var t=BH((0,B.useState)(!1),2),r=t[0],n=t[1];return(0,F.jsxs)("div",{onDragEnter:function(){return n(!0)},onDragLeave:function(){return n(!1)},onDragOver:function(e){e.stopPropagation(),e.preventDefault()},onDrop:function(t){var r;t.preventDefault(),t.stopPropagation(),n(!1),(null===(r=t.dataTransfer.items)||void 0===r?void 0:r.length)&&e.onUpload(t.dataTransfer.items[0].getAsFile())},className:(0,ec.Z)("mt-3 flex flex-col items-center justify-center rounded-xl border border-dashed p-6",{"opacity-50":r}),children:[(0,F.jsxs)("span",{className:"text-grey-50 text-small",children:["Drop your file here, or",(0,F.jsxs)("a",{className:"text-violet-60",children:[(0,F.jsxs)("label",{className:"cursor-pointer",htmlFor:"upload-form-file",children:[" ","click to browse."]}),(0,F.jsx)("input",{type:"file",id:"upload-form-file",className:"hidden",accept:"text/csv",onChange:function(t){e.onUpload(t.target.files[0])}})]})]}),(0,F.jsx)("span",{className:"text-grey-40 text-small",children:"Only .csv files are supported."})]})}function BQ(e){var t,r=e.description1Text,n=e.description2Text,i=e.description2Title,o=e.fileTitle,a=e.canImport,l=e.processUpload,s=e.onClose,c=e.onSubmit,u=e.onFileRemove,d=e.templateLink,f=e.summary,p=e.hasError,m=e.errorMessage,y=e.status,h=e.type,b=BH((0,B.useState)(),2),v=b[0],g=b[1],x=v||{},j=x.name,O=x.size,w=(t=Bz(function(e){return BG(this,function(t){switch(t.label){case 0:return g(e),[4,l(e)];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),S=(0,V.useHref)(d);return(0,F.jsx)(tp.Z,{open:!0,handleClose:s,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"flex justify-between",children:[(0,F.jsxs)("span",{className:"text-grey-90 inter-large-semibold py-4 text-2xl",children:["Import ",o]}),(0,F.jsx)("button",{onClick:s,className:"text-grey-50 cursor-pointer",children:(0,F.jsx)(c2.Z,{size:20})})]}),(0,F.jsxs)("div",{className:"text-grey-90 inter-large-semibold mb-1 text-base",children:["Import ",o]}),(0,F.jsx)("p",{className:"text-grey-50 mb-4 text-base",children:r}),f&&(0,F.jsx)(BB,{creations:f.toCreate,updates:f.toUpdate,type:h}),v?(0,F.jsx)(BV,{size:O,name:j,status:y,hasError:p,errorMessage:m,progress:100,action:(0,F.jsx)("a",{className:"h-6 w-6 cursor-pointer",onClick:function(){g(void 0),u()},children:(0,F.jsx)(eZ,{stroke:"#9CA3AF"})})}):(0,F.jsx)(BW,{onUpload:w}),(0,F.jsx)("div",{className:"text-grey-90 inter-large-semibold mt-8 text-base",children:i}),(0,F.jsx)("p",{className:"text-grey-50 mb-2 text-base",children:n}),(0,F.jsx)(BV,{name:"medusa-template.csv",size:2967,action:(0,F.jsx)("a",{className:"h-6 w-6 cursor-pointer",href:S,download:!0,children:(0,F.jsx)(BI,{stroke:"#9CA3AF"})})}),(0,F.jsx)("div",{className:"h-2"})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)("div",{className:"flex h-8 w-full justify-end",children:(0,F.jsxs)("div",{className:"flex gap-2",children:[(0,F.jsx)(Y.Z,{variant:"secondary",className:"text-small mr-2 justify-center",size:"small",onClick:s,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",disabled:!a||p,variant:"primary",className:"text-small",onClick:c,children:"Import List"})]})})})]})})}function BY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B$(e){if(Array.isArray(e))return e}function BK(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function BJ(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){BK(o,n,i,a,l,"next",e)}function l(e){BK(o,n,i,a,l,"throw",e)}a(void 0)})}}function BX(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function B0(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B1(e,t){return B$(e)||BX(e,t)||B2(e,t)||B0()}function B2(e,t){if(e){if("string"==typeof e)return BY(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BY(e,t)}}function B3(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function B5(e){var t=B1((0,B.useState)(),2),r=t[0],n=t[1],i=(null==r?void 0:r.status)==="created"||(null==r?void 0:r.status)==="confirmed",o=(0,en.useAdminBatchJob)(e,{enabled:!!e,refetchInterval:!!i&&2e3}).batch_job;return(0,B.useEffect)(function(){n(o)},[o]),r}function B6(e){var t,r,n,i,o,a=B1((0,B.useState)(),2),l=a[0],s=a[1],c=B1((0,B.useState)(),2),u=c[0],d=c[1],f=(0,td.Z)(),p=(0,DW.W)().resetInterval,m=(0,en.useAdminDeleteFile)().mutateAsync,y=(0,en.useAdminUploadFile)().mutateAsync,h=(0,en.useAdminCreateBatchJob)().mutateAsync,b=(0,en.useAdminCancelBatchJob)(u).mutateAsync,v=(0,en.useAdminConfirmBatchJob)(u).mutateAsync,g=B5(u),x=!!(null==g?void 0:g.result),j=(null==g?void 0:g.status)==="failed",O=x?((null===(i=g.result)||void 0===i?void 0:i.advancement_count)||0)/((null===(o=g.result)||void 0===o?void 0:o.count)||1):void 0,w=(t=BJ(function(){return B3(this,function(t){switch(t.label){case 0:return[4,v()];case 1:return t.sent(),f("Success","Import confirmed for processing. Progress info is available in the activity drawer.","success"),e.handleClose(),[2]}})}),function(){return t.apply(this,arguments)}),S=(r=BJ(function(t){var r,n;return B3(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,6]),[4,y(t)];case 1:return s(r=i.sent().uploads[0].key),[4,h({dry_run:!0,context:{fileKey:r,price_list_id:e.priceListId},type:"price-list-import"})];case 2:return n=i.sent(),p(),d(n.batch_job.id),[3,6];case 3:if(i.sent(),f("Error","Import failed.","error"),!l)return[3,5];return[4,m({file_key:l})];case 4:i.sent(),i.label=5;case 5:return[3,6];case 6:return[2]}})}),function(e){return r.apply(this,arguments)}),P=(n=BJ(function(){return B3(this,function(e){try{l&&m({file_key:l}),b()}catch(e){console.log(e)}return[2]})}),function(){return n.apply(this,arguments)});return(0,F.jsx)(BQ,{type:"prices",fileTitle:"Price List prices",description1Text:"Upload a CSV file with variants and prices to update your price list. Note that any existing prices will be deleted.",description2Title:"Unsure about how to arrange your list?",description2Text:"Download the template file below and update your prices",status:j?"Error occurred while processing":x?void 0:l?"Preprocessing...":"Uploading...",progress:O,canImport:x,onSubmit:w,onClose:function(){e.handleClose(),!["confirmed","completed","canceled","failed"].includes((null==g?void 0:g.status)||"")&&(l&&m({file_key:l}),u&&b())},summary:function(){if(g){var e,t,r=null===(t=g.result)||void 0===t?void 0:null===(e=t.stat_descriptors)||void 0===e?void 0:e[0].message.match(/\d+/g);if(r)return{toCreate:Number(r[0])}}}(),onFileRemove:P,processUpload:S,templateLink:"".concat("/app","/temp/price-list-import-template.csv")})}var B4=function(){return B.useMemo(function(){return[{Header:(0,F.jsx)("div",{className:"pl-4",children:"Name"}),accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsxs)("div",{className:"flex items-center pl-4",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.thumbnail?(0,F.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsx)("div",{className:"flex flex-col",children:(0,F.jsx)("span",{children:t.title})})]})}},{Header:(0,F.jsx)("div",{className:"w-[400px]",children:"Collection"}),accessor:"collection",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{children:(null==t?void 0:t.title)?t.title:(0,F.jsx)("span",{className:"text-grey-40",children:"No collection"})})}},{Header:"Variants",Cell:function(e){var t=e.row.original;return(0,F.jsx)(nf.Cell,{children:t.variants.length})}}]},[])};function B8(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){B8(e,t,r[t])})}return e}function B9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function We(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B9(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Wt(e,t){if(null==e)return{};var r,n,i=Wr(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Wr(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Wn={offset:0,limit:9},Wi=function(e){var t=e.id,r=e.selectProduct,n=sM(Wn),i=(0,en.useAdminPriceListProducts)(t,n.queryObject),o=i.products,a=i.isLoading,l=i.count,s=B4();return(0,F.jsx)("div",{className:"flex h-full w-full flex-col justify-between overflow-y-auto",children:(0,F.jsx)(pN,B7({columns:s,data:o||[],renderRow:function(e){var n=e.row;return(0,F.jsx)(Wa,We(B7({},n.getRowProps()),{product:n.original,priceListId:t,onClick:function(){r(n.original)},className:"hover:bg-grey-5 hover:cursor-pointer",children:n.cells.map(function(e){return(0,F.jsx)(nf.Cell,We(B7({},e.getCellProps()),{children:e.render("Cell")}))})}))},renderHeaderGroup:Wo,isLoading:a,totalCount:void 0===l?0:l,options:{enableSearch:!1,searchPlaceholder:"Search by name or SKU..."}},n))})},Wo=function(e){var t=e.headerGroup;return(0,F.jsx)(nf.HeadRow,We(B7({},t.getHeaderGroupProps()),{children:t.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,We(B7({},e.getHeaderProps(e.getSortByToggleProps())),{children:e.render("Header")}))})}))},Wa=function(e){var t=e.children,r=e.priceListId,n=e.product,i=e.onClick,o=Wt(e,["children","priceListId","product","onClick"]),a=(0,td.Z)(),l=(0,en.useAdminDeletePriceListProductPrices)(r,n.id),s=[{label:"Edit prices",icon:(0,F.jsx)(eC,{size:20}),onClick:i},{label:"Remove product",icon:(0,F.jsx)(oq,{size:20}),variant:"danger",onClick:function(){l.mutate(void 0,{onSuccess:function(){a("Success","Deleted prices of product: ".concat(n.title),"success")},onError:function(e){return a("Error",(0,tf.e)(e),"error")}})}}];return(0,F.jsx)(nf.Row,We(B7({},o),{actions:s,children:t}))};function Wl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ws(e){if(Array.isArray(e))return e}function Wc(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Wu(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wd(e,t){return Ws(e)||Wc(e,t)||Wf(e,t)||Wu()}function Wf(e,t){if(e){if("string"==typeof e)return Wl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wl(e,t)}}var Wp=function(e){var t=e.id,r=(0,s1.Z)(),n=r.state,i=r.open,o=r.close,a=Wd((0,s1.Z)(),3),l=a[0],s=a[1],c=a[2],u=Wd(B.useState(null),2),d=u[0],f=u[1],p=[{label:"Edit manually",onClick:i,icon:(0,F.jsx)(eC,{size:20})},{label:"Import price list",onClick:s,icon:(0,F.jsx)(Bu,{size:20})}];return(0,F.jsxs)(tI,{title:"Prices",actionables:p,forceDropdown:!0,children:[(0,F.jsx)(Wi,{id:t,selectProduct:f}),(0,F.jsxs)(cX,{isVisible:n,isFullScreen:!0,children:[(0,F.jsx)(Bg,{close:o,id:t})," "]}),l&&(0,F.jsx)(B6,{priceListId:t,handleClose:function(){return c()}}),d&&(0,F.jsx)(BN,{product:d,close:function(){return f(null)}})]})},Wm=function(){var e=(0,V.useParams)().id,t=(0,V.useNavigate)(),r=(0,en.useAdminPriceList)(e),n=r.price_list,i=r.isLoading,o=r.error,a=(0,ig.e)().getWidgets;if(o){var l=ix(o);if(l&&404===l.status)return t("/404"),null;throw o}return i||!n?(0,F.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}):(0,F.jsxs)("div",{className:"pb-large",children:[(0,F.jsx)(eb,{label:"Back to Pricing",path:"/a/pricing",className:"mb-xsmall"}),(0,F.jsx)(U6,{priceList:UH(n),children:(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[a("price_list.details.before").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:n,injectionZone:"price_list.details.before",widget:e},t)}),(0,F.jsx)(Bt,{priceList:n}),(0,F.jsx)(Wp,{id:null==n?void 0:n.id}),a("price_list.details.after").map(function(e,t){return(0,F.jsx)(eg.Z,{entity:n,injectionZone:"price_list.details.after",widget:e},t)}),(0,F.jsx)(tT,{data:n,title:"Raw price list"})]})})]})},Wy=function(){return(0,F.jsx)(U6,{children:(0,F.jsx)(VK,{viewType:k.CREATE})})};function Wh(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Wb(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Wh(o,n,i,a,l,"next",e)}function l(e){Wh(o,n,i,a,l,"throw",e)}a(void 0)})}}function Wv(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Wg=function(e){var t,r=o2(),n=(0,td.Z)(),i=(0,en.useAdminUpdatePriceList)(null==e?void 0:e.id),o=(0,en.useAdminDeletePriceList)(null==e?void 0:e.id),a=(t=Wb(function(){return Wv(this,function(e){switch(e.label){case 0:return[4,r({heading:"Delete Price List",text:"Are you sure you want to delete this price list?"})];case 1:return e.sent()&&o.mutate(void 0,{onSuccess:function(){n("Success","Successfully deleted the price list","success")},onError:function(e){return n("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)}),l=function(){i.mutate({status:Gr(e)?"draft":"active"},{onSuccess:function(){n("Success","Successfully ".concat(Gr(e)?"unpublished":"published"," price list"),"success")}})};return{getActions:function(){return[{label:Gr(e)?"Unpublish":"Publish",onClick:l,icon:Gr(e)?(0,F.jsx)(fj,{size:20}):(0,F.jsx)(fm,{size:20})},{label:"Delete",onClick:a,icon:(0,F.jsx)(eZ,{size:20}),variant:"danger"}]}}};function Wx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Wj(e){if(Array.isArray(e))return e}function WO(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ww(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function WS(e,t){return Wj(e)||WO(e,t)||WP(e,t)||Ww()}function WP(e,t){if(e){if("string"==typeof e)return Wx(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wx(e,t)}}var WC=function(){return[(0,B.useMemo)(function(){return[{Header:"Name",accessor:"name",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{children:(0,F.jsx)("span",{className:"inter-small-regular",children:t})})}},{Header:"Description",accessor:"description",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(nf.Cell,{children:t})}},{Header:"Status",accessor:"status",Cell:function(e){var t=e.row.original;return(0,F.jsx)(nf.Cell,{children:U9(t)})}},{Header:"Groups",accessor:"customer_groups",Cell:function(e){var t=e.cell.value,r=WS(Ge((0,iM.isArray)(t)?t.map(function(e){return e.name}):[]),2),n=r[0],i=r[1];return(0,F.jsxs)(nf.Cell,{children:[n,i&&(0,F.jsxs)("span",{className:"text-grey-40",children:[" + ",i," more"]})]})}},{accessor:"created_at",Cell:function(e){var t=Wg(e.row.original).getActions;return(0,F.jsx)(nf.Cell,{onClick:function(e){return e.stopPropagation()},className:"flex w-full justify-end",children:(0,F.jsx)("div",{className:"justify-end",children:(0,F.jsx)(eQ,{forceDropdown:!0,actions:t()})})})}}]},[])]},WN=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0};function Wk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function W_(e){if(Array.isArray(e))return e}function WA(e){if(Array.isArray(e))return Wk(e)}function WD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WE(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function WZ(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function WI(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function WT(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function WM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){WD(e,t,r[t])})}return e}function WR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function WL(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):WR(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Wz(e,t){return W_(e)||WZ(e,t)||WF(e,t)||WI()}function Wq(e){return WA(e)||WE(e)||WF(e)||WT()}function WF(e,t){if(e){if("string"==typeof e)return Wk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wk(e,t)}}var WH=["type","customer_groups","status","offset","limit"],WU={},WG=function(e){return null===e?e:Object.entries(e).reduce(function(e,t){var r=Wz(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=u_(i):e[n]=i,e},{})},WV=function(e,t){switch(t.type){case"setFilters":var r;return WL(WM({},e),{query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query,status:t.payload.status,type:t.payload.type,customer_groups:t.payload.customer_groups});case"setQuery":return WL(WM({},e),{offset:0,query:t.payload});case"setOffset":return WL(WM({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},WB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return WY(e,t)},[e,t]),n=(0,B.useMemo)(function(){var e=localStorage.getItem("priceLists::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=Wz(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=Wz((0,B.useReducer)(WV,r),2),o=i[0],a=i[1],l=Wz((0,B.useState)(n),2),s=l[0],c=l[1],u=function(){var e=WM({},o.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=Wz(i.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):"offset"===s||"limit"===s?e[s]=c:c.open&&("date"===s?e[WQ[s]]=WG(c.filter):e[WQ[s]]=c.filter)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:o,r={},n=!0,i=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=Wz(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:d.open&&(r[WQ[u]]=d.filter)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},f=function(){var e=d();return iL().stringify(e,{skipNulls:!0})},p=(0,B.useMemo)(function(){return u()},[o]),m=(0,B.useMemo)(function(){return d()},[o]),y=(0,B.useMemo)(function(){return f()},[o]),h=(0,B.useMemo)(function(){var e=(0,iM.omit)(m,["limit","offset"]),t=iL().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(WU)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=Wz(a.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,y=!1,h=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=Wz(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&WN(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){y=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(y)throw h}}if(f)return u}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return null},[m,s]),b=(0,B.useMemo)(function(){return Wq(s)},[s]);return WL(WM({},o),{filters:WM({},o),removeTab:function(e){var t=localStorage.getItem("priceLists::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("priceLists::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(WM({},t)),n=(0,iM.omit)(r,["limit","offset"]),i=iL().stringify(n,{skipNulls:!0}),o=localStorage.getItem("priceLists::filters"),l=null;if(o&&(l=JSON.parse(o)),l)l[e]=i,localStorage.setItem("priceLists::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("priceLists::filters",JSON.stringify(s))}c(function(t){return Wq(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),a({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in WU)t=WU[e];else{var r=s.find(function(t){return t.value===e});r&&(t=iL().parse(r.representationString))}if(t){var n=WL(WM({},o),{type:{open:!1,filter:null},status:{open:!1,filter:null},customer_groups:{open:!1,filter:null}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=Wz(u.value,2),p=f[0],m=f[1];n[WW[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}a({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:h,representationObject:m,representationString:y,queryObject:p,paginate:function(e){e>0?a({type:"setOffset",payload:o.offset+o.limit}):a({type:"setOffset",payload:Math.max(o.offset-o.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return iL().stringify(e,{skipNulls:!0})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},reset:function(){a({type:"setFilters",payload:WL(WM({},o),{offset:0,type:{open:!1,filter:null},status:{open:!1,filter:null},customer_groups:{open:!1,filter:null},query:null})})}})},WW={status:"status",type:"type",customer_groups:"customer_groups"},WQ={status:"status",type:"type",customer_groups:"customer_groups"},WY=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={type:{open:!1,filter:null},status:{open:!1,filter:null},customer_groups:{open:!1,filter:null},offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=Wz(l.value,2),u=c[0],d=c[1];if(WH.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d);break;case"status":case"type":"string"==typeof d&&(r.status={open:!0,filter:d});break;case"customer_groups":Array.isArray(d)&&(r.customer_groups={open:!0,filter:d})}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return r};function W$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function WK(e){if(Array.isArray(e))return e}function WJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WX(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function W0(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function W1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){WJ(e,t,r[t])})}return e}function W2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W3(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W2(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function W5(e,t){return WK(e)||WX(e,t)||W6(e,t)||W0()}function W6(e,t){if(e){if("string"==typeof e)return W$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W$(e,t)}}function W4(e){return(0,F.jsx)(nf.HeadCell,W3(W1({className:"w-[100px]"},e.col.getHeaderProps(e.col.getSortByToggleProps())),{children:e.col.render("Header")}))}function W8(e){return(0,F.jsx)(nf.HeadRow,W3(W1({},e.headerGroup.getHeaderGroupProps()),{children:e.headerGroup.headers.map(function(e){return(0,F.jsx)(W4,{col:e},e.id)})}))}function W7(e){var t=e.row;return(0,F.jsx)(nf.Row,W3(W1({color:"inherit",linkTo:t.original.id,id:t.original.id,className:"group"},t.getRowProps()),{children:t.cells.map(function(e,t){return e.render("Cell",{index:t})})}))}function W9(e){var t,r=W5((0,B.useState)(""),2),n=r[0],i=r[1],o=e.priceLists,a=e.queryObject,l=e.count,s=e.paginate,c=e.setQuery,u=e.columns,d=e.options,f=e.isLoading,p={columns:u,data:o||[],initialState:{pageSize:a.limit,pageIndex:a.offset/a.limit},pageCount:Math.ceil(l/a.limit),manualPagination:!0,autoResetPage:!1},m=(0,rN.useTable)(p,rN.useSortBy,rN.usePagination,rN.useRowSelect),y=(0,rk.N)(n,500);return(0,B.useEffect)(function(){c(y),m.gotoPage(0)},[y]),(0,F.jsx)(nC,{isLoading:f,numberOfRows:a.limit,hasPagination:!0,pagingState:{count:l,offset:a.offset,pageSize:a.offset+m.rows.length,title:"Price Lists",currentPage:m.state.pageIndex+1,pageCount:m.pageCount,nextPage:function(){m.canNextPage&&(s(1),m.nextPage())},prevPage:function(){m.canPreviousPage&&(s(-1),m.previousPage())},hasNext:m.canNextPage,hasPrev:m.canPreviousPage},children:(0,F.jsxs)(nf,W3(W1({},m.getTableProps(),d),{enableSearch:d.enableSearch,searchValue:n,handleSearch:d.enableSearch?i:void 0,filteringOptions:d.filter,children:[(0,F.jsx)(nf.Head,{children:null===(t=m.headerGroups)||void 0===t?void 0:t.map(function(e,t){return(0,F.jsx)(W8,{headerGroup:e},t)})}),(0,F.jsx)(nf.Body,W3(W1({},m.getTableBodyProps()),{children:m.rows.map(function(e){return m.prepareRow(e),(0,F.jsx)(W7,{row:e})})}))]}))})}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Qt(e){if(Array.isArray(e))return e}function Qr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qn(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Qi(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Qr(e,t,r[t])})}return e}function Qa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ql(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qa(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Qs(e,t){return Qt(e)||Qn(e,t)||Qc(e,t)||Qi()}function Qc(e,t){if(e){if("string"==typeof e)return Qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qe(e,t)}}var Qu=["active","draft"],Qd=["sale","override"],Qf=function(e){var t=e.filters,r=e.submitFilters,n=e.clearFilters,i=e.tabs,o=e.onTabClick,a=e.activeTab,l=e.onRemoveTab,s=e.onSaveTab,c=Qs((0,B.useState)(t),2),u=c[0],d=c[1],f=Qs((0,B.useState)(""),2),p=f[0],m=f[1],y=function(e){l&&l(e)},h=function(e){o&&o(e)};(0,B.useEffect)(function(){d(t)},[t]);var b=(0,B.useMemo)(function(){return Object.entries(t).reduce(function(e,t){var r=Qs(t,2)[1];return(null==r?void 0:r.open)&&(e+=1),e},0)},[t]),v=function(e,t){d(function(r){return Ql(Qo({},r),Qr({},e,t))})};return(0,F.jsxs)("div",{className:"flex space-x-1",children:[(0,F.jsxs)(uv,{submitFilters:function(){r(u)},clearFilters:function(){n()},triggerElement:(0,F.jsxs)("button",{className:(0,ec.Z)("rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex items-center space-x-1 focus-visible:outline-none"),children:[(0,F.jsxs)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex h-6 items-center border px-2",children:["Filters",(0,F.jsx)("div",{className:"text-grey-40 ml-1 flex items-center rounded",children:(0,F.jsx)("span",{className:"text-violet-60 inter-small-semibold",children:b||"0"})})]}),(0,F.jsx)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex items-center border p-1",children:(0,F.jsx)(sh.Z,{size:14})})]}),children:[(0,F.jsx)(dj,{filterTitle:"Status",options:Qu,filters:u.status.filter,open:u.status.open,setFilter:function(e){return v("status",e)}}),(0,F.jsx)(dj,{filterTitle:"Type",options:Qd,filters:u.type.filter,open:u.type.open,setFilter:function(e){return v("type",e)}}),(0,F.jsx)(dC,{saveFilter:function(){s&&s(p,u)},name:p,setName:m})]}),i&&i.map(function(e){return(0,F.jsx)(dk,{onClick:function(){return h(e.value)},label:e.label,isActive:a===e.value,removable:!!e.removable,onRemove:function(){return y(e.value)}},e.value)})]})};function Qp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Qm(e){if(Array.isArray(e))return e}function Qy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qh(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Qb(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Qy(e,t,r[t])})}return e}function Qg(e,t){return Qm(e)||Qh(e,t)||Qx(e,t)||Qb()}function Qx(e,t){if(e){if("string"==typeof e)return Qp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qp(e,t)}}var Qj={expand:"customer_groups",offset:0,limit:15},QO=function(){var e=WB((0,V.useLocation)().search,Qj),t=Qg(WC(),1)[0],r=(0,en.useAdminPriceLists)(e.queryObject,{keepPreviousData:!0}),n=r.price_lists,i=r.isLoading,o=r.count;return sR(e.representationObject),(0,F.jsx)("div",{children:(0,F.jsx)(W9,Qv({isLoading:i,columns:t,count:void 0===o?0:o,priceLists:n||[],options:{enableSearch:!0,filter:(0,F.jsx)(Qf,{filters:e.filters,submitFilters:e.setFilters,clearFilters:function(){e.setQuery(""),e.reset()},tabs:e.availableTabs,onTabClick:e.setTab,activeTab:e.activeFilterTab,onRemoveTab:e.removeTab,onSaveTab:e.saveTab})}},e))})},Qw=function(){var e=(0,V.useNavigate)(),t=[{label:"Add price list",onClick:function(){return e("/a/pricing/new")},icon:(0,F.jsx)(sh.Z,{size:20})}],r=(0,ig.e)().getWidgets;return(0,F.jsxs)("div",{className:"gap-y-xsmall flex h-full flex-col",children:[r("price_list.list.before").map(function(e,t){return(0,F.jsx)(eg.Z,{widget:e,entity:null,injectionZone:"price_list.list.before"},t)}),(0,F.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,F.jsx)(tI,{actionables:t,customHeader:(0,F.jsx)(s3,{views:["Price lists"]}),className:"h-fit",children:(0,F.jsx)(QO,{})}),(0,F.jsx)(ev,{})]})]})},QS=function(){var e=(0,(0,W.V)().getNestedRoutes)("/pricing");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(Qw,{})}),(0,F.jsx)(V.Route,{path:"/new",element:(0,F.jsx)(Wy,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(Wm,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/pricing"})},t)})]})},QP=r(94042);function QC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){QC(e,t,r[t])})}return e}function Qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q_(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qk(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function QA(e,t){if(null==e)return{};var r,n,i=QD(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QD(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var QE=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=void 0===n?"currentColor":n,o=QA(e,["size","color"]);return(0,F.jsxs)("svg",Q_(QN({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M7.5 10.75C7.91421 10.75 8.25 10.4142 8.25 10C8.25 9.58579 7.91421 9.25 7.5 9.25C7.08579 9.25 6.75 9.58579 6.75 10C6.75 10.4142 7.08579 10.75 7.5 10.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.5 5.75C7.91421 5.75 8.25 5.41421 8.25 5C8.25 4.58579 7.91421 4.25 7.5 4.25C7.08579 4.25 6.75 4.58579 6.75 5C6.75 5.41421 7.08579 5.75 7.5 5.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.5 15.75C7.91421 15.75 8.25 15.4142 8.25 15C8.25 14.5858 7.91421 14.25 7.5 14.25C7.08579 14.25 6.75 14.5858 6.75 15C6.75 15.4142 7.08579 15.75 7.5 15.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12.5 10.75C12.9142 10.75 13.25 10.4142 13.25 10C13.25 9.58579 12.9142 9.25 12.5 9.25C12.0858 9.25 11.75 9.58579 11.75 10C11.75 10.4142 12.0858 10.75 12.5 10.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12.5 5.75C12.9142 5.75 13.25 5.41421 13.25 5C13.25 4.58579 12.9142 4.25 12.5 4.25C12.0858 4.25 11.75 4.58579 11.75 5C11.75 5.41421 12.0858 5.75 12.5 5.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12.5 15.75C12.9142 15.75 13.25 15.4142 13.25 15C13.25 14.5858 12.9142 14.25 12.5 14.25C12.0858 14.25 11.75 14.5858 11.75 15C11.75 15.4142 12.0858 15.75 12.5 15.75Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function QZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){QZ(e,t,r[t])})}return e}function QT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QM(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):QT(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function QR(e,t){if(null==e)return{};var r,n,i=QL(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QL(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Qz=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=QR(e,["size","color"]);return(0,F.jsx)("svg",QM(QI({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),{children:(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.0869 6.25006C13.7804 6.25006 14.22 7.00005 13.8859 7.61318L10.7988 13.2737C10.4525 13.9089 9.54748 13.9089 9.20123 13.2737L6.1141 7.61368C5.78 7.00054 6.21963 6.25055 6.91312 6.25055L13.0869 6.25006Z",fill:void 0===n?"currentColor":n})}))};function Qq(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Qq(e,t,r[t])})}return e}function QH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QU(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):QH(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function QG(e,t){if(null==e)return{};var r,n,i=QV(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QV(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var QB=function(e){var t=e.content,r=e.icon,n=QG(e,["content","icon"]);return(0,F.jsx)(a9.Z,QU(QF({content:t,side:"top"},n),{children:r}))};function QW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){QW(e,t,r[t])})}return e}function QY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q$(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):QY(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function QK(e,t){if(null==e)return{};var r,n,i=QJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QJ(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var QX=function(e){var t=e.size,r=void 0===t?"20px":t,n=e.color,i=QK(e,["size","color"]);return(0,F.jsx)("svg",Q$(QQ({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),{children:(0,F.jsx)("path",{d:"M3.49557 8.24663C3.58387 8.23322 3.67454 8.22613 3.76678 8.22613H16.2328C16.325 8.22613 16.4157 8.23322 16.504 8.24663M3.49557 8.24663C3.03418 8.31808 2.61956 8.56856 2.34165 8.94373C2.06373 9.31891 1.94494 9.78852 2.01103 10.2507L2.68668 14.9811C2.74703 15.4037 2.95781 15.7905 3.28032 16.0703C3.60284 16.3501 4.01546 16.5041 4.44243 16.5042H15.5579C15.9849 16.5041 16.3975 16.3501 16.72 16.0703C17.0426 15.7905 17.2533 15.4037 17.3137 14.9811L17.9893 10.2507C18.0554 9.78852 17.9366 9.31891 17.6587 8.94373C17.3808 8.56856 16.9654 8.31808 16.504 8.24663M3.49557 8.24663L3.49636 5.26967C3.49636 4.79934 3.68314 4.34827 4.01564 4.01562C4.34813 3.68298 4.79912 3.496 5.26945 3.49579H8.32761C8.64115 3.49606 8.94174 3.62084 9.16331 3.84268L10.8363 5.51407C11.0578 5.73591 11.3584 5.86068 11.672 5.86096H14.7301C15.2006 5.86096 15.6518 6.04785 15.9844 6.38051C16.3171 6.71318 16.504 7.16437 16.504 7.63484V8.24663",stroke:void 0===n?"currentColor":n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))},Q0=r(41670);function Q1(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Q2(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Q1(o,n,i,a,l,"next",e)}function l(e){Q1(o,n,i,a,l,"throw",e)}a(void 0)})}}function Q3(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function Q5(e){var t,r=e.item,n=(0,td.Z)(),i=!!(null===(t=r.category_children)||void 0===t?void 0:t.length),o=(0,B.useContext)(YB),a=(0,en.useAdminDeleteProductCategory)(r.id).mutateAsync,l=[{label:"Edit",onClick:function(){return o.editCategory(r)},icon:(0,F.jsx)(eC,{size:20})},{label:"Delete",variant:"danger",onClick:Q2(function(){return Q3(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,a()];case 1:return e.sent(),n("Success","Category deleted","success"),[3,3];case 2:return e.sent(),n("Error","Category deletion failed","error"),[3,3];case 3:return[2]}})}),icon:(0,F.jsx)(eZ,{size:20}),disabled:!!r.category_children.length}];return(0,F.jsx)("div",{className:"bg-white",children:(0,F.jsxs)("div",{style:{marginLeft:-8*e.depth},className:"flex h-[40px] items-center",children:[(0,F.jsx)("div",{className:"flex w-[32px] items-center justify-center",children:e.handler}),(0,F.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center",children:[i&&(0,F.jsx)("div",{className:"absolute flex w-[20px] cursor-pointer items-center justify-center",children:e.collapseIcon}),(0,F.jsxs)("div",{className:"ml-[20px] flex w-[32px] items-center justify-center",children:[i&&(0,F.jsx)(QX,{color:"#889096",size:18}),!i&&(0,F.jsx)(Q0.Z,{color:"#889096",size:18})]}),(0,F.jsx)("span",{className:(0,ec.Z)("ml-2 select-none text-xs font-medium",{"font-normal text-gray-400":!i}),children:r.name}),(0,F.jsxs)("div",{className:"flex w-[64px] items-center justify-center",children:[!r.is_active&&(0,F.jsx)(QB,{content:"Category status is inactive",icon:(0,F.jsx)(_L,{size:"32",className:"cursor-pointer",outerColor:"#FFE5E5"})}),r.is_internal&&(0,F.jsx)(QB,{content:"Category visibility is private",icon:(0,F.jsx)(G7.Z,{color:"#889096",size:18,className:"cursor-pointer"})})]})]}),(0,F.jsxs)("div",{className:"flex items-center gap-2",children:[(0,F.jsx)(a9.Z,{style:{zIndex:1},content:(0,F.jsxs)(F.Fragment,{children:["Add category item to"," ",(0,F.jsx)("span",{className:"text-grey-80 font-semibold",children:'"'.concat(r.name,'"')})]}),children:(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:function(){return o.createSubCategory(r)},children:(0,F.jsx)(sh.Z,{color:"#687076",size:18})})}),(0,F.jsx)(eQ,{forceDropdown:!0,actions:l,customTrigger:(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",className:"h-xlarge w-xlarge focus-visible:border-violet-60 focus-visible:shadow-input focus:shadow-none focus-visible:outline-none",children:(0,F.jsx)(eF,{color:"#687076",size:20})})})]})]})]})})}function Q6(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Q4(e){if(Array.isArray(e))return e}function Q8(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Q7(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Q8(o,n,i,a,l,"next",e)}function l(e){Q8(o,n,i,a,l,"throw",e)}a(void 0)})}}function Q9(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Ye(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yt(e,t){return Q4(e)||Q9(e,t)||Yr(e,t)||Ye()}function Yr(e,t){if(e){if("string"==typeof e)return Q6(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q6(e,t)}}function Yn(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function Yi(e){var t,r=(0,en.useMedusa)().client,n=(0,OX.useQueryClient)(),i=(0,td.Z)(),o=Yt((0,s1.Z)(!1),3),a=o[0],l=o[1],s=o[2],c=Yt((0,s1.Z)(!1),3),u=c[0],d=c[1],f=c[2],p=e.categories,m=(0,B.useCallback)((t=Q7(function(e){var t,o,a,c,u,p;return Yn(this,function(m){switch(m.label){case 0:l(),t=null,o=e.dragItem,a=e.items,u=Yt((c=e.targetPath).slice(-1),1)[0],c.length>1&&(p=(0,iM.dropRight)((0,iM.flatMap)(c.slice(0,-1),function(e){return[e,"category_children"]})),t=(0,iM.get)(a,p).id),m.label=1;case 1:return m.trys.push([1,3,4,6]),f(),[4,r.admin.productCategories.update(o.id,{parent_category_id:t,rank:u})];case 2:return m.sent(),i("Success","Successfully updated category tree","success"),[3,6];case 3:return m.sent(),i("Error","Failed to update category tree","error"),d(),[3,6];case 4:return[4,n.invalidateQueries(en.adminProductCategoryKeys.lists())];case 5:return m.sent(),s(),[7];case 6:return[2]}})}),function(e){return t.apply(this,arguments)}),[]),y=(0,B.useMemo)(function(){return(0,F.jsx)(QP.Z,{items:p,collapsed:!0,onChange:m,childrenProp:"category_children",maxDepth:99,renderItem:function(e){var t=e.item,r=e.depth,n=e.handler,i=e.collapseIcon;return(0,F.jsx)(Q5,{item:t,depth:r,handler:n,collapseIcon:i})},handler:(0,F.jsx)(QE,{className:"cursor-grab",color:"#889096"}),renderCollapseIcon:function(e){var t=e.isCollapsed;return(0,F.jsx)(Qz,{style:{top:-2,width:32,left:-12,transform:t?"rotate(270deg)":""},color:"#889096",size:18})}})},[p,u]);return(0,F.jsxs)("div",{style:{pointerEvents:a?"none":"initial",position:"relative"},children:[y,a&&(0,F.jsx)("div",{style:{top:0,bottom:0,width:"100%",cursor:"progress",position:"absolute"}})]})}let Yo=B.memo(Yi);var Ya=function(e){return e.reduce(function(e,t){return(null==t?void 0:t.category_children.length)?e=e.concat(Ya(t.category_children)).concat(t):e.push(t),e},[])},Yl=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=null;return(r.push(e),e.parent_category_id&&(r=Yl(n=t.find(function(t){return t.id===e.parent_category_id}),t,r)),n)?r:r.reverse()};function Ys(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ys(e,t,r[t])})}return e}function Yu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Yd(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Yu(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Yf(e,t){if(null==e)return{};var r,n,i=Yp(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Yp(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var Ym=function(e){var t=e.nodes,r=e.currentNode,n=e.showPlaceholder,i=void 0!==n&&n,o=e.placeholderText,a=Yf(e,["nodes","currentNode","showPlaceholder","placeholderText"]),l=Yl(r,t);return(0,F.jsx)("span",Yd(Yc({},a),{children:(0,F.jsxs)("span",{className:"text-grey-40",children:[l.map(function(e,t){var r=e.name;return(0,F.jsxs)("div",{className:"inline-block",children:[(0,F.jsx)("span",{children:r.length>25?r.substring(0,25)+"...":r}),(i||l.length!==t+1)&&(0,F.jsx)("span",{className:"mx-2",children:"/"})]},e.id)}),i&&(0,F.jsx)("span",{children:(0,F.jsx)("span",{className:"border-grey-40 rounded-[10px] border-[1px] border-dashed px-[8px] py-[4px]",children:void 0===o?"":o})})]})}))};function Yy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Yh(e){if(Array.isArray(e))return e}function Yb(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Yv(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Yb(o,n,i,a,l,"next",e)}function l(e){Yb(o,n,i,a,l,"throw",e)}a(void 0)})}}function Yg(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Yx(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yj(e,t){return Yh(e)||Yg(e,t)||YO(e,t)||Yx()}function YO(e,t){if(e){if("string"==typeof e)return Yy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yy(e,t)}}function Yw(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var YS=[{label:"Public",value:"public"},{label:"Private",value:"private"}],YP=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];function YC(e){var t,r=e.closeModal,n=e.parentCategory,i=e.categories,o=(0,td.Z)(),a=(0,OX.useQueryClient)(),l=Yj((0,B.useState)(""),2),s=l[0],c=l[1],u=Yj((0,B.useState)(""),2),d=u[0],f=u[1],p=Yj((0,B.useState)(""),2),m=p[0],y=p[1],h=Yj((0,B.useState)(!0),2),b=h[0],v=h[1],g=Yj((0,B.useState)(!0),2),x=g[0],j=g[1],O=(0,en.useAdminCreateProductCategory)().mutateAsync,w=(t=Yv(function(){var e,t,i;return Yw(this,function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,O({name:s,handle:d,description:m,is_active:b,is_internal:!x,parent_category_id:null!==(t=null===(e=n)||void 0===e?void 0:e.id)&&void 0!==t?t:null})];case 1:return l.sent(),[4,a.invalidateQueries(en.adminProductCategoryKeys.lists())];case 2:return l.sent(),r(),o("Success","Successfully created a category","success"),[3,4];case 3:return i=l.sent(),o("Error",(0,tf.e)(i)||"Failed to create a new category","error"),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:r,children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsx)("div",{className:"gap-x-small flex",children:(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:w,disabled:!s,className:"rounded-rounded",children:"Save category"})})]})}),(0,F.jsx)(c3.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,F.jsxs)("div",{className:"small:w-4/5 medium:w-7/12 large:w-6/12 my-16 max-w-[700px]",children:[(0,F.jsxs)("h1",{className:"inter-xlarge-semibold text-grey-90 pb-6",children:["Add category ",n&&"to ".concat(n.name)]}),n&&(0,F.jsx)("div",{className:"mb-6",children:(0,F.jsx)(Ym,{nodes:i,currentNode:n,showPlaceholder:!0,placeholderText:s||"New"})}),(0,F.jsx)("h4",{className:"inter-large-semibold text-grey-90 pb-1",children:"Details"}),(0,F.jsxs)("div",{className:"mb-8 flex justify-between gap-6",children:[(0,F.jsx)(ry.Z,{required:!0,label:"Name",type:"string",name:"name",value:s,className:"w-[338px]",placeholder:"Give this category a name",onChange:function(e){return c(e.target.value)}}),(0,F.jsx)(ry.Z,{label:"Handle",type:"string",name:"handle",value:d,className:"w-[338px]",placeholder:"Custom handle",onChange:function(e){return f(e.target.value)}})]}),(0,F.jsx)("div",{className:"mb-8",children:(0,F.jsx)(vQ.Z,{label:"Description",name:"description",value:m,placeholder:"Give this category a description",onChange:function(e){return y(e.target.value)}})}),(0,F.jsxs)("div",{className:"mb-8 flex justify-between gap-6",children:[(0,F.jsx)("div",{className:"flex-1",children:(0,F.jsx)(lS,{label:"Status",options:YP,value:YP[b?0:1],onChange:function(e){return v("active"===e.value)}})}),(0,F.jsx)("div",{className:"flex-1",children:(0,F.jsx)(lS,{label:"Visibility",options:YS,value:YS[x?0:1],onChange:function(e){return j("public"===e.value)}})})]})]})})]})}function YN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Yk(e){if(Array.isArray(e))return e}function Y_(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function YA(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Y_(o,n,i,a,l,"next",e)}function l(e){Y_(o,n,i,a,l,"throw",e)}a(void 0)})}}function YD(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function YE(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function YZ(e,t){return Yk(e)||YD(e,t)||YI(e,t)||YE()}function YI(e,t){if(e){if("string"==typeof e)return YN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YN(e,t)}}function YT(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var YM=[{label:"Public",value:"public"},{label:"Private",value:"private"}],YR=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}];function YL(e){var t,r=e.isVisible,n=e.close,i=e.activeCategory,o=e.categories,a=YZ((0,B.useState)(""),2),l=a[0],s=a[1],c=YZ((0,B.useState)(""),2),u=c[0],d=c[1],f=YZ((0,B.useState)(""),2),p=f[0],m=f[1],y=YZ((0,B.useState)(!0),2),h=y[0],b=y[1],v=YZ((0,B.useState)(!0),2),g=v[0],x=v[1],j=(0,td.Z)(),O=(0,en.useAdminUpdateProductCategory)(null==i?void 0:i.id).mutateAsync;(0,B.useEffect)(function(){i&&(s(i.name),d(i.handle),m(i.description),b(i.is_active),x(!i.is_internal))},[i]);var w=(t=YA(function(){var e;return YT(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,O({name:l,handle:u,description:p,is_active:h,is_internal:!g})];case 1:return t.sent(),j("Success","Successfully updated the category","success"),n(),[3,3];case 2:return e=t.sent(),j("Error",(0,tf.e)(e)||"Failed to update the category","error"),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)}),S=function(){n()};return(0,F.jsx)(kM,{close:S,isVisible:!!r,children:(0,F.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between p-6",children:[(0,F.jsx)("h3",{className:"inter-large-semibold flex items-center gap-2 text-xl text-gray-900",children:"Edit product category"}),(0,F.jsx)(Y.Z,{variant:"secondary",className:"h-8 w-8 p-2",onClick:e.close,children:(0,F.jsx)(c2.Z,{size:20,className:"text-grey-50"})})]}),(0,F.jsx)("div",{className:"block h-[1px] bg-gray-200"}),i&&(0,F.jsx)("div",{className:"mt-[25px] px-6",children:(0,F.jsx)(Ym,{nodes:o,currentNode:i})}),(0,F.jsxs)("div",{className:"flex-grow px-6",children:[(0,F.jsx)(ry.Z,{required:!0,label:"Name",type:"string",name:"name",value:l,className:"my-6",placeholder:"Give this category a name",onChange:function(e){return s(e.target.value)}}),(0,F.jsx)(ry.Z,{required:!0,label:"Handle",type:"string",name:"handle",value:u,className:"my-6",placeholder:"Custom handle",onChange:function(e){return d(e.target.value)}}),(0,F.jsx)(vQ.Z,{label:"Description",name:"description",value:p,className:"my-6",placeholder:"Give this category a description",onChange:function(e){return m(e.target.value)}}),(0,F.jsx)(lS,{label:"Status",options:YR,value:YR[h?0:1],onChange:function(e){return b("active"===e.value)}}),(0,F.jsx)(lS,{className:"my-6",label:"Visibility",options:YM,value:YM[g?0:1],onChange:function(e){return x("public"===e.value)}})]}),(0,F.jsx)("div",{className:"block h-[1px] bg-gray-200"}),(0,F.jsxs)("div",{className:"flex justify-end gap-2 p-3",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:S,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:w,children:"Save and close"})]})]})})}function Yz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Yq(e){if(Array.isArray(e))return e}function YF(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function YH(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function YU(e,t){return Yq(e)||YF(e,t)||YG(e,t)||YH()}function YG(e,t){if(e){if("string"==typeof e)return Yz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yz(e,t)}}function YV(){return(0,F.jsx)("div",{className:"flex min-h-[600px] items-center justify-center",children:(0,F.jsx)("p",{className:"text-grey-40",children:"No product categories yet, use the above button to create your first category."})})}var YB=(0,B.createContext)({});function YW(){var e=(0,s1.Z)(),t=e.state,r=e.open,n=e.close,i=(0,s1.Z)(),o=i.state,a=i.open,l=i.close,s=YU((0,B.useState)(),2),c=s[0],u=s[1],d=(0,en.useAdminProductCategories)({parent_category_id:"null",include_descendants_tree:!0}),f=d.product_categories,p=void 0===f?[]:f,m=d.isLoading,y=!m&&!p.length,h=Ya(p);return(0,F.jsx)(YB.Provider,{value:{editCategory:function(e){u(e),a()},createSubCategory:function(e){m||(u(e),r())}},children:(0,F.jsx)("div",{className:"flex h-full grow flex-col",children:(0,F.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,F.jsx)(tI,{className:"h-full",title:"Product Categories",subtitle:"Helps you to keep your products organized.",actionables:[{label:"Add category",onClick:r}],footerMinHeight:40,setBorders:!0,children:y?(0,F.jsx)(YV,{}):m?null:(0,F.jsx)(Yo,{categories:p})}),(0,F.jsx)(ev,{}),t&&(0,F.jsx)(YC,{parentCategory:c,categories:h,closeModal:function(){n(),u(void 0)}}),(0,F.jsx)(YL,{close:l,activeCategory:c,isVisible:!!c&&o,categories:h})]})})})}var YQ=function(){var e=(0,(0,W.V)().getNestedRoutes)("/product-categories");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(YW,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/product-categories"})},t)})]})},YY=(0,B.createContext)(null),Y$=function(e){var t=e.product,r=e.children,n=(0,en.useAdminProducts)({id:t.id,expand:"options,options.values"}),i=n.products,o=n.status,a=n.refetch,l=(0,B.useMemo)(function(){return i&&i.length>0&&"loading"!==o?i[0].options:void 0},[i,o]);return(0,F.jsx)(YY.Provider,{value:{options:l,status:o,refetch:a},children:r})},YK=function(){var e=(0,B.useContext)(YY);if(!e)throw Error("useOptionsContext must be used within a OptionsProvider");return e};function YJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){YJ(e,t,r[t])})}return e}function Y0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Y1(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y0(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var Y2=function(e){var t=e.form,r=t.path,n=t.register,i=t.formState.errors;return(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Configure the general information for this variant."}),(0,F.jsx)("div",{className:"pt-large",children:(0,F.jsxs)("div",{className:"gap-x-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,Y1(YX({label:"Custom title",placeholder:"Green / XL..."},n(r("title"),{pattern:s6.Z.whiteSpaceRule("Title")})),{errors:i})),(0,F.jsx)(ry.Z,Y1(YX({label:"Material",placeholder:"80% wool, 20% cotton..."},t.register(r("material"),{pattern:s6.Z.whiteSpaceRule("Material")})),{errors:i}))]})})]})};function Y3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Y5(e){if(Array.isArray(e))return e}function Y6(e){if(Array.isArray(e))return Y3(e)}function Y4(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Y8(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Y4(o,n,i,a,l,"next",e)}function l(e){Y4(o,n,i,a,l,"throw",e)}a(void 0)})}}function Y7(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y9(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $e(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function $t(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $r(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Y7(e,t,r[t])})}return e}function $i(e,t){return Y5(e)||$e(e,t)||$a(e,t)||$t()}function $o(e){return Y6(e)||Y9(e)||$a(e)||$r()}function $a(e,t){if(e){if("string"==typeof e)return Y3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y3(e,t)}}function $l(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var $s=function(e){var t,r=e.form,n=e.locationLevels,i=(0,B.useMemo)(function(){return new Map(n.map(function(e){return[e.location_id,e]}))},[n]),o=(0,pf.N6)(),a=(0,en.useAdminStockLocations)(),l=a.stock_locations,s=a.isLoading,c=(0,B.useMemo)(function(){return s||!l?new Map:new Map(l.map(function(e){return[e.id,e]}))},[l,s]),u=r.control,d=r.register,f=r.watch,p=f("manage_inventory"),m=(0,tR.Dq)({control:u,name:"location_levels"}),y=m.fields,h=m.append,b=m.remove,v=f("location_levels"),g=new Map(null==v?void 0:v.map(function(e){return[e.location_id,e]})),x=(t=Y8(function(e){return $l(this,function(t){return e.removed.map(function(e){return y.findIndex(function(t){return t.location_id===e})}).forEach(function(e){return b(e)}),e.added.forEach(function(e){var t,r,n,o;h({location_id:e,stocked_quantity:null!==(n=null===(t=i.get(e))||void 0===t?void 0:t.stocked_quantity)&&void 0!==n?n:0,reserved_quantity:null!==(o=null===(r=i.get(e))||void 0===r?void 0:r.reserved_quantity)&&void 0!==o?o:0})}),[2]})}),function(e){return t.apply(this,arguments)});return(0,F.jsxs)(gj,{type:"multiple",defaultValue:["general"],children:[(0,F.jsx)(gj.Item,{title:"General",value:"general",children:(0,F.jsx)("div",{className:"gap-y-xlarge mt-large flex flex-col",children:(0,F.jsx)("div",{className:"flex flex-col gap-y-4",children:(0,F.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,$n({label:"Stock keeping unit (SKU)",placeholder:"SUN-G, JK1234..."},d("sku"))),(0,F.jsx)(ry.Z,$n({label:"EAN (Barcode)",placeholder:"123456789102..."},d("ean"))),(0,F.jsx)(ry.Z,$n({label:"UPC (Barcode)",placeholder:"023456789104..."},d("upc"))),(0,F.jsx)(ry.Z,$n({label:"Barcode",placeholder:"123456789104..."},d("barcode")))]})})})}),(0,F.jsx)(gj.Item,{title:"Inventory",value:"inventory",children:(0,F.jsxs)("div",{className:"gap-y-small mt-large flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Manage inventory"}),(0,F.jsx)(tR.Qr,{control:u,name:"manage_inventory",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:r,onCheckedChange:n})}})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When checked Medusa will regulate the inventory when orders and returns are made."})]}),p&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Allow backorders"}),(0,F.jsx)(tR.Qr,{control:u,name:"allow_backorder",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:r,onCheckedChange:n})}})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When checked the product will be available for purchase despite the product being sold out"})]}),(0,F.jsxs)("div",{className:"flex w-full flex-col text-base",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Quantity"}),!s&&l&&(0,F.jsxs)("div",{className:"flex w-full flex-col",children:[(0,F.jsxs)("div",{className:"inter-base-regular text-grey-50 flex justify-between py-3",children:[(0,F.jsx)("div",{className:"",children:"Location"}),(0,F.jsx)("div",{className:"",children:"In Stock"})]}),y.map(function(e,t){var r=c.get(e.location_id),n=g.get(e.location_id);return(0,F.jsxs)("div",{className:"flex items-center py-3",children:[(0,F.jsxs)("div",{className:"inter-base-regular flex items-center",children:[(0,F.jsx)(oE,{className:"mr-base",children:(0,F.jsx)(oZ.Z,{})}),null==r?void 0:r.name]}),(0,F.jsxs)("div",{className:"ml-auto flex",children:[(0,F.jsxs)("div",{className:"mr-base text-small text-grey-50 flex flex-col",children:[(0,F.jsx)("span",{className:"whitespace-nowrap text-right",children:"".concat(n.reserved_quantity," reserved")}),(0,F.jsx)("span",{className:"whitespace-nowrap text-right",children:"".concat(n.stocked_quantity-n.reserved_quantity," available")})]}),(0,F.jsx)(ry.Z,$n({placeholder:"0",type:"number",min:0},d("location_levels.".concat(t,".stocked_quantity"),{valueAsNumber:!0})))]})]},e.id)})]})]}),(0,F.jsx)("div",{className:"flex",children:(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",className:"w-full",onClick:function(){o.push($c(o.pop,y,l||[],x))},children:"Manage locations"})})]})]})}),(0,F.jsxs)(gj.Item,{title:"Shipping",value:"shipping",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Shipping information can be required depending on your shipping provider, and whether or not you are shipping internationally."}),(0,F.jsxs)("div",{className:"mt-large",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Dimensions"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure to calculate the most accurate shipping rates."}),(0,F.jsx)(w_,{form:(0,tL.G)(r,"dimensions")})]}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Customs"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure if you are shipping internationally."}),(0,F.jsx)(wS,{form:(0,tL.G)(r,"customs")})]})]})]})},$c=function(e,t,r,n){return{title:"Manage locations",onBack:function(){return e()},view:(0,F.jsx)($u,{existingLevels:t,locationOptions:r,onSubmit:n})}},$u=function(e){var t,r=e.existingLevels,n=e.locationOptions,i=e.onSubmit,o=(0,pf.N6)().pop,a=(0,B.useMemo)(function(){return r.map(function(e){return e.location_id})},[r]),l=$i((0,B.useState)(a),2),s=l[0],c=l[1],u=$i((0,B.useState)(!1),2),d=u[0],f=u[1];B.useEffect(function(){f(!s.every(function(e){return a.includes(e)})||s.length!==a.length)},[a,s]);var p=function(e){s.includes(e)?c(s.filter(function(t){return t!==e})):c($o(s).concat([e]))},m=(t=Y8(function(e){return $l(this,function(t){switch(t.label){case 0:return e.preventDefault(),[4,i({added:s.filter(function(e){return!a.includes(e)}),removed:a.filter(function(e){return!!e&&!s.includes(e)})}).then(function(){o()})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),y=!!n.length;return(0,F.jsx)("div",{className:"h-full w-full",children:(0,F.jsxs)("form",{onSubmit:m,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:(0,ec.Z)("border-grey-20 text-grey-50 flex w-full items-center justify-between",{"pb-base border-b":y}),children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{children:y?"Select locations that stock the selected variant":"You don't have any locations"}),y&&(0,F.jsx)("p",{children:"(".concat(s.length," of ").concat(n.length," selected)")})]}),y&&(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",className:"border",onClick:function(e){e.preventDefault(),c(n.map(function(e){return e.id}))},children:"Select all"})]}),n.map(function(e){var t=s.find(function(t){return t===e.id});return(0,F.jsxs)("div",{className:"border-grey-20 py-base flex items-center justify-between gap-6 border-b",children:[(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)(oE,{className:"mr-base",children:(0,F.jsx)(oZ.Z,{})}),(0,F.jsx)("h3",{children:e.name})]}),(0,F.jsx)(vw.Z,{checked:!!t,onCheckedChange:function(){return p(e.id)}})]},e.id)})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return o()},type:"button",children:"Back"}),(0,F.jsx)(Y.Z,{variant:"primary",className:"nowrap w-[134px]",size:"small",type:"submit",disabled:!d,children:"Save and go back"})]})})]})})};function $d(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function $f(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){$d(o,n,i,a,l,"next",e)}function l(e){$d(o,n,i,a,l,"throw",e)}a(void 0)})}}function $p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){$p(e,t,r[t])})}return e}function $y(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var $h=function(e){var t,r=e.form,n=B.useContext(pf.ej),i=(0,(0,o3.ye)().isFeatureEnabled)("stockLocationService"),o=(0,en.useAdminStockLocations)({},{enabled:i}),a=o.stock_locations,l=o.refetch;B.useEffect(function(){i&&l()},[i,l]);var s=B.useMemo(function(){return new Map(null==a?void 0:a.map(function(e){return[e.id,e]}))},[a]),c=r.path,u=r.control,d=r.register,f=r.formState.errors,p=r.watch,m=(0,tR.Dq)({control:u,name:c("stock_location")}),y=m.fields,h=m.append,b=m.remove,v=p(null==y?void 0:y.map(function(e,t){return c("stock_location.".concat(t,".stocked_quantity"))})),g=B.useMemo(function(){return(0,iM.sum)(v)},[v]),x=(t=$f(function(e){return $y(this,function(t){return e.removed.map(function(e){return y.findIndex(function(t){return t.location_id===e.id})}).forEach(function(e){return b(e)}),e.added.forEach(function(e){h({location_id:e,stocked_quantity:0})}),[2]})}),function(e){return t.apply(this,arguments)});return(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Configure the inventory and stock for this variant."}),(0,F.jsxs)("div",{className:"gap-y-xlarge pt-large flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,$m({label:"Stock keeping unit (SKU)",placeholder:"SUN-G, JK1234..."},d(c("sku")))),!i&&(0,F.jsx)(ry.Z,$m({label:"Quantity in stock",type:"number",placeholder:"100...",errors:f},d(c("inventory_quantity"),{valueAsNumber:!0}))),(0,F.jsx)(ry.Z,$m({label:"EAN (Barcode)",placeholder:"123456789102..."},d(c("ean")))),(0,F.jsx)(ry.Z,$m({label:"UPC (Barcode)",placeholder:"023456789104..."},d(c("upc")))),(0,F.jsx)(ry.Z,$m({label:"Barcode",placeholder:"123456789104..."},d(c("barcode"))))]}),(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Manage inventory"}),(0,F.jsx)(tR.Qr,{control:u,name:c("manage_inventory"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:r,onCheckedChange:n})}})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When checked Medusa will regulate the inventory when orders and returns are made."})]}),(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Allow backorders"}),(0,F.jsx)(tR.Qr,{control:u,name:c("allow_backorder"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:r,onCheckedChange:n})}})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When checked the product will be available for purchase despite the product being sold out"})]}),(0,F.jsx)(wI,{featureFlag:"inventoryService",children:(0,F.jsx)("div",{className:(0,ec.Z)({"pointer-events-none opacity-50 transition-opacity duration-100":!r.watch(c("manage_inventory"))}),children:(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall mb-4 flex flex-col",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Quantity"}),(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Location"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"In Stock"})]})]}),(0,F.jsx)("div",{className:"gap-y-base flex flex-col pb-6",children:y.map(function(e,t){var r;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsxs)("div",{className:"inter-base-regular flex items-center",children:[(0,F.jsx)(oE,{className:"mr-base",children:(0,F.jsx)(oZ.Z,{})}),null===(r=s.get(e.location_id))||void 0===r?void 0:r.name]}),(0,F.jsx)("div",{className:"ml-auto flex",children:(0,F.jsx)(ry.Z,$m({placeholder:"0",type:"number"},d(c("stock_location.".concat(t,".stocked_quantity")),{valueAsNumber:!0})))})]},e.id)})}),!!y.length&&(0,F.jsxs)("div",{className:"text-grey-50 mb-6 flex items-center justify-between border-t border-dashed pt-6",children:[(0,F.jsx)("p",{children:"Total inventory at all locations"}),(0,F.jsx)("p",{children:"".concat(g," available")})]}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-full border",type:"button",onClick:function(){n.push($c(n.pop,y,a,x))},children:"Manage locations"})]})})})]})]})};function $b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){$b(e,t,r[t])})}return e}function $g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $x(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$g(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function $j(e,t){if(null==e)return{};var r,n,i=$O(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $O(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var $w=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=$j(e,["size","color"]);return(0,F.jsxs)("svg",$x($v({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M19 10.3636C19 16.0909 12 21 12 21C12 21 5 16.0909 5 10.3636C5 8.41068 5.7375 6.53771 7.05025 5.15676C8.36301 3.77581 10.1435 3 12 3C13.8565 3 15.637 3.77581 16.9497 5.15676C18.2625 6.53771 19 8.41068 19 10.3636Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12 12C13.1046 12 14 11.1046 14 10C14 8.89543 13.1046 8 12 8C10.8954 8 10 8.89543 10 10C10 11.1046 10.8954 12 12 12Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function $S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){$S(e,t,r[t])})}return e}function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $N(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$C(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function $k(e,t){if(null==e)return{};var r,n,i=$_(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $_(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var $A=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=$k(e,["size","color"]);return(0,F.jsx)("svg",$N($P({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),{children:(0,F.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6469 8.76191L8.88455 6.00494C8.40459 5.65352 7.82341 5.68718 7.39745 5.97365C6.98931 6.24815 6.75 6.72509 6.75 7.24299V12.7572C6.75 13.275 6.98929 13.7521 7.39756 14.0265C7.8237 14.313 8.4047 14.3465 8.88451 13.9949M8.88451 13.9949L12.6469 11.2382C13.0771 10.9231 13.25 10.4291 13.25 10.0001C13.25 9.57108 13.0771 9.07707 12.6469 8.76191",fill:void 0===n?"currentColor":n})}))},$D=function(e){var t=e.form,r=e.nestedPrice,n=(0,s1.Z)(),i=n.state,o=n.toggle,a=t.control,l=t.path,s=r.currencyPrice,c=r.regionPrices;return(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-x-base p-2xsmall hover:bg-grey-5 focus-within:bg-grey-5 rounded-rounded relative grid grid-cols-[1fr_223px] justify-between pl-10 transition-colors",children:[(0,F.jsx)("button",{className:(0,ec.Z)("left-xsmall text-grey-40 absolute top-1/2 -translate-y-1/2 transition-all",{"rotate-90":i},{hidden:0===c.length}),type:"button",onClick:o,disabled:0===c.length,children:(0,F.jsx)($A,{})}),(0,F.jsxs)("div",{className:"gap-x-small flex items-center",children:[(0,F.jsx)("div",{className:"bg-grey-10 rounded-rounded text-grey-50 flex h-10 w-10 items-center justify-center",children:(0,F.jsx)(OV,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("span",{className:"inter-base-semibold",children:s.currency_code.toUpperCase()}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:v$.Q[s.currency_code.toUpperCase()].name}),(0,F.jsx)(OL,{includesTax:null==s?void 0:s.includes_tax})]})]}),(0,F.jsx)(tR.Qr,{name:l("prices.".concat(s.index,".amount")),control:a,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=e.formState.errors;return(0,F.jsx)(v3,{onChange:n,amount:null!==r?r:void 0,currencyCode:s.currency_code,errors:i})}})]}),(0,F.jsx)("ul",{className:(0,ec.Z)("gap-y-2xsmall my-2xsmall flex flex-col overflow-hidden",{"max-h-0":!i,"max-h-[9999px]":i}),children:c.map(function(e){return(0,F.jsxs)("div",{className:"p-2xsmall hover:bg-grey-5 focus-within:bg-grey-5 rounded-rounded grid grid-cols-[1fr_223px] justify-between pl-10 transition-colors",children:[(0,F.jsxs)("div",{className:"gap-x-small flex items-center",children:[(0,F.jsx)("div",{className:"bg-grey-10 rounded-rounded text-grey-50 flex h-10 w-10 items-center justify-center",children:(0,F.jsx)($w,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:e.regionName}),(0,F.jsx)(OL,{includesTax:e.includes_tax})]})]}),(0,F.jsx)(tR.Qr,{name:l("prices.".concat(e.index,".amount")),control:a,render:function(e){var t=e.field,r=t.value,n=t.onChange,i=e.formState.errors;return(0,F.jsx)(v3,{onChange:n,amount:null!==r?r:void 0,currencyCode:s.currency_code,errors:i})}})]},e.id)})})]})};function $E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){$E(e,t,r[t])})}return e}function $I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $T(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$I(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var $M=function(e){var t=e.form,r=(0,en.useAdminStore)().store,n=(0,en.useAdminRegions)().regions,i=t.control,o=t.path,a=(0,tR.Dq)({control:i,name:o("prices")}),l=a.append,s=a.update,c=a.fields;(0,B.useEffect)(function(){n&&r&&c&&(n.forEach(function(e){c.some(function(t){return t.region_id===e.id})||l({id:null,region_id:e.id,amount:null,currency_code:e.currency_code,includes_tax:e.includes_tax})}),r.currencies.forEach(function(e){c.some(function(t){return t.currency_code===e.code})||l({id:null,currency_code:e.code,amount:null,region_id:null,includes_tax:e.includes_tax})}))},[n,r,c]),(0,B.useEffect)(function(){n&&c&&r&&(n.forEach(function(e){var t=c.findIndex(function(t){return!!t&&t.region_id===e.id});-1!==t&&c[t].includes_tax!==e.includes_tax&&s(t,$T($Z({},c[t]),{includes_tax:e.includes_tax}))}),r.currencies.forEach(function(e){var t=c.findIndex(function(t){return!!t&&!t.region_id&&t.currency_code===e.code});-1!==t&&c[t].includes_tax!==e.includes_tax&&s(t,$T($Z({},c[t]),{includes_tax:e.includes_tax}))}))},[n,r]);var u=(0,B.useMemo)(function(){var e={},t=c.filter(function(e){return null===e.region_id}),r=c.filter(function(e){return null!==e.region_id});return t.forEach(function(t){e[t.currency_code]={currencyPrice:$T($Z({},t),{index:c.indexOf(t)}),regionPrices:r.filter(function(e){return e.currency_code===t.currency_code}).map(function(e){var t;return $T($Z({},e),{regionName:(null==n?void 0:null===(t=n.find(function(t){return t.id===e.region_id}))||void 0===t?void 0:t.name)||"",index:c.indexOf(e)})})}}),e},[c,n]);return(0,F.jsx)("div",{children:(0,F.jsx)("div",{children:Object.values(u).map(function(e){return(0,F.jsx)($D,{form:t,nestedPrice:e},e.currencyPrice.id)})})})},$R=function(e){var t=e.form;return(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Configure the pricing for this variant."}),(0,F.jsx)("div",{className:"pt-large",children:(0,F.jsx)($M,{form:t})})]})};function $L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){$L(e,t,r[t])})}return e}function $q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $F(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$q(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var $H=function(e){var t=e.form,r=e.isEdit,n=(0,o3.ye)().isFeatureEnabled,i=(0,tR.Dq)({control:t.control,name:"options"}).fields,o=!r||!n("inventoryService");return(0,F.jsxs)(gj,{type:"multiple",defaultValue:["general"],children:[(0,F.jsx)(gj.Item,{title:"General",value:"general",required:!0,children:(0,F.jsxs)("div",{children:[(0,F.jsx)(Y2,{form:(0,tL.G)(t,"general")}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsxs)("div",{className:"mb-base gap-x-2xsmall flex items-center",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Options"}),(0,F.jsx)(rm.Z,{type:"info",content:"Options are used to define the color, size, etc. of the variant."})]}),(0,F.jsx)("div",{className:"gap-large pb-2xsmall grid grid-cols-2",children:i.map(function(e,r){return(0,F.jsx)(ry.Z,$F($z({required:!0,label:e.title},t.register("options.".concat(r,".value"),{required:"Option value for ".concat(e.title," is required")})),{errors:t.formState.errors}),e.id)})})]})]})}),(0,F.jsx)(gj.Item,{title:"Pricing",value:"pricing",children:(0,F.jsx)($R,{form:(0,tL.G)(t,"prices")})}),o&&(0,F.jsx)(gj.Item,{title:"Stock & Inventory",value:"stock",children:(0,F.jsx)($h,{form:(0,tL.G)(t,"stock")})}),(0,F.jsxs)(gj.Item,{title:"Shipping",value:"shipping",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Shipping information can be required depending on your shipping provider, and whether or not you are shipping internationally."}),(0,F.jsxs)("div",{className:"mt-large",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Dimensions"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure to calculate the most accurate shipping rates."}),(0,F.jsx)(w_,{form:(0,tL.G)(t,"dimensions")})]}),o&&(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Customs"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure if you are shipping internationally."}),(0,F.jsx)(wS,{form:(0,tL.G)(t,"customs")})]})]}),(0,F.jsxs)(gj.Item,{title:"Metadata",value:"metadata",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-base",children:"Metadata can be used to store additional information about the variant."}),(0,F.jsx)(rs,{form:(0,tL.G)(t,"metadata")})]})]})};function $U(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function $G(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){$U(o,n,i,a,l,"next",e)}function l(e){$U(o,n,i,a,l,"throw",e)}a(void 0)})}}function $V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){$V(e,t,r[t])})}return e}function $W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $Q(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$W(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function $Y(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var $$=function(e){var t,r=e.open,n=e.onClose,i=e.product,o=(0,pf.N6)(),a=(0,en.useMedusa)().client,l=(0,tR.cI)({defaultValues:$K(i)}),s=wh(i.id),c=s.onAddVariant,u=s.addingVariant,d=l.handleSubmit,f=l.reset;(0,B.useEffect)(function(){f($K(i))},[i,f]);var p=function(){f($K(i)),n()},m=(t=$G(function(e,t){var r,n,o;return $Y(this,function(l){switch(l.label){case 0:if(r=e.variants,n=new Map(i.variants.map(function(e){return[e.id,!0]})),!(o=r.find(function(e){return!n.get(e.id)})))return[2];return[4,a.admin.variants.getInventory(o.id)];case 1:var s;return[4,Promise.all(l.sent().variant.inventory.map((s=$G(function(e){return $Y(this,function(r){var n;return[2,Promise.all(t.map((n=$G(function(t){return $Y(this,function(r){return a.admin.inventoryItems.createLocationLevel(e.id,{location_id:t.location_id,stocked_quantity:t.stocked_quantity}),[2]})}),function(e){return n.apply(this,arguments)})))]})}),function(e){return s.apply(this,arguments)})).flat())];case 2:return l.sent(),[2]}})}),function(e,r){return t.apply(this,arguments)}),y=d(function(e){var t=e.stock.stock_location;delete e.stock.stock_location,c($J(e),function(e){void 0!==t?m(e,t).then(function(){p()}):p()})});return(0,F.jsx)(pf.ZP,{context:o,open:r,handleClose:p,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:p,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Add Variant"})}),(0,F.jsxs)("form",{onSubmit:y,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)($H,{isEdit:!1,form:l})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:p,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",loading:u,children:"Save and close"})]})})]})]})})},$K=function(e){return{general:{title:null,material:null},stock:{sku:null,ean:null,upc:null,barcode:null,inventory_quantity:null,manage_inventory:!1,allow_backorder:!1,stock_location:[]},options:e.options.map(function(e){return{title:e.title,id:e.id,value:""}}),prices:{prices:[]},dimensions:{weight:null,width:null,height:null,length:null},customs:{mid_code:null,hs_code:null,origin_country:null},metadata:{entries:[],deleted:[]}}},$J=function(e){var t=e.general,r=e.stock,n=e.options,i=e.prices,o=e.dimensions,a=e.customs,l=i.prices.filter(function(e){return"number"==typeof e.amount}).map(function(e){return{amount:e.amount,currency_code:e.region_id?void 0:e.currency_code,region_id:e.region_id}});return $Q($B($Q($B({},t,a,r),{inventory_quantity:r.inventory_quantity||0}),o,a),{origin_country:a.origin_country?a.origin_country.value:null,prices:l,metadata:rd(e.metadata),title:e.general.title||"".concat(null==n?void 0:n.map(function(e){return e.value}).join(" / ")),options:n.map(function(e){return{option_id:e.id,value:e.value}})})},$X=function(e){var t=e.form,r=e.isLoading,n=e.locationLevels;return r?null:(0,F.jsx)(F.Fragment,{children:(0,F.jsx)($s,{locationLevels:n,form:t})})},$0=r(45869);function $1(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function $2(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){$1(o,n,i,a,l,"next",e)}function l(e){$1(o,n,i,a,l,"throw",e)}a(void 0)})}}function $3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){$3(e,t,r[t])})}return e}function $6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$6(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function $8(e,t){if(null==e)return{};var r,n,i=$7(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $7(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function $9(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Ke=function(e){var t,r=e.onClose,n=e.product,i=e.variant,o=(0,en.useMedusa)().client,a=(0,B.useContext)(pf.ej),l=(0,en.useAdminVariantsInventory)(i.id),s=l.variant,c=l.isLoading,u=l.refetch,d=function(){r()},f=wh(n.id),p=f.onUpdateVariant,m=f.updatingVariant,y=function(e){var t,r,n=e.dimensions||{},i=e.customs||{},o=null===(r=e.customs)||void 0===r?void 0:null===(t=r.origin_country)||void 0===t?void 0:t.value;return delete e.dimensions,delete e.customs,delete e.ean,delete e.barcode,delete e.upc,delete e.allow_backorder,fk($5({},n,i,e,o&&{origin_country:o}))},h=(t=$2(function(e){var t,r,a,l,c,f,m,h,b,v,g,x,j,O,w,S,P,C,N,k,_;return $9(this,function(A){var D,E;switch(A.label){case 0:if(l=e.location_levels||[],c=e.manage_inventory,m=null===(a=f=null===(r=s)||void 0===r?void 0:null===(t=r.inventory)||void 0===t?void 0:t[0])||void 0===a?void 0:a.id,delete e.manage_inventory,delete e.location_levels,h=m,b=e.ean,v=e.barcode,g=e.upc,x=e.allow_backorder,j=y(e),O=!1,!f)return[3,7];if(C=c&&null!==(P=null===(S=f)||void 0===S?void 0:null===(w=S.location_levels)||void 0===w?void 0:w.filter(function(e){return!l.find(function(t){return t.location_id===e.location_id})}))&&void 0!==P?P:[],!h)return[3,2];return[4,Promise.all(C.map((D=$2(function(e){return $9(this,function(t){switch(t.label){case 0:return[4,o.admin.inventoryItems.deleteLocationLevel(h,e.location_id)];case 1:return t.sent(),[2]}})}),function(e){return D.apply(this,arguments)})))];case 1:A.sent(),C.length&&(O=!0),A.label=2;case 2:if(c)return[3,4];return[4,o.admin.inventoryItems.delete(m)];case 3:return A.sent(),h=void 0,O=!0,[3,6];case 4:return[4,o.admin.inventoryItems.update(m,j)];case 5:A.sent(),A.label=6;case 6:return[3,10];case 7:if(!c)return[3,10];return[4,o.admin.products.updateVariant(n.id,i.id,{manage_inventory:!0})];case 8:return A.sent(),[4,o.admin.inventoryItems.create($5({variant_id:i.id},j))];case 9:h=A.sent().inventory_item.id,A.label=10;case 10:if(!h)return[3,12];return[4,Promise.all(l.map((E=$2(function(e){return $9(this,function(t){switch(t.label){case 0:if(!e.location_id)return[2];if(!e.id)return[3,2];return[4,o.admin.inventoryItems.updateLocationLevel(h,e.location_id,{stocked_quantity:e.stocked_quantity})];case 1:return t.sent(),[3,4];case 2:return[4,o.admin.inventoryItems.createLocationLevel(h,{location_id:e.location_id,stocked_quantity:e.stocked_quantity})];case 3:t.sent(),t.label=4;case 4:return[2]}})}),function(e){return E.apply(this,arguments)})))];case 11:A.sent(),l.length&&(O=!0),A.label=12;case 12:return N=e.dimensions,k=e.customs,_=$8(e,["dimensions","customs"]),p(i.id,$5({},f_($4($5({},N,k,_),{ean:b,barcode:v,upc:g,allow_backorder:x}))),function(){u(),O&&$0.E.invalidateQueries(en.adminInventoryItemsKeys.lists()),d()}),[2]}})}),function(e){return t.apply(this,arguments)});return(0,F.jsxs)(pf.ZP,{context:a,handleClose:d,children:[(0,F.jsx)(tp.Z.Header,{handleClose:d,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit stock & inventory"})}),!c&&(0,F.jsx)(Kt,{variantInventory:s,onSubmit:h,variant:i,isLoadingInventory:c,handleClose:d,updatingVariant:m})]})},Kt=function(e){var t,r=e.variantInventory,n=e.onSubmit,i=e.isLoadingInventory,o=e.handleClose,a=e.updatingVariant,l=e.variant,s=(0,tR.cI)({defaultValues:Kr(r,l)}),c=s.formState.isDirty,u=s.handleSubmit,d=s.reset,f=(null===(t=r.inventory[0])||void 0===t?void 0:t.location_levels)||[],p=u(function(e){n(e)});return(0,F.jsxs)("form",{onSubmit:p,noValidate:!0,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)($X,{form:s,locationLevels:f,isLoading:i})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:function(){d(Kr(r)),o()},children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",disabled:!c,loading:a,children:"Save and close"})]})})]})},Kr=function(e,t){var r=null==e?void 0:e.inventory[0];if(!r)return{sku:null,ean:(null==t?void 0:t.ean)||null,barcode:(null==t?void 0:t.barcode)||null,upc:(null==t?void 0:t.upc)||null,inventory_quantity:null,manage_inventory:!1,allow_backorder:null!==(i=null==t?void 0:t.allow_backorder)&&void 0!==i&&i,location_levels:null,dimensions:{height:null,length:null,width:null,weight:null},customs:{origin_country:null,mid_code:null,hs_code:null}};var n=null;if(r.origin_country){var i,o=wv.find(function(e){return e.alpha2===r.origin_country||e.alpha3===r.origin_country});o&&(n={label:null==o?void 0:o.name,value:null==o?void 0:o.alpha2})}return{sku:r.sku,ean:(null==t?void 0:t.ean)||null,barcode:(null==t?void 0:t.barcode)||null,upc:(null==t?void 0:t.upc)||null,inventory_quantity:r.inventory_quantity,manage_inventory:!!r,allow_backorder:!!(null==t?void 0:t.allow_backorder),location_levels:r.location_levels,dimensions:{height:r.height,length:r.length,width:r.width,weight:r.weight},customs:{origin_country:n,mid_code:r.mid_code,hs_code:r.hs_code}}},Kn=B.createContext(null),Ki=function(){var e=(0,B.useContext)(Kn);if(null===e)throw Error("useEditVariantsModal must be used within a EditVariantsModalProvicer");return e};function Ko(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ko(e,t,r[t])})}return e}function Kl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ks(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kl(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var Kc=function(e){var t=e.variant,r=e.product,n=Ki().onClose,i=(0,tR.cI)({defaultValues:Kh(t,r)}),o=i.reset,a=(0,B.useContext)(pf.ej),l=a.pop,s=a.reset,c=wh(r.id),u=c.updatingVariant,d=c.onUpdateVariant,f=function(){o(Kh(t,r)),l()},p=function(){o(Kh(t,r)),s(),n()};(0,B.useEffect)(function(){o(Kh(t,r))},[t,r,o]);var m=i.handleSubmit(function(e){d(t.id,Ku(e),f)}),y=i.handleSubmit(function(e){d(t.id,Ku(e),p)});return(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("form",{noValidate:!0,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)($H,{isEdit:!0,form:i})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"button",disabled:u||!i.formState.isDirty,loading:u,onClick:m,children:"Save and go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"button",disabled:u||!i.formState.isDirty,loading:u,onClick:y,children:"Save and close"})]})})]})})},Ku=function(e){var t=e.customs,r=e.dimensions,n=e.prices,i=e.options,o=e.general,a=e.stock,l=null==n?void 0:n.prices.filter(function(e){return"number"==typeof e.amount}).map(function(e){return{amount:e.amount,currency_code:e.region_id?void 0:e.currency_code,region_id:e.region_id,id:e.id||void 0}});return Ks(Ka({},o,t,a,r,t),{metadata:rd(e.metadata),origin_country:(null==t?void 0:t.origin_country)?t.origin_country.value:null,prices:l,options:null==i?void 0:i.map(function(e){return{option_id:e.id,value:e.value}})})},Kd=function(e){var t=B.useContext(pf.ej).pop;return(0,B.useMemo)(function(){return{title:"Edit Variant",subtitle:e.variant.title,onBack:t,view:(0,F.jsx)(Kc,Ka({},e))}},[e])};function Kf(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Kp(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Kf(o,n,i,a,l,"next",e)}function l(e){Kf(o,n,i,a,l,"throw",e)}a(void 0)})}}function Km(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Ky=function(e){var t,r=e.onClose,n=e.product,i=e.variant,o=e.isDuplicate,a=void 0!==o&&o,l=(0,tR.cI)({defaultValues:Kh(i,n)}),s=l.formState.isDirty,c=l.handleSubmit,u=l.reset,d=function(){u(Kh(i,n)),r()},f=wh(n.id),p=f.onUpdateVariant,m=f.onAddVariant,y=f.addingVariant,h=f.updatingVariant,b=(0,en.useMedusa)().client,v=(t=Kp(function(e,t){var r,i,o;return Km(this,function(a){switch(a.label){case 0:if(r=e.variants,i=new Map(n.variants.map(function(e){return[e.id,!0]})),!(o=r.find(function(e){return!i.get(e.id)})))return[2];return[4,b.admin.variants.getInventory(o.id)];case 1:var l;return[4,Promise.all(a.sent().variant.inventory.map((l=Kp(function(e){return Km(this,function(r){var n;return[2,Promise.all(t.map((n=Kp(function(t){return Km(this,function(r){return b.admin.inventoryItems.createLocationLevel(e.id,{location_id:t.location_id,stocked_quantity:t.stocked_quantity}),[2]})}),function(e){return n.apply(this,arguments)})))]})}),function(e){return l.apply(this,arguments)})).flat())];case 2:return a.sent(),[2]}})}),function(e,r){return t.apply(this,arguments)}),g=c(function(e){var t=e.stock.stock_location;delete e.stock.stock_location,a?m($J(e),function(e){void 0!==t?v(e,t).then(function(){d()}):d()}):p(i.id,Ku(e),d)}),x=(0,B.useContext)(pf.ej);return(0,F.jsxs)(pf.ZP,{context:x,handleClose:d,children:[(0,F.jsx)(tp.Z.Header,{handleClose:d,children:(0,F.jsxs)("h1",{className:"inter-xlarge-semibold",children:["Edit Variant",i.title&&(0,F.jsxs)("span",{className:"inter-xlarge-regular text-grey-50",children:[" ","(",i.title,")"]})]})}),(0,F.jsxs)("form",{onSubmit:g,noValidate:!0,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)($H,{isEdit:!0,form:l})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:d,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",disabled:!s&&!a,loading:y||h,children:"Save and close"})]})})]})]})},Kh=function(e,t){var r=t.options.map(function(t){var r;return{title:t.title,id:t.id,value:(null===(r=e.options.find(function(e){return e.option_id===t.id}))||void 0===r?void 0:r.value)||""}}),n=wv.find(function(t){var r;return t.name.toLowerCase()===(null===(r=e.origin_country)||void 0===r?void 0:r.toLowerCase())}),i=n?{label:n.name,value:n.alpha2}:null;return{general:{title:e.title,material:e.material},stock:{sku:e.sku,ean:e.ean,inventory_quantity:e.inventory_quantity,manage_inventory:e.manage_inventory,allow_backorder:e.allow_backorder,barcode:e.barcode,upc:e.upc},customs:{hs_code:e.hs_code,mid_code:e.mid_code,origin_country:i},dimensions:{weight:e.weight,width:e.width,height:e.height,length:e.length},prices:{prices:e.prices.filter(function(e){return!e.price_list_id}).map(function(e){return{id:e.id,amount:e.amount,currency_code:e.currency_code,region_id:e.region_id}})},options:r,metadata:rf(e.metadata)}},Kb=r(30994),Kv=r(67602);function Kg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Kg(e,t,r[t])})}return e}function Kj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function KO(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kj(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Kw(e,t){if(null==e)return{};var r,n,i=KS(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function KS(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var KP=function(e){var t=e.size,r=void 0===t?"24px":t,n=e.color,i=void 0===n?"currentColor":n,o=Kw(e,["size","color"]);return(0,F.jsxs)("svg",KO(Kx({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M7.49935 10.8337C7.95959 10.8337 8.33268 10.4606 8.33268 10.0003C8.33268 9.54009 7.95959 9.16699 7.49935 9.16699C7.03911 9.16699 6.66602 9.54009 6.66602 10.0003C6.66602 10.4606 7.03911 10.8337 7.49935 10.8337Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.49935 4.99967C7.95959 4.99967 8.33268 4.62658 8.33268 4.16634C8.33268 3.7061 7.95959 3.33301 7.49935 3.33301C7.03911 3.33301 6.66602 3.7061 6.66602 4.16634C6.66602 4.62658 7.03911 4.99967 7.49935 4.99967Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7.49935 16.6667C7.95959 16.6667 8.33268 16.2936 8.33268 15.8333C8.33268 15.3731 7.95959 15 7.49935 15C7.03911 15 6.66602 15.3731 6.66602 15.8333C6.66602 16.2936 7.03911 16.6667 7.49935 16.6667Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12.4993 10.8337C12.9596 10.8337 13.3327 10.4606 13.3327 10.0003C13.3327 9.54009 12.9596 9.16699 12.4993 9.16699C12.0391 9.16699 11.666 9.54009 11.666 10.0003C11.666 10.4606 12.0391 10.8337 12.4993 10.8337Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12.4993 4.99967C12.9596 4.99967 13.3327 4.62658 13.3327 4.16634C13.3327 3.7061 12.9596 3.33301 12.4993 3.33301C12.0391 3.33301 11.666 3.7061 11.666 4.16634C11.666 4.62658 12.0391 4.99967 12.4993 4.99967Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12.4993 16.6667C12.9596 16.6667 13.3327 16.2936 13.3327 15.8333C13.3327 15.3731 12.9596 15 12.4993 15C12.0391 15 11.666 15.3731 11.666 15.8333C11.666 16.2936 12.0391 16.6667 12.4993 16.6667Z",stroke:i,strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function KC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function KN(e){if(Array.isArray(e))return e}function Kk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K_(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function KA(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function KD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Kk(e,t,r[t])})}return e}function KE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function KZ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):KE(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function KI(e,t){return KN(e)||K_(e,t)||KT(e,t)||KA()}function KT(e,t){if(e){if("string"==typeof e)return KC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KC(e,t)}}var KM={CARD:"card"},KR=function(e){var t=e.id,r=e.index,n=e.ean,i=e.sku,o=e.title,a=e.moveCard,l=e.product,s=(0,tR.Gc)(),c=s.register,u=s.formState.errors,d=Kd({product:l,variant:l.variants.find(function(e){return e.id===t})}),f=(0,B.useContext)(pf.ej).push,p=(0,B.useMemo)(function(){return[{label:"Edit Variant",icon:(0,F.jsx)(eC,{size:20,className:"text-grey-50"}),onClick:function(){return f(d)}}]},[d,f]),m=(0,B.useRef)(null),y=KI((0,Kb.L)({accept:KM.CARD,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){if(m.current){var n,i=e.index;if(i!==r){var o=null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(o.bottom-o.top)/2,s=t.getClientOffset().y-o.top;i<r&&s<l||i>r&&s>l||(a(i,r),e.index=r)}}}}),2),h=y[0].handlerId,b=y[1],v=KI((0,Kv.c)({type:KM.CARD,item:function(){return{id:t,index:r}},collect:function(e){return{isDragging:e.isDragging()}}}),3),g=v[0].isDragging,x=v[1],j=v[2];return x(b(m)),(0,F.jsxs)("div",{ref:j,"data-handler-id":h,className:(0,ec.Z)("rounded-rounded hover:bg-grey-5 focus-within:bg-grey-5 py-xsmall pl-xsmall pr-base grid h-16 translate-y-0 translate-x-0 grid-cols-[32px_1fr_1fr_48px] transition-all",{"bg-grey-5 opacity-50":g}),children:[(0,F.jsx)("div",{className:"text-grey-40 flex cursor-move items-center justify-center",ref:m,children:(0,F.jsx)(KP,{size:20})}),(0,F.jsxs)("div",{className:"ml-base flex flex-col justify-center text-left",children:[(0,F.jsxs)("p",{className:"inter-base-semibold",children:[o,i&&(0,F.jsxs)("span",{className:"text-grey-50 inter-base-regular",children:["(",i,")"]})]}),n&&(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:n})]}),(0,F.jsx)("div",{className:"flex items-center justify-end text-right",children:(0,F.jsx)(ry.Z,KZ(KD({},c("variants.".concat(r,".inventory_quantity"),{min:s6.Z.nonNegativeNumberRule("Inventory"),valueAsNumber:!0})),{type:"number",placeholder:"100...",className:"max-w-[200px]",errors:u}))}),(0,F.jsx)("div",{className:"ml-xlarge pr-base flex items-center justify-center",children:(0,F.jsx)(eQ,{forceDropdown:!0,actions:p,customTrigger:(0,F.jsx)(Y.Z,{variant:"ghost",className:"w-xlarge h-xlarge text-grey-50 flex items-center justify-center p-0",children:(0,F.jsx)(eF,{size:20})})})})]})};function KL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){KL(e,t,r[t])})}return e}function Kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function KF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kq(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var KH=function(e){var t=e.open,r=e.onClose,n=e.product,i=(0,B.useContext)(pf.ej),o=wh(n.id),a=o.onUpdate,l=o.updating,s=(0,tR.cI)({defaultValues:KU(n)}),c=s.control,u=s.handleSubmit,d=s.reset,f=s.formState.isDirty,p=(0,tR.Dq)({control:c,name:"variants",keyName:"fieldId"}),m=p.fields,y=p.move,h=(0,B.useCallback)(function(e,t){y(e,t)},[]),b=(0,B.useCallback)(function(e,t){return(0,F.jsx)(KR,{index:t,id:e.id,title:e.title,ean:e.ean,sku:e.sku,inventory_quantity:e.inventory_quantity,moveCard:h,product:n},e.fieldId)},[h,n]),v=(0,B.useCallback)(function(){d(KU(n))},[n,d]),g=function(){v(),i.reset(),r()};(0,B.useEffect)(function(){v()},[n,v]);var x=u(function(e){a({variants:e.variants.map(function(e){return{id:e.id,inventory_quantity:e.inventory_quantity}})},function(){g()},"Variants were successfully updated")});return(0,F.jsx)(Kn.Provider,{value:{onClose:r},children:(0,F.jsx)(pf.ZP,{handleClose:g,open:t,context:i,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:g,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit Variants"})}),(0,F.jsx)(tR.RV,KF(Kz({},s),{children:(0,F.jsxs)("form",{onSubmit:x,children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("h2",{className:"inter-base-semibold mb-small",children:["Product variants"," ",(0,F.jsxs)("span",{className:"inter-base-regular text-grey-50",children:["(",n.variants.length,")"]})]}),(0,F.jsxs)("div",{className:"pr-base inter-small-semibold text-grey-50 mb-small grid grid-cols-[1fr_1fr_48px]",children:[(0,F.jsx)("p",{className:"col-start-1 col-end-1 text-left",children:"Variant"}),(0,F.jsx)("p",{className:"col-start-2 col-end-2 text-right",children:"Inventory"})]}),(0,F.jsx)("div",{children:m.map(function(e,t){return b(e,t)})})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:g,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",loading:l,disabled:l||!f,children:"Save and close"})]})})]})}))]})})})},KU=function(e){return{variants:(e.variants||[]).sort(function(e,t){return e.variant_rank-t.variant_rank}).map(function(e,t){return{id:e.id,title:e.title,ean:e.ean,sku:e.sku,variant_rank:e.variant_rank||t+1,inventory_quantity:e.inventory_quantity}})}},KG=r(22732);function KV(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){KV(e,t,r[t])})}return e}function KW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function KQ(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):KW(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var KY=function(e){var t=e.product,r=e.open,n=e.onClose,i=(0,en.useAdminUpdateProductOption)(t.id),o=i.mutate,a=i.isLoading,l=(0,en.useAdminCreateProductOption)(t.id),s=l.mutate,c=l.isLoading,u=(0,en.useAdminDeleteProductOption)(t.id),d=u.mutate,f=u.isLoading,p=YK().refetch,m=(0,tR.cI)({defaultValues:K$(t)}),y=m.control,h=m.register,b=m.reset,v=m.handleSubmit,g=m.formState,x=g.isDirty,j=g.errors,O=(0,tR.Dq)({name:"options",control:y,shouldUnregister:!0}),w=O.fields,S=O.remove,P=O.append,C=(0,td.Z)();(0,B.useEffect)(function(){b(K$(t))},[t]);var N=function(){b(K$(t)),n()},k=(0,B.useMemo)(function(){return a||c||f},[a,c,f]),_=v(function(e){var r=[],n=[],i=[],a=t.options.filter(function(t){return void 0===e.options.find(function(e){return e.id===t.id})});if(e.options.forEach(function(e){e.id?i.push(e):n.push(e)}),n.forEach(function(e){s({title:e.title},{onError:function(){r.push("create ".concat(e.title))},onSuccess:function(){p()}})}),i.forEach(function(e){o({option_id:e.id,title:e.title},{onError:function(){r.push("update ".concat(e.title))},onSuccess:function(){p()}})}),a.forEach(function(e){d(e.id,{onError:function(){r.push("delete ".concat(e.title))},onSuccess:function(){p()}})}),r.length===n.length+i.length+a.length){C("Error","Failed to update product options","error");return}r.length>0&&C("Warning","Failed to; "+r.join(", ")+".","warning"),p(),C("Success","Successfully updated product options","success"),N()});return(0,F.jsx)(tp.Z,{open:r,handleClose:N,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:N,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit Options"})}),(0,F.jsxs)("form",{onSubmit:_,children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)("h2",{className:"inter-large-semibold mb-base",children:"Product options"}),(0,F.jsxs)("div",{className:"gap-y-small flex flex-col",children:[(0,F.jsx)("p",{className:"inter-small-semibold text-grey-50",children:"Option title"}),(0,F.jsx)("div",{className:"gap-y-xsmall flex flex-col",children:w.map(function(e,t){return(0,F.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-[1fr,40px]",children:[(0,F.jsx)(ry.Z,KQ(KB({placeholder:"Color"},h("options.".concat(t,".title"),{required:"Option title is required",minLength:s6.Z.minOneCharRule("Option title"),pattern:s6.Z.whiteSpaceRule("Option title")})),{errors:j}),e.id),(0,F.jsx)(Y.Z,{variant:"secondary",className:"max-h-[40px] px-2.5 py-2.5",type:"button",onClick:function(){return S(t)},children:(0,F.jsx)(eZ,{className:"text-grey-40",size:"20"})})]},e.id)})})]}),(0,F.jsxs)(Y.Z,{variant:"secondary",className:"mt-base h-10 w-full",type:"button",onClick:function(){P({title:"",id:null})},children:[(0,F.jsx)(sh.Z,{size:"20"})," Add an option"]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:N,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",disabled:!x,loading:k,children:"Save and close"})]})})]})]})})},K$=function(e){return{options:e.options.map(function(e){return{title:e.title,id:e.id}})}};function KK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function KJ(e){if(Array.isArray(e))return e}function KX(e){if(Array.isArray(e))return KK(e)}function K0(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function K1(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){K0(o,n,i,a,l,"next",e)}function l(e){K0(o,n,i,a,l,"throw",e)}a(void 0)})}}function K2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K3(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function K5(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function K6(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K4(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function K8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){K2(e,t,r[t])})}return e}function K7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K9(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K7(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Je(e,t){if(null==e)return{};var r,n,i=Jt(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Jt(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function Jr(e,t){return KJ(e)||K5(e,t)||Ji(e,t)||K6()}function Jn(e){return KX(e)||K3(e)||Ji(e)||K4()}function Ji(e,t){if(e){if("string"==typeof e)return KK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KK(e,t)}}function Jo(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var Ja=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,B.useMemo)(function(){var t=[];return e||t.push({Header:function(){return(0,F.jsx)("div",{className:"text-right",children:(0,F.jsx)("span",{children:"Inventory"})})},id:"inventory",accessor:"inventory_quantity",maxWidth:56,Cell:function(e){var t=e.cell;return(0,F.jsx)("div",{className:"text-right",children:(0,F.jsx)("span",{children:t.value})})}}),[{Header:"Title",id:"title",accessor:"title"},{Header:"SKU",id:"sku",accessor:"sku",maxWidth:264,Cell:function(e){var t=e.cell;return t.value?t.value:(0,F.jsx)("span",{className:"text-grey-50",children:"-"})}},{Header:"EAN",id:"ean",accessor:"ean",maxWidth:264,Cell:function(e){var t=e.cell;return t.value?t.value:(0,F.jsx)("span",{className:"text-grey-50",children:"-"})}}].concat(Jn(t))},[e])},Jl=function(e){var t=e.variants,r=e.actions,n=(0,o3.ye)().isFeatureEnabled,i=n("inventoryService"),o=Ja(i),a=Jr((0,B.useState)(null),2),l=a[0],s=a[1],c=(0,rN.useTable)({columns:o,data:t,defaultColumn:{width:"auto"}}),u=c.getTableProps,d=c.getTableBodyProps,f=c.headerGroups,p=c.rows,m=c.prepareRow,y=r.deleteVariant,h=r.updateVariant,b=r.duplicateVariant,v=r.updateVariantInventory,g=function(e){var t=[];return i&&t.push({label:"Manage inventory",icon:(0,F.jsx)(oZ.Z,{size:"20"}),onClick:function(){return v(e)}}),[{label:"Edit Variant",icon:(0,F.jsx)(eC,{size:"20"}),onClick:function(){return h(e)}}].concat(Jn(t),[{label:"Duplicate Variant",onClick:function(){return b(K9(K8({},e),{title:e.title+" Copy"}))},icon:(0,F.jsx)(tW,{size:"20"})},{label:"Delete Variant",onClick:function(){return s(e)},icon:(0,F.jsx)(eZ,{size:"20"}),variant:"danger"}])};return(0,F.jsxs)(nf,K9(K8({},u()),{className:"table-fixed",children:[(0,F.jsx)(nf.Head,{children:null==f?void 0:f.map(function(e){var t=e.getHeaderGroupProps(),r=t.key,n=Je(t,["key"]);return(0,F.jsx)(nf.HeadRow,K9(K8({},n),{children:e.headers.map(function(e){var t=e.getHeaderProps(),r=t.key,n=Je(t,["key"]);return(0,F.jsx)(nf.HeadCell,K9(K8({},n),{children:e.render("Header")}),r)})}),r)})}),(0,F.jsx)(nf.Body,K9(K8({},d()),{children:p.map(function(e){m(e);var t=g(e.original),r=e.getRowProps(),i=r.key,o=Je(r,["key"]);return(0,F.jsxs)(nf.Row,K9(K8({color:"inherit"},o),{children:[e.cells.map(function(e){var t=e.getCellProps(),r=t.key,n=Je(t,["key"]);return(0,F.jsx)(nf.Cell,K9(K8({},n),{children:e.render("Cell")}),r)}),(0,F.jsx)(nf.Cell,{children:(0,F.jsxs)("div",{className:"float-right",children:[(0,F.jsx)(eQ,{forceDropdown:!0,actions:t}),l&&(0,F.jsx)(tx,{onDelete:K1(function(){return Jo(this,function(e){return[2,y(l.id)]})}),handleClose:function(){return s(null)},confirmText:"Yes, delete",heading:"Delete variant",text:"Are you sure you want to delete this variant? ".concat(n("inventoryService")?" Note: Deleting the variant will also remove inventory items and levels":""),successText:!1})]})})]}),i)})}))]}))},Js=r(75892),Jc=r.n(Js),Ju=r(84997),Jd=r.n(Ju),Jf=r(73516),Jp=r.n(Jf);function Jm(e){var t={};return e.variants.forEach(function(e){e.prices.forEach(function(e){e.price_list_id||e.region_id||e.min_quantity||e.max_quantity||(t[e.currency_code]=!0)})}),Object.keys(t)}function Jy(e){var t={};return e.variants.forEach(function(e){e.prices.forEach(function(e){e.price_list_id||e.min_quantity||e.max_quantity||!e.region_id||(t[e.region_id]=!0)})}),Object.keys(t)}function Jh(e){return e.filter(function(e){return!e.price_list_id&&!e.region_id&&!e.min_quantity&&!e.max_quantity})}function Jb(e){return e.filter(function(e){return!(e.price_list_id||e.min_quantity||e.max_quantity)})}function Jv(e,t){return(e%t+t)%t}var Jg=function(e){return""!==e&&isNaN(Number(e))};function Jx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Jx(e,t,r[t])})}return e}function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):JO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function JS(e,t){if(null==e)return{};var r,n,i=JP(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function JP(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var JC=function(e){var t=e.size,r=void 0===t?"20px":t,n=e.color,i=void 0===n?"currentColor":n,o=JS(e,["size","color"]);return(0,F.jsxs)("svg",Jw(Jj({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",Jj({d:"M17.5 7.5H2.5V5.83333L10 2.5L17.5 5.83333V7.5Z",stroke:i,strokeWidth:"1",strokeLinejoin:"round"},o)),(0,F.jsx)("path",Jj({d:"M8.33333 16.6666H2.5L3.22917 14.1666H8.33333",stroke:i,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"},o)),(0,F.jsx)("path",Jj({d:"M4.16667 7.5V14.1667M7.50001 14.1667V7.5",stroke:i,strokeWidth:"1"},o)),(0,F.jsx)("path",Jj({d:"M17.1354 11.1979L12.0312 16.302",stroke:i,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"},o)),(0,F.jsx)("path",Jj({d:"M12.2917 12.0834C12.6368 12.0834 12.9167 11.8036 12.9167 11.4584C12.9167 11.1132 12.6368 10.8334 12.2917 10.8334C11.9465 10.8334 11.6667 11.1132 11.6667 11.4584C11.6667 11.8036 11.9465 12.0834 12.2917 12.0834Z",stroke:i,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"},o)),(0,F.jsx)("path",Jj({d:"M16.875 16.6666C17.2202 16.6666 17.5 16.3868 17.5 16.0416C17.5 15.6964 17.2202 15.4166 16.875 15.4166C16.5298 15.4166 16.25 15.6964 16.25 16.0416C16.25 16.3868 16.5298 16.6666 16.875 16.6666Z",stroke:i,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"},o))]}))};function JN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Jk(e){if(Array.isArray(e))return e}function J_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JA(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function JD(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function JE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){J_(e,t,r[t])})}return e}function JZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function JI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):JZ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function JT(e,t){return Jk(e)||JA(e,t)||JM(e,t)||JD()}function JM(e,t){if(e){if("string"==typeof e)return JN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JN(e,t)}}function JR(e,t){var r=(0,en.useAdminRegions)().regions;if(e)return v$.Q[null==e?void 0:e.toUpperCase()];if(r){var n=r.find(function(e){return e.id===t});return v$.Q[n.currency_code.toUpperCase()]}}var JL=(0,B.forwardRef)(function(e,t){return(0,F.jsx)("input",JE({ref:t},e))}),Jz=(0,B.forwardRef)(function(e,t){return(0,F.jsx)("span",JI(JE({ref:t},e),{children:e.value||e.placeholder}))});function Jq(e){var t=e.variant,r=e.currencyCode,n=e.region,i=e.editedAmount,o=e.isSelected,a=e.isAnchor,l=e.isInRange,s=e.isRangeStart,c=e.isRangeEnd,u=e.onColumnOver,d=(0,B.useRef)(),f=JT((0,B.useState)(!1),2),p=f[0],m=f[1],y=JR(r,n),h=JT((0,B.useState)({value:i,float:i}),2),b=h[0],v=h[1];return(0,B.useEffect)(function(){v({value:(null==i?void 0:i.toFixed(null==y?void 0:y.decimal_digits))||"",float:i})},[i]),(0,B.useEffect)(function(){if(o||m(!1),o&&a){var e=function(e){var t;(null===(t=document.activeElement)||void 0===t?void 0:t.tagName)!=="INPUT"&&(isNaN(Number(e.key))||(v({float:Number(e.key),value:String(e.key)}),m(!0)))};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}},[o,a,d.current]),(0,B.useEffect)(function(){if(p){setTimeout(function(){return d.current.focus()});var i,o=function(e){"Enter"===e.key&&d.current.blur()};return document.addEventListener("keypress",o),function(){return document.removeEventListener("keypress",o)}}v({value:(null===(i=b.float)||void 0===i?void 0:i.toFixed(null==y?void 0:y.decimal_digits))||"",float:b.float}),e.onInputChange(b.float,t.id,r,n)},[p]),(0,F.jsx)("td",{onMouseOver:function(){return u(r||n)},onMouseDown:function(i){p||(i.stopPropagation(),i.preventDefault()),e.onMouseCellClick(i,t.id,r,n),2===i.detail&&(v({float:b.float,value:String(b.float||"")}),m(!0))},className:(0,ec.Z)("relative cursor-pointer border pr-2 pl-4",{"bg-blue-100":o&&!a}),style:{borderTop:s&&e.isInRangeCol?"1px double #3B82F6":"",borderBottom:c&&e.isInRangeCol?"1px double #3B82F6":"",borderLeft:e.isRangeStartCol&&l?"1px double #3B82F6":"",borderRight:e.isRangeEndCol&&l?"1px double #3B82F6":""},children:(0,F.jsxs)("div",{className:"flex",children:[(0,F.jsx)("span",{className:"text-gray-400",children:null==y?void 0:y.symbol_native}),(0,F.jsx)(vY.Z,{ref:d,onBlurCapture:function(){m(!1)},style:{width:"100%",textAlign:"right",paddingRight:8},className:(0,ec.Z)("decoration-transparent focus:outline-0",{"bg-blue-100":o&&!a}),onValueChange:function(e,t,r){return v(r)},allowDecimals:(null==y?void 0:y.decimal_digits)>0,decimalScale:p?void 0:null==y?void 0:y.decimal_digits,customInput:p?JL:Jz,allowNegativeValue:!1,value:b.value,decimalSeparator:".",placeholder:"-"}),c&&e.isRangeEndCol&&!p&&(0,F.jsx)("div",{style:{bottom:-4,right:-4,zIndex:9999},onMouseDown:function(i){document.body.style.userSelect="none",i.stopPropagation(),e.onDragFillStart(t.id,r,n)},className:"absolute h-2 w-2 cursor-ns-resize rounded-full bg-blue-400"})]})})}function JF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function JH(e){if(Array.isArray(e))return e}function JU(e){if(Array.isArray(e))return JF(e)}function JG(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JV(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function JB(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function JW(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function JQ(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function JY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){JG(e,t,r[t])})}return e}function J$(e,t){return JH(e)||JB(e,t)||JJ(e,t)||JW()}function JK(e){return JU(e)||JV(e)||JJ(e)||JQ()}function JJ(e,t){if(e){if("string"==typeof e)return JF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JF(e,t)}}!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"}(_||(_={}));var JX=void 0,J0=[];function J1(e,t,r){return"".concat(e,"-").concat(t||r)}function J2(e){var t=(0,en.useAdminStore)().store,r=null==t?void 0:t.currencies,n=(0,en.useAdminRegions)({limit:1e3}).regions,i=(0,td.Z)(),o=(0,B.useRef)(!1),a=JK(e.currencies).concat(JK(e.regions)),l=J$((0,B.useState)(!1),2),s=l[0],c=l[1],u=J$((0,B.useState)(!1),2),d=u[0],f=u[1],p=J$((0,B.useState)({}),2),m=p[0],y=p[1],h=J$((0,B.useState)({}),2),b=h[0],v=h[1],g=function(e,t,r,n){if((t||r)===D){var i=J1(e,t,r);if(n){v(JG({},i,!0));return}var o=JY({},b);o[i]=!0,v(o)}},x=function(e,t,r,n){var i=JY({},m);i[J1(t,r,n)]=e,y(i)},j=function(){I=void 0,E=void 0,Z=void 0,R=void 0,T=void 0,M=void 0,A=void 0,D=void 0,v({})},O=function(e,t,r){if(I||v(JG({},J1(J0[0],a[0]),!0)),e===_.DOWN){if(t)r?(E=I,Z=J0.length-1):I===E?Z=Math.min(Z+1,J0.length-1):E=Math.min(E+1,J0.length-1),P();else{var n=J0.findIndex(function(e){return e===A});n=Jv(n+1,J0.length);var i=J0[n];A=i,I=n,E=n,Z=n,T=R,M=R,v(JG({},J1(i,D),!0))}}if(e===_.UP){if(t)r?(Z=I,E=0):I===E?E===Z?E=Math.max(E-1,0):Z=Math.max(Z-1,0):E=Math.max(E-1,0),P();else{var o=J0.findIndex(function(e){return e===A});o=Jv(o-1,J0.length);var l=J0[o];A=l,I=o,E=o,Z=o,T=R,M=R,v(JG({},J1(l,D),!0))}}if(e===_.LEFT){if(t)r?(M=R,T=0):R===T?T===M?T=Math.max(T-1,0):M=Math.max(M-1,0):T=Math.max(T-1,0),P();else{var s=a.findIndex(function(e){return e===D});s=Jv(s-1,a.length);var c=a[s];D=c,R=s,T=s,M=s,E=I,Z=I,v(JG({},J1(A,c),!0))}}if(e===_.RIGHT){if(t)r?(T=R,M=a.length-1):R===T?M=Math.min(M+1,a.length-1):T=Math.min(T+1,a.length-1),P();else{var u=a.findIndex(function(e){return e===D});u=Jv(u+1,a.length);var d=a[u];D=d,R=u,T=u,M=u,E=I,Z=I,v(JG({},J1(A,d),!0))}}},w=function(e){if((s||d)&&A){var t=J0.findIndex(function(t){return t===e});t>I?(E=I,Z=t):(E=t,Z=I),P()}},S=function(e){if(s||d){var t=a.findIndex(function(t){return t===e});t>R?(M=t,T=R):(T=t,M=R),P()}},P=function(){var e=a.slice(T,M+1),t=J0.slice(E,Z+1),r=[];t.forEach(function(t){return e.forEach(function(e){r.push(J1(t,e))})});var n=JY({},b),i=JY({},m);Object.keys(n).forEach(function(e){r.includes(e)||(delete n[e],i[e]=JX[e])}),r.forEach(function(e){n[e]=!0,s&&(i[e]=m[J1(A,D)])}),v(n),s&&y(i)},C=function(e,t,r,n){e.stopPropagation(),JX=m,A=t,Z=E=I=J0.findIndex(function(e){return e===A}),D=r||n,T=R=a.findIndex(function(e){return e===D}),M=R,v(JG({},J1(t,r||n),!0)),f(!0)},N=function(e,t,r,n){x(e,t,r,n)},k=function(e,t,r){g(e,t,r),c(!0)};(0,B.useEffect)(function(){if(j(),e.currencies&&e.regions&&e.product.variants){var t={};e.product.variants.forEach(function(r){e.currencies.forEach(function(e){var n=v$.Q[e.toUpperCase()],i=Jh(r.prices).find(function(t){return t.currency_code===e});i&&(t[J1(r.id,e)]=i.amount/Math.pow(10,n.decimal_digits))}),e.regions.forEach(function(e){var n=Jb(r.prices).find(function(t){return t.region_id===e});if(n){var i=v$.Q[n.currency_code.toUpperCase()];t[J1(r.id,void 0,e)]=n.amount/Math.pow(10,i.decimal_digits)}})}),J0=e.product.variants.map(function(e){return e.id}),o.current=!0,y(function(e){return JY({},t,e)})}},[e.currencies,e.regions,e.product.variants]),(0,B.useEffect)(function(){var e=function(){document.body.style.userSelect="none",j()},t=function(){document.body.style.userSelect="auto",c(!1),f(!1)},r=function(e){if("Backspace"===e.key&&"INPUT"!==document.activeElement.tagName){var t=JY({},m);Object.keys(b).forEach(function(e){var r=J$(e.split("-"),2);t[J1(r[0],r[1])]=void 0}),y(t)}if("Tab"===e.key&&(e.stopPropagation(),e.preventDefault(),e.shiftKey?(0===R&&O(_.UP,!1),O(_.LEFT,!1)):(R===a.length-1&&O(_.DOWN,!1),O(_.RIGHT,!1))),38===e.keyCode&&O(_.UP,e.shiftKey,e.metaKey||e.ctrlKey),40===e.keyCode&&O(_.DOWN,e.shiftKey,e.metaKey||e.ctrlKey),37===e.keyCode&&O(_.LEFT,e.shiftKey,e.metaKey||e.ctrlKey),39===e.keyCode&&O(_.RIGHT,e.shiftKey,e.metaKey||e.ctrlKey),(e.ctrlKey||e.metaKey)&&67===e.keyCode){var r="",n={},o={};Object.keys(b).forEach(function(e){var t=J$(e.split("-"),2),r=t[0],i=t[1];n[r]=!0,o[i]=!0}),Object.keys(n).sort(function(e,t){return J0.indexOf(e)-J0.indexOf(t)}).forEach(function(e){Object.keys(o).forEach(function(t){var n=m[J1(e,t)];r+=(isNaN(n)?"":n)+"	"}),r=r.slice(0,-1)+"\n"}),r=r.slice(0,-1),navigator.clipboard.writeText(r),i("Success","Copied to clipboard","success")}(e.ctrlKey||e.metaKey)&&90===e.keyCode&&(e.preventDefault(),Object.keys(b).length&&(e.stopPropagation(),y(JX||{}),j()))},n=function(e){var t=(e.clipboardData||window.clipboardData).getData("text").split("\n").map(function(e){return e.split("	")});if("number"==typeof I&&"number"==typeof R){for(var r=JY({},m),n=E!==Z||T!==M,o=n?Z-E:t.length-1,l=0;l<=o&&!(l>=J0.length);l++)for(var s=t[l%t.length],c=n?M-T:s.length-1,u=0;u<=c&&!(u>=a.length);u++){if(Jg(s[u%s.length])){i("Error","Invalid data - copied cells contain text","error");return}var d=parseFloat(s[u%s.length]);r[J1(J0[E+l],a[T+u])]=isNaN(d)?void 0:d}y(r)}};return document.addEventListener("mousedown",e),document.addEventListener("mouseup",t),document.addEventListener("keydown",r),document.addEventListener("paste",n),function(){document.removeEventListener("mousedown",e),document.removeEventListener("mouseup",t),document.removeEventListener("keydown",r),document.removeEventListener("paste",n)}},[b]),(0,B.useEffect)(function(){s||e.onPriceUpdate(m)},[s,m]);var L=(0,B.useMemo)(function(){var t=0;return e.product.variants.forEach(function(e){return t=Math.max(t,e.title.length+(e.sku?e.sku.length:0))}),e.product.title.length>t?e.product.title.substring(0,t)+"...":e.product.title},[e.product]);if(o.current)return(0,F.jsx)("div",{className:"h-full overflow-x-auto",children:(0,F.jsxs)("table",{onMouseMove:function(e){return e.preventDefault()},style:{fontSize:13,borderCollapse:"collapse"},className:"w-full table-auto",children:[(0,F.jsx)("thead",{children:(0,F.jsxs)("tr",{style:{height:42},className:"tw-text-medusa-text-subtle h-2 text-left font-normal",children:[(0,F.jsx)("th",{className:"h-2 border pl-4 font-medium text-gray-400",children:"Product"}),e.currencies.map(function(e){var t=null==r?void 0:r.find(function(t){return t.code===e});return(0,F.jsx)("th",{className:"min-w-[220px] border px-4 font-medium text-gray-400",children:(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("span",{children:["Price ",e.toUpperCase()]}),(null==t?void 0:t.includes_tax)&&(0,F.jsx)(a9.Z,{content:"Tax inclusive pricing",side:"bottom",children:(0,F.jsx)(JC,{strokeWidth:1.3,size:20})})]})},e)}),e.regions.map(function(e){var t=null==n?void 0:n.find(function(t){return t.id===e});return t?(0,F.jsx)("th",{className:"min-w-[220px] max-w-[220px]  border px-4 font-medium text-gray-400",children:(0,F.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,F.jsxs)("span",{className:"flex overflow-hidden",children:[(0,F.jsxs)("span",{title:null==t?void 0:t.name,className:"truncate pr-1",children:["Price ",null==t?void 0:t.name]}),"(",null==t?void 0:t.currency_code.toUpperCase(),")"]}),t.includes_tax&&(0,F.jsx)(a9.Z,{content:"Tax inclusive pricing",side:"bottom",children:(0,F.jsx)(JC,{strokeWidth:1.3,size:20})})]})},e):null})]})}),(0,F.jsxs)("tbody",{children:[(0,F.jsxs)("tr",{style:{lineHeight:3,background:"#f9fafb"},children:[(0,F.jsx)("td",{className:"border pl-4 pr-4",children:(0,F.jsxs)("div",{className:"text-black-800 flex items-center gap-2 overflow-hidden",children:[e.product.thumbnail&&(0,F.jsx)("img",{src:e.product.thumbnail,alt:"Thumbnail",className:"h-[22px] w-[16px] rounded"}),(0,F.jsx)("span",{title:e.product.title,className:"truncate",children:L})]})}),e.currencies.map(function(e){return(0,F.jsx)("td",{className:"border pr-4 text-right",children:"-"},e)}),e.regions.map(function(e){return(0,F.jsx)("td",{className:"border pr-4 text-right",children:"-"},e)})]}),e.product.variants.map(function(t,r){return(0,F.jsxs)("tr",{onMouseEnter:function(){return w(t.id)},style:{lineHeight:3},children:[(0,F.jsxs)("td",{className:"whitespace-nowrap border pl-10 pr-4 text-gray-600",children:[t.title," ",t.sku&&"∙ ".concat(t.sku)]}),e.currencies.map(function(e,n){return(0,F.jsx)(Jq,{currencyCode:e,variant:t,isSelected:b[J1(t.id,e)],editedAmount:m[J1(t.id,e)],onInputChange:N,onMouseCellClick:C,onDragFillStart:k,onColumnOver:S,isAnchor:I===r&&R===n,isRangeStart:E===r,isRangeEnd:r===Z,isInRange:r>=E&&r<=Z,isRangeStartCol:T===n,isRangeEndCol:n===M,isInRangeCol:n>=T&&n<=M},t.id+e)}),e.regions.map(function(n,i){return i=e.currencies.length+i,(0,F.jsx)(Jq,{region:n,variant:t,isSelected:b[J1(t.id,void 0,n)],editedAmount:m[J1(t.id,void 0,n)],onInputChange:N,onMouseCellClick:C,onDragFillStart:k,onColumnOver:S,isAnchor:I===r&&R===i,isRangeStart:E===r,isRangeEnd:r===Z,isInRange:r>=E&&r<=Z,isRangeStartCol:T===i,isRangeEndCol:i===M,isInRangeCol:i>=T&&i<=M},t.id+n)})]},t.id)})]})]})})}function J3(e){var t=e.selectedCurrencies,r=e.selectedRegions,n=e.toggleCurrency,i=e.toggleRegion,o=(0,en.useAdminStore)().store,a=null==o?void 0:o.currencies,l=(0,en.useAdminRegions)({limit:1e3}).regions,s=(0,B.useMemo)(function(){return(a||[]).sort(function(e,t){return e.code.localeCompare(t.code)})},[a]),c=(0,B.useMemo)(function(){return(l||[]).sort(function(e,t){return e.name.localeCompare(t.name)})},[l]);return(0,F.jsx)("div",{style:{fontSize:13},className:"flex items-center gap-2 border-t py-[12px] px-4",children:(0,F.jsxs)(eI.fC,{children:[(0,F.jsx)(eI.xz,{asChild:!0,children:(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",className:"text-gray-700",children:["View",(0,F.jsx)(_S,{size:20})]})}),(0,F.jsxs)(eI.VY,{align:"start",sideOffset:10,className:"bg-grey-0 border-grey-20 rounded-rounded shadow-dropdown z-30 max-h-[500px] min-w-[272px] overflow-y-scroll border",children:[(0,F.jsx)(eI.__,{className:"text-small px-[12px] py-2 font-medium text-gray-400",children:"Currencies"}),null==s?void 0:s.map(function(e){return(0,F.jsx)(eI.ck,{onClick:function(t){t.preventDefault(),n(e.code)},className:"mb-1 cursor-pointer last:mb-0 hover:bg-gray-100",children:(0,F.jsxs)("div",{className:"flex justify-between gap-4 px-[12px] py-2 text-gray-800",children:[e.code.toUpperCase(),(0,F.jsxs)("label",{className:"flex  items-center justify-between gap-2  text-gray-400",children:[(0,F.jsx)("span",{className:"max-w-[180px] truncate",children:e.name}),t.includes(e.code)&&(0,F.jsx)(rT,{className:"text-gray-900",size:16})]})]})},e.code)}),(0,F.jsx)(eI.__,{className:"text-small border-t border-gray-200 px-[12px] py-2 font-medium text-gray-400",children:"Regions"}),null==c?void 0:c.map(function(e){return(0,F.jsx)(eI.ck,{onClick:function(t){t.preventDefault(),i(e.id)},className:"mb-1 cursor-pointer last:mb-0 hover:bg-gray-100",children:(0,F.jsxs)("div",{className:"flex justify-between gap-4 px-[12px] py-2 text-gray-800",children:[e.name,r.includes(e.id)&&(0,F.jsx)(rT,{className:"text-gray-900",size:16})]})},e.id)})]})]})})}function J5(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function J6(e){if(Array.isArray(e))return e}function J4(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function J8(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function J7(e,t){return J6(e)||J4(e,t)||J9(e,t)||J8()}function J9(e,t){if(e){if("string"==typeof e)return J5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J5(e,t)}}!function(e){e.SAVE_VISIBLE_ONLY="SAVE_VISIBLE_ONLY",e.SAVE_ALL="SAVE_ALL"}(L||(L={}));var Xe=function(e){var t=e.handleClose,r=e.onSaveOnlyVisible,n=e.onSaveAll,i=e.hiddenEditedColumns,o=J7((0,B.useState)(!1),2),a=o[0],l=o[1],s=!!i.length,c=J7((0,B.useState)(L.SAVE_VISIBLE_ONLY),2),u=c[0],d=c[1];return(0,F.jsx)(tp.Z,{isLargeModal:!1,handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("span",{className:"inter-large-semibold",children:"Saving changes"}),(0,F.jsx)("span",{className:"inter-base-regular text-grey-50 mt-1 mb-4 w-[420px]",children:s?"You have edited prices in hidden columns: (".concat(i.join(", "),"). Do you wish to save these too?"):"Save edited variant prices"})]}),s&&(0,F.jsxs)(pQ.Root,{className:"gap-base mt-2 flex-col",value:u,onValueChange:d,children:[(0,F.jsx)(pQ.Item,{className:"flex-1",label:"Save all",description:"Save all price changes",value:L.SAVE_ALL}),(0,F.jsx)(pQ.Item,{className:"flex-1",label:"Save only visible",description:"Save only visible price changes",value:L.SAVE_VISIBLE_ONLY})]})]}),(0,F.jsx)(tp.Z.Footer,{className:"flex items-center border border-t",children:(0,F.jsxs)("div",{className:"mt-4 flex h-8 w-full justify-end gap-2",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small mr-2  justify-center",size:"small",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",color:"black",className:(0,ec.Z)("text-small justify-center bg-black text-white active:bg-black active:text-white",{"hover:bg-black":!a}),loading:a,onClick:function(){l(!0),(s&&u===L.SAVE_ALL?n:r)()},children:"Save changes"})]})})]})})};function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Xr(e){if(Array.isArray(e))return e}function Xn(e){if(Array.isArray(e))return Xt(e)}function Xi(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Xo(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Xi(o,n,i,a,l,"next",e)}function l(e){Xi(o,n,i,a,l,"throw",e)}a(void 0)})}}function Xa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xl(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Xs(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function Xc(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xu(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Xa(e,t,r[t])})}return e}function Xf(e,t){return Xr(e)||Xs(e,t)||Xm(e,t)||Xc()}function Xp(e){return Xn(e)||Xl(e)||Xm(e)||Xu()}function Xm(e,t){if(e){if("string"==typeof e)return Xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xt(e,t)}}function Xy(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function Xh(){var e={},t=(0,en.useAdminRegions)({limit:1e3}).regions;return null==t||t.forEach(function(t){e[t.id]=t.currency_code}),(0,B.useMemo)(function(){return e},[t])}function Xb(e){var t=(0,B.useRef)({}),r=(0,en.useAdminRegions)({limit:1e3}).regions,n=Xh(),i=Jy(e.product).sort(),o=Jm(e.product).sort(),a=(0,td.Z)(),l=(0,en.useAdminUpdateVariant)(e.product.id),s=Xf((0,B.useState)(!1),2),c=s[0],u=s[1],d=Xf((0,B.useState)(!1),2),f=d[0],p=d[1],m=Xf((0,B.useState)(o),2),y=m[0],h=m[1],b=Xf((0,B.useState)(i),2),v=b[0],g=b[1],x=function(){var n={};e.product.variants.forEach(function(e){o.forEach(function(t){var r=v$.Q[t.toUpperCase()],i=Jh(e.prices).find(function(e){return e.currency_code===t});i&&(n["".concat(e.id,"-").concat(t)]=i.amount/Math.pow(10,r.decimal_digits))}),i.forEach(function(t){var r=Jb(e.prices).find(function(e){return e.region_id===t});if(r){var i=v$.Q[r.currency_code.toUpperCase()];n["".concat(e.id,"-").concat(t)]=r.amount/Math.pow(10,i.decimal_digits)}})});var a=Xd({},t.current);return Object.keys(n).forEach(function(e){n[e]===a[e]&&delete a[e]}),Xp(new Set(Object.keys(a).map(function(e){return e.split("-")[1]}))).filter(function(e){return!y.includes(e)&&!v.includes(e)}).map(function(e){var t;return 3===e.length?e.toUpperCase():(null==r?void 0:null===(t=r.find(function(t){return t.id===e}))||void 0===t?void 0:t.name)||e})},j=function(r){var i=t.current;Promise.all(e.product.variants.map(function(e){var t=e.prices.filter(function(e){return!e.price_list_id}),o=Jp()(Jd()(i,function(t,r){return r.includes(e.id)}),function(e,t){return t.split("-")[1]}),a=Jd()(o,function(e,t){return!t.startsWith("reg")&&(!r||y.includes(t))}),s=Jd()(o,function(e,t){return t.startsWith("reg")&&(!r||v.includes(t))}),c=[];return t.forEach(function(e){if(e.region_id){if(e.region_id in s){if("number"==typeof s[e.region_id]){var t=Xd({},e);t.amount=s[e.region_id]*Math.pow(10,v$.Q[e.currency_code.toUpperCase()].decimal_digits),c.push(t)}}else c.push(e);delete s[e.region_id]}else{if(e.currency_code in a){if("number"==typeof a[e.currency_code]){var r=Xd({},e);r.amount=a[e.currency_code]*Math.pow(10,v$.Q[e.currency_code.toUpperCase()].decimal_digits),c.push(r)}}else c.push(e);delete a[e.currency_code]}}),Object.entries(a).forEach(function(e){var t=Xf(e,2),r=t[0],n=t[1];"number"==typeof n&&(n*=Math.pow(10,v$.Q[r.toUpperCase()].decimal_digits),c.push({currency_code:r,amount:n}))}),Object.entries(s).forEach(function(e){var t=Xf(e,2),r=t[0],i=t[1];if("number"==typeof i){var o=n[r];i*=Math.pow(10,v$.Q[o.toUpperCase()].decimal_digits),c.push({region_id:r,amount:i})}}),l.mutateAsync({variant_id:e.id,prices:c.map(function(e){return Jc()(e,["id","amount","region_id","currency_code"])})})})).then(function(){a("Success","Successfully updated variant prices","success"),e.close()}).catch(function(e){a("Error","Failed to update variant prices","error")})};return(0,B.useEffect)(function(){var e=function(e){"Escape"===e.key&&u(!0)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[]),(0,F.jsxs)(cX,{isFullScreen:!0,isVisible:!0,children:[(0,F.jsx)(tp.Z.Body,{className:"border bg-gray-200 p-2",children:(0,F.jsxs)("div",{className:"h-full overflow-hidden rounded-lg border border-gray-300 bg-white",children:[(0,F.jsxs)("div",{className:"flex h-[64px] items-center justify-between px-4",children:[(0,F.jsxs)("div",{className:"flex h-[20px] items-center gap-2",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:function(){return u(!0)},className:"text-grey-50 cursor-pointer",children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsx)("span",{className:"text-small rounded-lg border border-2 border-gray-300 bg-gray-100 px-2 font-medium text-gray-500",children:"esc"})]}),(0,F.jsxs)("div",{className:"flex items-center gap-3",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:e.close,className:"text-black-800  cursor-pointer border p-1.5 font-medium",children:"Discard"}),(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:function(){x(),p(!0)},className:"cursor-pointer border bg-black p-1.5 font-medium text-white hover:bg-black",children:"Save and close"})]})]}),(0,F.jsx)(J3,{selectedCurrencies:y.sort(),selectedRegions:v.sort(),toggleCurrency:function(e){var t=new Set(y);t.has(e)?t.delete(e):t.add(e),h(Array.from(t))},toggleRegion:function(e){var t=new Set(v);t.has(e)?t.delete(e):t.add(e),g(Array.from(t))}}),(0,F.jsx)(J2,{product:e.product,currencies:y.sort(),regions:v.sort(),onPriceUpdate:function(e){t.current=e}})]})}),c&&(0,F.jsx)(tx,{handleClose:function(){return u(!1)},onDelete:Xo(function(){return Xy(this,function(t){return[2,e.close()]})}),successText:"",confirmText:"Yes, close",heading:"Close",text:"Are you sure you want to close this editor without saving?"}),f&&(0,F.jsx)(Xe,{onSaveAll:Xo(function(){return Xy(this,function(e){return[2,j()]})}),onSaveOnlyVisible:Xo(function(){return Xy(this,function(e){return[2,j(!0)]})}),hiddenEditedColumns:x(),handleClose:function(){return p(!1)}})]})}function Xv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Xg(e){if(Array.isArray(e))return e}function Xx(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function Xj(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){Xx(o,n,i,a,l,"next",e)}function l(e){Xx(o,n,i,a,l,"throw",e)}a(void 0)})}}function XO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xw(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function XS(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function XP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){XO(e,t,r[t])})}return e}function XC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function XN(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):XC(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function Xk(e,t){return Xg(e)||Xw(e,t)||X_(e,t)||XS()}function X_(e,t){if(e){if("string"==typeof e)return Xv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xv(e,t)}}function XA(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var XD=function(e){var t,r=e.product,n=(0,OX.useQueryClient)(),i=(0,en.useMedusa)().client,o=(0,o3.ye)().isFeatureEnabled,a=Xk((0,B.useState)(void 0),2),l=a[0],s=a[1],c=Xk((0,B.useState)(void 0),2),u=c[0],d=c[1],f=(0,s1.Z)(),p=f.state,m=f.close,y=f.toggle,h=(0,s1.Z)(),b=h.state,v=h.close,g=h.toggle,x=(0,s1.Z)(),j=x.state,O=x.close,w=x.toggle,S=(0,s1.Z)(),P=S.state,C=S.close,N=S.toggle,k=[{label:"Add Variant",onClick:g,icon:(0,F.jsx)(sh.Z,{size:"20"})},{label:"Edit Prices",onClick:N,icon:(0,F.jsx)(Ov,{size:"20"})},{label:"Edit Variants",onClick:w,icon:(0,F.jsx)(eC,{size:"20"})},{label:"Edit Options",onClick:y,icon:(0,F.jsx)(KG.Z,{size:"20"})}],_=wh(r.id).onDeleteVariant,A=(t=Xj(function(e){var t;return XA(this,function(r){switch(r.label){case 0:if(!o("inventoryService"))return[3,2];return[4,i.admin.variants.getInventory(e)];case 1:t=r.sent().variant,r.label=2;case 2:return _(e,Xj(function(){var e,r;return XA(this,function(a){switch(a.label){case 0:if(!(o("inventoryService")&&(null===(r=t)||void 0===r?void 0:null===(e=r.inventory[0])||void 0===e?void 0:e.id)))return[3,2];return[4,i.admin.inventoryItems.delete(t.inventory[0].id)];case 1:a.sent(),n.invalidateQueries(en.adminInventoryItemsKeys.lists()),a.label=2;case 2:return[2]}})})),[2]}})}),function(e){return t.apply(this,arguments)});return(0,F.jsxs)(Y$,{product:r,children:[(0,F.jsxs)(tM,{title:"Variants",actions:k,children:[(0,F.jsx)(XE,{}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsxs)("h2",{className:"inter-large-semibold mb-base",children:["Product variants"," ",(0,F.jsxs)("span",{className:"inter-large-regular text-grey-50",children:["(",r.variants.length,")"]})]}),(0,F.jsx)(Jl,{variants:r.variants,actions:{deleteVariant:A,updateVariant:function(e){s({base:e,isDuplicate:!1})},duplicateVariant:function(e){s({base:XN(XP({},e),{options:[]}),isDuplicate:!0})},updateVariantInventory:function(e){d({base:e})}}})]})]}),(0,F.jsx)(KY,{open:p,onClose:m,product:r}),(0,F.jsx)($$,{open:b,onClose:v,product:r}),(0,F.jsx)(KH,{open:j,onClose:O,product:r}),P&&(0,F.jsx)(Xb,{close:C,product:r}),l&&(0,F.jsx)(Ky,{variant:l.base,isDuplicate:l.isDuplicate,product:r,onClose:function(){return s(void 0)}}),u&&(0,F.jsx)(Ke,{variant:u.base,product:r,onClose:function(){return d(void 0)}})]})},XE=function(){var e=YK(),t=e.options,r=e.status;return"error"===r?null:"loading"!==r&&t?(0,F.jsx)("div",{className:"mt-base flex flex-wrap items-center gap-8",children:t.map(function(e){var t;return(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-xsmall",children:e.title}),(0,F.jsx)("ul",{className:"flex flex-wrap items-center gap-1",children:null===(t=e.values)||void 0===t?void 0:t.map(function(e){return e.value}).filter(function(e,t,r){return r.indexOf(e)===t}).map(function(e,t){return(0,F.jsx)("li",{children:(0,F.jsx)("div",{className:"inter-small-semibold rounded-rounded bg-grey-10 text-grey-50 whitespace-nowrap px-3 py-[6px]",children:e})},t)})})]},e.id)})}):(0,F.jsx)("div",{className:"mt-base grid grid-cols-3 gap-x-8",children:Array.from([,,]).map(function(e,t){return(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"mb-xsmall bg-grey-30 h-6 w-9 animate-pulse"}),(0,F.jsx)("ul",{className:"flex flex-wrap items-center gap-1",children:Array.from([,,,]).map(function(e,t){return(0,F.jsx)("li",{children:(0,F.jsx)("div",{className:"rounded-rounded bg-grey-10 text-grey-50 h-8 w-12 animate-pulse",children:t})},t)})})]},t)})})},XZ=function(){var e=(0,V.useParams)().id,t=(0,V.useNavigate)(),r=(0,ig.e)().getWidgets,n=(0,en.useAdminProduct)(e||""),i=n.product,o=n.status,a=n.error;if(a){var l=ix(a);if(l&&404===l.status)return t("/404"),null;throw a}return"loading"!==o&&i?(0,F.jsxs)("div",{className:"pb-5xlarge",children:[(0,F.jsx)(eb,{path:"/a/products",label:"Back to Products",className:"mb-xsmall"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[r("product.details.before").map(function(e,t){return(0,F.jsx)(eg.Z,{injectionZone:"product.details.before",widget:e,entity:i},t)}),(0,F.jsxs)("div",{className:"gap-x-base grid grid-cols-12",children:[(0,F.jsxs)("div",{className:"gap-y-xsmall col-span-8 flex flex-col",children:[(0,F.jsx)(Pr,{product:i}),(0,F.jsx)(XD,{product:i}),(0,F.jsx)(wE,{product:i}),r("product.details.after").map(function(e,t){return(0,F.jsx)(eg.Z,{injectionZone:"product.details.after",widget:e,entity:i},t)}),(0,F.jsx)(PM,{product:i})]}),(0,F.jsxs)("div",{className:"gap-y-xsmall col-span-4 flex flex-col",children:[(0,F.jsx)(PK,{product:i}),(0,F.jsx)(PT,{product:i})]})]})]})]}):(0,F.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})})};function XI(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function XT(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){XI(o,n,i,a,l,"next",e)}function l(e){XI(o,n,i,a,l,"throw",e)}a(void 0)})}}function XM(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var XR=function(e){var t,r=(0,V.useNavigate)(),n=o2(),i=(0,en.useAdminDeleteCollection)(null==e?void 0:e.id),o=(t=XT(function(){return XM(this,function(e){switch(e.label){case 0:return[4,n({heading:"Delete Collection",text:"Are you sure you want to delete this collection?"})];case 1:return e.sent()&&i.mutate(),[2]}})}),function(){return t.apply(this,arguments)});return{getActions:function(e){return[{label:"Edit",onClick:function(){return r("/a/collections/".concat(e.id))},icon:(0,F.jsx)(eC,{size:20})},{label:"Delete",variant:"danger",onClick:o,icon:(0,F.jsx)(eZ,{size:20})}]}}},XL=function(){return[(0,B.useMemo)(function(){return[{Header:"Title",accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"flex items-center",children:t.title})}},{Header:"Handle",accessor:"handle",Cell:function(e){var t=e.cell.value;return(0,F.jsxs)("div",{children:["/",t]})}},{Header:"Created At",accessor:"created_at",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(a9.Z,{content:iW()(t).format("DD MMM YYYY hh:mm A"),children:iW()(t).format("DD MMM YYYY")})}},{Header:"Updated At",accessor:"updated_at",Cell:function(e){var t=e.cell.value;return(0,F.jsx)(a9.Z,{content:iW()(t).format("DD MMM YYYY hh:mm A"),children:iW()(t).format("DD MMM YYYY")})}},{Header:"Products",accessor:"products",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{children:(null==t?void 0:t.length)||"-"})}}]},[])]};function Xz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Xq(e){if(Array.isArray(e))return e}function XF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XH(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function XU(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function XG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){XF(e,t,r[t])})}return e}function XV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function XB(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):XV(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function XW(e,t){return Xq(e)||XH(e,t)||XQ(e,t)||XU()}function XQ(e,t){if(e){if("string"==typeof e)return Xz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xz(e,t)}}var XY=15,X$=function(){var e=XW((0,B.useState)([]),2),t=e[0],r=e[1],n=XW((0,B.useState)(0),2),i=n[0],o=n[1],a=XW((0,B.useState)(""),2),l=a[0],s=a[1],c=XW((0,B.useState)(0),2),u=c[0],d=c[1],f=(0,rk.N)(l,300),p=(0,en.useAdminCollections)({q:f,offset:i,limit:XY},{keepPreviousData:!0}),m=p.collections,y=p.isLoading,h=p.isRefetching,b=p.count;(0,B.useEffect)(function(){void 0!==b&&d(Math.ceil(b/XY))},[b]);var v=XW(XL(),1)[0],g=(0,rN.useTable)({columns:v,data:m||[],manualPagination:!0,initialState:{pageIndex:Math.floor(i/XY),pageSize:XY},pageCount:u,autoResetPage:!1},rN.usePagination),x=g.getTableProps,j=g.getTableBodyProps,O=g.headerGroups,w=g.rows,S=g.prepareRow,P=g.canPreviousPage,C=g.canNextPage,N=g.pageCount,k=g.nextPage,_=g.previousPage,A=g.state.pageIndex;return(0,B.useEffect)(function(){r([{title:"Sort",options:[{title:"All",count:(null==m?void 0:m.length)||0,onClick:function(){return console.log("Not implemented yet")}}]}])},[m]),(0,F.jsx)(nC,{isLoading:y||h,hasPagination:!0,numberOfRows:XY,pagingState:{count:b,offset:i,pageSize:i+w.length,title:"Collections",currentPage:A+1,pageCount:N,nextPage:function(){C&&(o(i+XY),k())},prevPage:function(){P&&(o(i-XY),_())},hasNext:C,hasPrev:P},children:(0,F.jsxs)(nf,XB(XG({enableSearch:!0,handleSearch:function(e){o(0),s(e)},searchValue:l,searchPlaceholder:"Search Collections",filteringOptions:t},x()),{children:[(0,F.jsx)(nf.Head,{children:null==O?void 0:O.map(function(e){return(0,F.jsx)(nf.HeadRow,XB(XG({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,XB(XG({className:"min-w-[100px]"},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),y||h||!m?(0,F.jsx)(nf.Body,XB(XG({},j()),{children:(0,F.jsx)(nf.Row,{children:(0,F.jsx)(nf.Cell,{colSpan:v.length,children:(0,F.jsx)("div",{className:"pt-2xlarge flex w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})})})})})):(0,F.jsx)(nf.Body,XB(XG({},j()),{children:w.map(function(e){return S(e),(0,F.jsx)(XK,{row:e})})}))]}))})},XK=function(e){var t=e.row,r=t.original,n=XR(r).getActions;return(0,F.jsx)(nf.Row,XB(XG({color:"inherit",linkTo:"/a/collections/".concat(r.id),actions:n(r)},t.getRowProps()),{children:t.cells.map(function(e,t){return(0,F.jsx)(nf.Cell,XB(XG({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))};function XJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function XX(e){if(Array.isArray(e))return e}function X0(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X1(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function X2(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function X3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){X0(e,t,r[t])})}return e}function X5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X6(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X5(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function X4(e,t){return XX(e)||X1(e,t)||X8(e,t)||X2()}function X8(e,t){if(e){if("string"==typeof e)return XJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XJ(e,t)}}var X7=["proposed","draft","published","rejected"],X9=10,eee=function(e){var t=e.filters,r=e.submitFilters,n=e.clearFilters,i=e.tabs,o=e.onTabClick,a=e.activeTab,l=e.onRemoveTab,s=e.onSaveTab,c=X4((0,B.useState)(t),2),u=c[0],d=c[1],f=X4((0,B.useState)(""),2),p=f[0],m=f[1],y=function(e){l&&l(e)},h=function(e){o&&o(e)};(0,B.useEffect)(function(){d(t)},[t]);var b=(0,B.useMemo)(function(){return Object.entries(t||{}).reduce(function(e,t){var r=X4(t,2)[1];return(null==r?void 0:r.open)&&(e+=1),e},0)},[t]),v=function(e,t){d(function(r){return X6(X3({},r),X0({},e,t))})},g=X4((0,B.useState)({offset:0,limit:X9}),2),x=g[0],j=g[1],O=(0,en.useAdminCollections)(x),w=O.collections,S=O.count,P=O.isLoading,C=(0,en.useAdminProductTags)().product_tags,N=function(e){e>0?j(function(e){return X6(X3({},e),{offset:e.offset+e.limit})}):e<0&&j(function(e){return X6(X3({},e),{offset:Math.max(e.offset-e.limit,0)})})};return(0,F.jsxs)("div",{className:"flex space-x-1",children:[(0,F.jsxs)(uv,{submitFilters:function(){r(u)},clearFilters:function(){n()},triggerElement:(0,F.jsxs)("button",{className:(0,ec.Z)("rounded-rounded focus-visible:shadow-input focus-visible:border-violet-60 flex items-center space-x-1 focus-visible:outline-none"),children:[(0,F.jsxs)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex h-6 items-center border px-2",children:["Filters",(0,F.jsx)("div",{className:"text-grey-40 ml-1 flex items-center rounded",children:(0,F.jsx)("span",{className:"text-violet-60 inter-small-semibold",children:b||"0"})})]}),(0,F.jsx)("div",{className:"rounded-rounded bg-grey-5 border-grey-20 inter-small-semibold flex items-center border p-1",children:(0,F.jsx)(sh.Z,{size:14})})]}),children:[(0,F.jsx)(dj,{filterTitle:"Status",options:X7,filters:u.status.filter,open:u.status.open,setFilter:function(e){return v("status",e)}}),(0,F.jsx)(dj,{filterTitle:"Collection",options:(null==w?void 0:w.map(function(e){return{value:e.id,label:e.title}}))||[],isLoading:P,hasPrev:x.offset>0,hasMore:x.offset+x.limit<(null!=S?S:0),onShowPrev:function(){return N(-1)},onShowNext:function(){return N(1)},filters:u.collection.filter,open:u.collection.open,setFilter:function(e){return v("collection",e)}}),(0,F.jsxs)("div",{className:"flex w-full flex-col pb-2",children:[(0,F.jsxs)("div",{className:"hover:bg-grey-5 mb-1 flex w-full cursor-pointer items-center rounded px-3 py-1.5",onClick:function(){v("tags",{open:!u.tags.open,filter:u.tags.filter})},children:[(0,F.jsxs)("div",{className:"border-grey-30 text-grey-0 rounded-base flex h-5 w-5 justify-center border ".concat(u.tags.open&&"bg-violet-60"),children:[(0,F.jsx)("span",{className:"self-center",children:u.tags.open&&(0,F.jsx)(rT,{size:16})}),(0,F.jsx)("input",{type:"checkbox",className:"hidden",id:"Tags",name:"Tags",value:"Tags",checked:u.tags.open})]}),(0,F.jsx)("span",{className:(0,ec.Z)("text-grey-90 ml-2",{"inter-small-semibold":u.tags.open,"inter-small-regular":!u.tags.open}),children:"Tags"})]}),u.tags.open&&(0,F.jsx)("div",{"data-tip":u.tags.invalidTagsMessage||"",className:"pl-6",children:(0,F.jsx)(S4,{className:"pt-0 pb-1",showLabel:!1,placeholder:"Spring, summer...",values:(u.tags.filter||[]).map(function(e){var t=(C||[]).find(function(t){return t.id===e});return t&&t.value}).filter(Boolean),onValidate:function(e){var t=(C||[]).find(function(t){return t.value.toLowerCase()===e.toLowerCase()});return t&&t.id},onChange:function(e){v("tags",{open:u.tags.open,filter:e})}})})]}),(0,F.jsx)(dC,{saveFilter:function(){s&&s(p,u)},name:p,setName:m})]}),i&&i.map(function(e){return(0,F.jsx)(dk,{onClick:function(){return h(e.value)},label:e.label,isActive:a===e.value,removable:!!e.removable,onRemove:function(){return y(e.value)}},e.value)})]})},eet=function(e){switch(e){case"proposed":return"warning";case"published":return"success";case"rejected":return"danger";default:return"default"}};function eer(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function een(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eer(e,t,r[t])})}return e}function eei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eeo(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eei(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eea(e,t){if(null==e)return{};var r,n,i=eel(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eel(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var ees=function(e){var t=e.size,r=void 0===t?"20px":t,n=e.color,i=void 0===n?"currentColor":n,o=eea(e,["size","color"]);return(0,F.jsxs)("svg",eeo(een({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M6.66669 5H17.5",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M6.66669 10H17.5",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M6.66669 15H17.5",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M2.5 5H2.50875",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M2.5 10H2.50875",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M2.5 15H2.50875",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function eec(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eeu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eec(e,t,r[t])})}return e}function eed(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eef(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eed(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eep(e,t){if(null==e)return{};var r,n,i=eem(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eem(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var eey=function(e){var t=e.size,r=void 0===t?"20px":t,n=e.color,i=void 0===n?"currentColor":n,o=eep(e,["size","color"]);return(0,F.jsxs)("svg",eef(eeu({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M8.5 3.5H3.5V8.5H8.5V3.5Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M16.5 3.5H11.5V8.5H16.5V3.5Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M16.5 11.5H11.5V16.5H16.5V11.5Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M8.5 11.5H3.5V16.5H8.5V11.5Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function eeh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eeb(e){if(Array.isArray(e))return e}function eev(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eeg(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eex(e,t){if(null==e)return{};var r,n,i=eej(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eej(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function eeO(e,t){return eeb(e)||eev(e,t)||eew(e,t)||eeg()}function eew(e,t){if(e){if("string"==typeof e)return eeh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eeh(e,t)}}var eeS=function(e,t){var r=new Date().toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric",second:"numeric"});return{newTitle:"".concat(e.replace(/ \(\d{1,}:\d{1,}:\d{1,}\)$/,"")," (").concat(r,")"),newHandle:"".concat(t.replace(/-copy(-\d{1,}){3}(-am|pm])*/g,""),"-copy-").concat(r.replace(/:/g,"-").toLowerCase())}},eeP=function(){var e=(0,V.useNavigate)(),t=(0,td.Z)(),r=(0,en.useAdminCreateProduct)().mutate;return function(n){var i=(0,iM.omit)(n,["id","created_at","updated_at","deleted_at","external_id","profile_id","profile","type_id","status"]),o=i.variants,a=i.options,l=i.type,s=i.tags,c=i.images,u=i.collection_id,d=i.collection,f=i.sales_channels,p=i.title,m=i.handle,y=Object.entries(eex(i,["variants","options","type","tags","images","collection_id","collection","sales_channels","title","handle"])).reduce(function(e,t){var r=eeO(t,2),n=r[0],i=r[1];return i&&(e[n]=i),e},{}),h={};if(a&&a.length&&a.forEach(function(e,t){y.options||(y.options=[]),h[e.id]=t,y.options.push({title:e.title})}),o&&o.length){var b=[];o.forEach(function(e){var t=(0,iM.omit)(e,["id","sku","created_at","updated_at","deleted_at","product","product_id","variant_rank","purchasable"]),r=t.prices,n=t.options,i=Object.entries(eex(t,["prices","options"])).reduce(function(e,t){var r=eeO(t,2),n=r[0],i=r[1];return i&&(e[n]=i),e},{});if(i.prices=[],r&&r.length&&(i.prices=r.map(function(e){return{amount:e.amount,currency_code:e.region_id?void 0:e.currency_code,region_id:e.region_id}})),n&&n.length){var o=n.sort(function(e,t){return h[e.option_id]-h[t.option_id]});i.options=o.map(function(e){return{value:e.value}})}b.push(i)}),y.variants=b}c&&c.length&&(y.images=c.map(function(e){return e.url})),d?y.collection_id=d.id:u&&(y.collection_id=u),f&&f.length&&(y.sales_channels=f.map(function(e){return{id:e.id}})),s&&s.length&&(y.tags=s.map(function(e){return{id:e.id,value:e.value}})),l&&(y.type={id:n.type.id,value:n.type.value}),y.status=x.DRAFT;var v=eeS(p,m||""),g=v.newTitle,j=v.newHandle;y.title=g,y.handle=j,r(y,{onSuccess:function(r){var n=r.product;e("/a/products/".concat(n.id)),t("Success","Created a new product","success")},onError:function(e){t("Error",(0,tf.e)(e),"error")}})}};function eeC(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function eeN(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eeC(o,n,i,a,l,"next",e)}function l(e){eeC(o,n,i,a,l,"throw",e)}a(void 0)})}}function eek(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var ee_=function(e){var t,r=(0,V.useNavigate)(),n=(0,td.Z)(),i=o2(),o=eeP(),a=(0,en.useAdminDeleteProduct)(null==e?void 0:e.id),l=(0,en.useAdminUpdateProduct)(null==e?void 0:e.id),s=(t=eeN(function(){return eek(this,function(e){switch(e.label){case 0:return[4,i({heading:"Delete Product",text:"Are you sure you want to delete this product?"})];case 1:return e.sent()&&a.mutate(),[2]}})}),function(){return t.apply(this,arguments)});return{getActions:function(){return[{label:"Edit",onClick:function(){return r("/a/products/".concat(e.id))},icon:(0,F.jsx)(eC,{size:20})},{label:"published"===e.status?"Unpublish":"Publish",onClick:function(){var t="published"===e.status?"draft":"published";l.mutate({status:t},{onSuccess:function(){n("Success","Successfully ".concat("published"===e.status?"unpublished":"published"," product"),"success")},onError:function(e){return n("Error",(0,tf.e)(e),"error")}})},icon:"published"===e.status?(0,F.jsx)(fj,{size:20}):(0,F.jsx)(fm,{size:20})},{label:"Duplicate",onClick:function(){return o(e)},icon:(0,F.jsx)(tW,{size:20})},{label:"Delete",variant:"danger",onClick:s,icon:(0,F.jsx)(eZ,{size:20})}]}}},eeA=function(e){var t=e.products,r=e.toggleListView;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"border-grey-20 pr-xlarge flex justify-end border-t border-b py-2.5",children:(0,F.jsxs)("div",{className:"inter-small-semibold text-grey-50 flex justify-self-end",children:[(0,F.jsx)("span",{onClick:r,className:(0,ec.Z)("hover:bg-grey-5 text-grey-40 cursor-pointer rounded p-0.5"),children:(0,F.jsx)(ees,{size:20})}),(0,F.jsx)("span",{className:(0,ec.Z)("hover:bg-grey-5 text-grey-90 cursor-pointer rounded p-0.5"),children:(0,F.jsx)(eey,{size:20})})]})}),(0,F.jsx)("div",{className:"grid grid-cols-6",children:null==t?void 0:t.map(function(e){return(0,F.jsx)(eeD,{product:e})})})]})},eeD=function(e){var t,r=e.product,n=ee_(r).getActions;return(0,F.jsx)("div",{className:"p-base rounded-rounded hover:bg-grey-5 group flex-col",children:(0,F.jsxs)("div",{className:"relative",children:[(0,F.jsx)("div",{className:(0,ec.Z)("rounded-base absolute top-2 right-2 inline-block"),children:(0,F.jsx)(eQ,{actions:n(),customTrigger:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-xlarge h-xlarge hidden-actions bg-grey-0 opacity-0 focus-within:opacity-100 group-hover:opacity-100",children:(0,F.jsx)(eF,{size:20})})})}),(0,F.jsxs)(V.Link,{to:"".concat(r.id),children:[r.thumbnail?(0,F.jsx)("img",{className:"rounded-rounded block min-h-[230px] object-cover",src:r.thumbnail}):(0,F.jsx)("div",{className:"bg-grey-5 rounded-rounded flex min-h-[230px] items-center justify-center",children:(0,F.jsx)(lY,{})}),(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"mt-base flex items-center justify-between",children:[(0,F.jsx)("p",{className:"inter-small-regular text-grey-90 line-clamp-1 mr-3",children:r.title}),(0,F.jsx)(nN.Z,{variant:eet(r.status),className:"shrink-0"})]}),(0,F.jsx)("span",{className:"inter-small-regular text-grey-50 line-clamp-1",children:null===(t=r.collection)||void 0===t?void 0:t.title})]})]})]})})},eeE=function(e){return function(t,r){return t.id===e?-1:r.id===e?1:t.name.localeCompare(r.name)}},eeZ=function(e){var t=e.setTileView,r=e.setListView,n=e.showList,i=function(e){switch(e){case"proposed":return(0,F.jsx)(nN.Z,{title:"Proposed",variant:"warning"});case"published":return(0,F.jsx)(nN.Z,{title:"Published",variant:"success"});case"rejected":return(0,F.jsx)(nN.Z,{title:"Rejected",variant:"danger"});case"draft":return(0,F.jsx)(nN.Z,{title:"Draft",variant:"default"});default:return(0,F.jsx)(nN.Z,{title:e,variant:"default"})}},o=(0,en.useAdminStore)().store,a=function(e){var t=(e||[]).sort(eeE((null==o?void 0:o.default_sales_channel_id)||"")).map(function(e){return e.name});return(0,F.jsx)(wH,{list:t})};return[(0,B.useMemo)(function(){return[{Header:"Name",accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.thumbnail?(0,F.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)(lY,{})}),t.title]})}},{Header:"Collection",accessor:"collection",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{children:(null==t?void 0:t.title)||"-"})}},{Header:"Status",accessor:"status",Cell:function(e){return i(e.cell.value)}},{Header:"Availability",accessor:"sales_channels",Cell:function(e){return a(e.cell.value)}},{Header:"Inventory",accessor:"variants",Cell:function(e){var t=e.cell.value;return(0,F.jsxs)("div",{children:[t.reduce(function(e,t){return e+t.inventory_quantity},0)," in stock for ",t.length," variant(s)"]})}},{accessor:"col-3",Header:(0,F.jsxs)("div",{className:"flex justify-end text-right",children:[(0,F.jsx)("span",{onClick:r,className:(0,ec.Z)("hover:bg-grey-5 cursor-pointer rounded p-0.5",{"text-grey-90":n,"text-grey-40":!n}),children:(0,F.jsx)(ees,{size:20})}),(0,F.jsx)("span",{onClick:t,className:(0,ec.Z)("hover:bg-grey-5 cursor-pointer rounded p-0.5",{"text-grey-90":!n,"text-grey-40":n}),children:(0,F.jsx)(eey,{size:20})})]})}]},[n])]};function eeI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eeT(e){if(Array.isArray(e))return e}function eeM(e){if(Array.isArray(e))return eeI(e)}function eeR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eeL(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function eez(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eeq(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eeF(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eeH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eeR(e,t,r[t])})}return e}function eeU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eeG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eeU(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eeV(e,t){return eeT(e)||eez(e,t)||eeW(e,t)||eeq()}function eeB(e){return eeM(e)||eeL(e)||eeW(e)||eeF()}function eeW(e,t){if(e){if("string"==typeof e)return eeI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eeI(e,t)}}var eeQ=["status","collection_id","payment_status","created_at","q","offset","limit"],eeY={drafts:{status:["draft"]},proposed:{status:["proposed"]}},ee$=function(e){return null===e?e:Object.entries(e).reduce(function(e,t){var r=eeV(t,2),n=r[0],i=r[1];return i.includes("|")?e[n]=u_(i):e[n]=i,e},{})},eeK=function(e,t){switch(t.type){case"setFilters":var r;return eeG(eeH({},e),{status:t.payload.status,collection:t.payload.collection,tags:t.payload.tags,date:t.payload.date,query:null==t?void 0:null===(r=t.payload)||void 0===r?void 0:r.query});case"setQuery":return eeG(eeH({},e),{offset:0,query:t.payload});case"setDate":var n=e.date;return eeG(eeH({},e),{date:n});case"setLimit":return eeG(eeH({},e),{limit:t.payload});case"setOffset":return eeG(eeH({},e),{offset:t.payload});case"reset":return t.payload;default:return e}},eeJ=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0},eeX=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return ee2(e,t)},[e,t]),n=(0,B.useMemo)(function(){var e=localStorage.getItem("products::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=eeV(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=eeV((0,B.useReducer)(eeK,r),2),o=i[0],a=i[1],l=eeV((0,B.useState)(n),2),s=l[0],c=l[1],u=function(){var e=eeH({},o.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=eeV(i.value,2),s=l[0],c=l[1];"query"===s?c&&"string"==typeof c&&(e.q=c):"offset"===s||"limit"===s?e[s]=c:c.open&&("date"===s?e[ee1[s]]=ee$(c.filter):e[ee1[s]]=c.filter)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:o,r={},n=!0,i=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=eeV(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:d.open&&(r[ee1[u]]=d.filter)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},f=function(){var e=d();return iL().stringify(e,{skipNulls:!0})},p=(0,B.useMemo)(function(){return u()},[o]),m=(0,B.useMemo)(function(){return d()},[o]),y=(0,B.useMemo)(function(){return f()},[o]),h=(0,B.useMemo)(function(){var e=(0,iM.omit)(m,["limit","offset"]),t=iL().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(eeY)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=eeV(a.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,y=!1,h=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=eeV(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&eeJ(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){y=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(y)throw h}}if(f)return u}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return null},[m,s]),b=(0,B.useMemo)(function(){return[{label:"Unpublished",value:"drafts"}].concat(eeB(s))},[s]);return eeG(eeH({},o),{filters:eeH({},o),removeTab:function(e){var t=localStorage.getItem("products::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("products::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(eeH({},t)),n=(0,iM.omit)(r,["limit","offset"]),i=iL().stringify(n,{skipNulls:!0}),o=localStorage.getItem("products::filters"),l=null;if(o&&(l=JSON.parse(o)),l)l[e]=i,localStorage.setItem("products::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("products::filters",JSON.stringify(s))}c(function(t){var r=t.findIndex(function(t){var r;return(null===(r=t.label)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()});return -1!==r&&t.splice(r,1),eeB(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),a({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in eeY)t=eeY[e];else{var r=s.find(function(t){return t.value===e});r&&(t=iL().parse(r.representationString))}if(t){var n=eeG(eeH({},o),{date:{open:!1,filter:null},status:{open:!1,filter:null},tags:{open:!1,filter:null},collection:{open:!1,filter:null}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=eeV(u.value,2),p=f[0],m=f[1];n[ee0[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}a({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:h,representationObject:m,representationString:y,queryObject:p,paginate:function(e){e>0?a({type:"setOffset",payload:o.offset+o.limit}):a({type:"setOffset",payload:Math.max(o.offset-o.limit,0)})},getQueryObject:u,getQueryString:function(){var e=u();return iL().stringify(e,{skipNulls:!0})},setQuery:function(e){a({type:"setQuery",payload:e})},setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},setDateFilter:function(e){a({type:"setDate",payload:e})},setLimit:function(e){a({type:"setLimit",payload:e})},setFulfillmentFilter:function(e){a({type:"setFulfillment",payload:e})},setPaymentFilter:function(e){a({type:"setPayment",payload:e})},setStatusFilter:function(e){a({type:"setStatus",payload:e})},reset:function(){a({type:"setFilters",payload:eeG(eeH({},o),{offset:0,status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null},query:null})})}})},ee0={status:"status",collection_id:"collection",tags:"tags",created_at:"date"},ee1={status:"status",collection:"collection_id",tags:"tags",date:"created_at"},ee2=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null},offset:0,limit:15,additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=eeV(l.value,2),u=c[0],d=c[1];if(eeQ.includes(u))switch(u){case"offset":"string"==typeof d&&(r.offset=parseInt(d));break;case"limit":"string"==typeof d&&(r.limit=parseInt(d));break;case"q":"string"==typeof d&&(r.query=d);break;case"status":("string"==typeof d||Array.isArray(d))&&(r.status={open:!0,filter:d});break;case"collection_id":("string"==typeof d||Array.isArray(d))&&(r.collection={open:!0,filter:d});break;case"payment_status":("string"==typeof d||Array.isArray(d))&&(r.payment={open:!0,filter:d});break;case"created_at":r.date={open:!0,filter:d}}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return r};function ee3(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ee5(e){if(Array.isArray(e))return e}function ee6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee4(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ee8(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ee7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ee6(e,t,r[t])})}return e}function ee9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ete(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee9(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ett(e,t){if(null==e)return{};var r,n,i=etr(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function etr(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function etn(e,t){return ee5(e)||ee4(e,t)||eti(e,t)||ee8()}function eti(e,t){if(e){if("string"==typeof e)return ee3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee3(e,t)}}var eto=15,eta=18,etl={fields:"id,title,thumbnail,status,handle,collection_id",expand:"variants,options,variants.prices,variants.options,collection,tags,type,images",is_giftcard:!1},ets=function(){var e=(0,V.useLocation)(),t=(0,o3.ye)().isFeatureEnabled,r=uc().trackNumberOfProducts,n=["sales_channel"];t("sales_channels")&&(etl.expand="variants,options,variants.prices,variants.options,collection,tags,type,images,sales_channels",n=[]);var i=eeX(e.search,etl),o=i.removeTab,a=i.setTab,l=i.saveTab,s=i.availableTabs,c=i.activeFilterTab,u=i.reset,d=i.paginate,f=i.setFilters,p=i.setLimit,m=i.filters,y=i.setQuery,h=i.queryObject,b=i.representationObject,v=parseInt(h.offset)||0,g=parseInt(h.limit),x=etn((0,B.useState)(h.query),2),j=x[0],O=x[1],w=etn((0,B.useState)(0),2),S=w[0],P=w[1],C=(0,en.useAdminProducts)(ee7({},h),{keepPreviousData:!0,onSuccess:function(e){return r({count:e.count})}}),N=C.products,k=C.isLoading,_=C.count;(0,B.useEffect)(function(){void 0!==_&&P(Math.ceil(_/g))},[_]);var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=iL().stringify(e);window.history.replaceState("/a/products","","".concat("?".concat(t)))},D=function(){(0,iM.isEmpty)(b)?A({offset:0,limit:eto}):A(b)};(0,B.useEffect)(function(){D()},[b]);var E=function(){p(eto),T(!0)},Z=etn(B.useState(!0),2),I=Z[0],T=Z[1],M=etn(eeZ({setTileView:function(){p(eta),T(!1)},setListView:E,showList:I}),1)[0],R=(0,rN.useTable)({columns:M,data:N||[],manualPagination:!0,initialState:{pageIndex:Math.floor(v/g),pageSize:g,hiddenColumns:n},pageCount:S,autoResetPage:!1},rN.usePagination),L=R.getTableProps,z=R.getTableBodyProps,q=R.headerGroups,H=R.rows,U=R.prepareRow,G=R.gotoPage,W=R.canPreviousPage,Q=R.canNextPage,Y=R.pageCount,$=R.nextPage,K=R.previousPage,J=R.state.pageIndex;return(0,B.useEffect)(function(){var e=setTimeout(function(){j?(y(j),G(0)):void 0!==j&&u()},400);return function(){return clearTimeout(e)}},[j]),(0,F.jsx)(nC,{numberOfRows:eto,hasPagination:!0,pagingState:{count:_,offset:v,pageSize:v+H.length,title:"Products",currentPage:J+1,pageCount:Y,nextPage:function(){Q&&(d(1),$())},prevPage:function(){W&&(d(-1),K())},hasNext:Q,hasPrev:W},isLoading:k,children:(0,F.jsx)(nf,ete(ee7({filteringOptions:(0,F.jsx)(eee,{filters:m,submitFilters:f,clearFilters:function(){u(),O("")},tabs:s,onTabClick:a,activeTab:c,onRemoveTab:o,onSaveTab:l}),enableSearch:!0,searchValue:j,handleSearch:O},L()),{children:I?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(nf.Head,{children:null==q?void 0:q.map(function(e){return(0,F.jsx)(nf.HeadRow,ete(ee7({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,ete(ee7({className:"min-w-[100px]"},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,ete(ee7({},z()),{children:H.map(function(e){return U(e),(0,F.jsx)(etc,ee7({row:e},e.getRowProps()))})}))]}):(0,F.jsx)(eeA,{products:N,toggleListView:E})}))})},etc=function(e){var t=e.row,r=ett(e,["row"]),n=t.original,i=ee_(n).getActions;return(0,F.jsx)(nf.Row,ete(ee7({color:"inherit",linkTo:"/a/products/".concat(n.id),actions:i()},r),{children:t.cells.map(function(e,t){return(0,F.jsx)(nf.Cell,ete(ee7({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))};function etu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function etd(e){if(Array.isArray(e))return e}function etf(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function etp(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){etf(o,n,i,a,l,"next",e)}function l(e){etf(o,n,i,a,l,"throw",e)}a(void 0)})}}function etm(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ety(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eth(e,t){return etd(e)||etm(e,t)||etb(e,t)||ety()}function etb(e,t){if(e){if("string"==typeof e)return etu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return etu(e,t)}}function etv(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function etg(e){var t=eth((0,B.useState)(),2),r=t[0],n=t[1],i=(null==r?void 0:r.status)==="created"||(null==r?void 0:r.status)==="confirmed",o=(0,en.useAdminBatchJob)(e,{enabled:!!e,refetchInterval:!!i&&2e3}).batch_job;return(0,B.useEffect)(function(){n(o)},[o]),r}function etx(e){var t,r,n,i,o,a=eth((0,B.useState)(),2),l=a[0],s=a[1],c=eth((0,B.useState)(),2),u=c[0],d=c[1],f=(0,td.Z)(),p=(0,DW.W)().resetInterval,m=(0,en.useAdminDeleteFile)().mutateAsync,y=(0,en.useAdminUploadProtectedFile)().mutateAsync,h=(0,en.useAdminCreateBatchJob)().mutateAsync,b=(0,en.useAdminCancelBatchJob)(u).mutateAsync,v=(0,en.useAdminConfirmBatchJob)(u).mutateAsync,g=etg(u),x=!!(null==g?void 0:g.result),j=(null==g?void 0:g.status)==="failed",O=x?g.result.advancement_count/g.result.count:void 0,w=(t=etp(function(){return etv(this,function(t){switch(t.label){case 0:return[4,v()];case 1:return t.sent(),f("Success","Import confirmed for processing. Progress info is available in the activity drawer.","success"),e.handleClose(),[2]}})}),function(){return t.apply(this,arguments)}),S=(r=etp(function(e){var t,r;return etv(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,6]),[4,y(e)];case 1:return s(t=n.sent().uploads[0].key),[4,h({dry_run:!0,context:{fileKey:t},type:"product-import"})];case 2:return r=n.sent(),p(),d(r.batch_job.id),[3,6];case 3:if(n.sent(),f("Error","Import failed.","error"),!l)return[3,5];return[4,m({file_key:l})];case 4:n.sent(),n.label=5;case 5:return[3,6];case 6:return[2]}})}),function(e){return r.apply(this,arguments)}),P=(n=etp(function(){return etv(this,function(e){if(l)try{m({file_key:l})}catch(e){f("Error","Failed to delete the CSV file","error")}try{b()}catch(e){f("Error","Failed to cancel the batch job","error")}return d(void 0),[2]})}),function(){return n.apply(this,arguments)});return(0,F.jsx)(BQ,{type:"products",status:j?"Error occurred while processing":x?void 0:l?"Preprocessing...":"Uploading...",progress:O,hasError:j,canImport:x,onSubmit:w,onClose:function(){e.handleClose(),!["confirmed","completed","canceled","failed"].includes(null==g?void 0:g.status)&&(l&&m({file_key:l}),u&&b())},summary:function(){if(g){var e,t,r=null===(t=g.result)||void 0===t?void 0:null===(e=t.stat_descriptors)||void 0===e?void 0:e[0].message.match(/\d+/g);if(r)return{toCreate:Number(r[0]),toUpdate:Number(r[1])}}}(),onFileRemove:P,processUpload:S,fileTitle:"products list",templateLink:"".concat("/app","/temp/product-import-template.csv"),errorMessage:null==g?void 0:null===(o=g.result)||void 0===o?void 0:null===(i=o.errors)||void 0===i?void 0:i.join(" \n"),description2Title:"Unsure about how to arrange your list?",description2Text:"Download the template below to ensure you are following the correct format.",description1Text:"Through imports you can add or update products. To update existing products/variants you must set an existing id in the Product/Variant id columns. If the value is unset a new record will be created. You will be asked for confirmation before we import products."})}function etj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function etO(e){if(Array.isArray(e))return e}function etw(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function etS(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function etP(e,t){return etO(e)||etw(e,t)||etC(e,t)||etS()}function etC(e,t){if(e){if("string"==typeof e)return etj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return etj(e,t)}}var etN=function(e){var t=e.form,r=t.control,n=t.path,i=etP((0,B.useState)(!1),2),o=i[0],a=i[1],l=(0,tR.Dq)({control:r,name:n("channels"),keyName:"fieldId"}),s=l.fields,c=l.replace,u=l.append,d=(0,s1.Z)(),f=d.state,p=d.toggle,m=(0,s1.Z)(),y=m.state,h=m.toggle,b=m.close,v=(0,en.useAdminStore)().store;return(0,B.useEffect)(function(){if((null==v?void 0:v.default_sales_channel)&&s){s.find(function(e){return e.id===v.default_sales_channel.id})||o||u(v.default_sales_channel);var e=s.filter(function(e,t){return s.findIndex(function(t){return t.id===e.id})!==t});e.length>0&&c(s.filter(function(t){return!e.includes(t)}))}},[v,u,s,c,o]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Sales channels"}),(0,F.jsx)(vw.Z,{checked:f,onCheckedChange:p})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mt-2xsmall",children:"This product will only be available in the default sales channel if left untouched."})]}),(0,F.jsxs)("div",{className:(0,ec.Z)({hidden:!f}),children:[(0,F.jsx)("div",{className:"mt-base",children:(0,F.jsx)(wU,{channels:s})}),(0,F.jsxs)(Y.Z,{variant:"secondary",className:"mt-large h-[40px] w-full",type:"button",onClick:h,children:[(0,F.jsx)(wF,{size:20}),(0,F.jsx)("span",{children:"Change availablity"})]})]})]}),(0,F.jsx)(Sm,{source:s,open:y,onClose:b,onSave:function(e){(null==v?void 0:v.default_sales_channel)&&!e.find(function(e){return e.id===v.default_sales_channel.id})&&a(!0),c(e)}})]})},etk=r(10651),et_=function(e){var t=e.form,r=e.options,n=e.onCreateOption,i=t.control,o=t.path,a=(0,tR.Dq)({control:t.control,name:o(),keyName:"fieldId"}).fields;return(0,F.jsx)("div",{className:"gap-large pb-2xsmall grid grid-cols-2",children:a.map(function(e,t){return(0,F.jsx)(tR.Qr,{control:i,name:o("".concat(t,".option")),render:function(t){var i=t.field,o=i.value,a=i.onChange,l=i.onBlur,s=i.ref;return(0,F.jsx)(vW,{ref:s,value:o,onChange:a,onBlur:l,label:e.title,placeholder:"Choose an option",required:!0,options:r.filter(function(t){return t.option_id===e.option_id})||[],onCreateOption:function(t){var r={option_id:e.option_id,value:t,label:t};n(e.option_id,t),a(r)}})}},e.fieldId)})})},etA=function(e){var t=e.form,r=e.options,n=e.onCreateOption;return(0,F.jsxs)(gj,{type:"multiple",defaultValue:["general"],children:[(0,F.jsx)(gj.Item,{title:"General",value:"general",required:!0,children:(0,F.jsxs)("div",{children:[(0,F.jsx)(Y2,{form:(0,tL.G)(t,"general")}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall mb-base flex items-center",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Options"}),(0,F.jsx)(rm.Z,{type:"info",content:"Options are used to define the color, size, etc. of the variant."})]}),(0,F.jsx)(et_,{form:(0,tL.G)(t,"options"),options:r,onCreateOption:n}),(0,F.jsx)(o9.Z,{errors:t.formState.errors,name:"options"})]})]})}),(0,F.jsx)(gj.Item,{title:"Pricing",value:"pricing",children:(0,F.jsx)($R,{form:(0,tL.G)(t,"prices")})}),(0,F.jsx)(gj.Item,{title:"Stock & Inventory",value:"stock",children:(0,F.jsx)($h,{form:(0,tL.G)(t,"stock")})}),(0,F.jsxs)(gj.Item,{title:"Shipping",value:"shipping",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Shipping information can be required depending on your shipping provider, and whether or not you are shipping internationally."}),(0,F.jsxs)("div",{className:"mt-large",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Dimensions"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure to calculate the most accurate shipping rates."}),(0,F.jsx)(w_,{form:(0,tL.G)(t,"dimensions")})]}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Customs"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 mb-large",children:"Configure if you are shipping internationally."}),(0,F.jsx)(wS,{form:(0,tL.G)(t,"customs")})]})]})]})},etD=function(e){var t=e.control,r=e.path,n=(0,tR.qo)({control:t,name:r("entries")}),i=(0,tR.qo)({control:t,name:r("options")}),o=(0,B.useMemo)(function(){var e=null==n?void 0:n.filter(function(e){return e.options.every(function(e){return null!==e.option})});return null==e?void 0:e.map(function(e){return{id:e._internal_id,value_combo:e.options.map(function(e){return e.option})}})},[n]);return{checkForDuplicate:function(e){var t=e.id,r=e.options;return null!=o&&!!o.length&&o.filter(function(e){return e.id!==t}).some(function(e){return(0,iM.isEqual)(e.value_combo.map(function(e){return null==e?void 0:e.value}),r.map(function(e){return null==e?void 0:e.value}))})},getOptions:function(){return null==i?void 0:i.map(function(e){return e.values.map(function(t){return{option_id:e.id,value:t,label:t}})}).flat()}}};function etE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function etZ(e){if(Array.isArray(e))return e}function etI(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function etT(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){etI(o,n,i,a,l,"next",e)}function l(e){etI(o,n,i,a,l,"throw",e)}a(void 0)})}}function etM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function etR(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function etL(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function etz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){etM(e,t,r[t])})}return e}function etq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function etF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):etq(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function etH(e,t){return etZ(e)||etR(e,t)||etU(e,t)||etL()}function etU(e,t){if(e){if("string"==typeof e)return etE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return etE(e,t)}}function etG(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var etV={CARD:"card"},etB=function(e){var t,r=e.id,n=e.source,i=e.index,o=e.save,a=e.remove,l=e.move,s=e.options,c=e.onCreateOption,u=e.productDimensions,d=e.productCustoms,f=(0,s1.Z)(),p=f.state,m=f.toggle,y=f.close,h=(0,tR.cI)({defaultValues:n}),b=h.handleSubmit,v=h.reset;(0,B.useEffect)(function(){v(n)},[n]);var g=function(){v(n),y()},x=b(function(e){if(!o(i,etF(etz({},e),{title:e.general.title?e.general.title:e.options.map(function(e){var t;return null===(t=e.option)||void 0===t?void 0:t.value}).join(" / ")}))){h.setError("options",{type:"deps",message:"A variant with these options already exists."});return}g()}),j=o2(),O=(t=etT(function(){return etG(this,function(e){switch(e.label){case 0:return[4,j({text:"Are you sure you want to delete this variant?",heading:"Delete Variant"})];case 1:return e.sent()&&a(i),[2]}})}),function(){return t.apply(this,arguments)}),w=(0,B.useRef)(null),S=etH((0,Kb.L)({accept:etV.CARD,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){if(w.current){var r,n=e.index;if(n!==i){var o=null===(r=w.current)||void 0===r?void 0:r.getBoundingClientRect(),a=(o.bottom-o.top)/2,s=t.getClientOffset().y-o.top;n<i&&s<a||n>i&&s>a||(l(n,i),e.index=i)}}}}),2),P=S[0].handlerId,C=S[1],N=etH((0,Kv.c)({type:etV.CARD,item:function(){return{id:r,index:i}},collect:function(e){return{isDragging:e.isDragging()}}}),3),k=N[0].isDragging,_=N[1],A=N[2];_(C(w));var D=(0,B.useContext)(pf.ej);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{ref:A,"data-handler-id":P,className:(0,ec.Z)("rounded-rounded py-xsmall pl-xsmall pr-base focus-within:bg-grey-5 hover:bg-grey-5 grid h-16 translate-y-0 translate-x-0 grid-cols-[32px_1fr_90px_100px_48px] transition-all",{"opacity-50":k}),children:[(0,F.jsx)("div",{ref:w,className:"text-grey-40 flex cursor-move items-center justify-center",children:(0,F.jsx)(KP,{size:20})}),(0,F.jsxs)("div",{className:"ml-base flex flex-col justify-center",children:[(0,F.jsxs)("p",{className:"inter-base-semibold",children:[n.general.title,n.stock.sku&&(0,F.jsxs)("span",{className:"inter-base-regular ml-2xsmall text-grey-50",children:["(",n.stock.sku,")"]})]}),n.stock.ean&&(0,F.jsx)("span",{className:"inter-base-regular text-grey-50",children:n.stock.ean})]}),(0,F.jsx)("div",{className:"mr-xlarge flex items-center justify-end",children:(0,F.jsx)("p",{children:n.stock.inventory_quantity||"-"})}),(0,F.jsx)("div",{className:"flex items-center justify-center",children:(0,F.jsx)(etW,{source:n,productCustoms:d,productDimensions:u})}),(0,F.jsx)("div",{className:"ml-xlarge pr-base flex items-center justify-center",children:(0,F.jsx)(eQ,{forceDropdown:!0,actions:[{label:"Edit",icon:(0,F.jsx)(eC,{size:20}),onClick:m},{label:"Delete",icon:(0,F.jsx)(eZ,{size:20}),onClick:O,variant:"danger"}],customTrigger:(0,F.jsx)(Y.Z,{variant:"ghost",className:"h-xlarge w-xlarge text-grey-50 flex items-center justify-center p-0",children:(0,F.jsx)(eF,{size:20})})})})]}),(0,F.jsx)(pf.ZP,{context:D,open:p,handleClose:g,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:g,children:(0,F.jsxs)("h1",{className:"inter-xlarge-semibold",children:["Edit Variant",n.general.title&&(0,F.jsxs)("span",{className:"inter-xlarge-regular ml-xsmall text-grey-50",children:["(",n.general.title,")"]})]})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(etA,{form:h,options:s,onCreateOption:c})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:g,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"button",onClick:x,children:"Save and close"})]})})]})})]})},etW=function(e){var t=e.source,r=e.productCustoms,n=e.productDimensions,i=t.prices,o=t.options,a=t.dimensions,l=t.customs,s=t.stock,c=s.barcode,u=s.upc,d=s.ean,f=s.sku,p=s.inventory_quantity,m=t.general.title;if(!o||!o.length)return(0,F.jsx)(rm.Z,{type:"error",content:(0,F.jsx)("div",{className:"gap-y-2xsmall flex flex-col text-rose-50",children:(0,F.jsx)("p",{children:"This variant has no options."})})});var y=o.filter(function(e){var t;return!(null===(t=e.option)||void 0===t?void 0:t.value)});if(null==y?void 0:y.length)return(0,F.jsx)(rm.Z,{type:"error",content:(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col text-rose-50",children:[(0,F.jsx)("p",{children:"You are missing options values for the following options:"}),(0,F.jsx)("ul",{className:"list-inside list-disc",children:y.map(function(e,t){return(0,F.jsx)("li",{children:e.title||"Option ".concat(t+1)},t)})})]})});var h=null==i?void 0:i.prices.some(function(e){return null!==e.amount}),b=Object.values(n).every(function(e){return!!e})||Object.values(a).every(function(e){return!!e}),v=Object.values(r).every(function(e){return!!e})||Object.values(l).every(function(e){return!!e}),g=!!c||!!u||!!d;return f&&v&&b&&g&&h?(0,F.jsx)(a9.Z,{content:m?"".concat(m," is valid"):"Variant is valid",side:"top",children:(0,F.jsx)(PC.Z,{size:20,className:"text-emerald-40"})}):(0,F.jsx)(rm.Z,{type:"warning",side:"right",content:(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col text-orange-50",children:[(0,F.jsx)("p",{children:"Your variant is createable, but it's missing some important fields:"}),(0,F.jsxs)("ul",{className:"list-inside list-disc",children:[!h&&(0,F.jsx)("li",{children:"Pricing"}),!b&&(0,F.jsx)("li",{children:"Dimensions"}),!v&&(0,F.jsx)("li",{children:"Customs"}),!p&&(0,F.jsx)("li",{children:"Inventory quantity"}),!f&&(0,F.jsx)("li",{children:"SKU"}),!g&&(0,F.jsx)("li",{children:"Barcode"})]})]})})};function etQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function etY(e){if(Array.isArray(e))return etQ(e)}function et$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function etK(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function etJ(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function etX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){et$(e,t,r[t])})}return e}function et0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function et1(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):et0(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function et2(e){return etY(e)||etK(e)||et3(e)||etJ()}function et3(e,t){if(e){if("string"==typeof e)return etQ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return etQ(e,t)}}var et5=function(e){var t=e.form,r=e.productCustoms,n=e.productDimensions,i=(0,B.useContext)(pf.ej),o=t.control,a=t.path,l=t.register,s=etD(t),c=s.checkForDuplicate,u=s.getOptions,d=(0,tR.Dq)({control:o,name:a("options"),keyName:"fieldId",shouldUnregister:!0}),f=d.fields,p=d.append,m=d.remove,y=d.update,h=(0,tR.Dq)({control:o,name:a("entries"),shouldUnregister:!0}),b=h.fields,v=h.append,g=h.remove,x=h.update,j=h.move,O=(0,tR.qo)({control:o,name:a("options")}),w=(0,tR.qo)({control:o,name:a("entries")}),S=(0,rk.N)(O,500);(0,B.useEffect)(function(){if(null==S?void 0:S.length){var e=S.reduce(function(e,t){return e[t.id]=t,e},{}),t=null==w?void 0:w.map(function(e,t){return{variant:e,index:t}});t&&t.forEach(function(t){var r=t.variant,n=t.index,i=r.options,o=[];i.forEach(function(t){var r,n=e[t.option_id];n&&(t.title=n.title,(null===(r=t.option)||void 0===r?void 0:r.value)&&n.values.includes(t.option.value)||(t.option=null),o.push(t))});var a=o.map(function(e){return e.option_id});Object.keys(e).filter(function(e){return!a.includes(e)}).forEach(function(t){var r=e[t];o.push({option_id:t,title:r.title,option:null})}),x(n,et1(etX({},r),{options:o.map(function(e){return{id:(0,etk.Z)(),option_id:e.option_id,title:e.title,value:e,option:e.option}})}))})}},[S]);var P=function(e){var t=O[e];m(e),t&&(null==w||w.forEach(function(e,r){var n=e.options.filter(function(e){return e.option_id!==t.id});x(r,et1(etX({},e),{options:n}))}))},C=function(e,t){return!c({id:t._internal_id,options:t.options.map(function(e){return e.option})})&&(x(e,t),!0)},N=(0,B.useMemo)(function(){return(null==O?void 0:O.length)>0&&O.some(function(e){return e.values.length>0})},[O]),k=(0,tR.cI)(),_=k.reset,A=k.handleSubmit,D=(0,s1.Z)(),E=D.state,Z=D.toggle,I=function(){_(et6(O)),Z()},T=A(function(e){if(c({id:e._internal_id,options:e.options.map(function(e){return e.option}).filter(function(e){return!!e})})){k.setError("options",{type:"deps",message:"A variant with these options already exists."});return}v(et1(etX({},e),{options:e.options,general:et1(etX({},e.general),{title:e.general.title?e.general.title:e.options.map(function(e){var t;return null===(t=e.option)||void 0===t?void 0:t.value}).join(" / ")})})),I()}),M=(0,B.useCallback)(function(e,t){j(e,t)},[]),R=function(e,t){var r=null==O?void 0:O.find(function(t){return t.id===e});r&&y(null==O?void 0:O.findIndex(function(t){return t.id===e}),et1(etX({},r),{values:et2(r.values).concat([t])}))};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Product options"}),(0,F.jsx)(rm.Z,{type:"info",content:"Options are used to define the color, size, etc. of the product."})]}),(0,F.jsxs)("div",{children:[f.length>0&&(0,F.jsxs)("div",{className:"mt-small",children:[(0,F.jsxs)("div",{className:"inter-small-semibold mb-small gap-x-xsmall text-grey-50 grid grid-cols-[230px_1fr_40px]",children:[(0,F.jsx)("span",{children:"Option title"}),(0,F.jsx)("span",{children:"Variations (comma separated)"})]}),(0,F.jsx)("div",{className:"gap-y-xsmall grid grid-cols-1",children:f.map(function(e,t){return(0,F.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-[230px_1fr_40px]",children:[(0,F.jsx)(ry.Z,etX({placeholder:"Color..."},l(a("options.".concat(t,".title"))))),(0,F.jsx)(tR.Qr,{control:o,name:a("options.".concat(t,".values")),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(S4,{onValidate:function(e){return r.includes(e)?null:e},invalidMessage:"already exists",showLabel:!1,values:r,onChange:n,placeholder:"Blue, Red, Black..."})}}),(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",className:"h-10",onClick:function(){return P(t)},children:(0,F.jsx)(eZ,{size:20,className:"text-grey-40"})})]},e.fieldId)})})]}),(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",className:"mt-base h-10 w-full",type:"button",onClick:function(){p({id:(0,etk.Z)(),title:"",values:[]})},children:[(0,F.jsx)(sh.Z,{size:20}),(0,F.jsx)("span",{children:"Add an option"})]}),(0,F.jsxs)("div",{className:"mt-xlarge",children:[(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsxs)("h3",{className:(0,ec.Z)("inter-base-semibold",{"opacity-50":!f.length}),children:["Product variants"," ",(0,F.jsxs)("span",{className:"inter-base-regular text-grey-50",children:["(",(null==b?void 0:b.length)||0,")"]})]}),!N&&(0,F.jsx)(rm.Z,{type:"info",content:"You must add at least one product option before you can begin adding product variants."})]}),(null==b?void 0:b.length)>0&&(0,F.jsxs)("div",{className:"mt-small",children:[(0,F.jsxs)("div",{className:"inter-small-semibold pr-base text-grey-50 grid grid-cols-[1fr_90px_100px_48px]",children:[(0,F.jsx)("p",{children:"Variant"}),(0,F.jsx)("div",{className:"mr-xlarge flex justify-end",children:(0,F.jsx)("p",{children:"Inventory"})})]}),(0,F.jsx)("div",{children:null==b?void 0:b.map(function(e,t){return(0,F.jsx)(etB,{id:e.id,source:e,index:t,save:C,remove:g,move:M,options:u(),onCreateOption:R,productDimensions:n,productCustoms:r},e.id)})})]}),(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",className:"mt-base h-10 w-full",type:"button",disabled:!N,onClick:I,children:[(0,F.jsx)(sh.Z,{size:20}),(0,F.jsx)("span",{children:"Add a variant"})]})]})]})]}),(0,F.jsx)(pf.ZP,{context:i,open:E,handleClose:I,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:I,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Create Variant"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(etA,{form:k,options:u(),onCreateOption:R})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:I,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"button",onClick:T,children:"Save and close"})]})})]})})]})},et6=function(e){return{_internal_id:(0,etk.Z)(),general:{title:null,material:null},prices:{prices:[]},stock:{manage_inventory:!0,allow_backorder:!1,sku:null,barcode:null,ean:null,upc:null,inventory_quantity:null},dimensions:{weight:null,length:null,width:null,height:null},customs:{hs_code:null,mid_code:null,origin_country:null},options:(null==e?void 0:e.map(function(e){return{title:e.title,option_id:e.id,option:null}}))||[]}};function et4(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function et8(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){et4(o,n,i,a,l,"next",e)}function l(e){et4(o,n,i,a,l,"throw",e)}a(void 0)})}}function et7(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var et9=function(e){var t,r=e.onClose,n=(0,tR.cI)({defaultValues:ert()}),i=(0,en.useAdminCreateProduct)().mutate,o=(0,V.useNavigate)(),a=(0,td.Z)(),l=(0,tR.qo)({control:n.control,name:"customs"}),s=(0,tR.qo)({control:n.control,name:"dimensions"}),c=n.handleSubmit,u=n.formState.isDirty,d=n.reset,f=function(){d(ert()),r()};(0,B.useEffect)(function(){d(ert())},[]);var p=(0,o3.ye)().isFeatureEnabled,m=function(){var e,t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return c((e=et8(function(e){var r,n,l,s,c,u,d,m,y,b,v,g,x,j;return et7(this,function(O){switch(O.label){case 0:if(c=new Map(e.variants.entries.map(function(e){return[e.options.map(function(e){var t=e.option;return(null==t?void 0:t.value)||""}).sort().join(","),e.stock.stock_location]})),u=ere(e,t,p("sales_channels")),!(null===(n=e.media)||void 0===n?void 0:null===(r=n.images)||void 0===r?void 0:r.length))return[3,5];d=[],O.label=1;case 1:return O.trys.push([1,3,,4]),[4,Pb(e.media.images)];case 2:return d=O.sent(),[3,4];case 3:return m=O.sent(),y="Something went wrong while trying to upload images.",500===m.response.status&&(y+=" You might not have a file service configured. Please contact your administrator"),a("Error",y,"error"),[2];case 4:b=d.map(function(e){return e.url}),u.images=b,O.label=5;case 5:if(!(null===(s=e.thumbnail)||void 0===s?void 0:null===(l=s.images)||void 0===l?void 0:l.length))return[3,10];v=[],O.label=6;case 6:return O.trys.push([6,8,,9]),[4,Pb(e.thumbnail.images)];case 7:return v=O.sent(),[3,9];case 8:return g=O.sent(),x="Something went wrong while trying to upload the thumbnail.",500===g.response.status&&(x+=" You might not have a file service configured. Please contact your administrator"),a("Error",x,"error"),[2];case 9:j=v.map(function(e){return e.url}),u.thumbnail=j[0],O.label=10;case 10:return i(u,{onSuccess:function(e){var t=e.product;h(t.variants,c).then(function(){f(),o("/a/products/".concat(t.id))})},onError:function(e){a("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(t){return e.apply(this,arguments)}))},y=(0,en.useMedusa)().client,h=(t=et8(function(e,t){return et7(this,function(r){switch(r.label){case 0:var n;return[4,Promise.all(e.map((n=et8(function(e){var r,n,i;return et7(this,function(o){switch(o.label){case 0:if(n=e.options.map(function(e){return(null==e?void 0:e.value)||""}).sort().join(","),!(null===(r=i=t.get(n))||void 0===r?void 0:r.length))return[2];return[4,y.admin.variants.getInventory(e.id)];case 1:var a;return[4,Promise.all(o.sent().variant.inventory.map((a=et8(function(e){return et7(this,function(t){var r;return[2,Promise.all(i.map((r=et8(function(t){return et7(this,function(r){return y.admin.inventoryItems.createLocationLevel(e.id,{location_id:t.location_id,stocked_quantity:t.stocked_quantity}),[2]})}),function(e){return r.apply(this,arguments)})))]})}),function(e){return a.apply(this,arguments)})).flat())];case 2:return[2,o.sent()]}})}),function(e){return n.apply(this,arguments)})).flat())];case 1:return r.sent(),[2]}})}),function(e,r){return t.apply(this,arguments)});return(0,F.jsx)("form",{className:"w-full",children:(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",type:"button",onClick:f,children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-small flex",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",type:"button",disabled:!u,onClick:m(!1),children:"Save as draft"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",type:"button",disabled:!u,onClick:m(!0),children:"Publish product"})]})]})}),(0,F.jsx)(c3.Main,{className:"no-scrollbar flex w-full justify-center py-16",children:(0,F.jsx)("div",{className:"small:w-4/5 medium:w-7/12 large:w-6/12 max-w-[700px]",children:(0,F.jsxs)(gj,{defaultValue:["general"],type:"multiple",children:[(0,F.jsxs)(gj.Item,{value:"general",title:"General information",required:!0,children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"To start selling, all you need is a name and a price."}),(0,F.jsxs)("div",{className:"mt-xlarge gap-y-xlarge flex flex-col",children:[(0,F.jsx)(SS,{form:(0,tL.G)(n,"general"),requireHandle:!1}),(0,F.jsx)(Sg,{form:(0,tL.G)(n,"discounted")})]})]}),(0,F.jsxs)(gj.Item,{title:"Organize",value:"organize",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"To start selling, all you need is a name and a price."}),(0,F.jsx)("div",{className:"mt-xlarge gap-y-xlarge pb-xsmall flex flex-col",children:(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Organize Product"}),(0,F.jsx)(S9,{form:(0,tL.G)(n,"organize")}),(0,F.jsx)(wI,{featureFlag:"sales_channels",children:(0,F.jsx)("div",{className:"mt-xlarge",children:(0,F.jsx)(etN,{form:(0,tL.G)(n,"salesChannels")})})})]})})]}),(0,F.jsxs)(gj.Item,{title:"Variants",value:"variants",children:[(0,F.jsxs)("p",{className:"inter-base-regular text-grey-50",children:["Add variations of this product.",(0,F.jsx)("br",{}),"Offer your customers different options for color, format, size, shape, etc."]}),(0,F.jsx)("div",{className:"mt-large",children:(0,F.jsx)(et5,{form:(0,tL.G)(n,"variants"),productCustoms:l,productDimensions:s})})]}),(0,F.jsxs)(gj.Item,{title:"Attributes",value:"attributes",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Used for shipping and customs purposes."}),(0,F.jsxs)("div",{className:"my-xlarge",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Dimensions"}),(0,F.jsx)(w_,{form:(0,tL.G)(n,"dimensions")})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Customs"}),(0,F.jsx)(wS,{form:(0,tL.G)(n,"customs")})]})]}),(0,F.jsxs)(gj.Item,{title:"Thumbnail",value:"thumbnail",children:[(0,F.jsx)("p",{className:"inter-base-regular mb-large text-grey-50",children:"Used to represent your product during checkout, social sharing and more."}),(0,F.jsx)(PG,{form:(0,tL.G)(n,"thumbnail")})]}),(0,F.jsxs)(gj.Item,{title:"Media",value:"media",children:[(0,F.jsx)("p",{className:"inter-base-regular mb-large text-grey-50",children:"Add images to your product."}),(0,F.jsx)(PN,{form:(0,tL.G)(n,"media")})]})]})})})]})})},ere=function(e){var t,r,n,i=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a={title:e.general.title,subtitle:e.general.subtitle||void 0,material:e.general.material||void 0,handle:e.general.handle,discountable:e.discounted.value,is_giftcard:!1,collection_id:null===(t=e.organize.collection)||void 0===t?void 0:t.value,description:e.general.description||void 0,height:e.dimensions.height||void 0,length:e.dimensions.length||void 0,weight:e.dimensions.weight||void 0,width:e.dimensions.width||void 0,hs_code:e.customs.hs_code||void 0,mid_code:e.customs.mid_code||void 0,type:e.organize.type?{value:e.organize.type.label,id:e.organize.type.value}:void 0,tags:e.organize.tags?e.organize.tags.map(function(e){return{value:e}}):void 0,categories:(null===(r=e.organize.categories)||void 0===r?void 0:r.length)?e.organize.categories.map(function(e){return{id:e}}):void 0,origin_country:(null===(n=e.customs.origin_country)||void 0===n?void 0:n.value)||void 0,options:e.variants.options.map(function(e){return{title:e.title}}),variants:e.variants.entries.map(function(e){var t;return{title:e.general.title,material:e.general.material||void 0,inventory_quantity:e.stock.inventory_quantity||0,prices:err(e.prices),allow_backorder:e.stock.allow_backorder,sku:e.stock.sku||void 0,barcode:e.stock.barcode||void 0,options:e.options.map(function(e){var t;return{value:null===(t=e.option)||void 0===t?void 0:t.value}}),ean:e.stock.ean||void 0,upc:e.stock.upc||void 0,height:e.dimensions.height||void 0,length:e.dimensions.length||void 0,weight:e.dimensions.weight||void 0,width:e.dimensions.width||void 0,hs_code:e.customs.hs_code||void 0,mid_code:e.customs.mid_code||void 0,origin_country:(null===(t=e.customs.origin_country)||void 0===t?void 0:t.value)||void 0,manage_inventory:e.stock.manage_inventory}}),status:i?x.PUBLISHED:x.DRAFT};return o&&(a.sales_channels=e.salesChannels.channels.map(function(e){return{id:e.id}})),a},ert=function(){return{general:{title:"",material:null,subtitle:null,description:null,handle:""},customs:{hs_code:null,mid_code:null,origin_country:null},dimensions:{height:null,length:null,weight:null,width:null},discounted:{value:!0},media:{images:[]},organize:{categories:null,collection:null,tags:null,type:null},salesChannels:{channels:[]},thumbnail:{images:[]},variants:{entries:[],options:[]}}},err=function(e){return e.prices.filter(function(e){return"number"==typeof e.amount}).map(function(e){return{amount:e.amount,currency_code:e.region_id?void 0:e.currency_code,region_id:e.region_id||void 0}})};function ern(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eri(e){if(Array.isArray(e))return e}function ero(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function era(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ero(o,n,i,a,l,"next",e)}function l(e){ero(o,n,i,a,l,"throw",e)}a(void 0)})}}function erl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ers(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function erc(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eru(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){erl(e,t,r[t])})}return e}function erd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function erf(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):erd(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function erp(e,t){return eri(e)||ers(e,t)||erm(e,t)||erc()}function erm(e,t){if(e){if("string"==typeof e)return ern(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ern(e,t)}}function ery(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var erh=["products","collections"],erb=function(){var e,t=(0,V.useNavigate)(),r=(0,V.useLocation)(),n=erp((0,B.useState)("products"),2),i=n[0],o=n[1],a=(0,s1.Z)(!r.search.includes("view=collections")&&r.search.includes("modal=new")),l=a.state,s=a.close,c=a.open,u=(0,DW.W)().resetInterval,d=(0,en.useAdminCreateBatchJob)(),f=(0,td.Z)(),p=(0,en.useAdminCreateCollection)(),m=(0,ig.e)().getWidgets;(0,B.useEffect)(function(){r.search.includes("?view=collections")&&o("collections")},[r]),(0,B.useEffect)(function(){r.search=""},[i]);var y=erp((0,B.useState)(!1),2),h=y[0],b=y[1],v=(0,s1.Z)(!r.search.includes("view=collections")&&r.search.includes("modal=export")),g=v.open,x=v.close,j=v.state,O=(0,s1.Z)(!r.search.includes("view=collections")&&r.search.includes("modal=import")),w=O.open,S=O.close,P=O.state,C=(e=era(function(e,r){var n;return ery(this,function(i){switch(i.label){case 0:return n=r.filter(function(e){return e.key&&e.value}).reduce(function(e,t){return erf(eru({},e),erl({},t.key,t.value))},{}),[4,p.mutateAsync(erf(eru({},e),{metadata:n}),{onSuccess:function(e){var r=e.collection;f("Success","Successfully created collection","success"),t("/a/collections/".concat(r.id)),b(!1)},onError:function(e){return f("Error",(0,tf.e)(e),"error")}})];case 1:return i.sent(),[2]}})}),function(t,r){return e.apply(this,arguments)});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"gap-y-xsmall flex h-full grow flex-col",children:[m("product.list.before").map(function(e,t){return(0,F.jsx)(eg.Z,{injectionZone:"product.list.before",widget:e,entity:void 0},t)}),(0,F.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,F.jsx)(tI,{forceDropdown:!1,customActionable:"products"===i?(0,F.jsxs)("div",{className:"flex space-x-2",children:[(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return w()},children:[(0,F.jsx)(Bu,{size:20}),"Import Products"]}),(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return g()},children:[(0,F.jsx)(AX,{size:20}),"Export Products"]}),(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",onClick:c,children:[(0,F.jsx)(sh.Z,{size:20}),"New Product"]})]}):(0,F.jsx)("div",{className:"flex space-x-2",children:(0,F.jsxs)(Y.Z,{variant:"secondary",size:"small",onClick:function(){return b(!h)},children:[(0,F.jsx)(sh.Z,{size:20}),"New Collection"]})}),customHeader:(0,F.jsx)(s3,{views:erh,setActiveView:o,activeView:i}),className:"h-fit",children:(0,F.jsx)(function(){return"products"===i?(0,F.jsx)(ets,{}):(0,F.jsx)(X$,{})},{})}),(0,F.jsx)(ev,{})]}),m("product.list.after").map(function(e,t){return(0,F.jsx)(eg.Z,{injectionZone:"product.list.after",widget:e,entity:void 0},t)})]}),h&&(0,F.jsx)(rC,{onClose:function(){return b(!h)},onSubmit:C}),j&&(0,F.jsx)(A0,{title:"Export Products",handleClose:function(){return x()},onSubmit:function(){d.mutate({type:"product-export",context:{},dry_run:!1},{onSuccess:function(){u(),f("Success","Successfully initiated export","success")},onError:function(e){f("Error",(0,tf.e)(e),"error")}}),x()},loading:d.isLoading}),P&&(0,F.jsx)(etx,{handleClose:function(){return S()}}),(0,F.jsx)(cX,{isVisible:l,isFullScreen:!0,children:(0,F.jsx)(et9,{onClose:s})})]})},erv=function(){var e=(0,(0,W.V)().getNestedRoutes)("/products");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(erb,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(XZ,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/products"})},t)})]})};function erg(e){var t=(0,iM.sortBy)(e.channels,"name");if(!t.length)return null;var r=t.map(function(e){return e.name}).join(", "),n=t.slice(0,e.showCount).map(function(e){return e.name}).join(", "),i=t.length-e.showCount;return(0,F.jsxs)("div",{title:r,className:"text-small",children:[(0,F.jsx)("span",{children:n}),i>0&&(0,F.jsxs)("span",{className:"text-grey-50",children:[" + ",i," more"]})]})}function erx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function erj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){erx(e,t,r[t])})}return e}function erO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function erw(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):erO(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var erS=12,erP=[{width:30,id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,F.jsx)("span",{className:"flex w-[30px] justify-center",children:(0,F.jsx)(rF,erj({},t()))})},Cell:function(e){var t=e.row;return(0,F.jsx)("span",{onClick:function(e){return e.stopPropagation()},className:"flex w-[30px] justify-center",children:(0,F.jsx)(rF,erj({},t.getToggleRowSelectedProps()))})}},{Header:"Title",accessor:"name",maxWidth:160,width:160,Cell:function(e){var t=e.row;return(0,F.jsx)("span",{title:t.original.name,className:"block max-w-[160px] truncate",children:t.original.name})}},{Header:"Description",accessor:"description",Cell:function(e){var t=e.row;return(0,F.jsx)("span",{title:t.original.description,className:"block max-w-[200px] truncate",children:t.original.description})}}],erC=(0,B.forwardRef)(function(e,t){var r,n=e.query,i=e.offset,o=e.data,a=e.isLoading,l=e.count,s=e.setOffset,c=e.selectedChannels,u=e.setSelectedChannels,d={data:o,columns:erP,autoResetPage:!1,manualPagination:!0,autoResetSelectedRows:!1,initialState:{pageIndex:Math.floor(i/erS),pageSize:erS,selectedRowIds:Object.keys(c).reduce(function(e,t){return e[t]=!0,e},{})},pageCount:Math.ceil(l/erS),getRowId:function(e){return e.id}},f=(0,rN.useTable)(d,rN.usePagination,rN.useRowSelect);return(0,B.useEffect)(function(){u(function(e){var t={};return Object.keys(f.state.selectedRowIds).forEach(function(r){t[r]=e[r]||o.find(function(e){return e.id===r})}),t})},[f.state.selectedRowIds,o]),(0,B.useEffect)(function(){s(0),f.gotoPage(0)},[n]),(0,B.useImperativeHandle)(t,function(){return{toggleAllRowsSelected:f.toggleAllRowsSelected,toggleRowSelected:f.toggleRowSelected}}),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(nC,{hasPagination:!0,numberOfRows:erS,isLoading:a,children:[(0,F.jsxs)(nf,erw(erj({},f.getTableProps()),{children:[(0,F.jsx)(nf.Head,{children:null===(r=f.headerGroups)||void 0===r?void 0:r.map(function(e){return(0,F.jsx)(nf.HeadRow,erw(erj({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,erw(erj({},e.getHeaderProps({style:{width:e.width,maxWidth:e.maxWidth}})),{children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,erw(erj({},f.getTableBodyProps()),{children:f.rows.map(function(e){return f.prepareRow(e),(0,F.jsx)(nf.Row,erw(erj({color:"inherit",onClick:function(){return f.toggleRowSelected(e.id)},className:(0,ec.Z)("cursor-pointer",{"bg-grey-5":e.isSelected})},e.getRowProps()),{children:e.cells.map(function(e){return(0,F.jsx)(nf.Cell,erw(erj({},e.getCellProps({style:{width:e.column.width,maxWidth:e.column.maxWidth}})),{children:e.render("Cell")}))})}))})}))]})),!a&&!(null==o?void 0:o.length)&&(0,F.jsx)("div",{className:"absolute flex h-full w-full items-center justify-center",children:(0,F.jsx)("span",{className:"text-sma text-grey-40",children:"No added sales channels"})})]}),(0,F.jsx)("div",{className:"absolute w-[506px]",style:{bottom:100},children:(0,F.jsx)(nS,{pagingState:{count:l,offset:i,title:"Sales Channels",pageSize:i+f.rows.length,currentPage:f.state.pageIndex+1,pageCount:f.pageCount,nextPage:function(){f.canNextPage&&(s(i+erS),f.nextPage())},prevPage:function(){f.canPreviousPage&&(s(Math.max(i-erS,0)),f.previousPage())},hasNext:f.canNextPage,hasPrev:f.canPreviousPage},isLoading:a})})]})});function erN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function erk(e){if(Array.isArray(e))return e}function er_(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function erA(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function erD(e,t){return erk(e)||er_(e,t)||erE(e,t)||erA()}function erE(e,t){if(e){if("string"==typeof e)return erN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return erN(e,t)}}var erZ=12,erI=function(e,t){return e=Object.keys(e),t=Object.keys(t),e.length===t.length&&e.every(function(e){return t.includes(e)})};function erT(e){var t=(0,B.useRef)(),r=e.isVisible,n=e.close,i=e.selectedChannels,o=e.setSelectedChannels,a=erD((0,B.useState)({}),2),l=a[0],s=a[1],c=erD((0,B.useState)(0),2),u=c[0],d=c[1],f=erD((0,B.useState)(""),2),p=f[0],m=f[1],y=(0,en.useAdminSalesChannels)({q:p,limit:erZ,offset:u},{keepPreviousData:!0}),h=y.sales_channels,b=y.isLoading,v=y.count,g=function(){d(0),m(""),s(i),Object.values(i).map(function(e){var r;return null===(r=t.current)||void 0===r?void 0:r.toggleRowSelected(e.id,!0)}),n()};return(0,F.jsx)(kM,{close:g,isVisible:!!r,children:(0,F.jsxs)("div",{className:"flex h-full flex-col justify-between p-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-large-semibold flex items-center gap-2 text-xl text-gray-900",children:"Add sales channels"}),(0,F.jsx)(Y.Z,{variant:"secondary",className:"h-8 w-8 p-2",onClick:e.close,children:(0,F.jsx)(c2.Z,{size:20,className:"text-grey-50"})})]}),(0,F.jsxs)("div",{className:"flex-grow",children:[(0,F.jsx)("div",{className:"my-6",children:(0,F.jsx)(ry.Z,{small:!0,name:"name",type:"string",value:p,className:"h-[32px]",placeholder:"Find channels",prefix:(0,F.jsx)(r7.Z,{size:16}),onChange:function(e){return m(e.target.value)}})}),(0,F.jsx)(erC,{ref:t,query:p,data:void 0===h?[]:h,offset:u,count:v||0,setOffset:d,isLoading:b,selectedChannels:l,setSelectedChannels:s})]}),(0,F.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,F.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:g,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:function(){o(l),d(0),m(""),n()},disabled:erI(l,i),children:"Save and close"})]})]})})}function erM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function erR(e){if(Array.isArray(e))return e}function erL(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function erz(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){erL(o,n,i,a,l,"next",e)}function l(e){erL(o,n,i,a,l,"throw",e)}a(void 0)})}}function erq(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function erF(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function erH(e,t){return erR(e)||erq(e,t)||erU(e,t)||erF()}function erU(e,t){if(e){if("string"==typeof e)return erM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return erM(e,t)}}function erG(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function erV(e){var t,r,n=e.close,i=e.selectedKey,o=(0,td.Z)(),a=erH((0,B.useState)(null==i?void 0:i.title),2),l=a[0],s=a[1],c=(0,en.useAdminUpdatePublishableApiKey)(null==i?void 0:i.id).mutateAsync;(0,B.useEffect)(function(){i&&s(i.title)},[i]);var u=(t=erz(function(){return erG(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,c({title:l})];case 1:return e.sent(),n(),o("Success","Updated the API key","success"),[3,3];case 2:return e.sent(),o("Error","Failed to update the API key","error"),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)});return(0,F.jsx)(kM,{close:n,isVisible:!!i,children:(0,F.jsxs)("div",{className:"flex h-full flex-col justify-between p-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-large-semibold text-xl text-gray-900",children:"Edit API key details"}),(0,F.jsx)(Y.Z,{variant:"ghost",onClick:n,children:(0,F.jsx)(c2.Z,{size:20,className:"text-grey-40"})})]}),(0,F.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,F.jsx)("div",{className:"flex-grow",children:(0,F.jsx)(ry.Z,{label:"Title",type:"string",name:"name",value:l,placeholder:"Name your key",onChange:function(e){return s(e.target.value)}})}),(0,F.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,F.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:n,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:u,disabled:l===(null===(r=e.selectedKey)||void 0===r?void 0:r.title),children:"Save and close"})]})]})})}function erB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function erW(e){if(Array.isArray(e))return e}function erQ(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function erY(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function er$(e,t){return erW(e)||erQ(e,t)||erK(e,t)||erY()}function erK(e,t){if(e){if("string"==typeof e)return erB(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return erB(e,t)}}var erJ=12;function erX(e){var t=(0,B.useRef)(),r=er$((0,B.useState)({}),2),n=r[0],i=r[1],o=(0,td.Z)(),a=er$((0,B.useState)(0),2),l=a[0],s=a[1],c=er$((0,B.useState)(""),2),u=c[0],d=c[1],f=(0,en.useAdminSalesChannels)({q:u,limit:erJ,offset:l},{keepPreviousData:!0,enabled:!!e.keyId}),p=f.sales_channels,m=f.isLoading,y=f.count,h=(0,en.useAdminAddPublishableKeySalesChannelsBatch)(e.keyId).mutateAsync;(0,B.useEffect)(function(){if(!e.isVisible){var r;s(0),d(""),i({}),null===(r=t.current)||void 0===r||r.toggleAllRowsSelected(!1)}},[e.isVisible]);var b=function(e){return function(){h({sales_channel_ids:Object.keys(n).map(function(e){return{id:e}})}).then(function(){o("Success","Sales channels added to the scope","success")}).catch(function(){o("Error","Error occurred while adding sales channels to the scope of the key","success")}).finally(e)}};return(0,F.jsxs)("div",{className:"flex h-full flex-col justify-between p-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("h3",{className:"inter-large-semibold flex items-center gap-2 text-xl text-gray-900",children:[(0,F.jsx)(Y.Z,{variant:"secondary",className:"text-grey-50 h-8 w-8 p-2",onClick:e.goBack,children:(0,F.jsx)(SP.Z,{size:18})}),"Add sales channels"]}),(0,F.jsx)(Y.Z,{variant:"secondary",className:"h-8 w-8 p-2",onClick:e.close,children:(0,F.jsx)(c2.Z,{size:20,className:"text-grey-50"})})]}),(0,F.jsxs)("div",{className:"flex-grow",children:[(0,F.jsx)("div",{className:"my-6",children:(0,F.jsx)(ry.Z,{small:!0,name:"name",type:"string",value:u,className:"h-[32px]",placeholder:"Find channels",prefix:(0,F.jsx)(r7.Z,{size:16}),onChange:function(e){return d(e.target.value)}})}),(0,F.jsx)(erC,{ref:t,query:u,data:void 0===p?[]:p,offset:l,count:y||0,setOffset:s,isLoading:m,selectedChannels:n,setSelectedChannels:i})]}),(0,F.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,F.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:e.close,children:"Cancel"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:b(e.goBack),disabled:!Object.keys(n).length,children:"Add and go back"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:b(e.close),disabled:!Object.keys(n).length,children:"Add and close"})]})]})}function er0(e){var t=e.close,r=(0,B.useRef)(),n=er$((0,B.useState)({}),2),i=n[0],o=n[1],a=Object.keys(i).length,l=(0,td.Z)(),s=er$((0,B.useState)(0),2),c=s[0],u=s[1],d=er$((0,B.useState)(""),2),f=d[0],p=d[1],m=(0,en.useAdminPublishableApiKeySalesChannels)(e.keyId,{q:f},{keepPreviousData:!0,enabled:!!e.keyId}),y=m.sales_channels,h=void 0===y?[]:y,b=m.isLoading,v=(0,en.useAdminRemovePublishableKeySalesChannelsBatch)(e.keyId).mutateAsync;(0,B.useEffect)(function(){if(!e.isVisible){var t;u(0),p(""),o({}),null===(t=r.current)||void 0===t||t.toggleAllRowsSelected(!1)}},[e.isVisible]);var g=(0,B.useMemo)(function(){return null==h?void 0:h.slice(c,c+erJ)},[h,c]);return(0,F.jsxs)("div",{className:"flex h-full flex-col justify-between p-6",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-large-semibold flex items-center gap-2 text-xl text-gray-900",children:"Edit sales channels"}),(0,F.jsx)(Y.Z,{variant:"secondary",className:"h-8 w-8 p-2",onClick:e.close,children:(0,F.jsx)(c2.Z,{size:20,className:"text-grey-50"})})]}),(0,F.jsxs)("div",{className:"flex-grow",children:[(0,F.jsxs)("div",{className:"my-6 flex items-center justify-between gap-2",children:[(0,F.jsx)(ry.Z,{small:!0,name:"name",type:"string",value:f,className:"h-[32px]",placeholder:"Find channels",prefix:(0,F.jsx)(r7.Z,{size:14}),onChange:function(e){return p(e.target.value)}}),a?(0,F.jsxs)("div",{className:"flex h-[32px] items-center justify-between gap-2",children:[(0,F.jsxs)("span",{className:"text-small text-grey-50 whitespace-nowrap px-2",children:[a," selected"]}),(0,F.jsx)(Y.Z,{size:"small",className:"h-[32px] flex-shrink-0",variant:"secondary",onClick:function(){var e;o({}),null===(e=r.current)||void 0===e||e.toggleAllRowsSelected(!1)},children:"Deselect"}),(0,F.jsx)(Y.Z,{size:"small",className:"h-[32px] flex-shrink-0 text-rose-500",variant:"secondary",onClick:function(){v({sales_channel_ids:Object.keys(i).map(function(e){return{id:e}})}).then(function(){var e;l("Success","Sales channels removed from the scope","success"),o({}),null===(e=r.current)||void 0===e||e.toggleAllRowsSelected(!1)}).catch(function(){l("Error","Error occurred while removing sales channels from the scope of the key","success")})},children:"Remove"})]}):(0,F.jsx)(Y.Z,{size:"small",className:"h-[32px] flex-shrink-0",variant:"secondary",onClick:e.goAdd,children:"Add channels"})]}),(0,F.jsx)(erC,{ref:r,query:f,data:g,offset:c,count:h.length||0,setOffset:u,isLoading:b,selectedChannels:i,setSelectedChannels:o})]}),(0,F.jsx)("div",{className:"block h-[1px] bg-gray-200",style:{margin:"24px -24px"}}),(0,F.jsx)("div",{className:"flex justify-end gap-2",children:(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",onClick:t,children:"Close"})})]})}function er1(e){var t=e.keyId,r=e.close,n=!!t,i=er$((0,B.useState)(!1),2),o=i[0],a=i[1];return(0,B.useEffect)(function(){n||a(!1)},[n]),(0,F.jsx)(kM,{close:r,isVisible:!!n,children:(0,F.jsxs)(kZ.E.div,{style:{width:1120,display:"flex",height:"100%"},animate:{x:o?-560:0},transition:{ease:"easeInOut"},children:[(0,F.jsx)(kZ.E.div,{style:{height:"100%",width:560},animate:{opacity:o?0:1},children:(0,F.jsx)(er0,{close:r,keyId:t,isVisible:n&&!o,goAdd:function(){return a(!0)}})}),(0,F.jsx)(kZ.E.div,{style:{height:"100%",width:560},animate:{opacity:o?1:0},children:(0,F.jsx)(erX,{close:r,keyId:t,isVisible:n&&o,goBack:function(){return a(!1)}})})]})})}function er2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function er3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){er2(e,t,r[t])})}return e}function er5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function er6(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):er5(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function er4(e,t){if(null==e)return{};var r,n,i=er8(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function er8(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var er7=function(e){var t=e.size,r=void 0===t?"20px":t,n=(e.color,er4(e,["size","color"]));return(0,F.jsxs)("svg",er6(er3({width:r,height:r,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),{children:[(0,F.jsx)("path",{d:"M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M5 5L15 15",stroke:"#6B7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))};function er9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ene(e){if(Array.isArray(e))return e}function ent(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function enr(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ent(o,n,i,a,l,"next",e)}function l(e){ent(o,n,i,a,l,"throw",e)}a(void 0)})}}function enn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eni(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eno(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ena(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){enn(e,t,r[t])})}return e}function enl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ens(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):enl(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function enc(e,t){return ene(e)||eni(e,t)||enu(e,t)||eno()}function enu(e,t){if(e){if("string"==typeof e)return er9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return er9(e,t)}}function end(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var enf=12,enp=[{accessor:"title",Header:(0,F.jsx)("div",{className:"text-small font-semibold text-gray-500",children:"Name"}),Cell:function(e){var t=e.row.original;return(0,F.jsx)("span",{className:"text-gray-900",children:t.title})}},{accessor:"id",Header:(0,F.jsx)("div",{className:"text-small font-semibold text-gray-500",children:"Token"}),Cell:function(e){var t=e.row.original,r=enc((0,B.useState)(!1),2),n=r[0],i=r[1];return(0,F.jsx)(a9.Z,{delayDuration:300,onMouseLeave:(0,iM.debounce)(function(){return i(!1)},1e3),content:n?(0,F.jsxs)("span",{className:"flex flex-row items-center justify-between gap-1",children:[(0,F.jsx)(rT,{size:16,className:"text-green-700"})," done"]}):(0,F.jsx)("span",{onClick:function(){i(!0),navigator.clipboard.writeText(t.id)},className:"cursor-pointer",children:"Copy to clipboard"}),children:(0,F.jsx)("span",{className:"text-gray-500",children:t.id})})}},{accessor:"created_at",Header:(0,F.jsx)("div",{className:"text-small font-semibold text-gray-500",children:"Created"}),Cell:function(e){var t=e.row.original;return(0,F.jsx)("span",{className:"text-gray-900",children:iW()(t.created_at).format("MMM Do YYYY, h:mm:ss")})}},{accessor:"revoked_at",Header:(0,F.jsx)("div",{className:"text-small font-semibold text-gray-500",children:"Status"}),Cell:function(e){var t=e.row.original;return(0,F.jsx)("span",{className:"min-w-[50px] text-gray-900",children:t.revoked_at?(0,F.jsx)(nN.Z,{title:"Revoked",variant:"danger"}):(0,F.jsx)(nN.Z,{title:"Live",variant:"success"})})}}];function enm(e){var t=e.row,r=e.isRevoked,n=e.showChannelsModal,i=e.showDetails,o=t.original.id,a=enc((0,B.useState)(!1),2),l=a[0],s=a[1],c=enc((0,B.useState)(!1),2),u=c[0],d=c[1],f=(0,en.useAdminRevokePublishableApiKey)(o).mutateAsync,p=(0,en.useAdminDeletePublishableApiKey)(o).mutateAsync,m=[{label:"Edit API key details",onClick:i,icon:(0,F.jsx)(eC,{size:16})},{label:"Edit sales channels",onClick:n,icon:(0,F.jsx)(eC,{size:16})},{label:"Copy token",onClick:function(){return navigator.clipboard.writeText(o)},icon:(0,F.jsx)(tn,{size:16})},{label:"Revoke token",onClick:function(){return d(!0)},icon:(0,F.jsx)(er7,{size:16}),disabled:r},{label:"Delete API key",onClick:function(){return s(!0)},icon:(0,F.jsx)(eZ,{size:16}),variant:"danger"}];return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(nf.Row,ens(ena({},e.row.getRowProps()),{actions:m,children:e.row.cells.map(function(e){return(0,F.jsx)(nf.Cell,ens(ena({},e.getCellProps()),{children:e.render("Cell")}))})})),l&&(0,F.jsx)(tx,{handleClose:function(){return s(!1)},onDelete:enr(function(){return end(this,function(e){return[2,p()]})}),confirmText:"Yes, delete",successText:"API key deleted",text:"Are you sure you want to delete this public key?",heading:"Delete key"}),u&&(0,F.jsx)(tx,{handleClose:function(){return d(!1)},onDelete:enr(function(){return end(this,function(e){return[2,f()]})}),confirmText:"Yes, revoke",successText:"API key revoked",text:"Are you sure you want to revoke this public key?",heading:"Revoke key"})]})}function eny(e){var t=enc((0,B.useState)(0),2),r=t[0],n=t[1],i=enc((0,B.useState)(0),2),o=i[0],a=i[1],l=enc((0,B.useState)(0),2),s=l[0],c=l[1],u=(0,en.useAdminPublishableApiKeys)({offset:r,limit:enf}),d=u.publishable_api_keys,f=u.count,p=u.isLoading,m=(0,rN.useTable)({columns:enp,data:d||[],manualPagination:!0,initialState:{pageIndex:s,pageSize:enf,selectedRowIds:{}},pageCount:o,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},rN.usePagination);return(0,B.useEffect)(function(){void 0!==f&&a(Math.ceil(f/enf))},[f]),(0,F.jsxs)(nC,{hasPagination:!0,isLoading:p,numberOfRows:enf,pagingState:{count:f,offset:r,title:"API Keys",pageCount:m.pageCount,pageSize:r+m.rows.length,currentPage:m.state.pageIndex+1,nextPage:function(){m.canNextPage&&(n(function(e){return e+m.state.pageSize}),c(function(e){return e+1}),m.nextPage())},prevPage:function(){m.canPreviousPage&&(n(function(e){return Math.max(e-m.state.pageSize,0)}),c(function(e){return e-1}),m.previousPage())},hasNext:m.canNextPage,hasPrev:m.canPreviousPage},children:[(0,F.jsxs)(nf,ens(ena({},m.getTableProps()),{children:[m.headerGroups.map(function(e){return(0,F.jsx)(nf.HeadRow,ens(ena({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,ens(ena({},e.getHeaderProps()),{children:e.render("Header")}))})}))}),(0,F.jsx)(nf.Body,ens(ena({},m.getTableBodyProps()),{children:m.rows.map(function(t){return m.prepareRow(t),(0,F.jsx)(enm,{row:t,showDetails:function(){return e.showDetailsModal(t.original)},showChannelsModal:function(){return e.showChannelsModal(t.original)},isRevoked:!!t.original.revoked_at},t.id)})}))]})),!(null==d?void 0:d.length)&&!p&&(0,F.jsx)("div",{className:"flex h-[480px] w-[100%] items-center justify-center",children:(0,F.jsx)("span",{className:"text-gray-400",children:"No keys yet, use the above button to create your first publishable key"})})]})}function enh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function enb(e){if(Array.isArray(e))return e}function env(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function eng(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){env(o,n,i,a,l,"next",e)}function l(e){env(o,n,i,a,l,"throw",e)}a(void 0)})}}function enx(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function enj(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function enO(e,t){return enb(e)||enx(e,t)||enw(e,t)||enj()}function enw(e,t){if(e){if("string"==typeof e)return enh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return enh(e,t)}}function enS(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function enP(e){var t=e.setSelectedChannels,r=e.selectedChannels,n=enO((0,s1.Z)(!1),3),i=n[0],o=n[1],a=n[2],l=!!Object.keys(r).length;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h5",{className:"inter-base-semibold text-grey-90 pb-1",children:"Sales channels"}),(0,F.jsx)("p",{className:"text-grey-50",children:"Connect as many sales channels to your API key as you need."})]}),!l&&(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",className:"h-[40px]",onClick:o,children:"Add sales channels"})]}),l&&(0,F.jsxs)("div",{className:"mt-10 flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"flex items-center gap-4",children:[(0,F.jsx)("div",{className:"rounded border p-1",children:(0,F.jsx)("div",{className:"rounded bg-gray-100 p-2",children:(0,F.jsx)(wF,{})})}),(0,F.jsx)(erg,{channels:Object.values(r),showCount:2})]}),(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",className:"h-[40px]",onClick:o,children:"Edit sales channels"})]}),(0,F.jsx)(erT,{close:a,isVisible:i,selectedChannels:r,setSelectedChannels:t})]})}function enC(e){var t,r=e.closeModal,n=(0,td.Z)(),i=enO((0,B.useState)(""),2),o=i[0],a=i[1],l=enO((0,B.useState)(""),2),s=l[0],c=l[1],u=enO((0,B.useState)({}),2),d=u[0],f=u[1],p=(0,en.useAdminCreatePublishableApiKey)().mutateAsync,m=(0,en.useAdminAddPublishableKeySalesChannelsBatch)(s).mutateAsync,y=(t=eng(function(){return enS(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,p({title:o})];case 1:return c(e.sent().publishable_api_key.id),n("Success","Created a new API key","success"),[3,3];case 2:return e.sent(),n("Error","Failed to create a new API key","error"),[3,3];case 3:return[2]}})}),function(){return t.apply(this,arguments)});return(0,B.useEffect)(function(){s&&m({sales_channel_ids:Object.keys(d).map(function(e){return{id:e}})}).then(function(){n("Success","Sales channels added to the scope","success")}).catch(function(){n("Error","Error occurred while adding sales channels to the scope of the key","success")}).finally(r)},[s,d]),(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:r,children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsx)("div",{className:"gap-x-small flex",children:(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:y,disabled:!o,className:"rounded-rounded",children:"Publish API key"})})]})}),(0,F.jsx)(c3.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,F.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 my-16 max-w-[700px]",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold text-grey-90 pb-8",children:"Create API Key"}),(0,F.jsx)("h5",{className:"inter-base-semibold text-grey-90 pb-1",children:"General Information"}),(0,F.jsx)("p",{className:"text-grey-50 pb-8",children:"Create and manage API keys. Right now this is only related to sales channels."}),(0,F.jsx)(ry.Z,{label:"Title",type:"string",name:"name",value:o,className:"w-[338px]",placeholder:"Name your key",onChange:function(e){return a(e.target.value)}}),(0,F.jsx)("div",{className:"mt-16 mb-8 h-[1px] w-[100%] bg-gray-200"}),(0,F.jsx)(enP,{selectedChannels:d,setSelectedChannels:f})]})})]})}function enN(){var e=enO((0,B.useState)(),2),t=e[0],r=e[1],n=enO((0,B.useState)(),2),i=n[0],o=n[1],a=enO((0,s1.Z)(!1),3),l=a[0],s=a[1],c=a[2];return(0,F.jsxs)("div",{children:[(0,F.jsx)(eb,{label:"Back to settings",path:"/a/settings",className:"mb-xsmall"}),(0,F.jsxs)(tI,{title:"Publishable API keys",subtitle:"These publishable keys will allow you to authenticate API requests.",actionables:[{label:"Create API key",onClick:s}],children:[(0,F.jsx)(eny,{showDetailsModal:r,showChannelsModal:function(e){o(e)}}),(0,F.jsx)(erV,{selectedKey:t,close:function(){return r(void 0)}}),(0,F.jsx)(cX,{isVisible:l,isFullScreen:!0,children:(0,F.jsx)(enC,{closeModal:c})}),(0,F.jsx)(er1,{keyId:null==i?void 0:i.id,close:function(){o(null)}})]}),(0,F.jsx)(ev,{})]})}var enk=function(){var e=(0,(0,W.V)().getNestedRoutes)("/publishable-api-keys");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(enN,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/publishable-api-keys"})},t)})]})};function en_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function enA(e){if(Array.isArray(e))return e}function enD(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function enE(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){enD(o,n,i,a,l,"next",e)}function l(e){enD(o,n,i,a,l,"throw",e)}a(void 0)})}}function enZ(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function enI(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function enT(e,t){return enA(e)||enZ(e,t)||enM(e,t)||enI()}function enM(e,t){if(e){if("string"==typeof e)return en_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return en_(e,t)}}function enR(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function enL(e){var t=e.name,r=e.description,n=e.setName,i=e.setDescription;return(0,F.jsxs)("div",{className:"gap-y-base my-base flex flex-col",children:[(0,F.jsx)("div",{className:"flex-1",children:(0,F.jsx)(ry.Z,{label:"Title",type:"string",name:"name",placeholder:"Website, app, Amazon, physical store POS, facebook product feed...",value:t,onChange:function(e){return n(e.target.value)}})}),(0,F.jsx)("div",{className:"flex-1",children:(0,F.jsx)(ry.Z,{label:"Description",type:"string",name:"description",placeholder:"Available products at our website, app...",value:r,onChange:function(e){return i(e.target.value)}})})]})}var enz=function(e){var t=e.onClose,r=(0,en.useAdminCreateSalesChannel)().mutate,n=(0,td.Z)(),i=enT((0,B.useState)(),2),o=i[0],a=i[1],l=enT((0,B.useState)(),2),s=l[0],c=l[1];function u(){return(u=enE(function(){return enR(this,function(e){switch(e.label){case 0:return[4,r({name:o,description:s},{onSuccess:function(e){var r=e.sales_channel;n("Success","The sales channel is successfully created","success"),t(r.id)},onError:function(){return n("Error","Failed to create the sales channel","error")}})];case 1:return e.sent(),[2]}})})).apply(this,arguments)}function d(){return(d=enE(function(){return enR(this,function(e){switch(e.label){case 0:return[4,r({name:o,description:s,is_disabled:!0},{onSuccess:function(e){var r=e.sales_channel;n("Success","The sales channel is successfully created","success"),t(r.id)},onError:function(){return n("Error","Failed to create the sales channel","error")}})];case 1:return e.sent(),[2]}})})).apply(this,arguments)}return(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",onClick:t,className:"rounded-rounded h-8 w-8 border",children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsxs)("div",{className:"gap-x-small flex",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"secondary",onClick:function(){return function(){return d.apply(this,arguments)}()},disabled:!o,className:"rounded-rounded",children:"Save as draft"}),(0,F.jsx)(Y.Z,{size:"small",variant:"primary",onClick:function(){return function(){return u.apply(this,arguments)}()},disabled:!o,className:"rounded-rounded",children:"Publish channel"})]})]})}),(0,F.jsx)(c3.Main,{children:(0,F.jsx)("div",{className:"mb-[25%] flex justify-center",children:(0,F.jsxs)("div",{className:"medium:w-7/12 large:w-6/12 small:w-4/5 w-full pt-16",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Create new sales channel"}),(0,F.jsx)(gj,{className:"text-grey-90 pt-7",defaultValue:["general"],type:"multiple",children:(0,F.jsx)(gj.Item,{title:"General info",value:"general",forceMountContent:!0,children:(0,F.jsx)(enL,{name:o,description:s,setName:a,setDescription:c})})})]})})})]})};function enq(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function enF(e){if(Array.isArray(e))return e}function enH(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function enU(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function enG(e,t){return enF(e)||enH(e,t)||enV(e,t)||enU()}function enV(e,t){if(e){if("string"==typeof e)return enq(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return enq(e,t)}}function enB(e){var t=e.handleClose,r=e.salesChannel,n=(0,td.Z)(),i=(0,en.useAdminUpdateSalesChannel)(r.id),o=i.mutate,a=i.isLoading,l=enG((0,B.useState)(r.name),2),s=l[0],c=l[1],u=enG((0,B.useState)(r.description),2),d=u[0],f=u[1];return(0,F.jsx)(tp.Z,{handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Sales channel details"})}),(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)("div",{className:"inter-base-semibold text-grey-90 mb-4",children:"General info"}),(0,F.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,F.jsx)(ry.Z,{label:"Name",name:"name",value:s,onChange:function(e){return c(e.target.value)}}),(0,F.jsx)(ry.Z,{label:"Description",name:"description",value:d,onChange:function(e){return f(e.target.value)}})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:t,className:"mr-2",children:"Close"}),(0,F.jsx)(Y.Z,{disabled:!s.length||a,variant:"primary",className:"min-w-[100px]",size:"small",onClick:function(){o({name:s,description:d},{onSuccess:function(){n("Success","The sales channel is successfully updated","success"),t()},onError:function(){return n("Error","Failed to update the sales channel","error")}})},loading:a,children:"Save"})]})})]})})}function enW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function enQ(e){if(Array.isArray(e))return e}function enY(e){if(Array.isArray(e))return enW(e)}function en$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function enK(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function enJ(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function enX(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function en0(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function en1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){en$(e,t,r[t])})}return e}function en2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function en3(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):en2(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function en5(e,t){return enQ(e)||enJ(e,t)||en4(e,t)||enX()}function en6(e){return enY(e)||enK(e)||en4(e)||en0()}function en4(e,t){if(e){if("string"==typeof e)return enW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return enW(e,t)}}var en8=["status","collection_id","payment_status","created_at"],en7={drafts:{status:["draft"]},proposed:{status:["proposed"]}},en9=function(e,t){switch(t.type){case"setFilters":return en3(en1({},e),{status:t.payload.status,collection:t.payload.collection,tags:t.payload.tags,date:t.payload.date});case"reset":return t.payload;default:return e}},eie=function(e,t){if(e.size!==t.size)return!1;var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(!t.has(l))return!1}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return!0},eit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&"?"===e[0]&&(e=e.substring(1));var r=(0,B.useMemo)(function(){return eii(e,t)},[e,t]),n=(0,B.useMemo)(function(){var e=localStorage.getItem("products::filters");if(e){var t=JSON.parse(e);if(t)return Object.entries(t).map(function(e){var t=en5(e,2),r=t[0];return{label:r,value:r,removable:!0,representationString:t[1]}})}return[]},[]),i=en5((0,B.useReducer)(en9,r),2),o=i[0],a=i[1],l=en5((0,B.useState)(n),2),s=l[0],c=l[1],u=function(){var e=en1({},o.additionalFilters),t=!0,r=!1,n=void 0;try{for(var i,a=Object.entries(o)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=en5(i.value,2),s=l[0],c=l[1];(null==c?void 0:c.open)&&(e[ein[s]]=c.filter)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return e},d=function(e){var t=null!=e?e:o,r={},n=!0,i=!1,a=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=en5(l.value,2),u=c[0],d=c[1];"query"===u?d&&"string"==typeof d&&(r.q=d):"offset"===u||"limit"===u?r[u]=d:(null==d?void 0:d.open)&&(r[ein[u]]=d.filter)}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r},f=function(){var e=d();return iL().stringify(e,{skipNulls:!0})},p=(0,B.useMemo)(function(){return u()},[o]),m=(0,B.useMemo)(function(){return d()},[o]),y=(0,B.useMemo)(function(){return f()},[o]),h=(0,B.useMemo)(function(){var e=(0,iM.omit)(m,["limit","offset"]),t=iL().stringify(e),r=s.find(function(e){return e.representationString===t});if(r)return r.value;var n=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(en7)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=en5(a.value,2),u=c[0],d=c[1],f=!0;if(Object.keys(e).length===Object.keys(d).length){var p=!0,y=!1,h=void 0;try{for(var b,v=Object.entries(d)[Symbol.iterator]();!(p=(b=v.next()).done);p=!0){var g=en5(b.value,2),x=g[0],j=g[1];if(!(f=x in e&&(Array.isArray(j)?Array.isArray(e[x])&&eie(new Set(e[x]),new Set(j)):e[x]===j)))break}}catch(e){y=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(y)throw h}}if(f)return u}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return null},[m,s]),b=(0,B.useMemo)(function(){return[{label:"Unpublished",value:"drafts"}].concat(en6(s))},[s]);return en3(en1({},o),{filters:en1({},o),removeTab:function(e){var t=localStorage.getItem("products::filters"),r=null;t&&(r=JSON.parse(t)),r&&(delete r[e],localStorage.setItem("products::filters",JSON.stringify(r))),c(function(t){return t.filter(function(t){return t.value!==e})})},saveTab:function(e,t){var r=d(en1({},t)),n=(0,iM.omit)(r,["limit","offset"]),i=iL().stringify(n,{skipNulls:!0}),o=localStorage.getItem("products::filters"),l=null;if(o&&(l=JSON.parse(o)),l)l[e]=i,localStorage.setItem("products::filters",JSON.stringify(l));else{var s={};s[e]=i,localStorage.setItem("products::filters",JSON.stringify(s))}c(function(t){var r=t.findIndex(function(t){var r;return(null===(r=t.label)||void 0===r?void 0:r.toLowerCase())===e.toLowerCase()});return -1!==r&&t.splice(r,1),en6(t).concat([{label:e,value:e,representationString:i,removable:!0}])}),a({type:"setFilters",payload:t})},setTab:function(e){var t=null;if(e in en7)t=en7[e];else{var r=s.find(function(t){return t.value===e});r&&(t=iL().parse(r.representationString))}if(t){var n=en3(en1({},o),{date:{open:!1,filter:null},status:{open:!1,filter:null},tags:{open:!1,filter:null},collection:{open:!1,filter:null}}),i=!0,l=!1,c=void 0;try{for(var u,d=Object.entries(t)[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var f=en5(u.value,2),p=f[0],m=f[1];n[eir[p]]={open:!0,filter:m}}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}a({type:"setFilters",payload:n})}},availableTabs:b,activeFilterTab:h,representationObject:m,representationString:y,queryObject:p,setFilters:function(e){a({type:"setFilters",payload:e})},setDefaultFilters:function(e){a({type:"setDefaults",payload:e})},setDateFilter:function(e){a({type:"setDate",payload:e})},setFulfillmentFilter:function(e){a({type:"setFulfillment",payload:e})},setPaymentFilter:function(e){a({type:"setPayment",payload:e})},setStatusFilter:function(e){a({type:"setStatus",payload:e})},reset:function(){a({type:"setFilters",payload:en3(en1({},o),{status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null}})})}})},eir={status:"status",collection_id:"collection",tags:"tags",created_at:"date"},ein={status:"status",collection:"collection_id",tags:"tags",date:"created_at"},eii=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={status:{open:!1,filter:null},collection:{open:!1,filter:null},tags:{open:!1,filter:null},date:{open:!1,filter:null},additionalFilters:t};if(e){var n=iL().parse(e),i=!0,o=!1,a=void 0;try{for(var l,s=Object.entries(n)[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=en5(l.value,2),u=c[0],d=c[1];if(en8.includes(u))switch(u){case"status":("string"==typeof d||Array.isArray(d))&&(r.status={open:!0,filter:d});break;case"collection_id":("string"==typeof d||Array.isArray(d))&&(r.collection={open:!0,filter:d});break;case"payment_status":("string"==typeof d||Array.isArray(d))&&(r.payment={open:!0,filter:d});break;case"created_at":r.date={open:!0,filter:d}}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}}return r};function eio(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eia(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eio(e,t,r[t])})}return e}var eil=[{width:30,id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,F.jsx)("span",{className:"flex justify-center",children:(0,F.jsx)(rF,eia({},t()))})},Cell:function(e){var t=e.row;return(0,F.jsx)("span",{onClick:function(e){return e.stopPropagation()},className:"flex justify-center",children:(0,F.jsx)(rF,eia({},t.getToggleRowSelectedProps()))})}},{Header:"Name",accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center",children:t.thumbnail?(0,F.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)("div",{className:"rounded-soft bg-grey-10 flex h-full w-full items-center justify-center",children:(0,F.jsx)(lY,{size:16})})}),t.title]})}},{Header:"Collection",accessor:"collection",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{children:(null==t?void 0:t.title)||"-"})}}],eis=r(40193);function eic(e){var t=e.showAddModal;return(0,F.jsxs)("div",{className:"flex h-full flex-col items-center justify-center",children:[(0,F.jsx)("span",{className:"text-grey-50",children:(0,F.jsx)(eis.Z,{width:"48",height:"48"})}),(0,F.jsx)("h3",{className:"text-large text-gray-90 mt-6 font-semibold",children:"Start building your channels setup..."}),(0,F.jsx)("p",{className:"text-grey-50 mt-2 mb-8 w-[358px] text-center",children:"You haven’t added any products to this channels yet, but once you do they will live here."}),(0,F.jsx)(Y.Z,{onClick:t,variant:"primary",size:"small",children:"Add products"})]})}function eiu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eid(e){if(Array.isArray(e))return e}function eif(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function eip(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eif(o,n,i,a,l,"next",e)}function l(e){eif(o,n,i,a,l,"throw",e)}a(void 0)})}}function eim(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eiy(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eih(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eib(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eim(e,t,r[t])})}return e}function eiv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eig(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eiv(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eix(e,t){if(null==e)return{};var r,n,i=eij(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eij(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function eiO(e,t){return eid(e)||eiy(e,t)||eiw(e,t)||eih()}function eiw(e,t){if(e){if("string"==typeof e)return eiu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eiu(e,t)}}function eiS(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var eiP=7,eiC={additionalFilters:{expand:"collection,type,sales_channels",fields:"id,title,thumbnail,status"},limit:7,offset:0},eiN=(0,B.forwardRef)(function(e,t){var r=e.tableActions,n=e.currentSalesChannelId,i=e.productFilters,o=i.setTab,a=i.saveTab,l=i.removeTab,s=i.availableTabs,c=i.activeFilterTab,u=i.setFilters,d=i.filters,f=i.reset,p=e.paginate,m=e.setQuery,y=e.queryObject,h=e.isLoading,b=e.isAddTable,v=e.count,g=e.products,x=e.setSelectedRowIds,j=e.removeProductFromSalesChannel,O=parseInt(y.offset)||0,w=parseInt(y.limit),S=(0,V.useNavigate)(),P=eiO((0,B.useState)(y.query),2),C=P[0],N=P[1],k=eiO((0,B.useState)(0),2),_=k[0],A=k[1];(0,B.useEffect)(function(){void 0!==v&&A(Math.ceil(v/w))},[v]);var D=(0,rN.useTable)({columns:eil,data:g||[],manualPagination:!0,initialState:{pageIndex:Math.floor(O/w),pageSize:w},pageCount:_,autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.id},stateReducer:function(e,t){return"toggleAllRowsSelected"===t.type?eig(eib({},e),{selectedRowIds:{}}):e}},rN.usePagination,rN.useRowSelect),E=D.getTableProps,Z=D.getTableBodyProps,I=D.headerGroups,T=D.rows,M=D.prepareRow,R=D.gotoPage,L=D.canPreviousPage,z=D.canNextPage,q=D.pageCount,H=D.nextPage,U=D.previousPage,G=D.toggleAllRowsSelected,W=D.toggleRowSelected,Q=D.state,Y=Q.pageIndex,$=(Q.pageSize,eix(D.state,["pageIndex","pageSize"]));return(0,B.useImperativeHandle)(t,function(){return{toggleAllRowsSelected:G}}),(0,B.useEffect)(function(){x(Object.keys($.selectedRowIds))},[$.selectedRowIds]),(0,B.useEffect)(function(){var e=setTimeout(function(){C?(m(C),R(0)):void 0!==C&&m("")},400);return function(){return clearTimeout(e)}},[C]),(0,F.jsx)(nC,{isLoading:h,numberOfRows:eiP,hasPagination:!0,pagingState:{count:v,offset:O,pageSize:O+T.length,title:"Products",currentPage:Y+1,pageCount:q,nextPage:function(){z&&(p(1),H())},prevPage:function(){L&&(p(-1),U())},hasNext:z,hasPrev:L},children:(0,F.jsxs)(nf,eig(eib({tableActions:r,containerClassName:"flex-1",filteringOptions:d&&(0,F.jsx)(eee,{filters:d,submitFilters:u,clearFilters:function(){f(),N("")},tabs:s,onTabClick:o,activeTab:c,onRemoveTab:l,onSaveTab:a}),enableSearch:b,handleSearch:N},E()),{children:[(0,F.jsx)(nf.Head,{children:null==I?void 0:I.map(function(e){return(0,F.jsx)(nf.HeadRow,eig(eib({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,eig(eib({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,eig(eib({},Z()),{children:T.map(function(e){var t;return M(e),(0,F.jsx)(eik,{onClick:function(){return W(e.id)},disabled:!!e.original.sales_channels.find(function(e){return e.id===n}),row:e,actions:b?void 0:(t=e.original.id,[{label:"Details",onClick:function(){return S("/a/products/".concat(t))},icon:(0,F.jsx)(iV,{size:20})},{label:"Remove from the channel",variant:"danger",onClick:function(){return j(t)},icon:(0,F.jsx)(eZ,{size:20})}])})})}))]}))})}),eik=function(e){var t=e.row,r=e.actions,n=e.onClick,i=e.disabled;return(0,F.jsx)(nf.Row,eig(eib({onClick:!i&&n,color:"inherit",className:(0,ec.Z)("cursor-pointer",{"bg-grey-5":t.isSelected,"pointer-events-none cursor-not-allowed opacity-40":i}),actions:r},t.getRowProps()),{children:t.cells.map(function(e,t){return(0,F.jsx)(nf.Cell,eig(eib({},e.getCellProps()),{children:e.render("Cell",{index:t})}))})}))};function ei_(e){var t=e.onClose,r=e.onRemove,n=e.total;return(0,F.jsx)("div",{className:(0,ec.Z)("pointer-events-none absolute bottom-1 flex w-full justify-center transition-all duration-200",{"translate-y-1 opacity-0":!n,"translate-y-0 opacity-100":n}),children:(0,F.jsxs)("div",{className:"shadow-toaster pointer-events-auto flex h-[48px] min-w-[224px] items-center justify-around gap-3 rounded-lg border px-4 py-3",children:[(0,F.jsxs)("span",{className:"text-small text-grey-50",children:[n," selected"]}),(0,F.jsx)("div",{className:"bg-grey-20 h-[20px] w-[1px]"}),(0,F.jsx)(Y.Z,{variant:"danger",size:"small",onClick:r,children:"Remove"}),(0,F.jsx)("button",{onClick:t,className:"text-grey-50 cursor-pointer",children:(0,F.jsx)(c2.Z,{size:20})})]})})}function eiA(e){var t,r=(0,B.useRef)(),n=e.salesChannelId,i=e.showAddModal,o=eiO((0,B.useState)([]),2),a=o[0],l=o[1],s=(0,td.Z)(),c=sM(eiC),u=eit(),d=(0,en.useAdminDeleteProductsFromSalesChannel)(n).mutate,f=(0,en.useAdminProducts)(eig(eib({},c.queryObject,u.queryObject),{sales_channel_id:[e.salesChannelId]})),p=f.products,m=f.count,y=f.isLoading,h=function(){var e;l([]),null===(e=r.current)||void 0===e||e.toggleAllRowsSelected(!1)};(0,B.useEffect)(function(){h()},[p,n]);var b=(t=eip(function(){return eiS(this,function(e){switch(e.label){case 0:return[4,d({product_ids:a.map(function(e){return{id:e}})})];case 1:return e.sent(),s("Success","Products successfully removed from the sales channel","success"),h(),[2]}})}),function(){return t.apply(this,arguments)}),v=Object.keys(u.queryObject).length,g=c.queryObject.q;if(!(null==p?void 0:p.length)&&!y&&!v&&!g)return(0,F.jsx)(eic,{showAddModal:i});var x=a.length;return(0,F.jsxs)("div",{className:"relative",children:[(0,F.jsx)(eiN,eib({ref:r,count:m||0,isLoading:y,products:p||[],removeProductFromSalesChannel:function(e){d({product_ids:[{id:e}]}),s("Success","Product successfully removed","success")},setSelectedRowIds:l,productFilters:u},c)),(0,F.jsx)(ei_,{total:x,onRemove:b,onClose:h})]})}function eiD(e){var t=e.handleClose,r=e.salesChannel,n=eiO((0,B.useState)([]),2),i=n[0],o=n[1],a=(0,td.Z)(),l=sM(eiC),s=eit(),c=(0,en.useAdminProducts)(eig(eib({},l.queryObject,s.queryObject),{expand:"sales_channels"})),u=c.products,d=c.count,f=c.isLoading,p=(0,en.useAdminAddProductsToSalesChannel)(r.id),m=p.mutate,y=p.isLoading;return(0,F.jsx)(tp.Z,{handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Add products"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(eiN,eib({isAddTable:!0,isLoading:f,products:u||[],count:d||0,setSelectedRowIds:o,productFilters:s,currentSalesChannelId:r.id},l))}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:t,className:"mr-2",children:"Close"}),(0,F.jsx)(Y.Z,{variant:"primary",className:"min-w-[100px]",size:"small",onClick:function(){m({product_ids:i.map(function(e){return{id:e}})}),t(),a("Success","Products successfully added to the sales channel","success")},loading:y,disabled:y,children:"Save"})]})})]})})}function eiE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eiZ(e){if(Array.isArray(e))return e}function eiI(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function eiT(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eiI(o,n,i,a,l,"next",e)}function l(e){eiI(o,n,i,a,l,"throw",e)}a(void 0)})}}function eiM(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eiR(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eiL(e,t){return eiZ(e)||eiM(e,t)||eiz(e,t)||eiR()}function eiz(e,t){if(e){if("string"==typeof e)return eiE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eiE(e,t)}}function eiq(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function eiF(e){var t=e.isActive;return(0,F.jsx)("div",{className:(0,ec.Z)("rounded-circle flex h-[18px] w-[18px] flex-shrink-0 items-center justify-center border bg-white",{"border-violet-60 border-2":t}),children:t&&(0,F.jsx)("div",{className:"bg-violet-60 rounded-circle h-[10px] w-[10px]"})})}function eiH(){return(0,F.jsx)("div",{className:" bg-grey-10 text-grey-50 text-small flex h-[28px] w-[54px] items-center justify-center rounded-xl font-semibold",children:"Draft"})}function eiU(e){var t=e.salesChannel,r=e.isSelected,n=e.onClick,i=e.isDisabled;return(0,F.jsxs)("div",{onClick:n,className:(0,ec.Z)("mb-2 flex h-[83px] cursor-pointer justify-between rounded-lg border p-4",{"border-violet-60 border-2":r}),children:[(0,F.jsxs)("div",{className:"flex gap-2 overflow-hidden",children:[(0,F.jsx)(eiF,{isActive:r}),(0,F.jsxs)("div",{className:"block overflow-hidden truncate",children:[(0,F.jsx)("h3",{className:"text-grey-90 mb-1 font-semibold leading-5",children:t.name}),(0,F.jsx)("span",{className:"text-small text-grey-50 ",children:t.description})]})]}),i&&(0,F.jsx)("div",{className:"flex flex-shrink-0 flex-col justify-center",children:(0,F.jsx)(eiH,{})})]})}function eiG(e){var t=e.openCreateModal,r=e.filterText,n=e.setFilterText,i=eiL((0,B.useState)(!1),2),o=i[0],a=i[1],l=(0,B.useRef)();return(0,F.jsx)("div",{className:"mb-6 h-[55px] overflow-hidden",children:(0,F.jsxs)("div",{className:(0,ec.Z)("transition-all duration-200",{"translate-y-[-50px]":o,"translate-y-[0px]":!o}),children:[(0,F.jsxs)("div",{className:"h-[55px]",children:[(0,F.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,F.jsx)("h2",{className:"text-xlarge text-grey-90 font-semibold",children:"Sales channels"}),(0,F.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,F.jsx)(r7.Z,{size:15,onClick:function(){return a(!0)},className:"cursor-pointer"}),(0,F.jsx)(sh.Z,{size:15,onClick:t,className:"cursor-pointer"})]})]}),(0,F.jsx)("div",{className:"text-grey-50 text-small mb-6 block max-w-[100%] overflow-hidden truncate",children:"Control which products are available in which channels"})]}),(0,F.jsxs)("div",{className:"text-grey-40 bg-grey-5 my-[5px] flex h-[40px] w-full items-center justify-around gap-2 rounded-xl border px-4",children:[(0,F.jsx)(r7.Z,{size:20}),(0,F.jsx)("input",{ref:l,value:r,onChange:function(e){return n(e.target.value)},placeholder:"Search by title or description",className:"remove-number-spinner leading-base text-grey-90 caret-violet-60 placeholder-grey-40 w-full bg-inherit font-normal outline-none outline-0",onBlur:function(){return a(!!r)},autoComplete:"off"}),(0,F.jsx)(c2.Z,{onClick:function(){a(!1),n("")},className:"cursor-pointer"})]})]})})}function eiV(e){var t=e.activeChannelId,r=e.openCreateModal,n=e.setActiveSalesChannelId,i=e.salesChannels,o=e.filterText,a=e.setFilterText;return(0,F.jsxs)("div",{className:"bg-grey-0 border-grey-20  col-span-1 grow rounded-lg border px-8 py-6",children:[(0,F.jsx)(eiG,{filterText:o,setFilterText:a,openCreateModal:r}),(0,F.jsx)("div",{children:null==i?void 0:i.map(function(e){return(0,F.jsx)(eiU,{salesChannel:e,isDisabled:e.is_disabled,isSelected:t===e.id,onClick:function(){return n(e.id)}})})})]})}function eiB(e){var t,r=e.isDefault,n=e.salesChannel,i=e.openUpdateModal,o=e.resetDetails,a=e.showProductsAdd,l=(0,en.useAdminDeleteSalesChannel)(n.id).mutate,s=(0,en.useAdminUpdateSalesChannel)(n.id).mutate,c=o2(),u=(t=eiT(function(){return eiq(this,function(e){switch(e.label){case 0:return[4,c({text:"Are you sure you want to delete this sales channel? The setup you made will be gone forever.",heading:"Delete Channel",extraConfirmation:!0,entityName:n.name})];case 1:return e.sent()&&(l(),o()),[2]}})}),function(){return t.apply(this,arguments)}),d=(0,B.useMemo)(function(){var e=[{label:"Edit general info",icon:(0,F.jsx)(eC,{size:"20"}),onClick:i},{label:"Add products",icon:(0,F.jsx)(sh.Z,{}),onClick:function(){return a()}}];return r||e.push({label:"Delete channel",icon:(0,F.jsx)(eZ,{size:20}),variant:"danger",onClick:u}),e},[i]);return(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h2",{className:"text-xlarge text-grey-90 mb-4 font-semibold",children:n.name}),(0,F.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,F.jsx)(vF,{onChange:function(){return s({is_disabled:!n.is_disabled})},isDraft:n.is_disabled,draftState:"Disabled",activeState:"Enabled"}),(0,F.jsx)(eQ,{forceDropdown:!0,actions:d})]})]})}function eiW(e){var t=e.resetDetails,r=e.salesChannel,n=e.isDefault,i=eiL((0,s1.Z)(!1),3),o=i[0],a=i[1],l=i[2],s=eiL((0,s1.Z)(!1),3),c=s[0],u=s[1],d=s[2];return(0,F.jsxs)("div",{className:"rounded-rounded bg-grey-0 border-grey-20 col-span-2 col-span-2 h-fit border px-8 py-6",children:[(0,F.jsx)(eiB,{isDefault:n,resetDetails:t,salesChannel:r,openUpdateModal:a,showProductsAdd:u}),(0,F.jsx)(eiA,{salesChannelId:r.id,showAddModal:u}),o&&(0,F.jsx)(enB,{handleClose:l,salesChannel:r}),c&&(0,F.jsx)(eiD,{salesChannel:r,handleClose:d})]})}function eiQ(){var e=(0,V.useParams)().id,t=eiL((0,B.useState)(),2),r=t[0],n=t[1],i=eiL((0,B.useState)(!1),2),o=i[0],a=i[1],l=eiL((0,B.useState)(),2),s=l[0],c=l[1],u=(0,V.useNavigate)(),d=(0,en.useAdminStore)().store,f=(0,en.useAdminSalesChannels)().sales_channels,p=function(e){u("/a/sales-channels/".concat(e))};return((0,B.useEffect)(function(){f&&d&&(s?p(s.id):p(d.default_sales_channel_id))},[f,d,null==s?void 0:s.id]),(0,B.useEffect)(function(){e!==(null==s?void 0:s.id)&&c(null==f?void 0:f.find(function(t){return t.id===e}))},[e,s,f]),f&&s)?(0,F.jsxs)("div",{children:[(0,F.jsx)(eb,{path:"/a/settings",label:"Back to settings",className:"mb-xsmall"}),(0,F.jsxs)("div",{className:"gap-x-xsmall grid grid-cols-3",children:[(0,F.jsx)(eiV,{filterText:r,setFilterText:n,openCreateModal:function(){return a(!0)},activeChannelId:s.id,setActiveSalesChannelId:p,salesChannels:(r?f.filter(function(e){var t,n=r.toLowerCase();return!!e.name.toLowerCase().match(n)||!!(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().match(n))}):f).sort(function(e,t){return e.id===(null==d?void 0:d.default_sales_channel_id)?-1:t.id===(null==d?void 0:d.default_sales_channel_id)?1:e.name.localeCompare(t.name)})}),s&&(0,F.jsx)(eiW,{isDefault:s.id===(null==d?void 0:d.default_sales_channel_id),salesChannel:f.find(function(e){return e.id===s.id}),resetDetails:function(){p(d.default_sales_channel_id)}})]}),(0,F.jsx)(ev,{}),(0,F.jsx)(cX,{isVisible:o,isFullScreen:!0,children:(0,F.jsx)(enz,{onClose:function(e){p(e),a(!1)}})})]}):null}var eiY=function(){var e=(0,(0,W.V)().getNestedRoutes)("/sales-channels");return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(eiQ,{})}),(0,F.jsx)(V.Route,{path:"/:id",element:(0,F.jsx)(eiQ,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(er,{route:e,previousPath:"/sales-channels"})},t)})]})},ei$=function(e){var t=e.icon,r=e.heading,n=e.description,i=e.to,o=void 0===i?null:i,a=e.externalLink,l=void 0===a?null:a,s=e.disabled,c=void 0!==s&&s;return c&&(o=null),(0,F.jsx)(V.Link,{to:null!=o?o:"",className:"flex flex-1 items-center",children:(0,F.jsxs)("button",{className:"bg-grey-0 rounded-rounded p-base border-grey-20 group flex h-full flex-1 items-center border",disabled:c,onClick:function(){l&&(window.location.href=l)},children:[(0,F.jsx)("div",{className:"h-2xlarge w-2xlarge bg-grey-0 rounded-rounded border-grey-20 text-grey-60 group-disabled:bg-grey-10 group-disabled:text-grey-40 flex items-center justify-center border",children:(0,F.jsx)("div",{className:"bg-grey-10 h-xlarge w-xlarge flex items-center justify-center overflow-hidden rounded-md",children:t})}),(0,F.jsxs)("div",{className:"mx-large flex-1 text-left",children:[(0,F.jsx)("h3",{className:"inter-large-semibold text-grey-90 group-disabled:text-grey-40 m-0",children:r}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50 group-disabled:text-grey-40 m-0",children:n})]}),(0,F.jsx)("div",{className:"text-grey-40 group-disabled:text-grey-30",children:(0,F.jsx)(pd,{})})]})})},eiK=function(){return(0,ee.J)()},eiJ=function(e){var t=e.Page,r=eiK();return B.createElement(t,r)},eiX=!0,ei0=function(e){var t=e.origin,r=(0,V.useRouteError)();return(0,B.useEffect)(function(){!eiX&&r&&(console.group("%cAn error occurred in a settings page from ".concat(t,":"),"color: red; font-weight: bold;"),console.error(r),console.groupEnd())},[r,t]),(0,F.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,F.jsxs)("div",{className:"rounded-rounded p-base bg-rose-10 border-rose-40 gap-x-small flex justify-start border",children:[(0,F.jsx)("div",{children:(0,F.jsx)(K.Z,{size:20,fillType:"solid",className:"text-rose-40"})}),(0,F.jsxs)("div",{className:"text-rose-40 inter-small-regular w-full pr-[20px]",children:[(0,F.jsx)("h1",{className:"inter-base-semibold mb-2xsmall",children:"Uncaught error"}),(0,F.jsx)("p",{className:"mb-small",children:eiX?"An error unknown error occurred, and the page could not be loaded.":"A Page from <strong>".concat(t,"</strong> crashed. See the console for more info.")}),(0,F.jsxs)("p",{className:"mb-large",children:[(0,F.jsx)("strong",{children:"What should I do?"}),(0,F.jsx)("br",{}),"If you are the developer of this setting page, you should fix the error and reload the page. If you are not the developer, you should contact the maintainer and report the error."]}),(0,F.jsx)("div",{className:"gap-x-base flex items-center",children:(0,F.jsx)(Y.Z,{variant:"nuclear",size:"small",type:"button",onClick:function(){window.location.reload()},className:"w-full",children:(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)($.Z,{size:"20"}),(0,F.jsx)("span",{className:"ml-xsmall",children:"Reload"})]})})})]})]})})};function ei1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ei2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ei1(e,t,r[t])})}return e}function ei3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ei5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ei3(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ei6(e,t){if(null==e)return{};var r,n,i=ei4(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ei4(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var ei8=function(e){var t=e.size,r=void 0===t?"20":t,n=e.color,i=ei6(e,["size","color"]);return(0,F.jsx)("svg",ei5(ei2({xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 20 20",fill:"none"},i),{children:(0,F.jsx)("path",{stroke:void 0===n?"currentColor":n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.667 12.333 3.001 7.667m0 0 4.666-4.666M3.001 7.667h9.332a4.666 4.666 0 1 1 0 9.332H10"})}))};function ei7(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ei9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ei7(e,t,r[t])})}return e}function eoe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eot(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eoe(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eor(e,t){if(null==e)return{};var r,n,i=eon(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eon(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var eoi=function(e){var t=e.size,r=void 0===t?"24":t,n=e.color,i=void 0===n?"currentColor":n,o=eor(e,["size","color"]);return(0,F.jsxs)("svg",eot(ei9({width:r,height:r,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,F.jsx)("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M21 12H17",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M7 12H3",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12 7V3",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,F.jsx)("path",{d:"M12 21V17",stroke:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},eoo=r(16459);function eoa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eol(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eoa(e,t,r[t])})}return e}function eos(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eoc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eos(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eou(e,t){if(null==e)return{};var r,n,i=eod(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eod(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var eof=function(e){var t=e.size,r=void 0===t?"32px":t,n=e.color,i=eou(e,["size","color"]);return(0,F.jsx)("svg",eoc(eol({width:r,height:r,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),{children:(0,F.jsx)("path",{d:"M18.9095 10.761C19.5268 10.761 20.1188 11.0063 20.5553 11.4427C20.9918 11.8792 21.237 12.4713 21.237 13.0886M23.5646 13.0886C23.5647 13.7675 23.4162 14.4383 23.1297 15.0538C22.8432 15.6693 22.4255 16.2147 21.9059 16.6518C21.3863 17.0888 20.7773 17.4069 20.1218 17.5837C19.4663 17.7605 18.78 17.7918 18.1111 17.6754C17.6743 17.6001 17.2119 17.6955 16.8985 18.009L14.8363 20.0712H13.0906V21.8168H11.345V23.5625H8.43555V21.3762C8.43555 20.913 8.61942 20.4684 8.94683 20.1418L13.9891 15.0996C14.3025 14.7861 14.3979 14.3237 14.3227 13.8869C14.2127 13.2516 14.2358 12.6004 14.3907 11.9745C14.5455 11.3487 14.8287 10.7618 15.2222 10.2511C15.6158 9.74039 16.1112 9.31702 16.6769 9.0078C17.2427 8.69858 17.8665 8.51026 18.5088 8.45477C19.1512 8.39928 19.7981 8.47784 20.4085 8.68545C21.0189 8.89307 21.5795 9.22523 22.0548 9.66087C22.5301 10.0965 22.9097 10.6261 23.1696 11.2162C23.4295 11.8062 23.564 12.4438 23.5646 13.0886V13.0886Z",stroke:void 0===n?"currentColor":n,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}))},eop=r(54155),eom=r(47786),eoy=function(e){var t=e.currency,r=e.isDefault,n=(0,OX.useQueryClient)(),i=(0,en.useAdminUpdateCurrency)(t.code).mutate,o=(0,tR.cI)({defaultValues:{includes_tax:t.includes_tax}}),a=o.handleSubmit,l=o.control,s=o.reset,c=(0,td.Z)();(0,B.useEffect)(function(){s({includes_tax:t.includes_tax})},[t]);var u=a(function(e){i(e,{onSuccess:function(){c("Success","Successfully updated currency","success"),n.invalidateQueries(en.adminStoreKeys.all)},onError:function(e){c("Error",(0,tf.e)(e),"error"),s({includes_tax:t.includes_tax})}})});return(0,F.jsx)("form",{children:(0,F.jsxs)("div",{className:"inter-base-regular flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,F.jsx)("div",{className:"bg-grey-10 rounded-rounded w-xlarge h-xlarge flex items-center justify-center",children:(0,F.jsx)(OV,{size:20,className:"text-grey-50"})}),(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("p",{className:"inter-base-semibold text-grey-90",children:t.code.toUpperCase()}),(0,F.jsx)("p",{className:"text-grey-50 inter-small-regular",children:t.name})]}),r&&(0,F.jsx)("div",{className:"bg-grey-10 rounded-rounded px-xsmall py-[2px]",children:(0,F.jsx)("p",{className:"inter-small-semibold text-grey-50",children:"Default"})})]}),(0,F.jsx)(wI,{featureFlag:"tax_inclusive_pricing",children:(0,F.jsx)(tR.Qr,{control:l,name:"includes_tax",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:r,onCheckedChange:function(e){n(e),u()}})}})})]})})},eoh=function(e){var t=e.store,r=(0,tR.cI)({defaultValues:eob(t)}),n=r.reset,i=r.control,o=r.handleSubmit,a=(0,en.useAdminUpdateStore)().mutate,l=(0,td.Z)();(0,B.useEffect)(function(){n(eob(t))},[t]);var s=o(function(e){a({default_currency_code:e.default_currency_code.value},{onSuccess:function(){l("Success","Successfully updated default currency","success")},onError:function(e){l("Error",(0,tf.e)(e),"error")}})}),c=(0,B.useMemo)(function(){return t.currencies.map(function(e){return{value:e.code,label:e.name,prefix:e.code.toUpperCase()}})},[t]);return(0,F.jsx)("div",{children:(0,F.jsx)(tR.Qr,{control:i,name:"default_currency_code",render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.onBlur;return(0,F.jsx)(lS,{placeholder:"Choose default currency",options:c,value:r,onChange:function(e){n(e),s()},onBlur:i})}})})},eob=function(e){return{default_currency_code:{value:e.default_currency_code,label:e.default_currency.name,prefix:e.default_currency.code.toUpperCase()}}},eov=function(e){var t=e.store;return(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-large-semibold mb-2xsmall",children:"Default store currency"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"This is the currency your prices are shown in."})]}),(0,F.jsx)(eoh,{store:t})]})};function eog(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eox(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eog(e,t,r[t])})}return e}function eoj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eoO(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eoj(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eow=function(e){var t=e.isLoading,r=e.offset,n=e.setOffset,i=e.setSelectedRowIds,o=e.tableState,a=e.tableAction,l=e.count,s=o.rows,c=o.headerGroups,u=o.getTableProps,d=o.getTableBodyProps,f=o.canNextPage,p=o.canPreviousPage,m=o.previousPage,y=o.nextPage,h=o.prepareRow,b=o.state,v=b.pageSize,g=b.pageIndex,x=b.selectedRowIds,j=o.pageCount;return(0,B.useEffect)(function(){i&&i(Object.keys(x))},[x]),(0,F.jsx)(nC,{isLoading:t,hasPagination:!0,numberOfRows:v,pagingState:{count:l,offset:r,pageSize:r+s.length,title:"Currencies",currentPage:g+1,pageCount:j,nextPage:function(){f&&(n(r+v),y())},prevPage:function(){p&&(n(r-v),m())},hasNext:f,hasPrev:p},children:(0,F.jsxs)(nf,eoO(eox({},u()),{className:"table-fixed",tableActions:a,children:[(0,F.jsx)(nf.Head,{children:null==c?void 0:c.map(function(e){return(0,F.jsx)(nf.HeadRow,eoO(eox({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,eoO(eox({},e.getHeaderProps(e.getSortByToggleProps())),{className:eoS(e)?e.className:void 0,children:e.render("Header")}))})}))})}),(0,F.jsx)(nf.Body,eoO(eox({},d()),{children:s.map(function(e){return h(e),(0,F.jsx)(nf.Row,eoO(eox({},e.getRowProps()),{children:e.cells.map(function(e){return(0,F.jsx)(nf.Cell,eoO(eox({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))]}))})},eoS=function(e){return void 0!==e.className};function eoP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eoC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eoP(e,t,r[t])})}return e}var eoN=function(){return(0,B.useMemo)(function(){return[{id:"selection",className:"w-[52px] px-base",disableSortBy:!0,Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,F.jsx)("span",{className:"flex justify-center",children:(0,F.jsx)(rF,eoC({},t()))})},Cell:function(e){var t=e.row;return(0,F.jsx)("span",{onClick:function(e){return e.stopPropagation()},className:"flex justify-center",children:(0,F.jsx)(rF,eoC({},t.getToggleRowSelectedProps()))})}},{Header:function(e){var t=e.column,r=t.isSorted,n=t.isSortedDesc;return(0,F.jsxs)("div",{className:"gap-x-2xsmall flex items-center",children:[(0,F.jsx)("span",{children:"Name"}),(0,F.jsx)(r8,{className:"text-grey-40",ascendingColor:r&&!n?"#111827":void 0,descendingColor:n?"#111827":void 0,size:16})]})},accessor:"name",Cell:function(e){var t=e.row,r=e.value;return(0,F.jsxs)("div",{className:"gap-x-xsmall inter-small-regular flex items-center",children:[(0,F.jsx)("span",{className:"inter-small-semibold",children:t.original.code.toUpperCase()}),(0,F.jsx)("p",{children:r})]})}}]},[])};function eok(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eo_(e){if(Array.isArray(e))return e}function eoA(e){if(Array.isArray(e))return eok(e)}function eoD(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function eoE(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eoZ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eoI(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eoT(e,t){return eo_(e)||eoE(e,t)||eoR(e,t)||eoZ()}function eoM(e){return eoA(e)||eoD(e)||eoR(e)||eoI()}function eoR(e,t){if(e){if("string"==typeof e)return eok(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eok(e,t)}}var eoL=15,eoz=function(){var e=eoT((0,B.useState)(0),2),t=e[0],r=e[1],n=eoT((0,B.useState)([]),2),i=n[0],o=n[1],a=eoJ(),l=a.onClose,s=a.store,c=(0,B.useContext)(pf.ej),u=c.reset,d=c.pop,f=(0,en.useAdminCurrencies)({limit:eoL,offset:t},{keepPreviousData:!0}),p=f.currencies,m=f.count,y=f.isLoading,h=(0,en.useAdminUpdateStore)(),b=h.mutate,v=h.isLoading,g=(0,td.Z)(),x=function(e){b({currencies:eoM(s.currencies.map(function(e){return e.code})).concat(eoM(i))},{onSuccess:function(){g("Success","Successfully updated currencies","success"),e()},onError:function(e){g("Error",(0,tf.e)(e),"error")}})},j=B.useMemo(function(){return p||[]},[p]),O=eoN(),w=(0,rN.useTable)({data:j,columns:O,manualPagination:!0,initialState:{pageIndex:Math.floor(t/eoL),pageSize:eoL},autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.code},pageCount:Math.ceil((m||0)/eoL),defaultColumn:{width:"auto"}},rN.useSortBy,rN.usePagination,rN.useRowSelect);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(eow,{isLoading:y,setQuery:function(){},setSelectedRowIds:o,count:m||0,tableState:w,setOffset:r,offset:t})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:d,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:function(){return x(function(){d()})},children:"Save and go back"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",loading:v,disabled:v,onClick:function(){return x(function(){u(),l()})},children:"Save and close"})]})})]})},eoq=function(){var e=(0,B.useContext)(pf.ej),t=e.pop,r=e.push;return{screen:{title:"Add Store Currencies",onBack:t,view:(0,F.jsx)(eoz,{})},push:r}};function eoF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eoH(e){if(Array.isArray(e))return e}function eoU(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eoG(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eoV(e,t){return eoH(e)||eoU(e,t)||eoB(e,t)||eoG()}function eoB(e,t){if(e){if("string"==typeof e)return eoF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eoF(e,t)}}var eoW=15,eoQ=function(){var e,t=eoV((0,B.useState)(0),2),r=t[0],n=t[1],i=eoV((0,B.useState)([]),2),o=i[0],a=i[1],l=eoJ(),s=l.onClose,c=l.store,u=(0,en.useAdminUpdateStore)().mutate,d=(0,td.Z)(),f=function(e){u({currencies:e},{onSuccess:function(){d("Success","Successfully updated currencies","success")},onError:function(e){d("Error",(0,tf.e)(e),"error")}})},p=eoN(),m=(0,B.useMemo)(function(){return c.currencies.slice(r,r+eoW)},[c,r]),y=(0,rN.useTable)({data:m||[],columns:p,manualPagination:!0,initialState:{pageIndex:Math.floor(r/eoW),pageSize:eoW},autoResetPage:!1,autoResetSelectedRows:!1,getRowId:function(e){return e.code},pageCount:Math.ceil((c.currencies.length||0)/eoW)},rN.useSortBy,rN.usePagination,rN.useRowSelect),h=function(){a([]),y.toggleAllRowsSelected(!1)};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:s,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Current Store Currencies"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(eow,{isLoading:!1,setQuery:function(){},setSelectedRowIds:a,count:(null===(e=c.currencies)||void 0===e?void 0:e.length)||0,tableState:y,setOffset:n,offset:r,tableAction:(0,F.jsx)(eoY,{numberOfSelectedRows:o.length,onDeselect:h,onRemove:function(){f(c.currencies.filter(function(e){return!o.includes(e.code)}).map(function(e){return e.code})),h()}})})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsx)("div",{className:"flex w-full items-center justify-end",children:(0,F.jsx)(Y.Z,{variant:"primary",size:"small",onClick:s,children:"Close"})})})]})},eoY=function(e){var t=e.numberOfSelectedRows,r=e.onDeselect,n=e.onRemove,i=!!t,o=eoq(),a=o.screen,l=o.push;return(0,F.jsx)("div",{className:"space-x-xsmall flex h-[34px] overflow-hidden",children:(0,F.jsxs)("div",{className:(0,ec.Z)("transition-all duration-200",{"translate-y-[-42px]":!i,"translate-y-[0px]":i}),children:[(0,F.jsxs)("div",{className:"mb-2 flex h-[34px] items-center divide-x",children:[(0,F.jsxs)("span",{className:"inter-small-regular text-grey-50 mr-3",children:[t," selected"]}),(0,F.jsxs)("div",{className:"space-x-xsmall flex pl-3",children:[(0,F.jsx)(Y.Z,{onClick:r,size:"small",variant:"ghost",className:"border-grey-20 border",children:"Deselect"}),(0,F.jsx)(Y.Z,{onClick:n,size:"small",variant:"ghost",className:"border-grey-20 border text-rose-50",children:"Remove"})]})]}),(0,F.jsx)("div",{className:"flex h-[34px] justify-end",children:(0,F.jsxs)(Y.Z,{size:"small",variant:"ghost",className:"border-grey-20 border",onClick:function(){return l(a)},children:[(0,F.jsx)(sh.Z,{size:20})," Add Currencies"]})})]})})},eo$=(0,B.createContext)(null),eoK=function(e){var t=e.store,r=e.open,n=e.onClose,i=(0,B.useContext)(pf.ej);return(0,F.jsx)(eo$.Provider,{value:{onClose:n,store:t},children:(0,F.jsx)(pf.ZP,{context:i,open:r,handleClose:n,children:(0,F.jsx)(eoQ,{})})})},eoJ=function(){var e=(0,B.useContext)(eo$);if(!e)throw Error("useEditCurrenciesModal must be used within EditCurrenciesModal");return e},eoX=function(e){var t=e.store,r=(0,s1.Z)(),n=r.state,i=r.close,o=r.toggle;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex items-start justify-between",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-large-semibold mb-2xsmall",children:"Store currencies"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"All the currencies available in your store."})]}),(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:o,children:"Edit currencies"})]}),(0,F.jsx)(eoK,{store:t,open:n,onClose:i})]})},eo0=function(){var e=(0,V.useNavigate)(),t=uc().trackCurrencies,r=(0,en.useAdminStore)({onSuccess:function(e){t({used_currencies:e.store.currencies.map(function(e){return e.code})})}}),n=r.store,i=r.status,o=r.error;if(o){var a="An unknown error occurred",l=ix(o);return l&&(a=l.message,404===l.status)?(e("/404"),null):(0,F.jsxs)(tM,{title:"Error",children:[(0,F.jsx)("p",{className:"inter-base-regular",children:a}),(0,F.jsx)("div",{className:"mt-base px-base py-xsmall",children:(0,F.jsx)(tu,{data:JSON.parse(JSON.stringify(o))})})]})}return"loading"!==i&&n?(0,F.jsxs)("div",{className:"pb-xlarge",children:[(0,F.jsx)(eb,{label:"Back to Settings",path:"/a/settings",className:"mb-xsmall"}),(0,F.jsxs)("div",{className:"gap-base grid grid-cols-3",children:[(0,F.jsxs)("div",{className:"gap-y-xsmall col-span-2 flex flex-col ",children:[(0,F.jsx)(tM,{title:"Currencies",children:(0,F.jsx)("p",{className:"text-grey-50 inter-base-regular mt-2xsmall",children:"Manage the markets that you will operate within."})}),(0,F.jsxs)(tM,{children:[(0,F.jsx)("div",{className:"mb-large",children:(0,F.jsx)(eoX,{store:n})}),(0,F.jsxs)("div",{className:"cursor-default",children:[(0,F.jsxs)("div",{className:"inter-small-semibold text-grey-50 mb-base flex items-center justify-between",children:[(0,F.jsx)("p",{children:"Currency"}),(0,F.jsx)(wI,{featureFlag:"tax_inclusive_pricing",children:(0,F.jsx)(a9.Z,{side:"top",content:"Decide if you want to include or exclude taxes whenever you define a price in this currency",children:(0,F.jsx)("p",{children:"Tax Incl. Prices"})})})]}),(0,F.jsx)("div",{className:"gap-base grid grid-cols-1",children:n.currencies.sort(function(e,t){return e.code>t.code?1:-1}).map(function(e,t){return(0,F.jsx)(eoy,{currency:e,isDefault:n.default_currency_code===e.code},t)})})]})]})]}),(0,F.jsx)("div",{children:(0,F.jsx)(tM,{children:(0,F.jsx)(eov,{store:n})})})]})]}):(0,F.jsx)("div",{className:"flex h-[calc(100vh-64px)] w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})})};function eo1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eo2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eo1(e,t,r[t])})}return e}function eo3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eo5(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eo3(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eo6=function(){var e=(0,tR.cI)(),t=e.register,r=e.reset,n=e.handleSubmit,i=(0,en.useAdminStore)().store,o=(0,en.useAdminUpdateStore)().mutate,a=(0,td.Z)(),l=function(){i&&r(eo8(i))};return(0,B.useEffect)(function(){l()},[i]),(0,F.jsx)("form",{className:"flex-col py-5",children:(0,F.jsxs)("div",{className:"max-w-[632px]",children:[(0,F.jsx)(eb,{path:"/a/settings/",label:"Back to settings",className:"mb-xsmall"}),(0,F.jsx)(tI,{events:[{label:"Save",type:"button",onClick:n(function(e){var t=eo4(e.swap_link_template),r=eo4(e.payment_link_template),n=eo4(e.invite_link_template);if(!t){a("Error","Malformed swap url","error");return}if(!r){a("Error","Malformed payment url","error");return}if(!n){a("Error","Malformed invite url","error");return}o(e,{onSuccess:function(){a("Success","Successfully updated store","success")},onError:function(e){a("Error",(0,tf.e)(e),"error")}})})},{label:"Cancel",type:"button",onClick:l}],title:"Store Details",subtitle:"Manage your business details",children:(0,F.jsxs)("div",{className:"gap-y-xlarge mb-large flex flex-col",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"General"}),(0,F.jsx)(ry.Z,eo5(eo2({label:"Store name"},t("name")),{placeholder:"Medusa Store"}))]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h2",{className:"inter-base-semibold mb-base",children:"Advanced settings"}),(0,F.jsx)(ry.Z,eo5(eo2({label:"Swap link template"},t("swap_link_template")),{placeholder:"https://acme.inc/swap={swap_id}"})),(0,F.jsx)(ry.Z,eo5(eo2({className:"mt-base",label:"Draft order link template"},t("payment_link_template")),{placeholder:"https://acme.inc/payment={payment_id}"})),(0,F.jsx)(ry.Z,eo5(eo2({className:"mt-base",label:"Invite link template"},t("invite_link_template")),{placeholder:"https://acme-admin.inc/invite?token={invite_token}"}))]})]})})]})})},eo4=function(e){if(!e||""===e)return!0;try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}},eo8=function(e){return{name:e.name,swap_link_template:e.swap_link_template,payment_link_template:e.payment_link_template,invite_link_template:e.invite_link_template}};function eo7(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eo9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eo7(e,t,r[t])})}return e}function eae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eat(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eae(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var ear=function(e){var t=e.user,r=e.open,n=e.onClose,i=(0,en.useAdminUpdateUser)(t.id),o=i.mutate,a=i.isLoading,l=(0,en.useAdminGetSession)().refetch,s=(0,tR.cI)({defaultValues:ean(t)}),c=s.register,u=s.handleSubmit,d=s.formState.errors,f=s.reset;(0,B.useEffect)(function(){f(ean(t))},[r,t]);var p=(0,td.Z)(),m=u(function(e){o(e,{onSuccess:function(){p("Success","Your information was successfully updated","success"),l(),n()},onError:function(){}})});return(0,F.jsxs)(tp.Z,{handleClose:n,open:r,isLargeModal:!1,children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit information"})}),(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)("div",{className:"gap-y-base flex flex-col",children:(0,F.jsxs)("div",{className:"gap-x-base grid grid-cols-2",children:[(0,F.jsx)(ry.Z,eat(eo9({},c("first_name")),{errors:d,label:"First name"})),(0,F.jsx)(ry.Z,eat(eo9({},c("last_name")),{errors:d,label:"Last name"}))]})})}),(0,F.jsx)(tp.Z.Footer,{className:"border-grey-20 pt-base border-t",children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:n,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",loading:a,disabled:a,onClick:m,children:"Submit and close"})]})})]})]})},ean=function(e){return{first_name:e.first_name,last_name:e.last_name}};function eai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eai(e,t,r[t])})}return e}var eaa=function(e){var t=e.user,r=(0,s1.Z)(),n=r.state,i=r.toggle,o=r.close,a=(0,B.useMemo)(function(){return[null==t?void 0:t.first_name,null==t?void 0:t.last_name].filter(function(e){return e}).join(" ")},[t]);return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,F.jsx)("div",{className:"w-18 border-grey-20 box-border flex aspect-square items-center justify-center rounded-full border",children:t?(0,F.jsx)("div",{className:"aspect-square w-16",children:(0,F.jsx)(iY.Z,{user:eao({},t),color:"bg-teal-40",font:"inter-2xlarge-semibold"})}):(0,F.jsx)("div",{className:"bg-teal-40 aspect-square w-16 animate-pulse rounded-full"})}),(0,F.jsx)("div",{className:"flex flex-col",children:a?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:a}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:null==t?void 0:t.email})]}):(0,F.jsx)("p",{className:"inter-base-semibold",children:null==t?void 0:t.email})})]}),(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",disabled:!t,onClick:i,children:"Edit information"})]}),t&&(0,F.jsx)(ear,{open:n,onClose:o,user:t})]})},eal=function(e){var t=e.config,r=e.open,n=e.onClose,i=(0,c1.bD)(),o=i.mutate,a=i.isLoading,l=(0,tR.cI)({defaultValues:{opt_out:t.opt_out,anonymize:t.anonymize}}),s=l.handleSubmit,c=l.reset;(0,B.useEffect)(function(){c({opt_out:t.opt_out,anonymize:t.anonymize})},[r,t]);var u=(0,td.Z)(),d=s(function(e){o(e,{onSuccess:function(){u("Success","Your information was successfully updated","success"),n()},onError:function(e){u("Error",(0,tf.e)(e),"error")}})});return(0,F.jsxs)(tp.Z,{handleClose:n,open:r,isLargeModal:!0,children:[(0,F.jsx)(tp.Z.Header,{handleClose:n,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit preferences"})}),(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(c6.Z,{form:(0,tL.G)(l)})}),(0,F.jsx)(tp.Z.Footer,{className:"border-grey-20 pt-base border-t",children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:n,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",loading:a,disabled:a,onClick:d,children:"Submit and close"})]})})]})]})},eas=function(e){var t=e.user,r=(0,c1.Je)(),n=r.analytics_config,i=r.isLoading,o=(0,s1.Z)(),a=o.state,l=o.toggle,s=o.close;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("h2",{className:"inter-base-semibold",children:"Usage insights"}),i?(0,F.jsx)("div",{className:"badge bg-grey-10 h-large w-16 animate-pulse"}):!n||(null==n?void 0:n.opt_out)?(0,F.jsx)(oP.Z,{variant:"disabled",children:"Disabled"}):(0,F.jsx)(oP.Z,{variant:"success",children:"Active"})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Share usage insights and help us improve Medusa"})]}),(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:l,disabled:!n,children:"Edit preferences"})]}),n&&t&&(0,F.jsx)(eal,{open:a,onClose:s,config:n})]})},eac=function(){var e=(0,o3.ye)().isFeatureEnabled,t=(0,en.useAdminGetSession)().user;return(0,F.jsxs)("div",{children:[(0,F.jsx)(eb,{label:"Back to Settings",path:"/a/settings",className:"mb-xsmall"}),(0,F.jsxs)("div",{className:"rounded-rounded border-grey-20 pt-large pb-xlarge px-xlarge gap-y-xlarge large:max-w-[50%] flex flex-col border bg-white",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Personal information"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Manage your Medusa profile"})]}),(0,F.jsxs)("div",{className:"flex flex-col",children:[(0,F.jsx)("div",{className:"border-grey-20 py-xlarge border-t",children:(0,F.jsx)(eaa,{user:t})}),e("analytics")&&(0,F.jsx)("div",{className:"border-grey-20 py-xlarge border-t",children:(0,F.jsx)(eas,{user:t})})]})]})]})};function eau(e){switch(e){case"primecargo":return{label:"Prime Cargo",value:"primecargo"};case"manual":return{label:"Manual",value:"manual"};case"webshipper":return{label:"Webshipper",value:"webshipper"};default:return{label:e,value:e}}}var ead={stripe:{label:"Stripe",value:"stripe"},"stripe-ideal":{label:"Stripe Ideal",value:"stripe-ideal"},"stripe-giropay":{label:"Stripe Giropay",value:"stripe-giropay"},"stripe-bancontact":{label:"Stripe Bancontact",value:"stripe-bancontact"},"stripe-przelewy24":{label:"Stripe Przelewy24",value:"stripe-przelewy24"},"stripe-blik":{label:"Stripe Blik",value:"stripe-blik"},"mobilepay-adyen":{label:"MobilePay via Adyen",value:"mobilepay-adyen"},"scheme-adyen":{label:"Cards via Adyen",value:"scheme-adyen"},"klarna-adyen":{label:"Klarna via Adyen",value:"klarna-adyen"},klarna:{label:"Klarna",value:"klarna"},"paywithgoogle-adyen":{label:"GooglePay via Adyen",value:"paywithgoogle-adyen"},"applepay-adyen":{label:"ApplePay via Adyen",value:"applepay-adyen"},"paypal-adyen":{label:"PayPal via Adyen",value:"paypal-adyen"},"ideal-adyen":{label:"iDEAL via Adyen",value:"ideal-adyen"},manual:{label:"Manual",value:"manual"}};function eaf(e){var t;return null!==(t=ead[e])&&void 0!==t?t:{label:e,value:e}}var eap=function(){var e=(0,en.useAdminStore)(),t=e.store,r=e.isLoading,n=t.fulfillment_providers,i=t.payment_providers;return{paymentProviderOptions:(0,B.useMemo)(function(){return r?[]:(null==i?void 0:i.map(function(e){return eaf(e.id)}))||[]},[i,r]),fulfillmentProviderOptions:(0,B.useMemo)(function(){return r?[]:(null==n?void 0:n.map(function(e){return eau(e.id)}))||[]},[n,r]),currencyOptions:(0,B.useMemo)(function(){return r?[]:(null==t?void 0:t.currencies.map(function(e){return{label:e.name,value:e.code}}))||[]},[t,r]),countryOptions:wv.map(function(e){return{label:e.name,value:e.alpha2.toLowerCase()}})}};function eam(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eay(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eam(e,t,r[t])})}return e}function eah(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eab(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eah(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eav=function(e){var t=e.form,r=e.isCreate,n=void 0!==r&&r,i=t.control,o=t.register,a=t.path,l=t.formState.errors,s=eap(),c=s.currencyOptions,u=s.countryOptions;return(0,F.jsxs)("div",{children:[(0,F.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,eab(eay({label:"Title",placeholder:"Europe",required:!0},o(a("name"),{required:"Title is required",minLength:s6.Z.minOneCharRule("Title"),pattern:s6.Z.whiteSpaceRule("Title")})),{errors:l})),(0,F.jsx)(tR.Qr,{control:i,name:a("currency_code"),rules:{required:"Currency code is required"},render:function(e){var t=e.field;return(0,F.jsx)(lS,eab(eay({label:"Currency",placeholder:"Choose currency",required:!0},t),{options:c,name:a("currency_code"),errors:l}))}}),n&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(ry.Z,eab(eay({label:"Default Tax Rate",required:!0,placeholder:"25",prefix:"%",step:1,type:"number"},o(a("tax_rate"),{required:n?"Tax rate is required":void 0,max:{value:100,message:"Tax rate must be equal to or less than 100"},min:s6.Z.nonNegativeNumberRule("Tax rate"),valueAsNumber:!0})),{errors:l})),(0,F.jsx)(ry.Z,eab(eay({label:"Default Tax Code",placeholder:"1000"},o(a("tax_code"))),{errors:l}))]}),(0,F.jsx)(tR.Qr,{control:i,name:a("countries"),render:function(e){var t=e.field;return(0,F.jsx)(lS,eab(eay({label:"Countries",placeholder:"Choose countries",isMulti:!0,selectAll:!0},t),{name:a("countries"),errors:l,options:u}))}})]}),(0,F.jsx)(wI,{featureFlag:"tax_inclusive_pricing",children:(0,F.jsxs)("div",{className:"mt-xlarge flex items-start justify-between",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("h3",{className:"inter-base-semibold",children:"Tax inclusive prices"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"When enabled region prices will be tax inclusive."})]}),(0,F.jsx)(tR.Qr,{control:i,name:a("includes_tax"),render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:r,onCheckedChange:n})}})]})})]})},eag=function(e){var t=e.form,r=t.control,n=t.path,i=t.formState.errors,o=eap(),a=o.fulfillmentProviderOptions,l=o.paymentProviderOptions;return(0,F.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,F.jsx)(tR.Qr,{control:r,name:n("payment_providers"),rules:{required:"Payment providers are required",minLength:{value:1,message:"Payment providers are required"}},render:function(e){var t=e.field,r=t.value,o=t.onBlur,a=t.onChange;return(0,F.jsx)(lS,{label:"Payment Providers",placeholder:"Choose payment providers...",options:l,isMulti:!0,isClearable:!0,required:!0,selectAll:!0,value:r,onChange:a,onBlur:o,name:n("payment_providers"),errors:i})}}),(0,F.jsx)(tR.Qr,{control:r,name:n("fulfillment_providers"),rules:{required:"Fulfillment providers are required",minLength:{value:1,message:"Fulfillment providers are required"}},render:function(e){var t=e.field,r=t.onBlur,o=t.onChange,l=t.value;return(0,F.jsx)(lS,{label:"Fulfillment Providers",placeholder:"Choose fulfillment providers...",options:a,required:!0,isMulti:!0,isClearable:!0,selectAll:!0,value:l,onChange:o,onBlur:r,name:n("fulfillment_providers"),errors:i})}})]})},eax=function(e){var t=e.region,r=e.onClose,n=e.open,i=(0,tR.cI)({defaultValues:eaj(t)}),o=(0,o3.ye)().isFeatureEnabled,a=i.reset,l=i.handleSubmit,s=i.formState.isDirty,c=function(){a(eaj(t)),r()};(0,B.useEffect)(function(){a(eaj(t))},[t,a]);var u=(0,en.useAdminUpdateRegion)(t.id),d=u.mutate,f=u.isLoading,p=(0,td.Z)(),m=l(function(e){var t,r={name:e.details.name,currency_code:null===(t=e.details.currency_code)||void 0===t?void 0:t.value,payment_providers:e.providers.payment_providers.map(function(e){return e.value}),fulfillment_providers:e.providers.fulfillment_providers.map(function(e){return e.value}),countries:e.details.countries.map(function(e){return e.value}),metadata:rd(e.metadata)};o("tax_inclusive_pricing")&&(r.includes_tax=e.details.includes_tax),d(r,{onSuccess:function(){p("Success","Region was successfully updated","success"),c()},onError:function(e){p("Error",(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{handleClose:c,open:n,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:c,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit Region Details"})}),(0,F.jsxs)("form",{onSubmit:m,children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Details"}),(0,F.jsx)(eav,{form:(0,tL.G)(i,"details")})]}),(0,F.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Providers"}),(0,F.jsx)(eag,{form:(0,tL.G)(i,"providers")})]}),(0,F.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(i,"metadata")})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:c,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",loading:f,disabled:f||!s,children:"Save and close"})]})})]})]})})},eaj=function(e){return{details:{countries:e.countries?e.countries.map(function(e){return{value:e.iso_2,label:e.display_name}}):[],currency_code:{value:e.currency_code,label:v$.Q[e.currency_code.toUpperCase()].name},name:e.name,tax_code:null,tax_rate:null,includes_tax:e.includes_tax},providers:{fulfillment_providers:e.fulfillment_providers?e.fulfillment_providers.map(function(e){return eau(e.id)}):[],payment_providers:e.payment_providers?e.payment_providers.map(function(e){return eaf(e.id)}):[]},metadata:rf(e.metadata)}};function eaO(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function eaw(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){eaO(o,n,i,a,l,"next",e)}function l(e){eaO(o,n,i,a,l,"throw",e)}a(void 0)})}}function eaS(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var eaP=function(e){var t,r=e.region,n=(0,s1.Z)(),i=n.state,o=n.toggle,a=n.close,l=(0,en.useAdminDeleteRegion)(r.id).mutate,s=(0,V.useNavigate)(),c=(0,td.Z)(),u=o2(),d=(t=eaw(function(){return eaS(this,function(e){switch(e.label){case 0:return[4,u({heading:"Delete Region",text:"Are you sure you want to delete this region?",extraConfirmation:!0,entityName:r.name})];case 1:return e.sent()&&l(void 0,{onSuccess:function(){s("/a/settings/regions",{replace:!0}),c("Success","Region has been deleted","success"),s("/a/settings/regions",{replace:!0})},onError:function(e){c("Error",(0,tf.e)(e),"error")}}),[2]}})}),function(){return t.apply(this,arguments)});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tM,{title:r.name,actions:[{label:"Edit Region Details",onClick:o,icon:(0,F.jsx)(eC,{size:20,className:"text-grey-50"})},{label:"Delete Region",onClick:d,icon:(0,F.jsx)(eZ,{size:20}),variant:"danger"}],children:(0,F.jsxs)("div",{className:"gap-y-xsmall mt-large flex flex-col",children:[(0,F.jsx)("h2",{className:"inter-large-semibold",children:"Details"}),(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,F.jsx)(eaC,{title:"Currency",children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("span",{className:"inter-base-semibold text-grey-90",children:r.currency_code.toUpperCase()}),(0,F.jsx)("span",{children:v$.Q[r.currency_code.toUpperCase()].name})]})}),(0,F.jsx)(eaC,{title:"Countries",children:(0,F.jsx)("div",{children:r.countries&&r.countries.length?(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("p",{children:r.countries.slice(0,4).map(function(e){return e.display_name}).join(", ")}),r.countries.length>4&&(0,F.jsx)(a9.Z,{side:"right",content:(0,F.jsx)("ul",{children:r.countries.slice(4).map(function(e){return(0,F.jsx)("li",{children:e.display_name},e.id)})}),children:(0,F.jsxs)("span",{className:"cursor-default",children:["+ ",r.countries.length-4," more"]})})]}):(0,F.jsx)("p",{children:"No countries configured"})})}),(0,F.jsx)(eaC,{title:"Payment providers",children:(0,F.jsx)("div",{children:r.payment_providers&&r.payment_providers.length?(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("p",{children:r.payment_providers.slice(0,4).map(function(e){return eaf(e.id).label}).join(", ")}),r.payment_providers.length>4&&(0,F.jsx)(a9.Z,{side:"right",content:(0,F.jsx)("ul",{children:r.payment_providers.slice(4).map(function(e){return(0,F.jsx)("li",{children:eaf(e.id)},e.id)})}),children:(0,F.jsxs)("span",{className:"cursor-default",children:["+ ",r.payment_providers.length-4," more"]})})]}):(0,F.jsx)("p",{children:"No payment providers configured"})})}),(0,F.jsx)(eaC,{title:"Fulfillment providers",children:(0,F.jsx)("div",{children:r.payment_providers&&r.payment_providers.length?(0,F.jsxs)("div",{className:"gap-x-xsmall flex items-center",children:[(0,F.jsx)("p",{children:r.fulfillment_providers.slice(0,4).map(function(e){return eau(e.id).label}).join(", ")}),r.fulfillment_providers.length>4&&(0,F.jsx)(a9.Z,{side:"right",content:(0,F.jsx)("ul",{children:r.fulfillment_providers.slice(4).map(function(e){return(0,F.jsx)("li",{children:eau(e.id)},e.id)})}),children:(0,F.jsxs)("span",{className:"cursor-default",children:["+ ",r.fulfillment_providers.length-4," more"]})})]}):(0,F.jsx)("p",{children:"No fulfillment providers configured"})})})]})]})}),(0,F.jsx)(eax,{region:r,onClose:a,open:i})]})},eaC=function(e){var t=e.title,r=e.children;return(0,F.jsxs)("div",{className:"inter-base-regular text-grey-50 flex items-center justify-between",children:[(0,F.jsx)("p",{children:t}),r]})};function eaN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eak(e){if(Array.isArray(e))return e}function ea_(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eaA(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eaD(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eaE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ea_(e,t,r[t])})}return e}function eaZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eaI(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eaZ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function eaT(e,t){return eak(e)||eaA(e,t)||eaM(e,t)||eaD()}function eaM(e,t){if(e){if("string"==typeof e)return eaN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eaN(e,t)}}var eaR=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,en.useAdminShippingProfiles)().shipping_profiles,n=(0,en.useAdminRegionFulfillmentOptions)(e).fulfillment_options,i=(0,B.useMemo)(function(){return n?n.reduce(function(e,r,n){var i=r.options.filter(function(e){return!!e.is_return==!!t});return e.concat(i.map(function(e,t){return{label:"".concat(e.name||e.id," via ").concat(eau(r.provider_id).label),value:"".concat(n,".").concat(t)}}))},[]):[]},[n]);return{shippingProfileOptions:(0,B.useMemo)(function(){return(null==r?void 0:r.map(function(e){return{value:e.id,label:e.name}}))||[]},[r]),fulfillmentOptions:i,getFulfillmentData:function(e){var r=null==n?void 0:n.map(function(e){var r=e.options.filter(function(e){return!!e.is_return==!!t});return eaI(eaE({},e),{options:r})}),i=eaT(e.split("."),2),o=i[0],a=i[1],l=(null==r?void 0:r[o])||{},s=l.provider_id,c=l.options;return{provider_id:s,data:(null==c?void 0:c[a])||{}}},getRequirementsData:function(e){return Object.entries(e.requirements).reduce(function(e,t){var r=eaT(t,2),n=r[0],i=r[1];return"number"==typeof(null==i?void 0:i.amount)&&i.amount>=0&&e.push({type:n,amount:i.amount,id:i.id||void 0}),e},[])}}};function eaL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eaz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eaL(e,t,r[t])})}return e}function eaq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eaF(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eaq(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var eaH=function(e){var t,r=e.form,n=e.region,i=e.isEdit,o=r.register,a=r.watch,l=r.control,s=r.formState.errors,c=eaR(n.id),u=c.shippingProfileOptions,d=c.fulfillmentOptions;return(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{children:(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsxs)("div",{className:"flex items-center justify-between",children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-2xsmall",children:"Visible in store"}),(0,F.jsx)(tR.Qr,{control:l,name:"store_option",render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(vw.Z,{checked:r,onCheckedChange:n})}})]}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Enable or disable the shipping option visiblity in store."})]})}),(0,F.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Details"}),(0,F.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,eaF(eaz({label:"Title",required:!0},o("name",{required:"Title is required",pattern:s6.Z.whiteSpaceRule("Title"),minLength:s6.Z.minOneCharRule("Title")})),{errors:s})),(0,F.jsxs)("div",{className:"gap-large flex items-center",children:[(0,F.jsx)(tR.Qr,{control:l,name:"price_type",render:function(e){var t=e.field,r=t.onChange,n=t.value,i=t.onBlur;return(0,F.jsx)(lS,{label:"Price Type",required:!0,value:n,onChange:r,onBlur:i,options:[{label:"Flat Rate",value:"flat_rate"},{label:"Calculated",value:"calculated"}],placeholder:"Choose a price type",errors:s})}}),(null===(t=a("price_type"))||void 0===t?void 0:t.value)==="flat_rate"&&(0,F.jsx)(tR.Qr,{control:l,name:"amount",rules:{min:s6.Z.nonNegativeNumberRule("Price"),max:s6.Z.maxInteger("Price",n.currency_code)},render:function(e){var t=e.field,r=t.value,i=t.onChange;return(0,F.jsxs)("div",{children:[(0,F.jsx)(u0.Z,{label:"Price",className:"mb-2xsmall",tooltip:(0,F.jsx)(OL,{includesTax:n.includes_tax})}),(0,F.jsx)(v3,{amount:r||void 0,onChange:i,name:"amount",currencyCode:n.currency_code,errors:s})]})}})]}),!(void 0!==i&&i)&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tR.Qr,{control:l,name:"shipping_profile",render:function(e){var t=e.field;return(0,F.jsx)(lS,eaF(eaz({label:"Shipping Profile",required:!0,options:u,placeholder:"Choose a shipping profile"},t),{errors:s}))}}),(0,F.jsx)(tR.Qr,{control:l,name:"fulfillment_provider",render:function(e){var t=e.field;return(0,F.jsx)(lS,eaF(eaz({label:"Fulfillment Method",required:!0,placeholder:"Choose a fulfillment method",options:d},t),{errors:s}))}})]})]})]}),(0,F.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Requirements"}),(0,F.jsxs)("div",{className:"gap-large grid grid-cols-2",children:[(0,F.jsx)(tR.Qr,{control:l,name:"requirements.min_subtotal.amount",rules:{min:s6.Z.nonNegativeNumberRule("Min. subtotal"),max:s6.Z.maxInteger("Min. subtotal",n.currency_code),validate:function(e){if(null===e)return!0;var t=r.getValues("requirements.max_subtotal.amount");return!t||!(e>t)||"Min. subtotal must be less than max. subtotal"}},render:function(e){var t=e.field,r=t.value,i=t.onChange;return(0,F.jsxs)("div",{children:[(0,F.jsx)(u0.Z,{label:"Min. subtotal",className:"mb-xsmall",tooltip:(0,F.jsx)(OL,{includesTax:n.includes_tax})}),(0,F.jsx)(v3,{amount:"number"==typeof r?r:void 0,onChange:i,name:"requirements.min_subtotal.amount",currencyCode:n.currency_code,errors:s})]})}}),(0,F.jsx)(tR.Qr,{control:l,name:"requirements.max_subtotal.amount",rules:{min:s6.Z.nonNegativeNumberRule("Max. subtotal"),max:s6.Z.maxInteger("Max. subtotal",n.currency_code),validate:function(e){if(null===e)return!0;var t=r.getValues("requirements.min_subtotal.amount");return!t||!(e<t)||"Max. subtotal must be greater than min. subtotal"}},render:function(e){var t=e.field,r=t.value,i=t.onChange,o=t.ref;return(0,F.jsxs)("div",{ref:o,children:[(0,F.jsx)(u0.Z,{label:"Max. subtotal",className:"mb-xsmall",tooltip:(0,F.jsx)(OL,{includesTax:n.includes_tax})}),(0,F.jsx)(v3,{amount:"number"==typeof r?r:void 0,onChange:i,name:"requirements.max_subtotal.amount",currencyCode:n.currency_code,errors:s})]})}})]})]}),(0,F.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,F.jsxs)("div",{children:[(0,F.jsx)("h3",{className:"inter-base-semibold mb-base",children:"Metadata"}),(0,F.jsx)(rs,{form:(0,tL.G)(r,"metadata")})]})]})},eaU=function(e){var t=e.open,r=e.onClose,n=e.option,i=(0,tR.cI)({defaultValues:eaG(n)}),o=(0,en.useAdminUpdateShippingOption)(n.id),a=o.mutate,l=o.isLoading,s=eaR(n.region_id).getRequirementsData,c=(0,td.Z)(),u=i.reset,d=i.handleSubmit,f=i.formState.isDirty;(0,B.useEffect)(function(){t&&u(eaG(n))},[n,u,t]);var p=function(){u(eaG(n)),r()},m=d(function(e){a({name:e.name,requirements:s(e),admin_only:!e.store_option,amount:e.amount,metadata:rd(e.metadata)},{onSuccess:function(){c("Success","Shipping option updated","success"),p()},onError:function(e){c("Error",(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{open:t,handleClose:p,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:p,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit Shipping Option"})}),(0,F.jsxs)("form",{onSubmit:m,children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:"Fulfillment Method"}),(0,F.jsxs)("p",{className:"inter-base-regular text-grey-50",children:[n.data.id," via ",n.provider_id]})]}),(0,F.jsx)("div",{className:"bg-grey-20 my-xlarge h-px w-full"}),(0,F.jsx)(eaH,{form:i,region:n.region,isEdit:!0})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",onClick:p,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",loading:l,disabled:l||!f,children:"Save and close"})]})})]})]})})},eaG=function(e){var t=e.requirements.find(function(e){return"min_subtotal"===e.type}),r=e.requirements.find(function(e){return"max_subtotal"===e.type});return{store_option:!e.admin_only,name:e.name,price_type:{label:"flat_rate"===e.price_type?"Flat rate":"Calculated Price",value:e.price_type},fulfillment_provider:null,shipping_profile:null,requirements:{min_subtotal:t?{amount:t.amount,id:t.id}:null,max_subtotal:r?{amount:r.amount,id:r.id}:null},amount:e.amount,metadata:rf(e.metadata)}};!function(e){e.FLAT_RATE="flat_rate",e.CALCULATED="calculated"}(z||(z={}));var eaV=function(e){var t,r,n,i,o=e.option,a=(0,s1.Z)(),l=a.state,s=a.toggle,c=a.close,u=(0,en.useAdminDeleteShippingOption)(o.id).mutate,d=(0,td.Z)();return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"bg-grey-0 rounded-rounded border-grey-20 p-base flex items-center justify-between border",children:[(0,F.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,F.jsx)("div",{className:"bg-grey-10 rounded-rounded flex h-10 w-10 items-center justify-center p-2.5",children:(0,F.jsx)(R0,{size:20,className:"text-grey-50"})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold",children:o.name}),(0,F.jsx)("div",{children:(0,F.jsxs)("p",{className:"inter-small-regular text-grey-50",children:[o.price_type===z.FLAT_RATE?"Flat Rate":"Calcualted",":"," ",(0,oy.j5)({amount:o.amount,currencyCode:o.region.currency_code})," ","- Min. subtotal:"," ",(0,oy.j5)({amount:null===(r=o.requirements)||void 0===r?void 0:null===(t=r.find(function(e){return"min_subtotal"===e.type}))||void 0===t?void 0:t.amount,currencyCode:o.region.currency_code})," ","- Max. subtotal:"," ",(0,oy.j5)({amount:null===(i=o.requirements)||void 0===i?void 0:null===(n=i.find(function(e){return"max_subtotal"===e.type}))||void 0===n?void 0:n.amount,currencyCode:o.region.currency_code})]})})]})]}),(0,F.jsxs)("div",{className:"gap-x-base flex items-center",children:[(0,F.jsx)("div",{className:(0,ec.Z)("px-xsmall rounded-rounded py-0.5",{"bg-grey-10 text-grey-50":o.admin_only,"bg-emerald-10 text-emerald-50":!o.admin_only}),children:(0,F.jsx)("span",{className:"inter-small-semibold",children:o.admin_only?"Admin":"Store"})}),(0,F.jsx)("div",{children:(0,F.jsx)(eQ,{actions:[{label:"Edit",onClick:s,icon:(0,F.jsx)(eC,{size:20})},{label:"Delete",onClick:function(){u(void 0,{onSuccess:function(){d("Success","Shipping option has been deleted","success")},onError:function(e){d("Error",(0,tf.e)(e),"error")}})},icon:(0,F.jsx)(eZ,{size:20}),variant:"danger"}]})})]})]}),(0,F.jsx)(eaU,{option:o,open:l,onClose:c})]})},eaB=function(e){var t=e.open,r=e.onClose,n=e.region,i=(0,tR.cI)(),o=i.formState.isDirty,a=i.handleSubmit,l=i.reset,s=(0,en.useAdminCreateShippingOption)(),c=s.mutate,u=s.isLoading,d=eaR(n.id),f=d.getFulfillmentData,p=d.getRequirementsData,m=(0,td.Z)(),y=function(){l(),r()},h=a(function(e){var t,r=f(e.fulfillment_provider.value),i=r.provider_id,o=r.data;c({is_return:!0,region_id:n.id,name:e.name,profile_id:null===(t=e.shipping_profile)||void 0===t?void 0:t.value,data:o,price_type:"flat_rate",provider_id:i,admin_only:!e.store_option,amount:e.amount,requirements:p(e),metadata:rd(e.metadata)},{onSuccess:function(){m("Success","Shipping option created","success"),y()},onError:function(e){m("Error",(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{open:t,handleClose:y,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:y,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Add Return Shipping Option"})}),(0,F.jsxs)("form",{onSubmit:h,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(eaH,{form:i,region:n})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:y,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",loading:u,disabled:u||!o,children:"Save and close"})]})})]})]})})},eaW=function(e){var t=e.region,r=(0,en.useAdminShippingOptions)({region_id:t.id,is_return:!0}).shipping_options,n=(0,s1.Z)(),i=n.state,o=n.toggle,a=n.close;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tM,{title:"Return Shipping Options",actions:[{label:"Add Option",onClick:o}],children:(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Enter specifics about available regional return shipment methods."}),(0,F.jsx)("div",{className:"gap-y-small flex flex-col",children:null==r?void 0:r.map(function(e){return(0,F.jsx)(eaV,{option:e},e.id)})})]})}),(0,F.jsx)(eaB,{onClose:a,open:i,region:t})]})},eaQ=function(e){var t=e.open,r=e.onClose,n=e.region,i=(0,tR.cI)(),o=i.formState.isDirty,a=i.handleSubmit,l=i.reset,s=(0,en.useAdminCreateShippingOption)(),c=s.mutate,u=s.isLoading,d=eaR(n.id),f=d.getFulfillmentData,p=d.getRequirementsData,m=(0,td.Z)(),y=function(){l(),r()},h=a(function(e){var t,r=f(e.fulfillment_provider.value),i=r.provider_id,o=r.data;c({is_return:!1,region_id:n.id,profile_id:null===(t=e.shipping_profile)||void 0===t?void 0:t.value,name:e.name,data:o,price_type:e.price_type.value,provider_id:i,admin_only:!e.store_option,amount:e.amount,requirements:p(e),metadata:rd(e.metadata)},{onSuccess:function(){m("Success","Shipping option created","success"),y()},onError:function(e){m("Error",(0,tf.e)(e),"error")}})});return(0,F.jsx)(tp.Z,{open:t,handleClose:y,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:y,children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Add Shipping Option"})}),(0,F.jsxs)("form",{onSubmit:h,children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(eaH,{form:i,region:n})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{variant:"secondary",size:"small",type:"button",onClick:y,children:"Cancel"}),(0,F.jsx)(Y.Z,{variant:"primary",size:"small",type:"submit",loading:u,disabled:u||!o,children:"Save and close"})]})})]})]})})},eaY=function(e){var t=e.region,r=(0,en.useAdminShippingOptions)({region_id:t.id,is_return:!1}).shipping_options,n=(0,s1.Z)(),i=n.state,o=n.toggle,a=n.close;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tM,{title:"Shipping Options",actions:[{label:"Add Option",onClick:o}],children:(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Enter specifics about available regional shipment methods."}),(0,F.jsx)("div",{className:"gap-y-small flex flex-col",children:null==r?void 0:r.map(function(e){return(0,F.jsx)(eaV,{option:e},e.id)})})]})}),(0,F.jsx)(eaQ,{open:i,onClose:a,region:t})]})},ea$=function(e){var t=e.id,r=(0,en.useAdminRegion)(t,{enabled:!!t}),n=r.region,i=r.isLoading,o=r.isError;return i?(0,F.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}):o?(0,F.jsxs)("div",{className:"bg-grey-0 rounded-rounded border-grey-20 gap-y-xsmall flex h-full w-full flex-col items-center justify-center border text-center ",children:[(0,F.jsx)("h1",{className:"inter-large-semibold",children:"Something went wrong..."}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"We can't find a region with that ID, use the menu to the left to select a region."})]}):n?(0,F.jsxs)("div",{className:"gap-y-xsmall flex flex-col",children:[(0,F.jsx)(eaP,{region:n}),(0,F.jsx)(eaY,{region:n}),(0,F.jsx)(eaW,{region:n})]}):null};function eaK(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eaJ(e){if(Array.isArray(e))return e}function eaX(e){if(Array.isArray(e))return eaK(e)}function ea0(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ea1(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ea2(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ea3(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ea5(e,t){return eaJ(e)||ea1(e,t)||ea4(e,t)||ea2()}function ea6(e){return eaX(e)||ea0(e)||ea4(e)||ea3()}function ea4(e,t){if(e){if("string"==typeof e)return eaK(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eaK(e,t)}}var ea8=function(e){var t=e.onClose,r=ea5((0,B.useState)(["details"]),2),n=r[0],i=r[1],o=(0,tR.cI)({defaultValues:ea7()}),a=o.formState.isDirty,l=o.handleSubmit,s=o.reset,c=(0,en.useAdminCreateRegion)(),u=c.mutate,d=c.isLoading,f=(0,V.useNavigate)(),p=(0,td.Z)(),m=(0,o3.ye)().isFeatureEnabled,y=function(){s(ea7()),t()},h=l(function(e){var t,r={name:e.details.name,countries:e.details.countries.map(function(e){return e.value}),currency_code:null===(t=e.details.currency_code)||void 0===t?void 0:t.value,fulfillment_providers:e.providers.fulfillment_providers.map(function(e){return e.value}),payment_providers:e.providers.payment_providers.map(function(e){return e.value}),tax_rate:e.details.tax_rate,tax_code:e.details.tax_code||void 0};m("tax_inclusive_pricing")&&(r.includes_tax=e.details.includes_tax),u(r,{onSuccess:function(e){var t=e.region;p("Success","Region created","success"),f("/a/settings/regions/".concat(t.id)),y()},onError:function(e){p("Error",(0,tf.e)(e),"error")}})},function(e){e.providers&&!n.includes("providers")&&i(function(e){return ea6(e).concat(["providers"])})});return(0,F.jsx)("form",{className:"w-full",onSubmit:h,noValidate:!0,children:(0,F.jsxs)(c3,{children:[(0,F.jsx)(c3.Header,{children:(0,F.jsxs)("div",{className:"medium:w-8/12 flex w-full justify-between px-8",children:[(0,F.jsx)(Y.Z,{size:"small",variant:"ghost",type:"button",onClick:y,children:(0,F.jsx)(c2.Z,{size:20})}),(0,F.jsx)("div",{className:"gap-x-small flex",children:(0,F.jsx)(Y.Z,{size:"small",variant:"primary",loading:d,disabled:!a||d,type:"submit",children:"Create region"})})]})}),(0,F.jsx)(c3.Main,{className:"no-scrollbar flex w-full justify-center",children:(0,F.jsx)("div",{className:"small:w-4/5 medium:w-7/12 large:w-6/12 my-16 max-w-[700px]",children:(0,F.jsxs)(gj,{value:n,onValueChange:i,type:"multiple",children:[(0,F.jsxs)(gj.Item,{title:"Details",value:"details",forceMountContent:!0,required:!0,children:[(0,F.jsx)("p",{className:"inter-base-regular mb-xlarge text-grey-50",children:"Add the region details."}),(0,F.jsx)(eav,{form:(0,tL.G)(o,"details"),isCreate:!0})]}),(0,F.jsxs)(gj.Item,{title:"Providers",value:"providers",forceMountContent:!0,required:!0,children:[(0,F.jsx)("p",{className:"inter-base-regular mb-xlarge text-grey-50",children:"Add which fulfillment and payment providers shoulb be available in this region."}),(0,F.jsx)(eag,{form:(0,tL.G)(o,"providers")})]})]})})})]})})},ea7=function(){return{details:{countries:[]},providers:{payment_providers:void 0,fulfillment_providers:void 0}}},ea9=function(e){var t,r,n=e.region;return(0,F.jsx)(pQ.Item,{value:n.id,label:n.name,sublabel:n.countries&&n.countries.length?"(".concat(n.countries.map(function(e){return e.display_name}).join(", "),")"):void 0,children:(0,F.jsxs)("div",{className:"gap-y-2xsmall inter-small-regular text-grey-50 flex flex-col",children:[(0,F.jsxs)("p",{children:["Payment providers:"," ",(0,F.jsx)("span",{className:"truncate",children:(null===(t=n.payment_providers)||void 0===t?void 0:t.length)?n.payment_providers.map(function(e){return eaf(e.id).label}).join(", "):"Not configured"})]}),(0,F.jsxs)("p",{children:["Fulfillment providers:"," ",(0,F.jsx)("span",{className:"truncate",children:(null===(r=n.fulfillment_providers)||void 0===r?void 0:r.length)?n.fulfillment_providers.map(function(e){return eau(e.id).label}).join(", "):"Not configured"})]})]})})};function ele(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function elt(e){if(Array.isArray(e))return e}function elr(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eln(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eli(e,t){return elt(e)||elr(e,t)||elo(e,t)||eln()}function elo(e,t){if(e){if("string"==typeof e)return ele(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ele(e,t)}}var ela=function(e){var t=e.id,r=(0,V.useNavigate)(),n=uc().trackRegions,i=(0,en.useAdminRegions)(void 0,{onSuccess:function(e){var t=e.regions,r=e.count;n({regions:t.map(function(e){return e.name}),count:r})}}).regions,o=eli(B.useState(t),2),a=o[0],l=o[1],s=(0,B.useCallback)(function(e){e!==a&&(l(e),r("/a/settings/regions/".concat(e),{replace:!0}))},[r,a]);(0,B.useEffect)(function(){t&&s(t),!t&&i&&i.length>0&&s(i[0].id)},[s,t,i]);var c=(0,s1.Z)(),u=c.state,d=c.toggle,f=c.close;return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tM,{title:"Regions",customActions:(0,F.jsx)("div",{children:(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"h-xlarge w-xlarge",onClick:d,children:(0,F.jsx)(sh.Z,{})})}),className:"h-full",children:[(0,F.jsx)("p",{className:"text-base-regular text-grey-50 mt-2xsmall",children:"Manage the markets that you will operate within."}),(0,F.jsx)("div",{className:"mt-large",children:(0,F.jsx)(pQ.Root,{value:a,onValueChange:s,children:null==i?void 0:i.map(function(e){return(0,F.jsx)(ea9,{region:e},e.id)})})})]}),(0,F.jsx)(cX,{isVisible:u,isFullScreen:!0,children:(0,F.jsx)(ea8,{onClose:f})})]})},ell=function(){var e=(0,V.useParams)()["*"];return(0,F.jsxs)("div",{className:"gap-y-xsmall flex h-full flex-col",children:[(0,F.jsx)(eb,{label:"Back to settings",path:"/a/settings"}),(0,F.jsxs)("div",{className:"medium:grid-cols-3 gap-xsmall pb-xlarge grid grid-cols-1",children:[(0,F.jsx)("div",{className:"h-full w-full",children:(0,F.jsx)(ela,{id:e})}),(0,F.jsx)("div",{className:"col-span-2",children:(0,F.jsx)(ea$,{id:e})})]})]})},els=function(e){var t=(0,B.useRef)(null),r=(0,B.useRef)(0),n=(0,ud.d)().height;return(0,B.useLayoutEffect)(function(){if(t.current){var i=t.current.getBoundingClientRect().top;r.current=n-e-i}},[e,n]),{ref:t,height:r.current}},elc=function(e){var t=e.threeCols,r=e.className,n=e.children,i=B.Children.count(n),o=els(32),a=o.ref,l=o.height;if(i>2)throw Error("TwoSplitPane can only have two or less children");return(0,F.jsx)("div",{className:(0,ec.Z)("gap-xsmall grid grid-cols-1",r,{"medium:grid-cols-2":!t,"medium:grid-cols-3":t}),style:l?{gridTemplateRows:"".concat(l,"px")}:void 0,ref:a,children:B.Children.map(n,function(e,r){return(0,F.jsx)("div",{className:(0,ec.Z)("w-full",{"col-span-2":t&&1===r}),children:e},r)})})};function elu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eld(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){elu(e,t,r[t])})}return e}function elf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function elp(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):elf(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var elm=function(e){var t=e.handleClose,r=e.initialReason,n=(0,tR.cI)({defaultValues:{value:null==r?void 0:r.value,label:null==r?void 0:r.label,description:null==r?void 0:r.description}}),i=n.register,o=n.handleSubmit,a=n.formState.errors,l=(0,td.Z)(),s=(0,en.useAdminCreateReturnReason)(),c=s.mutate,u=s.isLoading;return(0,F.jsx)(tp.Z,{handleClose:t,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Add Reason"})}),(0,F.jsxs)("form",{onSubmit:o(function(e){c(elp(eld({},e),{description:e.description||void 0}),{onSuccess:function(){l("Success","Created a new return reason","success")},onError:function(){l("Error","Cant create a Return reason with an existing code","error")}}),t()}),children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"gap-large mb-large grid grid-cols-2",children:[(0,F.jsx)(ry.Z,elp(eld({},i("value",{required:"Value is required",pattern:s6.Z.whiteSpaceRule("Value"),minLength:s6.Z.minOneCharRule("Value")})),{label:"Value",required:!0,placeholder:"wrong_size",errors:a})),(0,F.jsx)(ry.Z,elp(eld({},i("label",{required:"Label is required",pattern:s6.Z.whiteSpaceRule("Label"),minLength:s6.Z.minOneCharRule("Label")})),{label:"Label",required:!0,placeholder:"Wrong size",errors:a}))]}),(0,F.jsx)(vQ.Z,elp(eld({className:"mt-large",rows:3},i("description")),{label:"Description",placeholder:"Customer received the wrong size",errors:a}))]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",onClick:t,type:"button",children:"Cancel"}),(0,F.jsx)(Y.Z,{loading:u,disabled:u,size:"large",className:"text-small w-32 justify-center",variant:"primary",children:"Create"})]})})]})]})})};function ely(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function elh(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){ely(o,n,i,a,l,"next",e)}function l(e){ely(o,n,i,a,l,"throw",e)}a(void 0)})}}function elb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function elv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){elb(e,t,r[t])})}return e}function elg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function elx(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):elg(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function elj(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var elO=function(e){var t,r=e.reason,n=(0,s1.Z)(),i=n.state,o=n.open,a=n.close,l=(0,s1.Z)(),s=l.state,c=l.open,u=l.close,d=(0,tR.cI)(),f=d.register,p=d.reset,m=d.handleSubmit,y=(0,td.Z)(),h=(0,en.useAdminDeleteReturnReason)(null==r?void 0:r.id).mutate,b=(0,en.useAdminUpdateReturnReason)(null==r?void 0:r.id).mutate,v=(t=elh(function(){return elj(this,function(e){return h(void 0),[2]})}),function(){return t.apply(this,arguments)}),g=function(e){b({label:e.label,description:e.description||void 0},{onSuccess:function(){y("Success","Successfully updated return reason","success")},onError:function(e){y("Error",(0,tf.e)(e),"error")}})};return(0,B.useEffect)(function(){r&&p({label:r.label,description:r.description})},[r]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tI,{actionables:[{label:"Duplicate reason",icon:(0,F.jsx)(tW,{size:20}),onClick:function(){return o()}},{label:"Delete reason",variant:"danger",icon:(0,F.jsx)(eZ,{size:20}),onClick:function(){return c()}}],events:[{label:"Save",onClick:m(g)},{label:"Cancel",onClick:function(){p({label:r.label,description:r.description})}}],title:"Details",subtitle:null==r?void 0:r.value,children:(0,F.jsxs)("form",{onSubmit:m(g),children:[(0,F.jsx)(ry.Z,elx(elv({},f("label")),{label:"Label"})),(0,F.jsx)(ry.Z,elx(elv({},f("description")),{label:"Description",className:"mt-base",placeholder:"Customer received the wrong size"}))]})}),i&&(0,F.jsx)(elm,{initialReason:r,handleClose:a}),s&&(0,F.jsx)(tx,{heading:"Delete Return Reason",text:"Are you sure you want to delete this return reason?",handleClose:u,onDelete:v})]})};function elw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function elS(e){if(Array.isArray(e))return e}function elP(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function elC(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function elN(e,t){return elS(e)||elP(e,t)||elk(e,t)||elC()}function elk(e,t){if(e){if("string"==typeof e)return elw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return elw(e,t)}}var el_=function(){var e=(0,s1.Z)(),t=e.state,r=e.open,n=e.close,i=elN((0,B.useState)(null),2),o=i[0],a=i[1],l=(0,en.useAdminReturnReasons)({onSuccess:function(e){elD(e.return_reasons);var t=e.return_reasons;(!o||elA(c,t))&&a(t[0])}}),s=l.isLoading,c=l.return_reasons;return(0,F.jsxs)("div",{children:[(0,F.jsx)(eb,{path:"/a/settings",label:"Back to settings",className:"mb-xsmall"}),(0,F.jsxs)(elc,{children:[(0,F.jsx)(tI,{title:"Return Reasons",actionables:[{label:"Add reason",icon:(0,F.jsx)("span",{className:"text-grey-90",children:(0,F.jsx)(sh.Z,{size:20})}),onClick:r}],subtitle:"Manage reasons for returned items",children:(0,F.jsx)("div",{className:"mt-large",children:s?(0,F.jsx)("div",{className:"flex items-center justify-center",children:(0,F.jsx)(ei.Z,{variant:"secondary"})}):(0,F.jsx)(pQ.Root,{onValueChange:function(e){return a(elE(c,e))},value:null==o?void 0:o.value,children:null==c?void 0:c.map(function(e){return(0,F.jsx)(pQ.Item,{label:e.label,description:e.description,className:"mt-xsmall",value:e.value},e.id)})})})}),o&&(0,F.jsx)(elO,{reason:o})]}),t&&(0,F.jsx)(elm,{handleClose:n})]})},elA=function(e,t){return e&&(null==e?void 0:e.length)>(null==t?void 0:t.length)},elD=function(e){return null==e?void 0:e.sort(function(e,t){return e.created_at<t.created_at?-1:1})},elE=function(e,t){return e.find(function(e){return e.value===t})};function elZ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function elI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){elZ(e,t,r[t])})}return e}function elT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function elM(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):elT(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var elR=function(e){var t=e.lockName,r=void 0!==t&&t,n=e.form,i=n.register,o=n.path,a=n.formState.errors;return(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-base",children:"Details"}),(0,F.jsx)(ry.Z,elM(elI({disabled:r,label:"Name",prefix:r?(0,F.jsx)(st.Z,{size:16,className:"text-grey-40"}):void 0,placeholder:r?"Default":"Rate name"},i(o("name"),{required:r?void 0:s6.Z.required("Name")})),{required:!r,className:"mb-base w-full min-w-[335px]",errors:a})),(0,F.jsx)(ry.Z,elM(elI({type:"number",min:0,max:100,step:.01,formNoValidate:!0,label:"Tax Rate",prefix:"%",placeholder:"12"},i(o("rate"),{min:s6.Z.min("Tax Rate",0),max:s6.Z.max("Tax Rate",100),required:s6.Z.required("Tax Rate"),valueAsNumber:!0})),{required:!0,className:"mb-base w-full min-w-[335px]",errors:a})),(0,F.jsx)(ry.Z,elM(elI({placeholder:"1000",label:"Tax Code"},i(o("code"),{required:s6.Z.required("Tax Code")})),{required:!0,className:"mb-base w-full min-w-[335px]",errors:a}))]})},elL=function(e){var t=e.onEdit,r=e.onDelete,n=e.index,i=e.name,o=e.description;return(0,F.jsxs)("div",{className:"p-base rounded-rounded gap-base flex items-center border",children:[(0,F.jsx)("div",{children:(0,F.jsxs)(oP.Z,{className:"inter-base-semibold flex h-[40px] w-[40px] items-center justify-center",variant:"default",children:["\xa7",n]})}),(0,F.jsxs)("div",{className:"flex-1",children:[(0,F.jsx)("div",{className:"inter-small-semibold",children:i}),(0,F.jsx)("div",{className:"inter-small-regular text-grey-50",children:o})]}),(0,F.jsx)("div",{children:(0,F.jsx)(eQ,{forceDropdown:!0,actions:[{label:"Edit",onClick:function(){return t()},icon:(0,F.jsx)(eC,{size:20})},{label:"Delete rule",variant:"danger",onClick:function(){return r()},icon:(0,F.jsx)(eZ,{size:20})}]})})]})};function elz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function elq(e){if(Array.isArray(e))return elz(e)}function elF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function elH(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function elU(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function elG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){elF(e,t,r[t])})}return e}function elV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function elB(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):elV(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function elW(e){return elq(e)||elH(e)||elQ(e)||elU()}function elQ(e,t){if(e){if("string"==typeof e)return elz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return elz(e,t)}}var elY=function(e){var t=e.showSearch,r=void 0===t||t,n=e.label,i=e.objectName,o=e.selectedIds,a=e.isLoading,l=e.pagination,s=e.totalCount,c=e.data,u=e.columns,d=e.searchValue,f=e.onPaginationChange,p=e.onChange,m=e.onSearch,y=function(e){f(e)},h=(0,B.useMemo)(function(){return Math.floor(l.offset/l.limit)},[l]),b=(0,B.useMemo)(function(){return s&&l.limit?Math.ceil(s/l.limit):0},[s,l]),v=(0,rN.useTable)({columns:u,data:c||[],manualPagination:!0,initialState:{pageIndex:h,pageSize:l.limit,selectedRowIds:(void 0===o?[]:o).reduce(function(e,t){return e[t]=!0,e},{})},pageCount:b,autoResetSelectedRows:!1,autoResetPage:!1,getRowId:function(e){return e.id}},rN.usePagination,rN.useRowSelect,function(e){e.visibleColumns.push(function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return(0,F.jsx)("div",{children:(0,F.jsx)(rF,elG({},t()))})},Cell:function(e){var t=e.row;return(0,F.jsx)("div",{children:(0,F.jsx)(rF,elG({},t.getToggleRowSelectedProps()))})}}].concat(elW(e))})}),g=v.getTableProps,x=v.getTableBodyProps,j=v.rows,O=v.prepareRow,w=v.canPreviousPage,S=v.canNextPage,P=v.pageCount,C=v.nextPage,N=v.previousPage,k=v.state,_=k.pageIndex,A=k.pageSize,D=k.selectedRowIds;return(0,B.useEffect)(function(){p(Object.keys(D))},[D]),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"inter-base-semibold my-large",children:n}),(0,F.jsx)(nC,{isLoading:a,hasPagination:!0,pagingState:{count:s,offset:l.offset,pageSize:l.offset+j.length,title:i,currentPage:_+1,pageCount:P,nextPage:function(){S&&(y(elB(elG({},l),{offset:l.offset+l.limit})),C())},prevPage:function(){w&&(y(elB(elG({},l),{offset:Math.max(l.offset-l.limit,0)})),N())},hasNext:S,hasPrev:w},numberOfRows:A,children:(0,F.jsx)(nf,elB(elG({immediateSearchFocus:r,enableSearch:r,searchPlaceholder:"Search Products..",handleSearch:m,searchValue:d},g()),{children:(0,F.jsx)(nf.Body,elB(elG({},x()),{children:j.map(function(e){return O(e),(0,F.jsx)(nf.Row,elB(elG({},e.getRowProps()),{children:e.cells.map(function(e){return(0,F.jsx)(nf.Cell,elB(elG({},e.getCellProps()),{children:e.render("Cell")}))})}))})}))}))})]})};function el$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function elK(e){if(Array.isArray(e))return e}function elJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function elX(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function el0(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function el1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){elJ(e,t,r[t])})}return e}function el2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function el3(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):el2(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function el5(e,t){return elK(e)||elX(e,t)||el6(e,t)||el0()}function el6(e,t){if(e){if("string"==typeof e)return el$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return el$(e,t)}}var el4=function(e){var t=e.items,r=e.onChange,n=el5((0,B.useState)({limit:12,offset:0}),2),i=n[0],o=n[1],a=el5((0,B.useState)(""),2),l=a[0],s=a[1],c=(0,rk.N)(l,500),u=(0,en.useAdminProducts)(el1({q:c},i)),d=u.isLoading,f=u.count,p=u.products,m=(0,B.useMemo)(function(){return[{Header:"Name",accessor:"title",Cell:function(e){var t=e.row.original;return(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)("div",{className:"my-1.5 mr-4 flex h-[40px] w-[30px] items-center overflow-hidden rounded-sm",children:t.thumbnail?(0,F.jsx)("img",{src:t.thumbnail,className:"rounded-soft h-full object-cover"}):(0,F.jsx)(lY,{})}),(0,F.jsx)("div",{className:"flex flex-col",children:(0,F.jsx)("span",{children:t.title})})]})}}]},[]);return(0,F.jsx)(elY,{label:"Select Products",objectName:"Product",totalCount:f,pagination:i,onPaginationChange:o,selectedIds:t,data:p,columns:m,isLoading:d,onSearch:function(e){o(function(e){return el3(el1({},e),{offset:0})}),s(e)},searchValue:l,onChange:r})};function el8(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function el7(e){if(Array.isArray(e))return e}function el9(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ese(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function est(e,t){return el7(e)||el9(e,t)||esr(e,t)||ese()}function esr(e,t){if(e){if("string"==typeof e)return el8(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return el8(e,t)}}var esn=function(e){var t=e.items,r=e.onChange,n=est((0,B.useState)({limit:12,offset:0}),2),i=n[0],o=n[1],a=(0,en.useAdminProductTypes)(i),l=a.isLoading,s=a.count,c=a.product_types,u=(0,B.useMemo)(function(){return[{Header:"Name",accessor:"value",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"w-[200px]",children:t.value})}}]},[]);return(0,F.jsx)(elY,{showSearch:!1,label:"Select Product Types",objectName:"Product Types",totalCount:s,pagination:i,onPaginationChange:o,selectedIds:t,data:c,columns:u,isLoading:l,onChange:r})};function esi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eso(e){if(Array.isArray(e))return e}function esa(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function esl(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ess(e,t){return eso(e)||esa(e,t)||esc(e,t)||esl()}function esc(e,t){if(e){if("string"==typeof e)return esi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return esi(e,t)}}var esu=function(e){var t=e.regionId,r=e.items,n=e.onChange,i=ess((0,B.useState)({limit:12,offset:0}),2),o=i[0],a=i[1],l=(0,en.useAdminShippingOptions)({region_id:t}),s=l.isLoading,c=l.count,u=l.shipping_options,d=(0,B.useMemo)(function(){return[{Header:"Name",accessor:"name",Cell:function(e){var t=e.row.original;return(0,F.jsx)("div",{className:"w-[200px]",children:t.name})}}]},[]);return(0,F.jsx)(elY,{showSearch:!1,label:"Select Shipping Option",objectName:"Shipping Options",totalCount:c,pagination:o,onPaginationChange:a,selectedIds:r,data:u,columns:d,isLoading:s,onChange:n})};function esd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function esf(e){if(Array.isArray(e))return e}function esp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function esm(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function esy(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function esh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){esp(e,t,r[t])})}return e}function esb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function esv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):esb(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function esg(e,t){return esf(e)||esm(e,t)||esx(e,t)||esy()}function esx(e,t){if(e){if("string"==typeof e)return esd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return esd(e,t)}}!function(e){e.PRODUCTS="products",e.PRODUCT_TYPES="product_types",e.SHIPPING_OPTIONS="shipping_options"}(q||(q={}));var esj=function(e){var t=e.regionId,r=e.type,n=e.items,i=e.onSubmit,o=r&&n,a=(0,B.useContext)(pf.ej).pop,l=esg((0,B.useState)(null!=r?r:q.PRODUCTS),2),s=l[0],c=l[1],u=esg((0,B.useState)({type:null!=r?r:q.PRODUCTS,items:null!=n?n:[]}),2),d=u[0],f=u[1],p=function(e){f(function(t){return esv(esh({},t),{items:e})})};return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"min-h-[680px]",children:[!o&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"inter-base-semibold mb-large",children:"Type"}),(0,F.jsxs)(pQ.Root,{className:"gap-base flex",value:s,onValueChange:function(e){e!==s&&(c(e),f({type:e,items:[]}))},children:[(0,F.jsx)(pQ.Item,{className:"flex-1",label:"Products",description:"Select individual products",value:q.PRODUCTS}),(0,F.jsx)(pQ.Item,{className:"flex-1",label:"Product Types",description:"Select product types",value:q.PRODUCT_TYPES}),(0,F.jsx)(pQ.Item,{className:"flex-1",label:"Shipping Options",description:"Select shipping options",value:q.SHIPPING_OPTIONS})]})]}),s===q.PRODUCTS&&(0,F.jsx)(el4,{items:d.items,onChange:p}),s===q.PRODUCT_TYPES&&(0,F.jsx)(esn,{items:d.items,onChange:p}),s===q.SHIPPING_OPTIONS&&(0,F.jsx)(esu,{regionId:t,items:d.items,onChange:p})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"gap-x-xsmall flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",className:"w-[112px]",onClick:function(){return a()},children:"Back"}),(0,F.jsx)(Y.Z,{variant:"primary",className:"w-[112px]",size:"small",onClick:function(){i(d),a()},children:"Add"})]})})]})};function esO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function esw(e){if(Array.isArray(e))return e}function esS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function esP(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function esC(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function esN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){esS(e,t,r[t])})}return e}function esk(e,t){return esw(e)||esP(e,t)||es_(e,t)||esC()}function es_(e,t){if(e){if("string"==typeof e)return esO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return esO(e,t)}}var esA=function(e){var t=e.modalContext,r=e.regionId,n=e.taxRate,i=e.onDismiss,o=(0,en.useAdminUpdateTaxRate)(n.id),a=o.mutate,l=o.isLoading,s=esk((0,B.useState)({}),2),c=s[0],u=s[1],d=(0,tR.cI)({defaultValues:{details:{name:n.name,code:n.code||void 0,rate:n.rate||void 0},products:n.products.map(function(e){return e.id}),product_types:n.product_types.map(function(e){return e.id}),shipping_options:n.shipping_options.map(function(e){return e.id})}}),f=d.register,p=d.setValue,m=d.handleSubmit,y=d.watch,h=(0,td.Z)(),b=m(function(e){var t={name:e.details.name,code:e.details.code,rate:e.details.rate,product_types:e.product_types,products:e.products,shipping_options:e.shipping_options},r=["products","product_types","shipping_options"],n=!0,o=!1,l=void 0;try{for(var s,u=Object.entries(c)[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var d=esk(s.value,2),f=d[0];!d[1]&&f in t&&r.includes(f)&&delete t[f]}}catch(e){o=!0,l=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw l}}a(t,{onSuccess:function(){h("Success","Successfully updated Tax Rate.","success"),i()},onError:function(e){h("Error",(0,tf.e)(e),"error")}})});(0,B.useEffect)(function(){f("products"),f("product_types"),f("shipping_options")},[]);var v=esk(y(["products","product_types","shipping_options"]),3),g=v[0],x=v[1],j=v[2],O=function(e){switch(u(function(t){return t[e.type]=!0,t}),e.type){case"products":p("products",e.items);break;case"product_types":p("product_types",e.items);break;case"shipping_options":p("shipping_options",e.items)}};return(0,F.jsxs)("form",{onSubmit:b,children:[(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)("div",{className:"mb-xlarge",children:(0,F.jsx)(elR,{form:(0,tL.G)(d,"details")})}),(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-base",children:"Overrides"}),(x.length>0||g.length>0||j.length>0)&&(0,F.jsxs)("div",{className:"gap-base flex flex-col",children:[g.length>0&&(0,F.jsx)(elL,{onDelete:function(){return O({type:"products",items:[]})},onEdit:function(){t.push(esD(t.pop,r,O,{items:g,type:"products"}))},index:1,name:"Product Rules",description:"Applies to ".concat(g.length," product").concat(g.length>1?"s":"")}),x.length>0&&(0,F.jsx)(elL,{onDelete:function(){return O({type:"product_types",items:[]})},onEdit:function(){t.push(esD(t.pop,r,O,{items:x,type:"product_types"}))},index:2,name:"Product Type Rules",description:"Applies to ".concat(x.length," product type").concat(x.length>1?"s":"")}),j.length>0&&(0,F.jsx)(elL,{onDelete:function(){return O({type:"shipping_options",items:[]})},onEdit:function(){t.push(esD(t.pop,r,O,{items:j,type:"shipping_options"}))},index:3,name:"Shipping Option Rules",description:"Applies to ".concat(j.length," shipping option").concat(j.length>1?"s":"")})]}),!(x.length&&g.length&&j.length)&&(0,F.jsxs)(Y.Z,{type:"button",onClick:function(){t.push(esD(t.pop,r,O))},className:"mt-base w-full",size:"medium",variant:"secondary",children:[(0,F.jsx)(sh.Z,{})," Add Overrides"]})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{type:"button",onClick:i,variant:"ghost",size:"small",className:"w-eventButton justify-center",children:"Cancel"}),(0,F.jsx)(Y.Z,{type:"submit",variant:"primary",size:"small",className:"w-eventButton justify-center",loading:l,disabled:l,children:"Save"})]})})]})},esD=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{title:"Add override",onBack:function(){return e()},view:(0,F.jsx)(esj,esN({regionId:t,onSubmit:r},n))}},esE=function(e){var t=e.onDismiss,r=e.taxRate,n=(0,en.useAdminUpdateRegion)(r.id),i=n.mutate,o=n.isLoading,a=(0,tR.cI)({defaultValues:{details:{name:r.name,rate:r.rate||void 0,code:r.code||void 0}}}),l=a.handleSubmit,s=(0,td.Z)();return(0,F.jsxs)("form",{onSubmit:l(function(e){i({tax_rate:e.details.rate,tax_code:e.details.code},{onSuccess:function(){s("Success","Successfully updated default rate.","success"),t()},onError:function(e){s("Error",(0,tf.e)(e),"error")}})}),children:[(0,F.jsx)(tp.Z.Content,{children:(0,F.jsx)(elR,{form:(0,tL.G)(a,"details"),lockName:!0})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{type:"button",onClick:t,variant:"ghost",size:"small",className:"w-eventButton justify-center",children:"Cancel"}),(0,F.jsx)(Y.Z,{type:"submit",variant:"primary",size:"small",className:"w-eventButton justify-center",loading:o,children:"Save"})]})})]})},esZ=function(e){var t=e.taxRate,r=e.taxRateId,n=e.regionId,i=e.onDismiss,o=(0,en.useAdminTaxRate)(r,{expand:["products","product_types","shipping_options"]},{enabled:"rate"===t.type}),a=o.isLoading,l=o.tax_rate,s=(0,B.useContext)(pf.ej);return(0,F.jsx)(pf.ZP,{isLargeModal:!0,context:s,handleClose:i,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:i,children:(0,F.jsx)("div",{children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Edit Tax Rate"})})}),"region"===t.type?(0,F.jsx)(esE,{taxRate:t,onDismiss:i}):a||!l?(0,F.jsx)(ei.Z,{}):(0,F.jsx)(esA,{regionId:n,modalContext:s,taxRate:l,onDismiss:i})]})})};function esI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function esT(e){if(Array.isArray(e))return e}function esM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function esR(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function esL(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function esz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){esM(e,t,r[t])})}return e}function esq(e,t){return esT(e)||esR(e,t)||esF(e,t)||esL()}function esF(e,t){if(e){if("string"==typeof e)return esI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return esI(e,t)}}var esH=function(e){var t=e.regionId,r=e.onDismiss,n=(0,en.useAdminCreateTaxRate)(),i=n.mutate,o=n.isLoading,a=(0,tR.cI)({defaultValues:{products:[],product_types:[],shipping_options:[]}}),l=a.setValue,s=a.handleSubmit,c=a.watch,u=(0,td.Z)(),d=(0,B.useContext)(pf.ej),f=s(function(e){i({product_types:e.product_types,products:e.products,shipping_options:e.shipping_options,name:e.details.name,code:e.details.code,rate:e.details.rate,region_id:t},{onSuccess:function(){u("Success","Successfully created tax rate.","success"),r()},onError:function(e){u("Error",(0,tf.e)(e),"error")}})}),p=esq(c(["products","product_types","shipping_options"]),3),m=p[0],y=p[1],h=p[2],b=function(e){switch(e.type){case"products":l("products",e.items);break;case"product_types":l("product_types",e.items);break;case"shipping_options":l("shipping_options",e.items)}};return(0,F.jsx)(pf.ZP,{isLargeModal:!0,context:d,handleClose:r,children:(0,F.jsx)("form",{onSubmit:f,children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:r,children:(0,F.jsx)("div",{children:(0,F.jsx)("h1",{className:"inter-xlarge-semibold",children:"Add Tax Rate"})})}),(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsx)(elR,{form:(0,tL.G)(a,"details")}),(0,F.jsxs)("div",{children:[(0,F.jsx)("p",{className:"inter-base-semibold mb-base",children:"Overrides"}),(y.length>0||m.length>0||h.length>0)&&(0,F.jsxs)("div",{className:"gap-base flex flex-col",children:[m.length>0&&(0,F.jsx)(elL,{onDelete:function(){return b({type:"products",items:[]})},onEdit:function(){d.push(esU(d.pop,t,b,{items:m,type:"products"}))},index:1,name:"Product Rules",description:"Applies to ".concat(m.length," product").concat(m.length>1?"s":"")}),y.length>0&&(0,F.jsx)(elL,{onDelete:function(){return b({type:"product_types",items:[]})},onEdit:function(){d.push(esU(d.pop,t,b,{items:y,type:"product_types"}))},index:2,name:"Product Type Rules",description:"Applies to ".concat(y.length," product type").concat(y.length>1?"s":"")}),h.length>0&&(0,F.jsx)(elL,{onDelete:function(){return b({type:"shipping_options",items:[]})},onEdit:function(){d.push(esU(d.pop,t,b,{items:h,type:"shipping_options"}))},index:3,name:"Shipping Option Rules",description:"Applies to ".concat(h.length," shipping option").concat(h.length>1?"s":"")})]}),!(y.length>0&&m.length>0&&h.length>0)&&(0,F.jsxs)(Y.Z,{type:"button",onClick:function(){d.push(esU(d.pop,t,b))},className:"mt-base w-full",size:"medium",variant:"secondary",children:[(0,F.jsx)(sh.Z,{})," Add Overrides"]})]})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full items-center justify-end",children:[(0,F.jsx)(Y.Z,{type:"button",onClick:r,variant:"ghost",size:"small",className:"w-eventButton justify-center",children:"Cancel"}),(0,F.jsx)(Y.Z,{type:"submit",variant:"primary",size:"small",className:"w-eventButton justify-center",loading:o,disabled:o,children:"Create"})]})})]})})})},esU=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{title:"Add override",onBack:function(){return e()},view:(0,F.jsx)(esj,esz({regionId:t,onSubmit:r},n))}};function esG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function esV(e){if(Array.isArray(e))return esG(e)}function esB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function esW(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function esQ(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function esY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){esB(e,t,r[t])})}return e}function es$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function esK(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):es$(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function esJ(e){return esV(e)||esW(e)||esX(e)||esQ()}function esX(e,t){if(e){if("string"==typeof e)return esG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return esG(e,t)}}var es0=function(e){var t=e.region,r=(0,tR.cI)({defaultValues:{automatic_taxes:t.automatic_taxes,gift_cards_taxable:t.gift_cards_taxable,tax_provider_id:{label:null===t.tax_provider_id?"System Tax Provider":t.tax_provider_id,value:t.tax_provider_id}}}),n=r.register,i=r.handleSubmit,o=r.control,a=r.reset,l=r.formState.isDirty,s=(0,td.Z)();(0,B.useEffect)(function(){a({automatic_taxes:t.automatic_taxes,gift_cards_taxable:t.gift_cards_taxable,tax_provider_id:{label:null===t.tax_provider_id?"System Tax Provider":t.tax_provider_id,value:t.tax_provider_id}})},[t]);var c=(0,en.useAdminStoreTaxProviders)(),u=c.isLoading,d=c.tax_providers,f=(0,en.useAdminUpdateRegion)(t.id),p=(0,B.useMemo)(function(){return d?[{label:"System Tax Provider",value:null}].concat(esJ(d.map(function(e){return{label:e.id,value:e.id}}))):[{label:"System Tax Provider",value:null}]},[d]);return(0,F.jsxs)("form",{className:"flex flex-1 flex-col",onSubmit:i(function(e){var t=esK(esY({},e),{tax_provider_id:e.tax_provider_id.value});f.mutate(t,{onSuccess:function(){s("Success","Region tax settings were successfully updated.","success")},onError:function(e){s("Error",(0,tf.e)(e),"error")}})}),children:[(0,F.jsxs)("div",{className:"gap-base flex flex-1 flex-col",children:[(0,F.jsx)(tR.Qr,{name:"tax_provider_id",control:o,rules:{required:!0},render:function(e){var t=e.field,r=t.value,n=t.onChange;return(0,F.jsx)(jT,{disabled:u,label:"Tax Provider",options:p,value:r,onChange:n,className:"mb-base"})}}),(0,F.jsxs)("div",{className:"item-center flex gap-x-1.5",children:[(0,F.jsx)(ja,esK(esY({className:"inter-base-regular"},n("automatic_taxes")),{label:"Calculate taxes automatically?"})),(0,F.jsx)(rm.Z,{content:"When checked Medusa will automatically apply tax calculations to Carts in this Region. When unchecked you will have to manually compute taxes at checkout. Manual taxes are recommended if using a 3rd party tax provider to avoid performing too many requests"})]}),(0,F.jsxs)("div",{className:"item-center flex gap-x-1.5",children:[(0,F.jsx)(ja,esK(esY({className:"inter-base-regular"},n("gift_cards_taxable")),{label:"Apply tax to gift cards?"})),(0,F.jsx)(rm.Z,{content:"When checked taxes will be applied to gift cards on checkout. In some contries tax regulations require that taxes are applied to gift cards on purchase."})]})]}),(0,F.jsx)("div",{className:"flex justify-end",children:l&&(0,F.jsx)(Y.Z,{loading:f.isLoading,variant:"primary",size:"medium",type:"submit",children:"Save"})})]})};function es1(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(e){r(e);return}l.done?t(s):Promise.resolve(s).then(n,i)}function es2(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){es1(o,n,i,a,l,"next",e)}function l(e){es1(o,n,i,a,l,"throw",e)}a(void 0)})}}function es3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function es5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){es3(e,t,r[t])})}return e}function es6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function es4(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):es6(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function es8(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var es7=function(e){var t,r=e.row,n=e.onEdit,i=o2(),o=(0,td.Z)(),a=(0,en.useAdminDeleteTaxRate)(r.original.id),l=(t=es2(function(e){return es8(this,function(t){switch(t.label){case 0:if(!e||e.type!==j.RATE)return[2,Promise.resolve()];return[4,i({heading:"Delete tax rate",text:"Are you sure you want to delete this tax rate?"})];case 1:if(!t.sent())return[2];return[2,a.mutateAsync().then(function(){o("Success","Tax rate was deleted.","success")}).catch(function(e){o("Error",(0,tf.e)(e),"error")})]}})}),function(e){return t.apply(this,arguments)}),s=[{label:"Edit",onClick:function(){return n(r.original)},icon:(0,F.jsx)(eC,{size:20})}];return r.original.type===j.RATE&&s.push({label:"Delete Tax Rate",variant:"danger",onClick:function(){return l(r.original)},icon:(0,F.jsx)(eZ,{size:20})}),(0,F.jsx)(nf.Row,es4(es5({color:"inherit",forceDropdown:!0,actions:s},r.getRowProps()),{className:"group",children:r.cells.map(function(e){return(0,F.jsx)(nf.Cell,{children:e.render("Cell")})})}))},es9=function(){return[(0,B.useMemo)(function(){return[{Header:(0,F.jsx)("div",{className:"pl-2",children:"Name"}),accessor:"name",Cell:function(e){var t=e.row,r=e.cell.value;return(0,F.jsx)("div",{className:"text-grey-90 group-hover:text-violet-60 pl-2",children:"region"===t.original.type?(0,F.jsxs)("div",{className:"gap-x-xsmall text-grey-40 flex items-center",children:[(0,F.jsx)(st.Z,{size:"12"})," ",r]}):r})}},{Header:"Code",accessor:"code",Cell:function(e){var t=e.cell.value;return(0,F.jsx)("div",{children:(0,F.jsx)(oP.Z,{variant:"default",children:t})})}},{Header:"Tax Rate",accessor:"rate",Cell:function(e){var t=e.cell.value;return(0,F.jsxs)("div",{children:[t," %"]})}}]},[])]};function ece(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ect(e){if(Array.isArray(e))return e}function ecr(e){if(Array.isArray(e))return ece(e)}function ecn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eci(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function eco(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function eca(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ecl(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ecs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ecn(e,t,r[t])})}return e}function ecc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ecu(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ecc(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function ecd(e,t){return ect(e)||eco(e,t)||ecp(e,t)||eca()}function ecf(e){return ecr(e)||eci(e)||ecp(e)||ecl()}function ecp(e,t){if(e){if("string"==typeof e)return ece(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ece(e,t)}}var ecm=10,ecy=function(e){var t=e.id,r=ecd((0,B.useState)({limit:ecm,offset:0}),2),n=r[0];r[1];var i=ecd((0,B.useState)(!1),2),o=i[0],a=i[1],l=ecd((0,B.useState)(null),2),s=l[0],c=l[1],u=ecd((0,B.useState)([]),2),d=u[0],f=u[1],p=(0,en.useAdminTaxRates)(ecs({region_id:t},n),{enabled:!!t}),m=p.tax_rates,y=p.isLoading,h=(0,en.useAdminRegion)(t,{enabled:!!t}),b=h.region,v=h.isLoading;(0,B.useEffect)(function(){if(!y&&!v&&b&&m){var e,t;f([{id:b.id,name:"Default",code:null!==(e=b.tax_code)&&void 0!==e?e:null,rate:null!==(t=b.tax_rate)&&void 0!==t?t:null,type:j.REGION}].concat(ecf(m.map(function(e){return{id:e.id,name:e.name,code:e.code,rate:e.rate,type:j.RATE}}))))}},[y,v,b,m]);var g=ecd(es9(),1)[0],x=(0,rN.useTable)({columns:g,data:d||[],manualPagination:!0,autoResetPage:!1}),O=x.getTableProps,w=x.getTableBodyProps,S=x.headerGroups,P=x.rows,C=x.prepareRow;return t?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(tI,{title:"Details",actionables:[{label:"New Tax Rate",onClick:function(){return a(!0)},icon:(0,F.jsx)(sh.Z,{})}],children:[(0,F.jsxs)(nf,ecu(ecs({},O()),{className:(0,ec.Z)(ecn({},"relative",v)),children:[(0,F.jsx)(nf.Head,{children:null==S?void 0:S.map(function(e){return(0,F.jsx)(nf.HeadRow,ecu(ecs({},e.getHeaderGroupProps()),{children:e.headers.map(function(e){return(0,F.jsx)(nf.HeadCell,ecu(ecs({},e.getHeaderProps()),{children:e.render("Header")}))})}))})}),v||y?(0,F.jsx)("div",{className:"absolute mt-10 flex h-full w-full items-center justify-center",children:(0,F.jsx)("div",{className:"",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})})}):(0,F.jsx)(nf.Body,ecu(ecs({},w()),{children:P.map(function(e){return C(e),(0,F.jsx)(es7,{onEdit:c,row:e},e.original.id)})}))]})),(0,F.jsx)("h3",{className:"inter-large-semibold mt-2xlarge mb-base",children:"Tax Calculation Settings"}),(0,F.jsx)("div",{className:"flex flex-1",children:!v&&b&&(0,F.jsx)(es0,{region:b})})]}),o&&(0,F.jsx)(esH,{regionId:t,onDismiss:function(){return a(!1)}}),s&&(0,F.jsx)(esZ,{regionId:t,taxRate:s,taxRateId:s.id,onDismiss:function(){return c(null)}})]}):null};function ech(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ecb(e){if(Array.isArray(e))return e}function ecv(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ecg(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ecx(e,t){return ecb(e)||ecv(e,t)||ecj(e,t)||ecg()}function ecj(e,t){if(e){if("string"==typeof e)return ech(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ech(e,t)}}var ecO=function(){var e=(0,V.useParams)()["*"],t=(0,V.useNavigate)(),r=(0,en.useAdminRegions)(),n=r.regions,i=r.isLoading,o=ecx((0,B.useState)(e),2),a=o[0],l=o[1],s=(0,B.useCallback)(function(e){e!==a&&(l(e),t("/a/settings/taxes/".concat(e),{replace:!0}))},[t,a]);return(0,B.useEffect)(function(){e&&s(e),!e&&n&&n.length>0&&s(n[0].id)},[s,e,n]),(0,F.jsx)(F.Fragment,{children:(0,F.jsxs)("div",{children:[(0,F.jsx)(eb,{path:"/a/settings",label:"Back to settings",className:"mb-xsmall"}),(0,F.jsxs)(elc,{threeCols:!0,children:[(0,F.jsx)(tI,{forceDropdown:!0,title:"Regions",subtitle:"Select the region you wish to manage taxes for",actionables:[{icon:(0,F.jsx)(KG.Z,{}),label:"Go to Region settings",onClick:function(){return t("/a/settings/regions")}}],children:i||!n?(0,F.jsx)("div",{className:"flex h-full flex-grow items-center justify-center",children:(0,F.jsx)(ei.Z,{size:"large",variant:"secondary"})}):(0,F.jsx)(pQ.Root,{value:a,onValueChange:s,children:n.map(function(e){return(0,F.jsx)(pQ.Item,{label:e.name,description:e.countries.length?"".concat(e.countries.map(function(e){return e.display_name}).join(", ")):void 0,value:e.id,id:e.id},e.id)})})}),(0,F.jsx)(ecy,{id:a})]})]})})};function ecw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ecS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ecw(e,t,r[t])})}return e}var ecP=function(e){var t=e.handleClose,r=(0,td.Z)(),n=(0,en.useAdminCreateInvite)(),i=n.mutate,o=n.isLoading,a=(0,tR.cI)(),l=a.control,s=a.register,c=a.handleSubmit,u=[{value:"member",label:"Member"},{value:"admin",label:"Admin"},{value:"developer",label:"Developer"}];return(0,F.jsx)(tp.Z,{handleClose:t,children:(0,F.jsx)("form",{onSubmit:c(function(e){i({user:e.user,role:e.role.value},{onSuccess:function(){r("Success","Invitation sent to ".concat(e.user),"success"),t()},onError:function(e){r("Error",(0,tf.e)(e),"error")}})}),children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Invite Users"})}),(0,F.jsx)(tp.Z.Content,{children:(0,F.jsxs)("div",{className:"gap-y-base flex flex-col",children:[(0,F.jsx)(ry.Z,ecS({label:"Email",placeholder:"lebron@james.com",required:!0},s("user",{required:!0}))),(0,F.jsx)(tR.Qr,{name:"role",control:l,defaultValue:{label:"Member",value:"member"},render:function(e){var t=e.field,r=t.value,n=t.onChange,i=t.onBlur,o=t.ref;return(0,F.jsx)(lS,{label:"Role",placeholder:"Select role",onBlur:i,ref:o,onChange:n,options:u,value:r})}})]})}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex h-8 w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",className:"text-small mr-2 w-32 justify-center",size:"large",type:"button",onClick:t,children:"Cancel"}),(0,F.jsx)(Y.Z,{loading:o,disabled:o,size:"large",className:"text-small w-32 justify-center",variant:"primary",children:"Invite"})]})})]})})})},ecC=function(e){var t=e.color,r=e.user,n=r.first_name||r.last_name?"".concat(r.first_name," ").concat(r.last_name):r.email;return(0,F.jsxs)("div",{className:"flex w-full items-center bg-inherit px-2.5 py-1.5",children:[(0,F.jsx)("div",{className:"h-[24px] w-[24px]",children:(0,F.jsx)(iY.Z,{user:r,color:void 0===t?"bg-grey-80":t})}),(0,F.jsx)("span",{className:"w-40 truncate pl-2.5",children:n})]})};function ecN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eck(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ecN(e,t,r[t])})}return e}function ec_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ecA(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ec_(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var ecD=function(e){var t=e.handleClose,r=e.user,n=e.onSuccess,i=(0,en.useAdminUpdateUser)(r.id),o=i.mutate,a=i.isLoading,l=(0,tR.cI)(),s=l.register,c=l.handleSubmit,u=l.reset,d=l.formState.errors,f=(0,td.Z)();return(0,B.useEffect)(function(){u(ecE(r))},[r]),(0,F.jsx)(tp.Z,{handleClose:t,children:(0,F.jsx)("form",{onSubmit:c(function(e){o(e,{onSuccess:function(){f("Success","User was updated","success"),n()},onError:function(e){f("Error",(0,tf.e)(e),"error")},onSettled:function(){t()}})}),children:(0,F.jsxs)(tp.Z.Body,{children:[(0,F.jsx)(tp.Z.Header,{handleClose:t,children:(0,F.jsx)("span",{className:"inter-xlarge-semibold",children:"Edit User"})}),(0,F.jsxs)(tp.Z.Content,{children:[(0,F.jsxs)("div",{className:"gap-large mb-base grid w-full grid-cols-2",children:[(0,F.jsx)(ry.Z,ecA(eck({label:"First Name",placeholder:"First name...",required:!0},s("first_name",{required:s6.Z.required("First name"),pattern:s6.Z.whiteSpaceRule("First name"),minLength:s6.Z.minOneCharRule("First name")})),{errors:d})),(0,F.jsx)(ry.Z,ecA(eck({label:"Last Name",placeholder:"Last name...",required:!0},s("last_name",{required:s6.Z.required("Last name"),pattern:s6.Z.whiteSpaceRule("Last name"),minLength:s6.Z.minOneCharRule("last name")})),{errors:d}))]}),(0,F.jsx)(ry.Z,{label:"Email",disabled:!0,value:r.email})]}),(0,F.jsx)(tp.Z.Footer,{children:(0,F.jsxs)("div",{className:"flex w-full justify-end",children:[(0,F.jsx)(Y.Z,{variant:"ghost",size:"small",onClick:t,className:"mr-2",children:"Cancel"}),(0,F.jsx)(Y.Z,{loading:a,disabled:a,variant:"primary",size:"small",children:"Save"})]})})]})})})},ecE=function(e){return{first_name:e.first_name,last_name:e.last_name}};function ecZ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ecI(e){if(Array.isArray(e))return e}function ecT(e){if(Array.isArray(e))return ecZ(e)}function ecM(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ecR(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ecL(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ecz(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ecq(e,t){return ecI(e)||ecR(e,t)||ecH(e,t)||ecL()}function ecF(e){return ecT(e)||ecM(e)||ecH(e)||ecz()}function ecH(e,t){if(e){if("string"==typeof e)return ecZ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ecZ(e,t)}}var ecU=function(e){return new Date(e.expires_at)<new Date?"expired":"pending"},ecG=function(e){var t=e.users,r=e.invites,n=e.triggerRefetch,i=ecq((0,B.useState)([]),2),o=i[0],a=i[1],l=ecq((0,B.useState)([]),2),s=l[0],c=l[1],u=ecq((0,B.useState)(null),2),d=u[0],f=u[1],p=ecq((0,B.useState)(!1),2),m=p[0],y=p[1],h=ecq((0,B.useState)(null),2),b=h[0],v=h[1],g=(0,td.Z)(),x=(0,en.useAdminStore)(),j=x.store,O=x.isLoading;(0,B.useEffect)(function(){a(ecF(t.map(function(e,t){return{entity:e,entityType:"user",tableElement:S(e,t)}})).concat(ecF(r.map(function(e,t){return{entity:e,entityType:"invite",tableElement:C(e,t)}}))))},[t,r]),(0,B.useEffect)(function(){c(o)},[o]);var w=function(){y(!1),f(null),v(null)},S=function(e,t){return(0,F.jsxs)(nf.Row,{color:"inherit",actions:[{label:"Edit User",onClick:function(){return f(e)},icon:(0,F.jsx)(eC,{size:20})},{label:"Remove User",variant:"danger",onClick:function(){y(!0),f(e)},icon:(0,F.jsx)(eZ,{size:20})}],children:[(0,F.jsx)(nf.Cell,{children:(0,F.jsx)(ecC,{user:e})}),(0,F.jsx)(nf.Cell,{className:"w-80",children:e.email}),(0,F.jsxs)(nf.Cell,{className:"inter-small-semibold text-violet-60",children:[e.role.charAt(0).toUpperCase(),e.role.slice(1)]}),(0,F.jsx)(nf.Cell,{})]},"user-".concat(t))},P=(0,B.useMemo)(function(){return(null==j?void 0:j.invite_link_template)?j.invite_link_template:"".concat(window.location.origin).concat("".concat("/app","/"),"invite?token={invite_token}")},[j]),C=function(e,t){return(0,F.jsxs)(nf.Row,{actions:[{label:"Resend Invitation",onClick:function(){n8.invites.resend(e.id).then(function(){g("Success","Invitiation link has been resent","success")}).then(function(){return n()})},icon:(0,F.jsx)($.Z,{size:20})},{label:"Copy invite link",disabled:O,onClick:function(){eJ()(P.replace("{invite_token}",e.token)),g("Success","Invite link copied to clipboard","success")},icon:(0,F.jsx)(tn,{size:20})},{label:"Remove Invitation",variant:"danger",onClick:function(){v(e)},icon:(0,F.jsx)(eZ,{size:20})}],children:[(0,F.jsx)(nf.Cell,{className:"text-grey-40",children:(0,F.jsx)(ecC,{user:{email:e.user_email}})}),(0,F.jsx)(nf.Cell,{className:"text-grey-40 w-80",children:e.user_email}),(0,F.jsx)(nf.Cell,{}),(0,F.jsx)(nf.Cell,{children:new Date(null==e?void 0:e.expires_at)<new Date?(0,F.jsx)(nN.Z,{title:"Expired",variant:"danger"}):(0,F.jsx)(nN.Z,{title:"Pending",variant:"success"})})]},"invite-".concat(t))},N=[{title:"Team permissions",options:[{title:"All",count:o.length,onClick:function(){return c(o)}},{title:"Member",count:o.filter(function(e){return"user"===e.entityType&&"member"===e.entity.role}).length,onClick:function(){return c(o.filter(function(e){return"user"===e.entityType&&"member"===e.entity.role}))}},{title:"Admin",count:o.filter(function(e){return"user"===e.entityType&&"admin"===e.entity.role}).length,onClick:function(){return c(o.filter(function(e){return"user"===e.entityType&&"admin"===e.entity.role}))}},{title:"No team permissions",count:o.filter(function(e){return"invite"===e.entityType}).length,onClick:function(){return c(o.filter(function(e){return"invite"===e.entityType}))}}]},{title:"Status",options:[{title:"All",count:o.length,onClick:function(){return c(o)}},{title:"Active",count:o.filter(function(e){return"user"===e.entityType}).length,onClick:function(){return c(o.filter(function(e){return"user"===e.entityType}))}},{title:"Pending",count:o.filter(function(e){return"invite"===e.entityType&&"pending"===ecU(e.entity)}).length,onClick:function(){return c(o.filter(function(e){return"invite"===e.entityType&&"pending"===ecU(e.entity)}))}},{title:"Expired",count:o.filter(function(e){return"invite"===e.entityType&&"expired"===ecU(e.entity)}).length,onClick:function(){return c(o.filter(function(e){return"invite"===e.entityType&&"expired"===ecU(e.entity)}))}}]}];return(0,F.jsxs)("div",{className:"h-full w-full overflow-y-auto",children:[(0,F.jsxs)(nf,{filteringOptions:N,enableSearch:!0,handleSearch:function(e){c(o.filter(function(t){var r,n,i,o,a,l,s,c;return(null===(n=t.entity)||void 0===n?void 0:null===(r=n.first_name)||void 0===r?void 0:r.includes(e))||(null===(o=t.entity)||void 0===o?void 0:null===(i=o.last_name)||void 0===i?void 0:i.includes(e))||(null===(l=t.entity)||void 0===l?void 0:null===(a=l.email)||void 0===a?void 0:a.includes(e))||(null===(c=t.entity)||void 0===c?void 0:null===(s=c.user_email)||void 0===s?void 0:s.includes(e))}))},children:[(0,F.jsx)(nf.Head,{children:(0,F.jsxs)(nf.HeadRow,{children:[(0,F.jsx)(nf.HeadCell,{className:"w-72",children:"Name"}),(0,F.jsx)(nf.HeadCell,{className:"w-80",children:"Email"}),(0,F.jsx)(nf.HeadCell,{className:"w-72",children:"Team permissions"}),(0,F.jsx)(nf.HeadCell,{children:"Status"})]})}),(0,F.jsx)(nf.Body,{children:s.map(function(e){return e.tableElement})})]}),d&&(m?(0,F.jsx)(tx,{text:"Are you sure you want to remove this user?",heading:"Remove user",onDelete:function(){return n8.users.delete(d.id).then(function(){g("Success","User has been removed","success"),n()})},handleClose:w}):(0,F.jsx)(ecD,{handleClose:w,user:d,onSuccess:function(){return n()}})),b&&(0,F.jsx)(tx,{text:"Are you sure you want to remove this invite?",heading:"Remove invite",onDelete:function(){return n8.invites.delete(b.id).then(function(){g("Success","Invitiation has been removed","success"),n()})},handleClose:w})]})};function ecV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ecB(e){if(Array.isArray(e))return e}function ecW(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){l=!0,n=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw n}}return o}}function ecQ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ecY(e,t){return ecB(e)||ecW(e,t)||ec$(e,t)||ecQ()}function ec$(e,t){if(e){if("string"==typeof e)return ecV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ecV(e,t)}}var ecK=function(){var e=ecY((0,B.useState)([]),2),t=e[0],r=e[1],n=ecY((0,B.useState)([]),2),i=n[0],o=n[1],a=ecY((0,B.useState)(0),2),l=a[0],s=a[1],c=ecY((0,B.useState)(!1),2),u=c[0],d=c[1],f=function(){s(function(e){return e+1})};(0,B.useEffect)(function(){n8.users.list().then(function(e){return e.data}).then(function(e){n8.invites.list().then(function(e){return e.data}).then(function(t){r(e.users),o(t.invites)})})},[l]);var p=[{label:"Invite Users",onClick:function(){return d(!0)},icon:(0,F.jsx)("span",{className:"text-grey-90",children:(0,F.jsx)(sh.Z,{size:20})})}];return(0,F.jsx)("div",{className:"flex h-full flex-col",children:(0,F.jsxs)("div",{className:"flex w-full grow flex-col",children:[(0,F.jsx)(eb,{path:"/a/settings",label:"Back to settings",className:"mb-xsmall"}),(0,F.jsxs)(tI,{title:"The Team",subtitle:"Manage users of your Medusa Store",actionables:p,children:[(0,F.jsxs)("div",{className:"flex grow flex-col justify-between",children:[(0,F.jsx)(ecG,{users:t,invites:i,triggerRefetch:f}),(0,F.jsxs)("p",{className:"inter-small-regular text-grey-50",children:[t.length," member",1===t.length?"":"s"]})]}),u&&(0,F.jsx)(ecP,{handleClose:function(){f(),d(!1)}})]})]})})},ecJ=[{heading:"API Key Management",description:"Create and manage API keys",icon:eof,to:"/a/publishable-api-keys",feature_flag:"publishable_api_keys"},{heading:"Currencies",description:"Manage the currencies of your store",icon:OV,to:"/a/settings/currencies"},{heading:"Personal Information",description:"Manage your Medusa profile",icon:eoo.Z,to:"/a/settings/personal-information"},{heading:"Regions",description:"Manage shipping, payment, and fulfillment across regions",icon:$w,to:"/a/settings/regions"},{heading:"Return Reasons",description:"Manage resons for returned items",icon:ei8,to:"/a/settings/return-reasons"},{heading:"Sales Channels",description:"Control which product are available in which channels",icon:wF,feature_flag:"sales_channels",to:"/a/sales-channels"},{heading:"Store Details",description:"Manage your business details",icon:eoi,to:"/a/settings/details"},{heading:"Taxes",description:"Manage taxes across regions and products",icon:OR,to:"/a/settings/taxes"},{heading:"The Team",description:"Manage users of your Medusa Store",icon:eop.Z,to:"/a/settings/team"}],ecX=function(e){var t=e.heading,r=e.description,n=e.icon,i=e.to,o=e.feature_flag,a=n||KG.Z,l=(0,F.jsx)(ei$,{heading:t,description:r,icon:(0,F.jsx)(a,{}),to:i});return o?(0,F.jsx)(wI,{featureFlag:o,children:l}):l},ec0=function(){var e=(0,eom.r)().getCards,t=e();return(0,F.jsxs)("div",{className:"gap-y-xlarge flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"General"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Manage the general settings for your store"})]}),(0,F.jsx)("div",{className:"medium:grid-cols-2 gap-y-xsmall grid grid-cols-1 gap-x-4",children:ecJ.map(function(e){return ecX(e)})})]}),t.length>0&&(0,F.jsxs)("div",{className:"gap-y-large flex flex-col",children:[(0,F.jsxs)("div",{className:"gap-y-2xsmall flex flex-col",children:[(0,F.jsx)("h2",{className:"inter-xlarge-semibold",children:"Extensions"}),(0,F.jsx)("p",{className:"inter-base-regular text-grey-50",children:"Manage the settings for your store's extensions"})]}),(0,F.jsx)("div",{className:"medium:grid-cols-2 gap-y-xsmall grid grid-cols-1 gap-x-4",children:e().map(function(e){return ecX({heading:e.label,description:e.description,icon:e.icon,to:"/a/settings".concat(e.path)})})})]}),(0,F.jsx)(ev,{})]})},ec1=function(){var e=(0,eom.r)().getSettings;return(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{index:!0,element:(0,F.jsx)(ec0,{})}),(0,F.jsx)(V.Route,{path:"/details",element:(0,F.jsx)(eo6,{})}),(0,F.jsx)(V.Route,{path:"/regions/*",element:(0,F.jsx)(ell,{})}),(0,F.jsx)(V.Route,{path:"/currencies",element:(0,F.jsx)(eo0,{})}),(0,F.jsx)(V.Route,{path:"/return-reasons",element:(0,F.jsx)(el_,{})}),(0,F.jsx)(V.Route,{path:"/team",element:(0,F.jsx)(ecK,{})}),(0,F.jsx)(V.Route,{path:"/personal-information",element:(0,F.jsx)(eac,{})}),(0,F.jsx)(V.Route,{path:"/taxes/*",element:(0,F.jsx)(ecO,{})}),e().map(function(e){return(0,F.jsx)(V.Route,{path:e.path,element:(0,F.jsx)(eiJ,{Page:e.Page}),errorElement:(0,F.jsx)(ei0,{origin:e.origin})},e.path)})]})},ec2=function(){var e=(0,V.useNavigate)();return(0,G.y1)("g + o",function(){return e("/a/orders")}),(0,G.y1)("g + p",function(){return e("/a/products")}),(0,F.jsx)(eo,{children:(0,F.jsx)(ec3,{})})},ec3=function(){var e=(0,(0,W.V)().getTopLevelRoutes)()||[];return(0,F.jsx)(us,{writeKey:es.m,children:(0,F.jsx)(H.W,{backend:U.PD,children:(0,F.jsxs)(el.Z,{children:[(0,F.jsx)(ea.Z,{title:"Medusa"}),(0,F.jsxs)(V.Routes,{children:[(0,F.jsx)(V.Route,{path:"oauth/:app_name",element:(0,F.jsx)(AB,{})}),(0,F.jsx)(V.Route,{path:"products/*",element:(0,F.jsx)(erv,{})}),(0,F.jsx)(V.Route,{path:"product-categories/*",element:(0,F.jsx)(YQ,{})}),(0,F.jsx)(V.Route,{path:"collections/*",element:(0,F.jsx)(iT,{})}),(0,F.jsx)(V.Route,{path:"gift-cards/*",element:(0,F.jsx)(C6,{})}),(0,F.jsx)(V.Route,{path:"orders/*",element:(0,F.jsx)(Fi,{})}),(0,F.jsx)(V.Route,{path:"draft-orders/*",element:(0,F.jsx)(U_,{})}),(0,F.jsx)(V.Route,{path:"discounts/*",element:(0,F.jsx)(Od,{})}),(0,F.jsx)(V.Route,{path:"customers/*",element:(0,F.jsx)(cV,{})}),(0,F.jsx)(V.Route,{path:"pricing/*",element:(0,F.jsx)(QS,{})}),(0,F.jsx)(V.Route,{path:"settings/*",element:(0,F.jsx)(ec1,{})}),(0,F.jsx)(V.Route,{path:"sales-channels/*",element:(0,F.jsx)(eiY,{})}),(0,F.jsx)(V.Route,{path:"publishable-api-keys/*",element:(0,F.jsx)(enk,{})}),(0,F.jsx)(V.Route,{path:"inventory/*",element:(0,F.jsx)(AV,{})}),e.map(function(e,t){return(0,F.jsx)(V.Route,{path:"/".concat(e.path,"/*"),errorElement:(0,F.jsx)(X,{origin:(0,Q.x9)(e)?e.origin:""}),element:(0,F.jsx)(er,{route:e})},t)})]})]})})})};let ec5=ec2}}]);